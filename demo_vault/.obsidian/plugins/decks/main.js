/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};

// node_modules/sql.js/dist/sql-wasm.js
var require_sql_wasm = __commonJS({
  "node_modules/sql.js/dist/sql-wasm.js"(exports, module2) {
    var initSqlJsPromise = void 0;
    var initSqlJs3 = function(moduleConfig) {
      if (initSqlJsPromise) {
        return initSqlJsPromise;
      }
      initSqlJsPromise = new Promise(function(resolveModule, reject) {
        var Module = typeof moduleConfig !== "undefined" ? moduleConfig : {};
        var originalOnAbortFunction = Module["onAbort"];
        Module["onAbort"] = function(errorThatCausedAbort) {
          reject(new Error(errorThatCausedAbort));
          if (originalOnAbortFunction) {
            originalOnAbortFunction(errorThatCausedAbort);
          }
        };
        Module["postRun"] = Module["postRun"] || [];
        Module["postRun"].push(function() {
          resolveModule(Module);
        });
        module2 = void 0;
        var f;
        f || (f = typeof Module != "undefined" ? Module : {});
        var aa = "object" == typeof window, ba = "undefined" != typeof WorkerGlobalScope, ca = "object" == typeof process && "object" == typeof process.versions && "string" == typeof process.versions.node && "renderer" != process.type;
        "use strict";
        f.onRuntimeInitialized = function() {
          function a(g, l) {
            switch (typeof l) {
              case "boolean":
                dc(g, l ? 1 : 0);
                break;
              case "number":
                ec(g, l);
                break;
              case "string":
                fc(g, l, -1, -1);
                break;
              case "object":
                if (null === l)
                  lb(g);
                else if (null != l.length) {
                  var n = da(l, ea);
                  gc(g, n, l.length, -1);
                  fa(n);
                } else
                  va(g, "Wrong API use : tried to return a value of an unknown type (" + l + ").", -1);
                break;
              default:
                lb(g);
            }
          }
          function b(g, l) {
            for (var n = [], r = 0; r < g; r += 1) {
              var t = m(l + 4 * r, "i32"), y = hc(t);
              if (1 === y || 2 === y)
                t = ic(t);
              else if (3 === y)
                t = jc(t);
              else if (4 === y) {
                y = t;
                t = kc(y);
                y = lc(y);
                for (var L = new Uint8Array(t), J = 0; J < t; J += 1)
                  L[J] = p[y + J];
                t = L;
              } else
                t = null;
              n.push(t);
            }
            return n;
          }
          function c(g, l) {
            this.Qa = g;
            this.db = l;
            this.Oa = 1;
            this.lb = [];
          }
          function d(g, l) {
            this.db = l;
            l = ha(g) + 1;
            this.eb = ia(l);
            if (null === this.eb)
              throw Error("Unable to allocate memory for the SQL string");
            u(g, x, this.eb, l);
            this.kb = this.eb;
            this.Za = this.pb = null;
          }
          function e(g) {
            this.filename = "dbfile_" + (4294967295 * Math.random() >>> 0);
            if (null != g) {
              var l = this.filename, n = "/", r = l;
              n && (n = "string" == typeof n ? n : ja(n), r = l ? ka(n + "/" + l) : n);
              l = la(true, true);
              r = ma(r, l);
              if (g) {
                if ("string" == typeof g) {
                  n = Array(g.length);
                  for (var t = 0, y = g.length; t < y; ++t)
                    n[t] = g.charCodeAt(t);
                  g = n;
                }
                na(r, l | 146);
                n = oa(r, 577);
                pa(n, g, 0, g.length, 0);
                qa(n);
                na(r, l);
              }
            }
            this.handleError(q(this.filename, h));
            this.db = m(h, "i32");
            ob(this.db);
            this.fb = {};
            this.Sa = {};
          }
          var h = z(4), k = f.cwrap, q = k("sqlite3_open", "number", ["string", "number"]), w = k("sqlite3_close_v2", "number", ["number"]), v = k("sqlite3_exec", "number", ["number", "string", "number", "number", "number"]), C = k("sqlite3_changes", "number", ["number"]), G = k("sqlite3_prepare_v2", "number", ["number", "string", "number", "number", "number"]), pb = k("sqlite3_sql", "string", ["number"]), nc = k("sqlite3_normalized_sql", "string", ["number"]), qb = k("sqlite3_prepare_v2", "number", ["number", "number", "number", "number", "number"]), oc = k("sqlite3_bind_text", "number", ["number", "number", "number", "number", "number"]), rb = k("sqlite3_bind_blob", "number", ["number", "number", "number", "number", "number"]), pc = k("sqlite3_bind_double", "number", ["number", "number", "number"]), qc = k(
            "sqlite3_bind_int",
            "number",
            ["number", "number", "number"]
          ), rc = k("sqlite3_bind_parameter_index", "number", ["number", "string"]), sc = k("sqlite3_step", "number", ["number"]), tc = k("sqlite3_errmsg", "string", ["number"]), uc = k("sqlite3_column_count", "number", ["number"]), vc = k("sqlite3_data_count", "number", ["number"]), wc = k("sqlite3_column_double", "number", ["number", "number"]), sb = k("sqlite3_column_text", "string", ["number", "number"]), xc = k("sqlite3_column_blob", "number", ["number", "number"]), yc = k("sqlite3_column_bytes", "number", [
            "number",
            "number"
          ]), zc = k("sqlite3_column_type", "number", ["number", "number"]), Ac = k("sqlite3_column_name", "string", ["number", "number"]), Bc = k("sqlite3_reset", "number", ["number"]), Cc = k("sqlite3_clear_bindings", "number", ["number"]), Dc = k("sqlite3_finalize", "number", ["number"]), tb = k("sqlite3_create_function_v2", "number", "number string number number number number number number number".split(" ")), hc = k("sqlite3_value_type", "number", ["number"]), kc = k("sqlite3_value_bytes", "number", ["number"]), jc = k(
            "sqlite3_value_text",
            "string",
            ["number"]
          ), lc = k("sqlite3_value_blob", "number", ["number"]), ic = k("sqlite3_value_double", "number", ["number"]), ec = k("sqlite3_result_double", "", ["number", "number"]), lb = k("sqlite3_result_null", "", ["number"]), fc = k("sqlite3_result_text", "", ["number", "string", "number", "number"]), gc = k("sqlite3_result_blob", "", ["number", "number", "number", "number"]), dc = k("sqlite3_result_int", "", ["number", "number"]), va = k("sqlite3_result_error", "", ["number", "string", "number"]), ub = k(
            "sqlite3_aggregate_context",
            "number",
            ["number", "number"]
          ), ob = k("RegisterExtensionFunctions", "number", ["number"]), vb = k("sqlite3_update_hook", "number", ["number", "number", "number"]);
          c.prototype.bind = function(g) {
            if (!this.Qa)
              throw "Statement closed";
            this.reset();
            return Array.isArray(g) ? this.Cb(g) : null != g && "object" === typeof g ? this.Db(g) : true;
          };
          c.prototype.step = function() {
            if (!this.Qa)
              throw "Statement closed";
            this.Oa = 1;
            var g = sc(this.Qa);
            switch (g) {
              case 100:
                return true;
              case 101:
                return false;
              default:
                throw this.db.handleError(g);
            }
          };
          c.prototype.wb = function(g) {
            null == g && (g = this.Oa, this.Oa += 1);
            return wc(this.Qa, g);
          };
          c.prototype.Gb = function(g) {
            null == g && (g = this.Oa, this.Oa += 1);
            g = sb(this.Qa, g);
            if ("function" !== typeof BigInt)
              throw Error("BigInt is not supported");
            return BigInt(g);
          };
          c.prototype.Hb = function(g) {
            null == g && (g = this.Oa, this.Oa += 1);
            return sb(this.Qa, g);
          };
          c.prototype.getBlob = function(g) {
            null == g && (g = this.Oa, this.Oa += 1);
            var l = yc(this.Qa, g);
            g = xc(this.Qa, g);
            for (var n = new Uint8Array(l), r = 0; r < l; r += 1)
              n[r] = p[g + r];
            return n;
          };
          c.prototype.get = function(g, l) {
            l = l || {};
            null != g && this.bind(g) && this.step();
            g = [];
            for (var n = vc(this.Qa), r = 0; r < n; r += 1)
              switch (zc(this.Qa, r)) {
                case 1:
                  var t = l.useBigInt ? this.Gb(r) : this.wb(r);
                  g.push(t);
                  break;
                case 2:
                  g.push(this.wb(r));
                  break;
                case 3:
                  g.push(this.Hb(r));
                  break;
                case 4:
                  g.push(this.getBlob(r));
                  break;
                default:
                  g.push(null);
              }
            return g;
          };
          c.prototype.getColumnNames = function() {
            for (var g = [], l = uc(this.Qa), n = 0; n < l; n += 1)
              g.push(Ac(this.Qa, n));
            return g;
          };
          c.prototype.getAsObject = function(g, l) {
            g = this.get(g, l);
            l = this.getColumnNames();
            for (var n = {}, r = 0; r < l.length; r += 1)
              n[l[r]] = g[r];
            return n;
          };
          c.prototype.getSQL = function() {
            return pb(this.Qa);
          };
          c.prototype.getNormalizedSQL = function() {
            return nc(this.Qa);
          };
          c.prototype.run = function(g) {
            null != g && this.bind(g);
            this.step();
            return this.reset();
          };
          c.prototype.sb = function(g, l) {
            null == l && (l = this.Oa, this.Oa += 1);
            g = ra(g);
            var n = da(g, ea);
            this.lb.push(n);
            this.db.handleError(oc(this.Qa, l, n, g.length - 1, 0));
          };
          c.prototype.Bb = function(g, l) {
            null == l && (l = this.Oa, this.Oa += 1);
            var n = da(g, ea);
            this.lb.push(n);
            this.db.handleError(rb(
              this.Qa,
              l,
              n,
              g.length,
              0
            ));
          };
          c.prototype.rb = function(g, l) {
            null == l && (l = this.Oa, this.Oa += 1);
            this.db.handleError((g === (g | 0) ? qc : pc)(this.Qa, l, g));
          };
          c.prototype.Eb = function(g) {
            null == g && (g = this.Oa, this.Oa += 1);
            rb(this.Qa, g, 0, 0, 0);
          };
          c.prototype.tb = function(g, l) {
            null == l && (l = this.Oa, this.Oa += 1);
            switch (typeof g) {
              case "string":
                this.sb(g, l);
                return;
              case "number":
                this.rb(g, l);
                return;
              case "bigint":
                this.sb(g.toString(), l);
                return;
              case "boolean":
                this.rb(g + 0, l);
                return;
              case "object":
                if (null === g) {
                  this.Eb(l);
                  return;
                }
                if (null != g.length) {
                  this.Bb(
                    g,
                    l
                  );
                  return;
                }
            }
            throw "Wrong API use : tried to bind a value of an unknown type (" + g + ").";
          };
          c.prototype.Db = function(g) {
            var l = this;
            Object.keys(g).forEach(function(n) {
              var r = rc(l.Qa, n);
              0 !== r && l.tb(g[n], r);
            });
            return true;
          };
          c.prototype.Cb = function(g) {
            for (var l = 0; l < g.length; l += 1)
              this.tb(g[l], l + 1);
            return true;
          };
          c.prototype.reset = function() {
            this.freemem();
            return 0 === Cc(this.Qa) && 0 === Bc(this.Qa);
          };
          c.prototype.freemem = function() {
            for (var g; void 0 !== (g = this.lb.pop()); )
              fa(g);
          };
          c.prototype.free = function() {
            this.freemem();
            var g = 0 === Dc(this.Qa);
            delete this.db.fb[this.Qa];
            this.Qa = 0;
            return g;
          };
          d.prototype.next = function() {
            if (null === this.eb)
              return { done: true };
            null !== this.Za && (this.Za.free(), this.Za = null);
            if (!this.db.db)
              throw this.mb(), Error("Database closed");
            var g = sa(), l = z(4);
            ta(h);
            ta(l);
            try {
              this.db.handleError(qb(this.db.db, this.kb, -1, h, l));
              this.kb = m(l, "i32");
              var n = m(h, "i32");
              if (0 === n)
                return this.mb(), { done: true };
              this.Za = new c(n, this.db);
              this.db.fb[n] = this.Za;
              return { value: this.Za, done: false };
            } catch (r) {
              throw this.pb = ua(this.kb), this.mb(), r;
            } finally {
              wa(g);
            }
          };
          d.prototype.mb = function() {
            fa(this.eb);
            this.eb = null;
          };
          d.prototype.getRemainingSQL = function() {
            return null !== this.pb ? this.pb : ua(this.kb);
          };
          "function" === typeof Symbol && "symbol" === typeof Symbol.iterator && (d.prototype[Symbol.iterator] = function() {
            return this;
          });
          e.prototype.run = function(g, l) {
            if (!this.db)
              throw "Database closed";
            if (l) {
              g = this.prepare(g, l);
              try {
                g.step();
              } finally {
                g.free();
              }
            } else
              this.handleError(v(this.db, g, 0, 0, h));
            return this;
          };
          e.prototype.exec = function(g, l, n) {
            if (!this.db)
              throw "Database closed";
            var r = sa(), t = null;
            try {
              var y = xa(g), L = z(4);
              for (g = []; 0 !== m(y, "i8"); ) {
                ta(h);
                ta(L);
                this.handleError(qb(this.db, y, -1, h, L));
                var J = m(h, "i32");
                y = m(L, "i32");
                if (0 !== J) {
                  var I = null;
                  t = new c(J, this);
                  for (null != l && t.bind(l); t.step(); )
                    null === I && (I = { columns: t.getColumnNames(), values: [] }, g.push(I)), I.values.push(t.get(null, n));
                  t.free();
                }
              }
              return g;
            } catch (M) {
              throw t && t.free(), M;
            } finally {
              wa(r);
            }
          };
          e.prototype.each = function(g, l, n, r, t) {
            "function" === typeof l && (r = n, n = l, l = void 0);
            g = this.prepare(g, l);
            try {
              for (; g.step(); )
                n(g.getAsObject(
                  null,
                  t
                ));
            } finally {
              g.free();
            }
            if ("function" === typeof r)
              return r();
          };
          e.prototype.prepare = function(g, l) {
            ta(h);
            this.handleError(G(this.db, g, -1, h, 0));
            g = m(h, "i32");
            if (0 === g)
              throw "Nothing to prepare";
            var n = new c(g, this);
            null != l && n.bind(l);
            return this.fb[g] = n;
          };
          e.prototype.iterateStatements = function(g) {
            return new d(g, this);
          };
          e.prototype["export"] = function() {
            Object.values(this.fb).forEach(function(l) {
              l.free();
            });
            Object.values(this.Sa).forEach(A);
            this.Sa = {};
            this.handleError(w(this.db));
            var g = ya(this.filename);
            this.handleError(q(
              this.filename,
              h
            ));
            this.db = m(h, "i32");
            ob(this.db);
            return g;
          };
          e.prototype.close = function() {
            null !== this.db && (Object.values(this.fb).forEach(function(g) {
              g.free();
            }), Object.values(this.Sa).forEach(A), this.Sa = {}, this.Ya && (A(this.Ya), this.Ya = void 0), this.handleError(w(this.db)), za("/" + this.filename), this.db = null);
          };
          e.prototype.handleError = function(g) {
            if (0 === g)
              return null;
            g = tc(this.db);
            throw Error(g);
          };
          e.prototype.getRowsModified = function() {
            return C(this.db);
          };
          e.prototype.create_function = function(g, l) {
            Object.prototype.hasOwnProperty.call(
              this.Sa,
              g
            ) && (A(this.Sa[g]), delete this.Sa[g]);
            var n = Aa(function(r, t, y) {
              t = b(t, y);
              try {
                var L = l.apply(null, t);
              } catch (J) {
                va(r, J, -1);
                return;
              }
              a(r, L);
            }, "viii");
            this.Sa[g] = n;
            this.handleError(tb(this.db, g, l.length, 1, 0, n, 0, 0, 0));
            return this;
          };
          e.prototype.create_aggregate = function(g, l) {
            var n = l.init || function() {
              return null;
            }, r = l.finalize || function(I) {
              return I;
            }, t = l.step;
            if (!t)
              throw "An aggregate function must have a step function in " + g;
            var y = {};
            Object.hasOwnProperty.call(this.Sa, g) && (A(this.Sa[g]), delete this.Sa[g]);
            l = g + "__finalize";
            Object.hasOwnProperty.call(this.Sa, l) && (A(this.Sa[l]), delete this.Sa[l]);
            var L = Aa(function(I, M, Ra) {
              var X = ub(I, 1);
              Object.hasOwnProperty.call(y, X) || (y[X] = n());
              M = b(M, Ra);
              M = [y[X]].concat(M);
              try {
                y[X] = t.apply(null, M);
              } catch (Fc) {
                delete y[X], va(I, Fc, -1);
              }
            }, "viii"), J = Aa(function(I) {
              var M = ub(I, 1);
              try {
                var Ra = r(y[M]);
              } catch (X) {
                delete y[M];
                va(I, X, -1);
                return;
              }
              a(I, Ra);
              delete y[M];
            }, "vi");
            this.Sa[g] = L;
            this.Sa[l] = J;
            this.handleError(tb(this.db, g, t.length - 1, 1, 0, 0, L, J, 0));
            return this;
          };
          e.prototype.updateHook = function(g) {
            this.Ya && (vb(this.db, 0, 0), A(this.Ya), this.Ya = void 0);
            g && (this.Ya = Aa(function(l, n, r, t, y) {
              switch (n) {
                case 18:
                  l = "insert";
                  break;
                case 23:
                  l = "update";
                  break;
                case 9:
                  l = "delete";
                  break;
                default:
                  throw "unknown operationCode in updateHook callback: " + n;
              }
              r = r ? B(x, r) : "";
              t = t ? B(x, t) : "";
              if (y > Number.MAX_SAFE_INTEGER)
                throw "rowId too big to fit inside a Number";
              g(l, r, t, Number(y));
            }, "viiiij"), vb(this.db, this.Ya, 0));
          };
          f.Database = e;
        };
        var Ba = { ...f }, Ca = "./this.program", Da = (a, b) => {
          throw b;
        }, D = "", Ea, Fa;
        if (ca) {
          var fs = require("fs");
          require("path");
          D = __dirname + "/";
          Fa = (a) => {
            a = Ga(a) ? new URL(a) : a;
            return fs.readFileSync(a);
          };
          Ea = async (a) => {
            a = Ga(a) ? new URL(a) : a;
            return fs.readFileSync(a, void 0);
          };
          !f.thisProgram && 1 < process.argv.length && (Ca = process.argv[1].replace(/\\/g, "/"));
          process.argv.slice(2);
          "undefined" != typeof module2 && (module2.exports = f);
          Da = (a, b) => {
            process.exitCode = a;
            throw b;
          };
        } else if (aa || ba)
          ba ? D = self.location.href : "undefined" != typeof document && document.currentScript && (D = document.currentScript.src), D = D.startsWith("blob:") ? "" : D.slice(0, D.replace(/[?#].*/, "").lastIndexOf("/") + 1), ba && (Fa = (a) => {
            var b = new XMLHttpRequest();
            b.open("GET", a, false);
            b.responseType = "arraybuffer";
            b.send(null);
            return new Uint8Array(b.response);
          }), Ea = async (a) => {
            if (Ga(a))
              return new Promise((c, d) => {
                var e = new XMLHttpRequest();
                e.open("GET", a, true);
                e.responseType = "arraybuffer";
                e.onload = () => {
                  200 == e.status || 0 == e.status && e.response ? c(e.response) : d(e.status);
                };
                e.onerror = d;
                e.send(null);
              });
            var b = await fetch(a, { credentials: "same-origin" });
            if (b.ok)
              return b.arrayBuffer();
            throw Error(b.status + " : " + b.url);
          };
        var Ha = f.print || console.log.bind(console), Ia = f.printErr || console.error.bind(console);
        Object.assign(f, Ba);
        Ba = null;
        f.thisProgram && (Ca = f.thisProgram);
        var Ja = f.wasmBinary, Ka, La = false, Ma, p, x, Na, E, F, Oa, H, Pa, Ga = (a) => a.startsWith("file://");
        function Qa() {
          var a = Ka.buffer;
          f.HEAP8 = p = new Int8Array(a);
          f.HEAP16 = Na = new Int16Array(a);
          f.HEAPU8 = x = new Uint8Array(a);
          f.HEAPU16 = new Uint16Array(a);
          f.HEAP32 = E = new Int32Array(a);
          f.HEAPU32 = F = new Uint32Array(a);
          f.HEAPF32 = Oa = new Float32Array(a);
          f.HEAPF64 = Pa = new Float64Array(a);
          f.HEAP64 = H = new BigInt64Array(a);
          f.HEAPU64 = new BigUint64Array(a);
        }
        var K = 0, Sa = null;
        function Ta(a) {
          var _a;
          (_a = f.onAbort) == null ? void 0 : _a.call(f, a);
          a = "Aborted(" + a + ")";
          Ia(a);
          La = true;
          throw new WebAssembly.RuntimeError(a + ". Build with -sASSERTIONS for more info.");
        }
        var Ua;
        async function Va(a) {
          if (!Ja)
            try {
              var b = await Ea(a);
              return new Uint8Array(b);
            } catch (e) {
            }
          if (a == Ua && Ja)
            a = new Uint8Array(Ja);
          else if (Fa)
            a = Fa(a);
          else
            throw "both async and sync fetching of the wasm failed";
          return a;
        }
        async function Wa(a, b) {
          try {
            var c = await Va(a);
            return await WebAssembly.instantiate(c, b);
          } catch (d) {
            Ia(`failed to asynchronously prepare wasm: ${d}`), Ta(d);
          }
        }
        async function Xa(a) {
          var b = Ua;
          if (!Ja && "function" == typeof WebAssembly.instantiateStreaming && !Ga(b) && !ca)
            try {
              var c = fetch(b, { credentials: "same-origin" });
              return await WebAssembly.instantiateStreaming(c, a);
            } catch (d) {
              Ia(`wasm streaming compile failed: ${d}`), Ia("falling back to ArrayBuffer instantiation");
            }
          return Wa(b, a);
        }
        class Ya {
          constructor(a) {
            __publicField(this, "name", "ExitStatus");
            this.message = `Program terminated with exit(${a})`;
            this.status = a;
          }
        }
        var Za = (a) => {
          for (; 0 < a.length; )
            a.shift()(f);
        }, $a = [], ab = [], bb = () => {
          var a = f.preRun.shift();
          ab.unshift(a);
        };
        function m(a, b = "i8") {
          b.endsWith("*") && (b = "*");
          switch (b) {
            case "i1":
              return p[a];
            case "i8":
              return p[a];
            case "i16":
              return Na[a >> 1];
            case "i32":
              return E[a >> 2];
            case "i64":
              return H[a >> 3];
            case "float":
              return Oa[a >> 2];
            case "double":
              return Pa[a >> 3];
            case "*":
              return F[a >> 2];
            default:
              Ta(`invalid type for getValue: ${b}`);
          }
        }
        var cb = f.noExitRuntime || true;
        function ta(a) {
          var b = "i32";
          b.endsWith("*") && (b = "*");
          switch (b) {
            case "i1":
              p[a] = 0;
              break;
            case "i8":
              p[a] = 0;
              break;
            case "i16":
              Na[a >> 1] = 0;
              break;
            case "i32":
              E[a >> 2] = 0;
              break;
            case "i64":
              H[a >> 3] = BigInt(0);
              break;
            case "float":
              Oa[a >> 2] = 0;
              break;
            case "double":
              Pa[a >> 3] = 0;
              break;
            case "*":
              F[a >> 2] = 0;
              break;
            default:
              Ta(`invalid type for setValue: ${b}`);
          }
        }
        var db = "undefined" != typeof TextDecoder ? new TextDecoder() : void 0, B = (a, b = 0, c = NaN) => {
          var d = b + c;
          for (c = b; a[c] && !(c >= d); )
            ++c;
          if (16 < c - b && a.buffer && db)
            return db.decode(a.subarray(b, c));
          for (d = ""; b < c; ) {
            var e = a[b++];
            if (e & 128) {
              var h = a[b++] & 63;
              if (192 == (e & 224))
                d += String.fromCharCode((e & 31) << 6 | h);
              else {
                var k = a[b++] & 63;
                e = 224 == (e & 240) ? (e & 15) << 12 | h << 6 | k : (e & 7) << 18 | h << 12 | k << 6 | a[b++] & 63;
                65536 > e ? d += String.fromCharCode(e) : (e -= 65536, d += String.fromCharCode(55296 | e >> 10, 56320 | e & 1023));
              }
            } else
              d += String.fromCharCode(e);
          }
          return d;
        }, ua = (a, b) => a ? B(x, a, b) : "", eb = (a, b) => {
          for (var c = 0, d = a.length - 1; 0 <= d; d--) {
            var e = a[d];
            "." === e ? a.splice(d, 1) : ".." === e ? (a.splice(d, 1), c++) : c && (a.splice(d, 1), c--);
          }
          if (b)
            for (; c; c--)
              a.unshift("..");
          return a;
        }, ka = (a) => {
          var b = "/" === a.charAt(0), c = "/" === a.slice(-1);
          (a = eb(a.split("/").filter((d) => !!d), !b).join("/")) || b || (a = ".");
          a && c && (a += "/");
          return (b ? "/" : "") + a;
        }, fb = (a) => {
          var b = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1);
          a = b[0];
          b = b[1];
          if (!a && !b)
            return ".";
          b && (b = b.slice(0, -1));
          return a + b;
        }, gb = (a) => a && a.match(/([^\/]+|\/)\/*$/)[1], hb = () => {
          if (ca) {
            var a = require("crypto");
            return (b) => a.randomFillSync(b);
          }
          return (b) => crypto.getRandomValues(b);
        }, ib = (a) => {
          (ib = hb())(a);
        }, jb = (...a) => {
          for (var b = "", c = false, d = a.length - 1; -1 <= d && !c; d--) {
            c = 0 <= d ? a[d] : "/";
            if ("string" != typeof c)
              throw new TypeError("Arguments to path.resolve must be strings");
            if (!c)
              return "";
            b = c + "/" + b;
            c = "/" === c.charAt(0);
          }
          b = eb(b.split("/").filter((e) => !!e), !c).join("/");
          return (c ? "/" : "") + b || ".";
        }, kb = [], ha = (a) => {
          for (var b = 0, c = 0; c < a.length; ++c) {
            var d = a.charCodeAt(c);
            127 >= d ? b++ : 2047 >= d ? b += 2 : 55296 <= d && 57343 >= d ? (b += 4, ++c) : b += 3;
          }
          return b;
        }, u = (a, b, c, d) => {
          if (!(0 < d))
            return 0;
          var e = c;
          d = c + d - 1;
          for (var h = 0; h < a.length; ++h) {
            var k = a.charCodeAt(h);
            if (55296 <= k && 57343 >= k) {
              var q = a.charCodeAt(++h);
              k = 65536 + ((k & 1023) << 10) | q & 1023;
            }
            if (127 >= k) {
              if (c >= d)
                break;
              b[c++] = k;
            } else {
              if (2047 >= k) {
                if (c + 1 >= d)
                  break;
                b[c++] = 192 | k >> 6;
              } else {
                if (65535 >= k) {
                  if (c + 2 >= d)
                    break;
                  b[c++] = 224 | k >> 12;
                } else {
                  if (c + 3 >= d)
                    break;
                  b[c++] = 240 | k >> 18;
                  b[c++] = 128 | k >> 12 & 63;
                }
                b[c++] = 128 | k >> 6 & 63;
              }
              b[c++] = 128 | k & 63;
            }
          }
          b[c] = 0;
          return c - e;
        }, ra = (a, b) => {
          var c = Array(ha(a) + 1);
          a = u(a, c, 0, c.length);
          b && (c.length = a);
          return c;
        }, mb = [];
        function nb(a, b) {
          mb[a] = { input: [], output: [], cb: b };
          wb(a, xb);
        }
        var xb = { open(a) {
          var b = mb[a.node.rdev];
          if (!b)
            throw new N(43);
          a.tty = b;
          a.seekable = false;
        }, close(a) {
          a.tty.cb.fsync(a.tty);
        }, fsync(a) {
          a.tty.cb.fsync(a.tty);
        }, read(a, b, c, d) {
          if (!a.tty || !a.tty.cb.xb)
            throw new N(60);
          for (var e = 0, h = 0; h < d; h++) {
            try {
              var k = a.tty.cb.xb(a.tty);
            } catch (q) {
              throw new N(29);
            }
            if (void 0 === k && 0 === e)
              throw new N(6);
            if (null === k || void 0 === k)
              break;
            e++;
            b[c + h] = k;
          }
          e && (a.node.atime = Date.now());
          return e;
        }, write(a, b, c, d) {
          if (!a.tty || !a.tty.cb.qb)
            throw new N(60);
          try {
            for (var e = 0; e < d; e++)
              a.tty.cb.qb(a.tty, b[c + e]);
          } catch (h) {
            throw new N(29);
          }
          d && (a.node.mtime = a.node.ctime = Date.now());
          return e;
        } }, yb = { xb() {
          a: {
            if (!kb.length) {
              var a = null;
              if (ca) {
                var b = Buffer.alloc(256), c = 0, d = process.stdin.fd;
                try {
                  c = fs.readSync(d, b, 0, 256);
                } catch (e) {
                  if (e.toString().includes("EOF"))
                    c = 0;
                  else
                    throw e;
                }
                0 < c && (a = b.slice(0, c).toString("utf-8"));
              } else
                "undefined" != typeof window && "function" == typeof window.prompt && (a = window.prompt("Input: "), null !== a && (a += "\n"));
              if (!a) {
                a = null;
                break a;
              }
              kb = ra(a, true);
            }
            a = kb.shift();
          }
          return a;
        }, qb(a, b) {
          null === b || 10 === b ? (Ha(B(a.output)), a.output = []) : 0 != b && a.output.push(b);
        }, fsync(a) {
          var _a;
          0 < ((_a = a.output) == null ? void 0 : _a.length) && (Ha(B(a.output)), a.output = []);
        }, Tb() {
          return { Ob: 25856, Qb: 5, Nb: 191, Pb: 35387, Mb: [3, 28, 127, 21, 4, 0, 1, 0, 17, 19, 26, 0, 18, 15, 23, 22, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] };
        }, Ub() {
          return 0;
        }, Vb() {
          return [24, 80];
        } }, zb = { qb(a, b) {
          null === b || 10 === b ? (Ia(B(a.output)), a.output = []) : 0 != b && a.output.push(b);
        }, fsync(a) {
          var _a;
          0 < ((_a = a.output) == null ? void 0 : _a.length) && (Ia(B(a.output)), a.output = []);
        } }, O = { Wa: null, Xa() {
          return O.createNode(null, "/", 16895, 0);
        }, createNode(a, b, c, d) {
          if (24576 === (c & 61440) || 4096 === (c & 61440))
            throw new N(63);
          O.Wa || (O.Wa = { dir: { node: { Ta: O.La.Ta, Ua: O.La.Ua, lookup: O.La.lookup, hb: O.La.hb, rename: O.La.rename, unlink: O.La.unlink, rmdir: O.La.rmdir, readdir: O.La.readdir, symlink: O.La.symlink }, stream: { Va: O.Ma.Va } }, file: { node: { Ta: O.La.Ta, Ua: O.La.Ua }, stream: { Va: O.Ma.Va, read: O.Ma.read, write: O.Ma.write, ib: O.Ma.ib, jb: O.Ma.jb } }, link: { node: { Ta: O.La.Ta, Ua: O.La.Ua, readlink: O.La.readlink }, stream: {} }, ub: { node: { Ta: O.La.Ta, Ua: O.La.Ua }, stream: Ab } });
          c = Bb(a, b, c, d);
          P(c.mode) ? (c.La = O.Wa.dir.node, c.Ma = O.Wa.dir.stream, c.Na = {}) : 32768 === (c.mode & 61440) ? (c.La = O.Wa.file.node, c.Ma = O.Wa.file.stream, c.Ra = 0, c.Na = null) : 40960 === (c.mode & 61440) ? (c.La = O.Wa.link.node, c.Ma = O.Wa.link.stream) : 8192 === (c.mode & 61440) && (c.La = O.Wa.ub.node, c.Ma = O.Wa.ub.stream);
          c.atime = c.mtime = c.ctime = Date.now();
          a && (a.Na[b] = c, a.atime = a.mtime = a.ctime = c.atime);
          return c;
        }, Sb(a) {
          return a.Na ? a.Na.subarray ? a.Na.subarray(0, a.Ra) : new Uint8Array(a.Na) : new Uint8Array(0);
        }, La: { Ta(a) {
          var b = {};
          b.dev = 8192 === (a.mode & 61440) ? a.id : 1;
          b.ino = a.id;
          b.mode = a.mode;
          b.nlink = 1;
          b.uid = 0;
          b.gid = 0;
          b.rdev = a.rdev;
          P(a.mode) ? b.size = 4096 : 32768 === (a.mode & 61440) ? b.size = a.Ra : 40960 === (a.mode & 61440) ? b.size = a.link.length : b.size = 0;
          b.atime = new Date(a.atime);
          b.mtime = new Date(a.mtime);
          b.ctime = new Date(a.ctime);
          b.blksize = 4096;
          b.blocks = Math.ceil(b.size / b.blksize);
          return b;
        }, Ua(a, b) {
          for (var c of ["mode", "atime", "mtime", "ctime"])
            null != b[c] && (a[c] = b[c]);
          void 0 !== b.size && (b = b.size, a.Ra != b && (0 == b ? (a.Na = null, a.Ra = 0) : (c = a.Na, a.Na = new Uint8Array(b), c && a.Na.set(c.subarray(0, Math.min(b, a.Ra))), a.Ra = b)));
        }, lookup() {
          throw O.vb;
        }, hb(a, b, c, d) {
          return O.createNode(a, b, c, d);
        }, rename(a, b, c) {
          try {
            var d = Q(b, c);
          } catch (h) {
          }
          if (d) {
            if (P(a.mode))
              for (var e in d.Na)
                throw new N(55);
            Cb(d);
          }
          delete a.parent.Na[a.name];
          b.Na[c] = a;
          a.name = c;
          b.ctime = b.mtime = a.parent.ctime = a.parent.mtime = Date.now();
        }, unlink(a, b) {
          delete a.Na[b];
          a.ctime = a.mtime = Date.now();
        }, rmdir(a, b) {
          var c = Q(a, b), d;
          for (d in c.Na)
            throw new N(55);
          delete a.Na[b];
          a.ctime = a.mtime = Date.now();
        }, readdir(a) {
          return [".", "..", ...Object.keys(a.Na)];
        }, symlink(a, b, c) {
          a = O.createNode(a, b, 41471, 0);
          a.link = c;
          return a;
        }, readlink(a) {
          if (40960 !== (a.mode & 61440))
            throw new N(28);
          return a.link;
        } }, Ma: { read(a, b, c, d, e) {
          var h = a.node.Na;
          if (e >= a.node.Ra)
            return 0;
          a = Math.min(a.node.Ra - e, d);
          if (8 < a && h.subarray)
            b.set(h.subarray(e, e + a), c);
          else
            for (d = 0; d < a; d++)
              b[c + d] = h[e + d];
          return a;
        }, write(a, b, c, d, e, h) {
          b.buffer === p.buffer && (h = false);
          if (!d)
            return 0;
          a = a.node;
          a.mtime = a.ctime = Date.now();
          if (b.subarray && (!a.Na || a.Na.subarray)) {
            if (h)
              return a.Na = b.subarray(c, c + d), a.Ra = d;
            if (0 === a.Ra && 0 === e)
              return a.Na = b.slice(c, c + d), a.Ra = d;
            if (e + d <= a.Ra)
              return a.Na.set(b.subarray(
                c,
                c + d
              ), e), d;
          }
          h = e + d;
          var k = a.Na ? a.Na.length : 0;
          k >= h || (h = Math.max(h, k * (1048576 > k ? 2 : 1.125) >>> 0), 0 != k && (h = Math.max(h, 256)), k = a.Na, a.Na = new Uint8Array(h), 0 < a.Ra && a.Na.set(k.subarray(0, a.Ra), 0));
          if (a.Na.subarray && b.subarray)
            a.Na.set(b.subarray(c, c + d), e);
          else
            for (h = 0; h < d; h++)
              a.Na[e + h] = b[c + h];
          a.Ra = Math.max(a.Ra, e + d);
          return d;
        }, Va(a, b, c) {
          1 === c ? b += a.position : 2 === c && 32768 === (a.node.mode & 61440) && (b += a.node.Ra);
          if (0 > b)
            throw new N(28);
          return b;
        }, ib(a, b, c, d, e) {
          if (32768 !== (a.node.mode & 61440))
            throw new N(43);
          a = a.node.Na;
          if (e & 2 || !a || a.buffer !== p.buffer) {
            e = true;
            d = 65536 * Math.ceil(b / 65536);
            var h = Db(65536, d);
            h && x.fill(0, h, h + d);
            d = h;
            if (!d)
              throw new N(48);
            if (a) {
              if (0 < c || c + b < a.length)
                a.subarray ? a = a.subarray(c, c + b) : a = Array.prototype.slice.call(a, c, c + b);
              p.set(a, d);
            }
          } else
            e = false, d = a.byteOffset;
          return { Kb: d, Ab: e };
        }, jb(a, b, c, d) {
          O.Ma.write(a, b, 0, d, c, false);
          return 0;
        } } }, la = (a, b) => {
          var c = 0;
          a && (c |= 365);
          b && (c |= 146);
          return c;
        }, Eb = null, Fb = {}, Gb = [], Hb = 1, R = null, Ib = false, Jb = true, Kb = {}, N = class {
          constructor(a) {
            __publicField(this, "name", "ErrnoError");
            this.Pa = a;
          }
        }, Lb = class {
          constructor() {
            __publicField(this, "gb", {});
            __publicField(this, "node", null);
          }
          get flags() {
            return this.gb.flags;
          }
          set flags(a) {
            this.gb.flags = a;
          }
          get position() {
            return this.gb.position;
          }
          set position(a) {
            this.gb.position = a;
          }
        }, Mb = class {
          constructor(a, b, c, d) {
            __publicField(this, "La", {});
            __publicField(this, "Ma", {});
            __publicField(this, "ab", null);
            a || (a = this);
            this.parent = a;
            this.Xa = a.Xa;
            this.id = Hb++;
            this.name = b;
            this.mode = c;
            this.rdev = d;
            this.atime = this.mtime = this.ctime = Date.now();
          }
          get read() {
            return 365 === (this.mode & 365);
          }
          set read(a) {
            a ? this.mode |= 365 : this.mode &= -366;
          }
          get write() {
            return 146 === (this.mode & 146);
          }
          set write(a) {
            a ? this.mode |= 146 : this.mode &= -147;
          }
        };
        function S(a, b = {}) {
          var _a;
          if (!a)
            throw new N(44);
          (_a = b.nb) != null ? _a : b.nb = true;
          "/" === a.charAt(0) || (a = "//" + a);
          var c = 0;
          a:
            for (; 40 > c; c++) {
              a = a.split("/").filter((q) => !!q);
              for (var d = Eb, e = "/", h = 0; h < a.length; h++) {
                var k = h === a.length - 1;
                if (k && b.parent)
                  break;
                if ("." !== a[h])
                  if (".." === a[h])
                    e = fb(e), d = d.parent;
                  else {
                    e = ka(e + "/" + a[h]);
                    try {
                      d = Q(d, a[h]);
                    } catch (q) {
                      if (44 === (q == null ? void 0 : q.Pa) && k && b.Jb)
                        return { path: e };
                      throw q;
                    }
                    !d.ab || k && !b.nb || (d = d.ab.root);
                    if (40960 === (d.mode & 61440) && (!k || b.$a)) {
                      if (!d.La.readlink)
                        throw new N(52);
                      d = d.La.readlink(d);
                      "/" === d.charAt(0) || (d = fb(e) + "/" + d);
                      a = d + "/" + a.slice(h + 1).join("/");
                      continue a;
                    }
                  }
              }
              return { path: e, node: d };
            }
          throw new N(32);
        }
        function ja(a) {
          for (var b; ; ) {
            if (a === a.parent)
              return a = a.Xa.zb, b ? "/" !== a[a.length - 1] ? `${a}/${b}` : a + b : a;
            b = b ? `${a.name}/${b}` : a.name;
            a = a.parent;
          }
        }
        function Nb(a, b) {
          for (var c = 0, d = 0; d < b.length; d++)
            c = (c << 5) - c + b.charCodeAt(d) | 0;
          return (a + c >>> 0) % R.length;
        }
        function Cb(a) {
          var b = Nb(a.parent.id, a.name);
          if (R[b] === a)
            R[b] = a.bb;
          else
            for (b = R[b]; b; ) {
              if (b.bb === a) {
                b.bb = a.bb;
                break;
              }
              b = b.bb;
            }
        }
        function Q(a, b) {
          var c = P(a.mode) ? (c = Ob(a, "x")) ? c : a.La.lookup ? 0 : 2 : 54;
          if (c)
            throw new N(c);
          for (c = R[Nb(a.id, b)]; c; c = c.bb) {
            var d = c.name;
            if (c.parent.id === a.id && d === b)
              return c;
          }
          return a.La.lookup(a, b);
        }
        function Bb(a, b, c, d) {
          a = new Mb(a, b, c, d);
          b = Nb(a.parent.id, a.name);
          a.bb = R[b];
          return R[b] = a;
        }
        function P(a) {
          return 16384 === (a & 61440);
        }
        function Pb(a) {
          var b = ["r", "w", "rw"][a & 3];
          a & 512 && (b += "w");
          return b;
        }
        function Ob(a, b) {
          if (Jb)
            return 0;
          if (!b.includes("r") || a.mode & 292) {
            if (b.includes("w") && !(a.mode & 146) || b.includes("x") && !(a.mode & 73))
              return 2;
          } else
            return 2;
          return 0;
        }
        function Qb(a, b) {
          if (!P(a.mode))
            return 54;
          try {
            return Q(a, b), 20;
          } catch (c) {
          }
          return Ob(a, "wx");
        }
        function Rb(a, b, c) {
          try {
            var d = Q(a, b);
          } catch (e) {
            return e.Pa;
          }
          if (a = Ob(a, "wx"))
            return a;
          if (c) {
            if (!P(d.mode))
              return 54;
            if (d === d.parent || "/" === ja(d))
              return 10;
          } else if (P(d.mode))
            return 31;
          return 0;
        }
        function Sb(a) {
          if (!a)
            throw new N(63);
          return a;
        }
        function T(a) {
          a = Gb[a];
          if (!a)
            throw new N(8);
          return a;
        }
        function Tb(a, b = -1) {
          a = Object.assign(new Lb(), a);
          if (-1 == b)
            a: {
              for (b = 0; 4096 >= b; b++)
                if (!Gb[b])
                  break a;
              throw new N(33);
            }
          a.fd = b;
          return Gb[b] = a;
        }
        function Ub(a, b = -1) {
          var _a, _b;
          a = Tb(a, b);
          (_b = (_a = a.Ma) == null ? void 0 : _a.Rb) == null ? void 0 : _b.call(_a, a);
          return a;
        }
        function Vb(a, b, c) {
          var d = a == null ? void 0 : a.Ma.Ua;
          a = d ? a : b;
          d != null ? d : d = b.La.Ua;
          Sb(d);
          d(a, c);
        }
        var Ab = { open(a) {
          var _a, _b;
          a.Ma = Fb[a.node.rdev].Ma;
          (_b = (_a = a.Ma).open) == null ? void 0 : _b.call(_a, a);
        }, Va() {
          throw new N(70);
        } };
        function wb(a, b) {
          Fb[a] = { Ma: b };
        }
        function Wb(a, b) {
          var c = "/" === b;
          if (c && Eb)
            throw new N(10);
          if (!c && b) {
            var d = S(b, { nb: false });
            b = d.path;
            d = d.node;
            if (d.ab)
              throw new N(10);
            if (!P(d.mode))
              throw new N(54);
          }
          b = { type: a, Wb: {}, zb: b, Ib: [] };
          a = a.Xa(b);
          a.Xa = b;
          b.root = a;
          c ? Eb = a : d && (d.ab = b, d.Xa && d.Xa.Ib.push(b));
        }
        function Xb(a, b, c) {
          var d = S(a, { parent: true }).node;
          a = gb(a);
          if (!a)
            throw new N(28);
          if ("." === a || ".." === a)
            throw new N(20);
          var e = Qb(d, a);
          if (e)
            throw new N(e);
          if (!d.La.hb)
            throw new N(63);
          return d.La.hb(d, a, b, c);
        }
        function ma(a, b = 438) {
          return Xb(a, b & 4095 | 32768, 0);
        }
        function U(a, b = 511) {
          return Xb(a, b & 1023 | 16384, 0);
        }
        function Yb(a, b, c) {
          "undefined" == typeof c && (c = b, b = 438);
          Xb(a, b | 8192, c);
        }
        function Zb(a, b) {
          if (!jb(a))
            throw new N(44);
          var c = S(b, { parent: true }).node;
          if (!c)
            throw new N(44);
          b = gb(b);
          var d = Qb(c, b);
          if (d)
            throw new N(d);
          if (!c.La.symlink)
            throw new N(63);
          c.La.symlink(c, b, a);
        }
        function $b(a) {
          var b = S(a, { parent: true }).node;
          a = gb(a);
          var c = Q(b, a), d = Rb(b, a, true);
          if (d)
            throw new N(d);
          if (!b.La.rmdir)
            throw new N(63);
          if (c.ab)
            throw new N(10);
          b.La.rmdir(b, a);
          Cb(c);
        }
        function za(a) {
          var b = S(a, { parent: true }).node;
          if (!b)
            throw new N(44);
          a = gb(a);
          var c = Q(b, a), d = Rb(b, a, false);
          if (d)
            throw new N(d);
          if (!b.La.unlink)
            throw new N(63);
          if (c.ab)
            throw new N(10);
          b.La.unlink(b, a);
          Cb(c);
        }
        function ac(a, b) {
          a = S(a, { $a: !b }).node;
          return Sb(a.La.Ta)(a);
        }
        function bc(a, b, c, d) {
          Vb(a, b, { mode: c & 4095 | b.mode & -4096, ctime: Date.now(), Fb: d });
        }
        function na(a, b) {
          a = "string" == typeof a ? S(a, { $a: true }).node : a;
          bc(null, a, b);
        }
        function cc(a, b, c) {
          if (P(b.mode))
            throw new N(31);
          if (32768 !== (b.mode & 61440))
            throw new N(28);
          var d = Ob(b, "w");
          if (d)
            throw new N(d);
          Vb(a, b, { size: c, timestamp: Date.now() });
        }
        function oa(a, b, c = 438) {
          if ("" === a)
            throw new N(44);
          if ("string" == typeof b) {
            var d = { r: 0, "r+": 2, w: 577, "w+": 578, a: 1089, "a+": 1090 }[b];
            if ("undefined" == typeof d)
              throw Error(`Unknown file open mode: ${b}`);
            b = d;
          }
          c = b & 64 ? c & 4095 | 32768 : 0;
          if ("object" == typeof a)
            d = a;
          else {
            var e = a.endsWith("/");
            a = S(a, { $a: !(b & 131072), Jb: true });
            d = a.node;
            a = a.path;
          }
          var h = false;
          if (b & 64)
            if (d) {
              if (b & 128)
                throw new N(20);
            } else {
              if (e)
                throw new N(31);
              d = Xb(a, c | 511, 0);
              h = true;
            }
          if (!d)
            throw new N(44);
          8192 === (d.mode & 61440) && (b &= -513);
          if (b & 65536 && !P(d.mode))
            throw new N(54);
          if (!h && (e = d ? 40960 === (d.mode & 61440) ? 32 : P(d.mode) && ("r" !== Pb(b) || b & 576) ? 31 : Ob(d, Pb(b)) : 44))
            throw new N(e);
          b & 512 && !h && (e = d, e = "string" == typeof e ? S(e, { $a: true }).node : e, cc(null, e, 0));
          b &= -131713;
          e = Tb({ node: d, path: ja(d), flags: b, seekable: true, position: 0, Ma: d.Ma, Lb: [], error: false });
          e.Ma.open && e.Ma.open(e);
          h && na(d, c & 511);
          !f.logReadFiles || b & 1 || a in Kb || (Kb[a] = 1);
          return e;
        }
        function qa(a) {
          if (null === a.fd)
            throw new N(8);
          a.ob && (a.ob = null);
          try {
            a.Ma.close && a.Ma.close(a);
          } catch (b) {
            throw b;
          } finally {
            Gb[a.fd] = null;
          }
          a.fd = null;
        }
        function mc(a, b, c) {
          if (null === a.fd)
            throw new N(8);
          if (!a.seekable || !a.Ma.Va)
            throw new N(70);
          if (0 != c && 1 != c && 2 != c)
            throw new N(28);
          a.position = a.Ma.Va(a, b, c);
          a.Lb = [];
        }
        function Ec(a, b, c, d, e) {
          if (0 > d || 0 > e)
            throw new N(28);
          if (null === a.fd)
            throw new N(8);
          if (1 === (a.flags & 2097155))
            throw new N(8);
          if (P(a.node.mode))
            throw new N(31);
          if (!a.Ma.read)
            throw new N(28);
          var h = "undefined" != typeof e;
          if (!h)
            e = a.position;
          else if (!a.seekable)
            throw new N(70);
          b = a.Ma.read(a, b, c, d, e);
          h || (a.position += b);
          return b;
        }
        function pa(a, b, c, d, e) {
          if (0 > d || 0 > e)
            throw new N(28);
          if (null === a.fd)
            throw new N(8);
          if (0 === (a.flags & 2097155))
            throw new N(8);
          if (P(a.node.mode))
            throw new N(31);
          if (!a.Ma.write)
            throw new N(28);
          a.seekable && a.flags & 1024 && mc(a, 0, 2);
          var h = "undefined" != typeof e;
          if (!h)
            e = a.position;
          else if (!a.seekable)
            throw new N(70);
          b = a.Ma.write(a, b, c, d, e, void 0);
          h || (a.position += b);
          return b;
        }
        function ya(a) {
          var b = "binary";
          if ("utf8" !== b && "binary" !== b)
            throw Error(`Invalid encoding type "${b}"`);
          var c;
          var d = oa(a, d || 0);
          a = ac(a).size;
          var e = new Uint8Array(a);
          Ec(d, e, 0, a, 0);
          "utf8" === b ? c = B(e) : "binary" === b && (c = e);
          qa(d);
          return c;
        }
        function V(a, b, c) {
          var _a;
          a = ka("/dev/" + a);
          var d = la(!!b, !!c);
          (_a = V.yb) != null ? _a : V.yb = 64;
          var e = V.yb++ << 8 | 0;
          wb(e, { open(h) {
            h.seekable = false;
          }, close() {
            var _a2;
            ((_a2 = c == null ? void 0 : c.buffer) == null ? void 0 : _a2.length) && c(10);
          }, read(h, k, q, w) {
            for (var v = 0, C = 0; C < w; C++) {
              try {
                var G = b();
              } catch (pb) {
                throw new N(29);
              }
              if (void 0 === G && 0 === v)
                throw new N(6);
              if (null === G || void 0 === G)
                break;
              v++;
              k[q + C] = G;
            }
            v && (h.node.atime = Date.now());
            return v;
          }, write(h, k, q, w) {
            for (var v = 0; v < w; v++)
              try {
                c(k[q + v]);
              } catch (C) {
                throw new N(29);
              }
            w && (h.node.mtime = h.node.ctime = Date.now());
            return v;
          } });
          Yb(a, d, e);
        }
        var W = {};
        function Gc(a, b, c) {
          if ("/" === b.charAt(0))
            return b;
          a = -100 === a ? "/" : T(a).path;
          if (0 == b.length) {
            if (!c)
              throw new N(44);
            return a;
          }
          return a + "/" + b;
        }
        function Hc(a, b) {
          E[a >> 2] = b.dev;
          E[a + 4 >> 2] = b.mode;
          F[a + 8 >> 2] = b.nlink;
          E[a + 12 >> 2] = b.uid;
          E[a + 16 >> 2] = b.gid;
          E[a + 20 >> 2] = b.rdev;
          H[a + 24 >> 3] = BigInt(b.size);
          E[a + 32 >> 2] = 4096;
          E[a + 36 >> 2] = b.blocks;
          var c = b.atime.getTime(), d = b.mtime.getTime(), e = b.ctime.getTime();
          H[a + 40 >> 3] = BigInt(Math.floor(c / 1e3));
          F[a + 48 >> 2] = c % 1e3 * 1e6;
          H[a + 56 >> 3] = BigInt(Math.floor(d / 1e3));
          F[a + 64 >> 2] = d % 1e3 * 1e6;
          H[a + 72 >> 3] = BigInt(Math.floor(e / 1e3));
          F[a + 80 >> 2] = e % 1e3 * 1e6;
          H[a + 88 >> 3] = BigInt(b.ino);
          return 0;
        }
        var Ic = void 0, Jc = () => {
          var a = E[+Ic >> 2];
          Ic += 4;
          return a;
        }, Kc = 0, Lc = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335], Mc = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334], Nc = {}, Oc = (a) => {
          var _a;
          Ma = a;
          cb || 0 < Kc || ((_a = f.onExit) == null ? void 0 : _a.call(f, a), La = true);
          Da(a, new Ya(a));
        }, Pc = (a) => {
          if (!La)
            try {
              if (a(), !(cb || 0 < Kc))
                try {
                  Ma = a = Ma, Oc(a);
                } catch (b) {
                  b instanceof Ya || "unwind" == b || Da(1, b);
                }
            } catch (b) {
              b instanceof Ya || "unwind" == b || Da(1, b);
            }
        }, Qc = {}, Sc = () => {
          if (!Rc) {
            var a = { USER: "web_user", LOGNAME: "web_user", PATH: "/", PWD: "/", HOME: "/home/web_user", LANG: ("object" == typeof navigator && navigator.languages && navigator.languages[0] || "C").replace("-", "_") + ".UTF-8", _: Ca || "./this.program" }, b;
            for (b in Qc)
              void 0 === Qc[b] ? delete a[b] : a[b] = Qc[b];
            var c = [];
            for (b in a)
              c.push(`${b}=${a[b]}`);
            Rc = c;
          }
          return Rc;
        }, Rc, xa = (a) => {
          var b = ha(a) + 1, c = z(b);
          u(a, x, c, b);
          return c;
        }, Tc = (a, b, c, d) => {
          var e = { string: (v) => {
            var C = 0;
            null !== v && void 0 !== v && 0 !== v && (C = xa(v));
            return C;
          }, array: (v) => {
            var C = z(v.length);
            p.set(v, C);
            return C;
          } };
          a = f["_" + a];
          var h = [], k = 0;
          if (d)
            for (var q = 0; q < d.length; q++) {
              var w = e[c[q]];
              w ? (0 === k && (k = sa()), h[q] = w(d[q])) : h[q] = d[q];
            }
          c = a(...h);
          return c = function(v) {
            0 !== k && wa(k);
            return "string" === b ? v ? B(x, v) : "" : "boolean" === b ? !!v : v;
          }(c);
        }, ea = 0, da = (a, b) => {
          b = 1 == b ? z(a.length) : ia(a.length);
          a.subarray || a.slice || (a = new Uint8Array(a));
          x.set(a, b);
          return b;
        }, Uc, Vc = [], Y, A = (a) => {
          Uc.delete(Y.get(a));
          Y.set(a, null);
          Vc.push(a);
        }, Aa = (a, b) => {
          if (!Uc) {
            Uc = /* @__PURE__ */ new WeakMap();
            var c = Y.length;
            if (Uc)
              for (var d = 0; d < 0 + c; d++) {
                var e = Y.get(d);
                e && Uc.set(e, d);
              }
          }
          if (c = Uc.get(a) || 0)
            return c;
          if (Vc.length)
            c = Vc.pop();
          else {
            try {
              Y.grow(1);
            } catch (w) {
              if (!(w instanceof RangeError))
                throw w;
              throw "Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.";
            }
            c = Y.length - 1;
          }
          try {
            Y.set(c, a);
          } catch (w) {
            if (!(w instanceof TypeError))
              throw w;
            if ("function" == typeof WebAssembly.Function) {
              var h = WebAssembly.Function;
              d = { i: "i32", j: "i64", f: "f32", d: "f64", e: "externref", p: "i32" };
              e = { parameters: [], results: "v" == b[0] ? [] : [d[b[0]]] };
              for (var k = 1; k < b.length; ++k)
                e.parameters.push(d[b[k]]);
              b = new h(e, a);
            } else {
              d = [1];
              e = b.slice(0, 1);
              b = b.slice(1);
              k = { i: 127, p: 127, j: 126, f: 125, d: 124, e: 111 };
              d.push(96);
              var q = b.length;
              128 > q ? d.push(q) : d.push(q % 128 | 128, q >> 7);
              for (h of b)
                d.push(k[h]);
              "v" == e ? d.push(0) : d.push(1, k[e]);
              b = [0, 97, 115, 109, 1, 0, 0, 0, 1];
              h = d.length;
              128 > h ? b.push(h) : b.push(h % 128 | 128, h >> 7);
              b.push(...d);
              b.push(2, 7, 1, 1, 101, 1, 102, 0, 0, 7, 5, 1, 1, 102, 0, 0);
              b = new WebAssembly.Module(new Uint8Array(b));
              b = new WebAssembly.Instance(b, { e: { f: a } }).exports.f;
            }
            Y.set(c, b);
          }
          Uc.set(a, c);
          return c;
        };
        R = Array(4096);
        Wb(O, "/");
        U("/tmp");
        U("/home");
        U("/home/web_user");
        (function() {
          U("/dev");
          wb(259, { read: () => 0, write: (d, e, h, k) => k, Va: () => 0 });
          Yb("/dev/null", 259);
          nb(1280, yb);
          nb(1536, zb);
          Yb("/dev/tty", 1280);
          Yb("/dev/tty1", 1536);
          var a = new Uint8Array(1024), b = 0, c = () => {
            0 === b && (ib(a), b = a.byteLength);
            return a[--b];
          };
          V("random", c);
          V("urandom", c);
          U("/dev/shm");
          U("/dev/shm/tmp");
        })();
        (function() {
          U("/proc");
          var a = U("/proc/self");
          U("/proc/self/fd");
          Wb({ Xa() {
            var b = Bb(a, "fd", 16895, 73);
            b.Ma = { Va: O.Ma.Va };
            b.La = { lookup(c, d) {
              c = +d;
              var e = T(c);
              c = { parent: null, Xa: { zb: "fake" }, La: { readlink: () => e.path }, id: c + 1 };
              return c.parent = c;
            }, readdir() {
              return Array.from(Gb.entries()).filter(([, c]) => c).map(([c]) => c.toString());
            } };
            return b;
          } }, "/proc/self/fd");
        })();
        O.vb = new N(44);
        O.vb.stack = "<generic error, no stack>";
        var Xc = { a: (a, b, c, d) => Ta(`Assertion failed: ${a ? B(x, a) : ""}, at: ` + [b ? b ? B(x, b) : "" : "unknown filename", c, d ? d ? B(x, d) : "" : "unknown function"]), i: function(a, b) {
          try {
            return a = a ? B(x, a) : "", na(a, b), 0;
          } catch (c) {
            if ("undefined" == typeof W || "ErrnoError" !== c.name)
              throw c;
            return -c.Pa;
          }
        }, L: function(a, b, c) {
          try {
            b = b ? B(x, b) : "";
            b = Gc(a, b);
            if (c & -8)
              return -28;
            var d = S(b, { $a: true }).node;
            if (!d)
              return -44;
            a = "";
            c & 4 && (a += "r");
            c & 2 && (a += "w");
            c & 1 && (a += "x");
            return a && Ob(d, a) ? -2 : 0;
          } catch (e) {
            if ("undefined" == typeof W || "ErrnoError" !== e.name)
              throw e;
            return -e.Pa;
          }
        }, j: function(a, b) {
          try {
            var c = T(a);
            bc(c, c.node, b, false);
            return 0;
          } catch (d) {
            if ("undefined" == typeof W || "ErrnoError" !== d.name)
              throw d;
            return -d.Pa;
          }
        }, h: function(a) {
          try {
            var b = T(a);
            Vb(b, b.node, { timestamp: Date.now(), Fb: false });
            return 0;
          } catch (c) {
            if ("undefined" == typeof W || "ErrnoError" !== c.name)
              throw c;
            return -c.Pa;
          }
        }, b: function(a, b, c) {
          Ic = c;
          try {
            var d = T(a);
            switch (b) {
              case 0:
                var e = Jc();
                if (0 > e)
                  break;
                for (; Gb[e]; )
                  e++;
                return Ub(d, e).fd;
              case 1:
              case 2:
                return 0;
              case 3:
                return d.flags;
              case 4:
                return e = Jc(), d.flags |= e, 0;
              case 12:
                return e = Jc(), Na[e + 0 >> 1] = 2, 0;
              case 13:
              case 14:
                return 0;
            }
            return -28;
          } catch (h) {
            if ("undefined" == typeof W || "ErrnoError" !== h.name)
              throw h;
            return -h.Pa;
          }
        }, g: function(a, b) {
          try {
            var c = T(a), d = c.node, e = c.Ma.Ta;
            a = e ? c : d;
            e != null ? e : e = d.La.Ta;
            Sb(e);
            var h = e(a);
            return Hc(b, h);
          } catch (k) {
            if ("undefined" == typeof W || "ErrnoError" !== k.name)
              throw k;
            return -k.Pa;
          }
        }, H: function(a, b) {
          b = -9007199254740992 > b || 9007199254740992 < b ? NaN : Number(b);
          try {
            if (isNaN(b))
              return 61;
            var c = T(a);
            if (0 > b || 0 === (c.flags & 2097155))
              throw new N(28);
            cc(c, c.node, b);
            return 0;
          } catch (d) {
            if ("undefined" == typeof W || "ErrnoError" !== d.name)
              throw d;
            return -d.Pa;
          }
        }, G: function(a, b) {
          try {
            if (0 === b)
              return -28;
            var c = ha("/") + 1;
            if (b < c)
              return -68;
            u("/", x, a, b);
            return c;
          } catch (d) {
            if ("undefined" == typeof W || "ErrnoError" !== d.name)
              throw d;
            return -d.Pa;
          }
        }, K: function(a, b) {
          try {
            return a = a ? B(x, a) : "", Hc(b, ac(a, true));
          } catch (c) {
            if ("undefined" == typeof W || "ErrnoError" !== c.name)
              throw c;
            return -c.Pa;
          }
        }, C: function(a, b, c) {
          try {
            return b = b ? B(x, b) : "", b = Gc(a, b), U(b, c), 0;
          } catch (d) {
            if ("undefined" == typeof W || "ErrnoError" !== d.name)
              throw d;
            return -d.Pa;
          }
        }, J: function(a, b, c, d) {
          try {
            b = b ? B(x, b) : "";
            var e = d & 256;
            b = Gc(a, b, d & 4096);
            return Hc(c, e ? ac(b, true) : ac(b));
          } catch (h) {
            if ("undefined" == typeof W || "ErrnoError" !== h.name)
              throw h;
            return -h.Pa;
          }
        }, x: function(a, b, c, d) {
          Ic = d;
          try {
            b = b ? B(x, b) : "";
            b = Gc(a, b);
            var e = d ? Jc() : 0;
            return oa(b, c, e).fd;
          } catch (h) {
            if ("undefined" == typeof W || "ErrnoError" !== h.name)
              throw h;
            return -h.Pa;
          }
        }, v: function(a, b, c, d) {
          try {
            b = b ? B(x, b) : "";
            b = Gc(a, b);
            if (0 >= d)
              return -28;
            var e = S(b).node;
            if (!e)
              throw new N(44);
            if (!e.La.readlink)
              throw new N(28);
            var h = e.La.readlink(e);
            var k = Math.min(d, ha(h)), q = p[c + k];
            u(h, x, c, d + 1);
            p[c + k] = q;
            return k;
          } catch (w) {
            if ("undefined" == typeof W || "ErrnoError" !== w.name)
              throw w;
            return -w.Pa;
          }
        }, u: function(a) {
          try {
            return a = a ? B(x, a) : "", $b(a), 0;
          } catch (b) {
            if ("undefined" == typeof W || "ErrnoError" !== b.name)
              throw b;
            return -b.Pa;
          }
        }, f: function(a, b) {
          try {
            return a = a ? B(x, a) : "", Hc(b, ac(a));
          } catch (c) {
            if ("undefined" == typeof W || "ErrnoError" !== c.name)
              throw c;
            return -c.Pa;
          }
        }, r: function(a, b, c) {
          try {
            return b = b ? B(x, b) : "", b = Gc(a, b), 0 === c ? za(b) : 512 === c ? $b(b) : Ta("Invalid flags passed to unlinkat"), 0;
          } catch (d) {
            if ("undefined" == typeof W || "ErrnoError" !== d.name)
              throw d;
            return -d.Pa;
          }
        }, q: function(a, b, c) {
          try {
            b = b ? B(x, b) : "";
            b = Gc(a, b, true);
            var d = Date.now(), e, h;
            if (c) {
              var k = F[c >> 2] + 4294967296 * E[c + 4 >> 2], q = E[c + 8 >> 2];
              1073741823 == q ? e = d : 1073741822 == q ? e = null : e = 1e3 * k + q / 1e6;
              c += 16;
              k = F[c >> 2] + 4294967296 * E[c + 4 >> 2];
              q = E[c + 8 >> 2];
              1073741823 == q ? h = d : 1073741822 == q ? h = null : h = 1e3 * k + q / 1e6;
            } else
              h = e = d;
            if (null !== (h != null ? h : e)) {
              a = e;
              var w = S(b, { $a: true }).node;
              Sb(w.La.Ua)(w, { atime: a, mtime: h });
            }
            return 0;
          } catch (v) {
            if ("undefined" == typeof W || "ErrnoError" !== v.name)
              throw v;
            return -v.Pa;
          }
        }, m: () => Ta(""), l: () => {
          cb = false;
          Kc = 0;
        }, A: function(a, b) {
          a = -9007199254740992 > a || 9007199254740992 < a ? NaN : Number(a);
          a = new Date(1e3 * a);
          E[b >> 2] = a.getSeconds();
          E[b + 4 >> 2] = a.getMinutes();
          E[b + 8 >> 2] = a.getHours();
          E[b + 12 >> 2] = a.getDate();
          E[b + 16 >> 2] = a.getMonth();
          E[b + 20 >> 2] = a.getFullYear() - 1900;
          E[b + 24 >> 2] = a.getDay();
          var c = a.getFullYear();
          E[b + 28 >> 2] = (0 !== c % 4 || 0 === c % 100 && 0 !== c % 400 ? Mc : Lc)[a.getMonth()] + a.getDate() - 1 | 0;
          E[b + 36 >> 2] = -(60 * a.getTimezoneOffset());
          c = new Date(
            a.getFullYear(),
            6,
            1
          ).getTimezoneOffset();
          var d = new Date(a.getFullYear(), 0, 1).getTimezoneOffset();
          E[b + 32 >> 2] = (c != d && a.getTimezoneOffset() == Math.min(d, c)) | 0;
        }, y: function(a, b, c, d, e, h, k) {
          e = -9007199254740992 > e || 9007199254740992 < e ? NaN : Number(e);
          try {
            if (isNaN(e))
              return 61;
            var q = T(d);
            if (0 !== (b & 2) && 0 === (c & 2) && 2 !== (q.flags & 2097155))
              throw new N(2);
            if (1 === (q.flags & 2097155))
              throw new N(2);
            if (!q.Ma.ib)
              throw new N(43);
            if (!a)
              throw new N(28);
            var w = q.Ma.ib(q, a, e, b, c);
            var v = w.Kb;
            E[h >> 2] = w.Ab;
            F[k >> 2] = v;
            return 0;
          } catch (C) {
            if ("undefined" == typeof W || "ErrnoError" !== C.name)
              throw C;
            return -C.Pa;
          }
        }, z: function(a, b, c, d, e, h) {
          h = -9007199254740992 > h || 9007199254740992 < h ? NaN : Number(h);
          try {
            var k = T(e);
            if (c & 2) {
              c = h;
              if (32768 !== (k.node.mode & 61440))
                throw new N(43);
              if (!(d & 2)) {
                var q = x.slice(a, a + b);
                k.Ma.jb && k.Ma.jb(k, q, c, b, d);
              }
            }
          } catch (w) {
            if ("undefined" == typeof W || "ErrnoError" !== w.name)
              throw w;
            return -w.Pa;
          }
        }, n: (a, b) => {
          Nc[a] && (clearTimeout(Nc[a].id), delete Nc[a]);
          if (!b)
            return 0;
          var c = setTimeout(() => {
            delete Nc[a];
            Pc(() => Wc(a, performance.now()));
          }, b);
          Nc[a] = {
            id: c,
            Xb: b
          };
          return 0;
        }, B: (a, b, c, d) => {
          var e = (/* @__PURE__ */ new Date()).getFullYear(), h = new Date(e, 0, 1).getTimezoneOffset();
          e = new Date(e, 6, 1).getTimezoneOffset();
          F[a >> 2] = 60 * Math.max(h, e);
          E[b >> 2] = Number(h != e);
          b = (k) => {
            var q = Math.abs(k);
            return `UTC${0 <= k ? "-" : "+"}${String(Math.floor(q / 60)).padStart(2, "0")}${String(q % 60).padStart(2, "0")}`;
          };
          a = b(h);
          b = b(e);
          e < h ? (u(a, x, c, 17), u(b, x, d, 17)) : (u(a, x, d, 17), u(b, x, c, 17));
        }, d: () => Date.now(), s: () => 2147483648, c: () => performance.now(), o: (a) => {
          var b = x.length;
          a >>>= 0;
          if (2147483648 < a)
            return false;
          for (var c = 1; 4 >= c; c *= 2) {
            var d = b * (1 + 0.2 / c);
            d = Math.min(d, a + 100663296);
            a: {
              d = (Math.min(2147483648, 65536 * Math.ceil(Math.max(a, d) / 65536)) - Ka.buffer.byteLength + 65535) / 65536 | 0;
              try {
                Ka.grow(d);
                Qa();
                var e = 1;
                break a;
              } catch (h) {
              }
              e = void 0;
            }
            if (e)
              return true;
          }
          return false;
        }, E: (a, b) => {
          var c = 0;
          Sc().forEach((d, e) => {
            var h = b + c;
            e = F[a + 4 * e >> 2] = h;
            for (h = 0; h < d.length; ++h)
              p[e++] = d.charCodeAt(h);
            p[e] = 0;
            c += d.length + 1;
          });
          return 0;
        }, F: (a, b) => {
          var c = Sc();
          F[a >> 2] = c.length;
          var d = 0;
          c.forEach((e) => d += e.length + 1);
          F[b >> 2] = d;
          return 0;
        }, e: function(a) {
          try {
            var b = T(a);
            qa(b);
            return 0;
          } catch (c) {
            if ("undefined" == typeof W || "ErrnoError" !== c.name)
              throw c;
            return c.Pa;
          }
        }, p: function(a, b) {
          try {
            var c = T(a);
            p[b] = c.tty ? 2 : P(c.mode) ? 3 : 40960 === (c.mode & 61440) ? 7 : 4;
            Na[b + 2 >> 1] = 0;
            H[b + 8 >> 3] = BigInt(0);
            H[b + 16 >> 3] = BigInt(0);
            return 0;
          } catch (d) {
            if ("undefined" == typeof W || "ErrnoError" !== d.name)
              throw d;
            return d.Pa;
          }
        }, w: function(a, b, c, d) {
          try {
            a: {
              var e = T(a);
              a = b;
              for (var h, k = b = 0; k < c; k++) {
                var q = F[a >> 2], w = F[a + 4 >> 2];
                a += 8;
                var v = Ec(e, p, q, w, h);
                if (0 > v) {
                  var C = -1;
                  break a;
                }
                b += v;
                if (v < w)
                  break;
                "undefined" != typeof h && (h += v);
              }
              C = b;
            }
            F[d >> 2] = C;
            return 0;
          } catch (G) {
            if ("undefined" == typeof W || "ErrnoError" !== G.name)
              throw G;
            return G.Pa;
          }
        }, D: function(a, b, c, d) {
          b = -9007199254740992 > b || 9007199254740992 < b ? NaN : Number(b);
          try {
            if (isNaN(b))
              return 61;
            var e = T(a);
            mc(e, b, c);
            H[d >> 3] = BigInt(e.position);
            e.ob && 0 === b && 0 === c && (e.ob = null);
            return 0;
          } catch (h) {
            if ("undefined" == typeof W || "ErrnoError" !== h.name)
              throw h;
            return h.Pa;
          }
        }, I: function(a) {
          var _a;
          try {
            var b = T(a);
            return ((_a = b.Ma) == null ? void 0 : _a.fsync) ? b.Ma.fsync(b) : 0;
          } catch (c) {
            if ("undefined" == typeof W || "ErrnoError" !== c.name)
              throw c;
            return c.Pa;
          }
        }, t: function(a, b, c, d) {
          try {
            a: {
              var e = T(a);
              a = b;
              for (var h, k = b = 0; k < c; k++) {
                var q = F[a >> 2], w = F[a + 4 >> 2];
                a += 8;
                var v = pa(e, p, q, w, h);
                if (0 > v) {
                  var C = -1;
                  break a;
                }
                b += v;
                if (v < w)
                  break;
                "undefined" != typeof h && (h += v);
              }
              C = b;
            }
            F[d >> 2] = C;
            return 0;
          } catch (G) {
            if ("undefined" == typeof W || "ErrnoError" !== G.name)
              throw G;
            return G.Pa;
          }
        }, k: Oc }, Z;
        (async function() {
          var _a;
          function a(c) {
            var _a2;
            Z = c.exports;
            Ka = Z.M;
            Qa();
            Y = Z.O;
            K--;
            (_a2 = f.monitorRunDependencies) == null ? void 0 : _a2.call(f, K);
            0 == K && Sa && (c = Sa, Sa = null, c());
            return Z;
          }
          K++;
          (_a = f.monitorRunDependencies) == null ? void 0 : _a.call(f, K);
          var b = { a: Xc };
          if (f.instantiateWasm)
            return new Promise((c) => {
              f.instantiateWasm(b, (d, e) => {
                a(d, e);
                c(d.exports);
              });
            });
          Ua != null ? Ua : Ua = f.locateFile ? f.locateFile("sql-wasm.wasm", D) : D + "sql-wasm.wasm";
          return a((await Xa(b)).instance);
        })();
        f._sqlite3_free = (a) => (f._sqlite3_free = Z.P)(a);
        f._sqlite3_value_text = (a) => (f._sqlite3_value_text = Z.Q)(a);
        f._sqlite3_prepare_v2 = (a, b, c, d, e) => (f._sqlite3_prepare_v2 = Z.R)(a, b, c, d, e);
        f._sqlite3_step = (a) => (f._sqlite3_step = Z.S)(a);
        f._sqlite3_reset = (a) => (f._sqlite3_reset = Z.T)(a);
        f._sqlite3_exec = (a, b, c, d, e) => (f._sqlite3_exec = Z.U)(a, b, c, d, e);
        f._sqlite3_finalize = (a) => (f._sqlite3_finalize = Z.V)(a);
        f._sqlite3_column_name = (a, b) => (f._sqlite3_column_name = Z.W)(a, b);
        f._sqlite3_column_text = (a, b) => (f._sqlite3_column_text = Z.X)(a, b);
        f._sqlite3_column_type = (a, b) => (f._sqlite3_column_type = Z.Y)(a, b);
        f._sqlite3_errmsg = (a) => (f._sqlite3_errmsg = Z.Z)(a);
        f._sqlite3_clear_bindings = (a) => (f._sqlite3_clear_bindings = Z._)(a);
        f._sqlite3_value_blob = (a) => (f._sqlite3_value_blob = Z.$)(a);
        f._sqlite3_value_bytes = (a) => (f._sqlite3_value_bytes = Z.aa)(a);
        f._sqlite3_value_double = (a) => (f._sqlite3_value_double = Z.ba)(a);
        f._sqlite3_value_int = (a) => (f._sqlite3_value_int = Z.ca)(a);
        f._sqlite3_value_type = (a) => (f._sqlite3_value_type = Z.da)(a);
        f._sqlite3_result_blob = (a, b, c, d) => (f._sqlite3_result_blob = Z.ea)(a, b, c, d);
        f._sqlite3_result_double = (a, b) => (f._sqlite3_result_double = Z.fa)(a, b);
        f._sqlite3_result_error = (a, b, c) => (f._sqlite3_result_error = Z.ga)(a, b, c);
        f._sqlite3_result_int = (a, b) => (f._sqlite3_result_int = Z.ha)(a, b);
        f._sqlite3_result_int64 = (a, b) => (f._sqlite3_result_int64 = Z.ia)(a, b);
        f._sqlite3_result_null = (a) => (f._sqlite3_result_null = Z.ja)(a);
        f._sqlite3_result_text = (a, b, c, d) => (f._sqlite3_result_text = Z.ka)(a, b, c, d);
        f._sqlite3_aggregate_context = (a, b) => (f._sqlite3_aggregate_context = Z.la)(a, b);
        f._sqlite3_column_count = (a) => (f._sqlite3_column_count = Z.ma)(a);
        f._sqlite3_data_count = (a) => (f._sqlite3_data_count = Z.na)(a);
        f._sqlite3_column_blob = (a, b) => (f._sqlite3_column_blob = Z.oa)(a, b);
        f._sqlite3_column_bytes = (a, b) => (f._sqlite3_column_bytes = Z.pa)(a, b);
        f._sqlite3_column_double = (a, b) => (f._sqlite3_column_double = Z.qa)(a, b);
        f._sqlite3_bind_blob = (a, b, c, d, e) => (f._sqlite3_bind_blob = Z.ra)(a, b, c, d, e);
        f._sqlite3_bind_double = (a, b, c) => (f._sqlite3_bind_double = Z.sa)(a, b, c);
        f._sqlite3_bind_int = (a, b, c) => (f._sqlite3_bind_int = Z.ta)(a, b, c);
        f._sqlite3_bind_text = (a, b, c, d, e) => (f._sqlite3_bind_text = Z.ua)(a, b, c, d, e);
        f._sqlite3_bind_parameter_index = (a, b) => (f._sqlite3_bind_parameter_index = Z.va)(a, b);
        f._sqlite3_sql = (a) => (f._sqlite3_sql = Z.wa)(a);
        f._sqlite3_normalized_sql = (a) => (f._sqlite3_normalized_sql = Z.xa)(a);
        f._sqlite3_changes = (a) => (f._sqlite3_changes = Z.ya)(a);
        f._sqlite3_close_v2 = (a) => (f._sqlite3_close_v2 = Z.za)(a);
        f._sqlite3_create_function_v2 = (a, b, c, d, e, h, k, q, w) => (f._sqlite3_create_function_v2 = Z.Aa)(a, b, c, d, e, h, k, q, w);
        f._sqlite3_update_hook = (a, b, c) => (f._sqlite3_update_hook = Z.Ba)(a, b, c);
        f._sqlite3_open = (a, b) => (f._sqlite3_open = Z.Ca)(a, b);
        var ia = f._malloc = (a) => (ia = f._malloc = Z.Da)(a), fa = f._free = (a) => (fa = f._free = Z.Ea)(a);
        f._RegisterExtensionFunctions = (a) => (f._RegisterExtensionFunctions = Z.Fa)(a);
        var Db = (a, b) => (Db = Z.Ga)(a, b), Wc = (a, b) => (Wc = Z.Ha)(a, b), wa = (a) => (wa = Z.Ia)(a), z = (a) => (z = Z.Ja)(a), sa = () => (sa = Z.Ka)();
        f.stackSave = () => sa();
        f.stackRestore = (a) => wa(a);
        f.stackAlloc = (a) => z(a);
        f.cwrap = (a, b, c, d) => {
          var e = !c || c.every((h) => "number" === h || "boolean" === h);
          return "string" !== b && e && !d ? f["_" + a] : (...h) => Tc(a, b, c, h);
        };
        f.addFunction = Aa;
        f.removeFunction = A;
        f.UTF8ToString = ua;
        f.ALLOC_NORMAL = ea;
        f.allocate = da;
        f.allocateUTF8OnStack = xa;
        function Yc() {
          function a() {
            var _a;
            f.calledRun = true;
            if (!La) {
              if (!f.noFSInit && !Ib) {
                var b, c;
                Ib = true;
                d != null ? d : d = f.stdin;
                b != null ? b : b = f.stdout;
                c != null ? c : c = f.stderr;
                d ? V("stdin", d) : Zb("/dev/tty", "/dev/stdin");
                b ? V("stdout", null, b) : Zb("/dev/tty", "/dev/stdout");
                c ? V("stderr", null, c) : Zb("/dev/tty1", "/dev/stderr");
                oa("/dev/stdin", 0);
                oa("/dev/stdout", 1);
                oa("/dev/stderr", 1);
              }
              Z.N();
              Jb = false;
              (_a = f.onRuntimeInitialized) == null ? void 0 : _a.call(f);
              if (f.postRun)
                for ("function" == typeof f.postRun && (f.postRun = [f.postRun]); f.postRun.length; ) {
                  var d = f.postRun.shift();
                  $a.unshift(d);
                }
              Za($a);
            }
          }
          if (0 < K)
            Sa = Yc;
          else {
            if (f.preRun)
              for ("function" == typeof f.preRun && (f.preRun = [f.preRun]); f.preRun.length; )
                bb();
            Za(ab);
            0 < K ? Sa = Yc : f.setStatus ? (f.setStatus("Running..."), setTimeout(() => {
              setTimeout(() => f.setStatus(""), 1);
              a();
            }, 1)) : a();
          }
        }
        if (f.preInit)
          for ("function" == typeof f.preInit && (f.preInit = [f.preInit]); 0 < f.preInit.length; )
            f.preInit.pop()();
        Yc();
        return Module;
      });
      return initSqlJsPromise;
    };
    if (typeof exports === "object" && typeof module2 === "object") {
      module2.exports = initSqlJs3;
      module2.exports.default = initSqlJs3;
    } else if (typeof define === "function" && define["amd"]) {
      define([], function() {
        return initSqlJs3;
      });
    } else if (typeof exports === "object") {
      exports["Module"] = initSqlJs3;
    }
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  VIEW_TYPE_DECKS: () => VIEW_TYPE_DECKS,
  default: () => DecksPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");

// src/database/DatabaseService.ts
var import_sql = __toESM(require_sql_wasm());

// src/algorithm/fsrs-weights.ts
var FSRS_WEIGHTS_STANDARD = [
  0.4072,
  1.1829,
  3.1262,
  15.4722,
  7.2102,
  0.5316,
  1.0651,
  0.0234,
  1.616,
  0.1544,
  1.0824,
  1.9813,
  0.0953,
  0.2975,
  2.2042,
  0.2407,
  2.9466
];
var FSRS_WEIGHTS_SUBDAY = createSubDayWeights();
var DEFAULT_FSRS_WEIGHTS = FSRS_WEIGHTS_STANDARD;
var PROFILE_CONFIG = {
  INTENSIVE: {
    weights: FSRS_WEIGHTS_SUBDAY,
    minMinutes: 1,
    maximumIntervalDays: 36500
  },
  STANDARD: {
    weights: FSRS_WEIGHTS_STANDARD,
    minMinutes: 1440,
    // 1 day minimum
    maximumIntervalDays: 36500
  }
};
var DEFAULT_FSRS_PARAMETERS = {
  w: DEFAULT_FSRS_WEIGHTS,
  requestRetention: 0.9,
  maximumInterval: 36500,
  minMinutes: 1440
};
function getWeightsForProfile(profile) {
  return PROFILE_CONFIG[profile].weights;
}
function getMinMinutesForProfile(profile) {
  return PROFILE_CONFIG[profile].minMinutes;
}
function getMaxIntervalDaysForProfile(profile) {
  return PROFILE_CONFIG[profile].maximumIntervalDays;
}
function validateFSRSWeights(weights) {
  if (!Array.isArray(weights) || weights.length !== 17) {
    return false;
  }
  return weights.every((w) => isFinite(w));
}
function createSubDayWeights(againMinutes = 1, hardMinutes = 6, goodMinutes = 10, easyMinutes = 1440) {
  return [
    againMinutes / 1440,
    // w[0] - Again stability
    hardMinutes / 1440,
    // w[1] - Hard stability
    goodMinutes / 1440,
    // w[2] - Good stability
    easyMinutes / 1440,
    // w[3] - Easy stability
    ...FSRS_WEIGHTS_STANDARD.slice(4)
    // Keep remaining weights
  ];
}
function validateProfile(profile) {
  return profile === "INTENSIVE" || profile === "STANDARD";
}
function validateRequestRetention(retention) {
  return retention > 0.5 && retention < 0.995;
}

// src/database/types.ts
var DEFAULT_DECK_CONFIG = {
  hasNewCardsLimitEnabled: false,
  // unlimited by default
  newCardsPerDay: 20,
  // default limit when enabled
  hasReviewCardsLimitEnabled: false,
  // unlimited by default
  reviewCardsPerDay: 100,
  // default limit when enabled
  headerLevel: 2,
  // Default to H2 headers
  reviewOrder: "due-date",
  fsrs: {
    requestRetention: DEFAULT_FSRS_PARAMETERS.requestRetention,
    profile: "STANDARD"
  }
};
function hasNewCardsLimit(config) {
  return config.hasNewCardsLimitEnabled;
}
function hasReviewCardsLimit(config) {
  return config.hasReviewCardsLimitEnabled;
}

// src/database/schemas.ts
var CURRENT_SCHEMA_VERSION = 5;
var CREATE_TABLES_SQL = `
  PRAGMA foreign_keys = OFF;
  BEGIN;

  -- Decks table
  CREATE TABLE IF NOT EXISTS decks (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    filepath TEXT NOT NULL UNIQUE,
    tag TEXT NOT NULL,
    last_reviewed TEXT,
    config TEXT NOT NULL DEFAULT '{"hasNewCardsLimitEnabled":false,"newCardsPerDay":20,"hasReviewCardsLimitEnabled":false,"reviewCardsPerDay":100,"headerLevel":2,"reviewOrder":"due-date","fsrs":{"requestRetention":0.9,"profile":"STANDARD"}}',
    created TEXT NOT NULL,
    modified TEXT NOT NULL
  );

  -- Flashcards table
  CREATE TABLE IF NOT EXISTS flashcards (
    id TEXT PRIMARY KEY,
    deck_id TEXT NOT NULL,
    front TEXT NOT NULL,
    back TEXT NOT NULL,
    type TEXT NOT NULL CHECK (type IN ('header-paragraph', 'table')),
    source_file TEXT NOT NULL,
    content_hash TEXT NOT NULL,

    state TEXT NOT NULL CHECK (state IN ('new', 'review')),
    due_date TEXT NOT NULL,
    interval REAL NOT NULL,
    repetitions INTEGER NOT NULL DEFAULT 0,
    difficulty REAL NOT NULL DEFAULT 5.0,
    stability REAL NOT NULL DEFAULT 0,
    lapses INTEGER NOT NULL DEFAULT 0,
    last_reviewed TEXT,
    created TEXT NOT NULL,
    modified TEXT NOT NULL,
    FOREIGN KEY (deck_id) REFERENCES decks(id)
  );

  -- Review sessions table
  CREATE TABLE IF NOT EXISTS review_sessions (
    id TEXT PRIMARY KEY,
    deck_id TEXT NOT NULL,
    started_at TEXT NOT NULL,
    ended_at TEXT,
    goal_total INTEGER NOT NULL,
    done_unique INTEGER NOT NULL DEFAULT 0,
    FOREIGN KEY (deck_id) REFERENCES decks(id)
  );

  -- Review logs table
  CREATE TABLE IF NOT EXISTS review_logs (
    id TEXT PRIMARY KEY,
    flashcard_id TEXT NOT NULL,
    session_id TEXT,
    last_reviewed_at TEXT NOT NULL,
    shown_at TEXT,
    reviewed_at TEXT NOT NULL,
    rating INTEGER NOT NULL CHECK (rating IN (1, 2, 3, 4)),
    rating_label TEXT NOT NULL CHECK (rating_label IN ('again', 'hard', 'good', 'easy')),
    time_elapsed_ms INTEGER,
    old_state TEXT NOT NULL CHECK (old_state IN ('new', 'review')),
    old_repetitions INTEGER NOT NULL DEFAULT 0,
    old_lapses INTEGER NOT NULL DEFAULT 0,
    old_stability REAL NOT NULL DEFAULT 0,
    old_difficulty REAL NOT NULL DEFAULT 5.0,
    new_state TEXT NOT NULL CHECK (new_state IN ('new', 'review')),
    new_repetitions INTEGER NOT NULL DEFAULT 0,
    new_lapses INTEGER NOT NULL DEFAULT 0,
    new_stability REAL NOT NULL DEFAULT 2.5,
    new_difficulty REAL NOT NULL DEFAULT 5.0,
    old_interval_minutes INTEGER NOT NULL,
    new_interval_minutes INTEGER NOT NULL,
    old_due_at TEXT NOT NULL,
    new_due_at TEXT NOT NULL,
    elapsed_days REAL NOT NULL,
    retrievability REAL NOT NULL,
    request_retention REAL NOT NULL,
    profile TEXT NOT NULL DEFAULT 'STANDARD' CHECK (profile IN ('INTENSIVE', 'STANDARD')),
    maximum_interval_days INTEGER NOT NULL,
    min_minutes INTEGER NOT NULL,
    fsrs_weights_version TEXT NOT NULL,
    scheduler_version TEXT NOT NULL,
    note_model_id TEXT,
    card_template_id TEXT,
    content_hash TEXT,
    client TEXT,
    FOREIGN KEY (flashcard_id) REFERENCES flashcards(id),
    FOREIGN KEY (session_id) REFERENCES review_sessions(id)
  );

  -- Create indexes
  CREATE INDEX IF NOT EXISTS idx_flashcards_deck_id ON flashcards(deck_id);
  CREATE INDEX IF NOT EXISTS idx_flashcards_due_date ON flashcards(due_date);
  CREATE INDEX IF NOT EXISTS idx_review_sessions_deck_id ON review_sessions(deck_id);
  CREATE INDEX IF NOT EXISTS idx_review_logs_flashcard_id ON review_logs(flashcard_id);
  CREATE INDEX IF NOT EXISTS idx_review_logs_session_id ON review_logs(session_id);
  CREATE INDEX IF NOT EXISTS idx_review_logs_reviewed_at ON review_logs(reviewed_at);

  -- Set schema version
  PRAGMA user_version = ${CURRENT_SCHEMA_VERSION};

  COMMIT;
  PRAGMA foreign_keys = ON;
`;
function getColumnNames(db, tableName) {
  try {
    const stmt = db.prepare(`PRAGMA table_info(${tableName})`);
    const columns = [];
    while (stmt.step()) {
      const row = stmt.get();
      columns.push(row[1]);
    }
    stmt.free();
    return columns;
  } catch (e) {
    return [];
  }
}
function buildMigrationSQL(db) {
  const decksColumns = getColumnNames(db, "decks");
  const flashcardsColumns = getColumnNames(db, "flashcards");
  const reviewLogsColumns = getColumnNames(db, "review_logs");
  const reviewSessionsColumns = getColumnNames(db, "review_sessions");
  const decksSelect = [
    "id",
    "name",
    decksColumns.includes("filepath") ? "filepath" : `'' as filepath`,
    "tag",
    "last_reviewed",
    decksColumns.includes("config") ? "config" : `'{"hasNewCardsLimitEnabled":false,"newCardsPerDay":20,"hasReviewCardsLimitEnabled":false,"reviewCardsPerDay":100,"headerLevel":2,"reviewOrder":"due-date","fsrs":{"requestRetention":0.9,"profile":"STANDARD"}}' as config`,
    decksColumns.includes("created") ? "created" : `datetime('now') as created`,
    decksColumns.includes("modified") ? "modified" : `datetime('now') as modified`
  ].join(", ");
  const flashcardsSelect = [
    "id",
    "deck_id",
    "front",
    "back",
    flashcardsColumns.includes("type") ? "type" : `'header-paragraph' as type`,
    flashcardsColumns.includes("source_file") ? "source_file" : `'' as source_file`,
    flashcardsColumns.includes("content_hash") ? "content_hash" : `'' as content_hash`,
    flashcardsColumns.includes("state") ? "state" : `'new' as state`,
    flashcardsColumns.includes("due_date") ? "due_date" : `datetime('now') as due_date`,
    flashcardsColumns.includes("interval") ? "interval" : `0 as interval`,
    flashcardsColumns.includes("repetitions") ? "repetitions" : `0 as repetitions`,
    flashcardsColumns.includes("difficulty") ? "difficulty" : `5.0 as difficulty`,
    flashcardsColumns.includes("stability") ? "stability" : `0 as stability`,
    flashcardsColumns.includes("lapses") ? "lapses" : `0 as lapses`,
    "last_reviewed",
    "created",
    "modified"
  ].join(", ");
  const reviewLogsSelect = [
    "id",
    "flashcard_id",
    reviewLogsColumns.includes("session_id") ? "session_id" : "NULL as session_id",
    reviewLogsColumns.includes("last_reviewed_at") ? "last_reviewed_at" : `datetime('now') as last_reviewed_at`,
    reviewLogsColumns.includes("shown_at") ? "shown_at" : "NULL as shown_at",
    reviewLogsColumns.includes("reviewed_at") ? "reviewed_at" : `datetime('now') as reviewed_at`,
    reviewLogsColumns.includes("rating") ? "rating" : `3 as rating`,
    reviewLogsColumns.includes("rating_label") ? "rating_label" : `'good' as rating_label`,
    reviewLogsColumns.includes("time_elapsed_ms") ? "time_elapsed_ms" : "NULL as time_elapsed_ms",
    reviewLogsColumns.includes("old_state") ? "old_state" : `'new' as old_state`,
    reviewLogsColumns.includes("old_repetitions") ? "old_repetitions" : `0 as old_repetitions`,
    reviewLogsColumns.includes("old_lapses") ? "old_lapses" : `0 as old_lapses`,
    reviewLogsColumns.includes("old_stability") ? "old_stability" : `0 as old_stability`,
    reviewLogsColumns.includes("old_difficulty") ? "old_difficulty" : `5.0 as old_difficulty`,
    reviewLogsColumns.includes("new_state") ? "new_state" : `'review' as new_state`,
    reviewLogsColumns.includes("new_repetitions") ? "new_repetitions" : `1 as new_repetitions`,
    reviewLogsColumns.includes("new_lapses") ? "new_lapses" : `0 as new_lapses`,
    reviewLogsColumns.includes("new_stability") ? "new_stability" : `2.5 as new_stability`,
    reviewLogsColumns.includes("new_difficulty") ? "new_difficulty" : `5.0 as new_difficulty`,
    reviewLogsColumns.includes("old_interval_minutes") ? "old_interval_minutes" : `0 as old_interval_minutes`,
    reviewLogsColumns.includes("new_interval_minutes") ? "new_interval_minutes" : `1440 as new_interval_minutes`,
    reviewLogsColumns.includes("old_due_at") ? "old_due_at" : `datetime('now') as old_due_at`,
    reviewLogsColumns.includes("new_due_at") ? "new_due_at" : `datetime('now', '+1 day') as new_due_at`,
    reviewLogsColumns.includes("elapsed_days") ? "elapsed_days" : `1.0 as elapsed_days`,
    reviewLogsColumns.includes("retrievability") ? "retrievability" : `0.9 as retrievability`,
    reviewLogsColumns.includes("request_retention") ? "request_retention" : `0.9 as request_retention`,
    reviewLogsColumns.includes("profile") ? "profile" : `'STANDARD' as profile`,
    reviewLogsColumns.includes("maximum_interval_days") ? "maximum_interval_days" : `36500 as maximum_interval_days`,
    reviewLogsColumns.includes("min_minutes") ? "min_minutes" : `1 as min_minutes`,
    reviewLogsColumns.includes("fsrs_weights_version") ? "fsrs_weights_version" : `'1.0' as fsrs_weights_version`,
    reviewLogsColumns.includes("scheduler_version") ? "scheduler_version" : `'1.0' as scheduler_version`,
    reviewLogsColumns.includes("note_model_id") ? "note_model_id" : "NULL as note_model_id",
    reviewLogsColumns.includes("card_template_id") ? "card_template_id" : "NULL as card_template_id",
    reviewLogsColumns.includes("content_hash") ? "content_hash" : "NULL as content_hash",
    reviewLogsColumns.includes("client") ? "client" : "NULL as client"
  ].join(", ");
  const reviewSessionsSelect = [
    "id",
    "deck_id",
    "started_at",
    "ended_at",
    "goal_total",
    "done_unique"
  ].join(", ");
  return `
    PRAGMA foreign_keys = OFF;
    BEGIN;

    -- Create new tables
    CREATE TABLE decks_new (
      id TEXT PRIMARY KEY,
      name TEXT NOT NULL,
      filepath TEXT NOT NULL UNIQUE,
      tag TEXT NOT NULL,
      last_reviewed TEXT,
      config TEXT NOT NULL DEFAULT '{"hasNewCardsLimitEnabled":false,"newCardsPerDay":20,"hasReviewCardsLimitEnabled":false,"reviewCardsPerDay":100,"headerLevel":2,"reviewOrder":"due-date","fsrs":{"requestRetention":0.9,"profile":"STANDARD"}}',
      created TEXT NOT NULL,
      modified TEXT NOT NULL
    );

    CREATE TABLE flashcards_new (
      id TEXT PRIMARY KEY,
      deck_id TEXT NOT NULL,
      front TEXT NOT NULL,
      back TEXT NOT NULL,
      type TEXT NOT NULL CHECK (type IN ('header-paragraph', 'table')),
      source_file TEXT NOT NULL,
      content_hash TEXT NOT NULL,

      state TEXT NOT NULL CHECK (state IN ('new', 'review')),
      due_date TEXT NOT NULL,
      interval REAL NOT NULL,
      repetitions INTEGER NOT NULL DEFAULT 0,
      difficulty REAL NOT NULL DEFAULT 5.0,
      stability REAL NOT NULL DEFAULT 0,
      lapses INTEGER NOT NULL DEFAULT 0,
      last_reviewed TEXT,
      created TEXT NOT NULL,
      modified TEXT NOT NULL,
      FOREIGN KEY (deck_id) REFERENCES decks(id)
    );

    CREATE TABLE review_sessions_new (
      id TEXT PRIMARY KEY,
      deck_id TEXT NOT NULL,
      started_at TEXT NOT NULL,
      ended_at TEXT,
      goal_total INTEGER NOT NULL,
      done_unique INTEGER NOT NULL DEFAULT 0,
      FOREIGN KEY (deck_id) REFERENCES decks_new(id)
    );

    CREATE TABLE review_logs_new (
      id TEXT PRIMARY KEY,
      flashcard_id TEXT NOT NULL,
      session_id TEXT,
      last_reviewed_at TEXT NOT NULL,
      shown_at TEXT,
      reviewed_at TEXT NOT NULL,
      rating INTEGER NOT NULL CHECK (rating IN (1, 2, 3, 4)),
      rating_label TEXT NOT NULL CHECK (rating_label IN ('again', 'hard', 'good', 'easy')),
      time_elapsed_ms INTEGER,
      old_state TEXT NOT NULL CHECK (old_state IN ('new', 'review')),
      old_repetitions INTEGER NOT NULL DEFAULT 0,
      old_lapses INTEGER NOT NULL DEFAULT 0,
      old_stability REAL NOT NULL DEFAULT 0,
      old_difficulty REAL NOT NULL DEFAULT 5.0,
      new_state TEXT NOT NULL CHECK (new_state IN ('new', 'review')),
      new_repetitions INTEGER NOT NULL DEFAULT 0,
      new_lapses INTEGER NOT NULL DEFAULT 0,
      new_stability REAL NOT NULL DEFAULT 2.5,
      new_difficulty REAL NOT NULL DEFAULT 5.0,
      old_interval_minutes INTEGER NOT NULL,
      new_interval_minutes INTEGER NOT NULL,
      old_due_at TEXT NOT NULL,
      new_due_at TEXT NOT NULL,
      elapsed_days REAL NOT NULL,
      retrievability REAL NOT NULL,
      request_retention REAL NOT NULL,
      profile TEXT NOT NULL DEFAULT 'STANDARD' CHECK (profile IN ('INTENSIVE', 'STANDARD')),
      maximum_interval_days INTEGER NOT NULL,
      min_minutes INTEGER NOT NULL,
      fsrs_weights_version TEXT NOT NULL,
      scheduler_version TEXT NOT NULL,
      note_model_id TEXT,
      card_template_id TEXT,
      content_hash TEXT,
      client TEXT,
      FOREIGN KEY (flashcard_id) REFERENCES flashcards(id),
      FOREIGN KEY (session_id) REFERENCES review_sessions(id)
    );

    -- Copy data with dynamic column mapping
    INSERT OR IGNORE INTO decks_new (id, name, filepath, tag, last_reviewed, config, created, modified)
    SELECT ${decksSelect} FROM decks WHERE EXISTS (SELECT 1 FROM sqlite_master WHERE type='table' AND name='decks');

    INSERT OR IGNORE INTO flashcards_new (id, deck_id, front, back, type, source_file, content_hash, state, due_date, interval, repetitions, difficulty, stability, lapses, last_reviewed, created, modified)
    SELECT ${flashcardsSelect} FROM flashcards WHERE EXISTS (SELECT 1 FROM sqlite_master WHERE type='table' AND name='flashcards');

    INSERT OR IGNORE INTO review_logs_new (id, flashcard_id, session_id, last_reviewed_at, shown_at, reviewed_at, rating, rating_label, time_elapsed_ms, old_state, old_repetitions, old_lapses, old_stability, old_difficulty, new_state, new_repetitions, new_lapses, new_stability, new_difficulty, old_interval_minutes, new_interval_minutes, old_due_at, new_due_at, elapsed_days, retrievability, request_retention, profile, maximum_interval_days, min_minutes, fsrs_weights_version, scheduler_version, note_model_id, card_template_id, content_hash, client)
    SELECT ${reviewLogsSelect} FROM review_logs WHERE EXISTS (SELECT 1 FROM sqlite_master WHERE type='table' AND name='review_logs');

    INSERT OR IGNORE INTO review_sessions_new (id, deck_id, started_at, ended_at, goal_total, done_unique)
    SELECT ${reviewSessionsSelect} FROM review_sessions WHERE EXISTS (SELECT 1 FROM sqlite_master WHERE type='table' AND name='review_logs');

    -- Drop old tables
    DROP TABLE IF EXISTS review_logs;
    DROP TABLE IF EXISTS flashcards;
    DROP TABLE IF EXISTS decks;
    DROP TABLE IF EXISTS review_sessions;

    -- Rename new tables
    ALTER TABLE decks_new RENAME TO decks;
    ALTER TABLE flashcards_new RENAME TO flashcards;
    ALTER TABLE review_sessions_new RENAME TO review_sessions;
    ALTER TABLE review_logs_new RENAME TO review_logs;

    -- Create indexes
    CREATE INDEX IF NOT EXISTS idx_flashcards_deck_id ON flashcards(deck_id);
    CREATE INDEX IF NOT EXISTS idx_flashcards_due_date ON flashcards(due_date);
    CREATE INDEX IF NOT EXISTS idx_review_sessions_deck_id ON review_sessions(deck_id);
    CREATE INDEX IF NOT EXISTS idx_review_logs_flashcard_id ON review_logs(flashcard_id);
    CREATE INDEX IF NOT EXISTS idx_review_logs_session_id ON review_logs(session_id);
    CREATE INDEX IF NOT EXISTS idx_review_logs_reviewed_at ON review_logs(reviewed_at);

    -- Set schema version
    PRAGMA user_version = ${CURRENT_SCHEMA_VERSION};

    COMMIT;
    PRAGMA foreign_keys = ON;
  `;
}
var SQL_QUERIES = {
  // Deck operations
  INSERT_DECK: `
    INSERT OR REPLACE INTO decks (
      id, name, filepath, tag, last_reviewed, config, created, modified
    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?)
  `,
  GET_DECK_BY_TAG: `SELECT * FROM decks WHERE tag = ?`,
  GET_DECK_BY_FILEPATH: `SELECT * FROM decks WHERE filepath = ?`,
  GET_DECK_BY_ID: `SELECT * FROM decks WHERE id = ?`,
  GET_ALL_DECKS: `SELECT * FROM decks ORDER BY name`,
  UPDATE_DECK_TIMESTAMP: `
    UPDATE decks
    SET modified = ?
    WHERE id = ?
  `,
  UPDATE_DECK_LAST_REVIEWED: `
    UPDATE decks
    SET last_reviewed = ?, modified = ?
    WHERE id = ?
  `,
  RENAME_DECK: `
    UPDATE decks
    SET id = ?, name = ?, filepath = ?, modified = ?
    WHERE id = ?
  `,
  DELETE_DECK_BY_FILEPATH: `DELETE FROM decks WHERE filepath = ?`,
  DELETE_DECK: `DELETE FROM decks WHERE id = ?`,
  // Flashcard operations
  INSERT_FLASHCARD: `
    INSERT OR REPLACE INTO flashcards (
      id, deck_id, front, back, type, source_file, content_hash,
      state, due_date, interval, repetitions,
      difficulty, stability, lapses, last_reviewed, created, modified
    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)

  `,
  DELETE_FLASHCARD: `DELETE FROM flashcards WHERE id = ?`,
  UPDATE_FLASHCARD_DECK_IDS: `
    UPDATE flashcards SET deck_id = ? WHERE deck_id = ?
  `,
  GET_FLASHCARDS_BY_DECK: `SELECT * FROM flashcards WHERE deck_id = ? ORDER BY created`,
  GET_DUE_FLASHCARDS: `SELECT * FROM flashcards WHERE deck_id = ? AND due_date <= ? ORDER BY due_date`,
  DELETE_FLASHCARDS_BY_FILE: `DELETE FROM flashcards WHERE source_file = ?`,
  GET_NEW_CARDS_FOR_REVIEW: `
    SELECT * FROM flashcards
    WHERE deck_id = ? AND due_date <= ? AND state = 'new'
    ORDER BY due_date
  `,
  GET_REVIEW_CARDS_FOR_REVIEW: `
    SELECT * FROM flashcards
    WHERE deck_id = ? AND due_date <= ? AND state = 'review'
    ORDER BY due_date
  `,
  // Review log operations
  INSERT_REVIEW_LOG: `
    INSERT INTO review_logs (
      id, flashcard_id, session_id, last_reviewed_at, shown_at, reviewed_at,
      rating, rating_label, time_elapsed_ms,
      old_state, old_repetitions, old_lapses, old_stability, old_difficulty,
      new_state, new_repetitions, new_lapses, new_stability, new_difficulty,
      old_interval_minutes, new_interval_minutes, old_due_at, new_due_at,
      elapsed_days, retrievability,
      request_retention, profile, maximum_interval_days, min_minutes,
      fsrs_weights_version, scheduler_version,
      note_model_id, card_template_id, content_hash, client
    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
  `,
  GET_LATEST_REVIEW_LOG: `
    SELECT
      rl.id, rl.flashcard_id, rl.last_reviewed_at, rl.shown_at, rl.reviewed_at,
      rl.rating, rl.rating_label, rl.time_elapsed_ms,
      rl.old_state, rl.old_repetitions, rl.old_lapses, rl.old_stability, rl.old_difficulty,
      rl.new_state, rl.new_repetitions, rl.new_lapses, rl.new_stability, rl.new_difficulty,
      rl.old_interval_minutes, rl.new_interval_minutes, rl.old_due_at, rl.new_due_at,
      rl.elapsed_days, rl.retrievability,
      rl.request_retention, rl.profile, rl.maximum_interval_days, rl.min_minutes,
      rl.fsrs_weights_version, rl.scheduler_version,
      rl.note_model_id, rl.card_template_id, rl.content_hash, rl.client
    FROM review_logs rl
    WHERE rl.flashcard_id = ?
    ORDER BY rl.reviewed_at DESC
    LIMIT 1
  `,
  // Daily review counts
  COUNT_NEW_CARDS_TODAY: `
    SELECT COUNT(*) as count FROM review_logs rl
    JOIN flashcards f ON rl.flashcard_id = f.id
    WHERE f.deck_id = ?
      AND rl.reviewed_at >= ?
      AND rl.reviewed_at <= ?
      AND (rl.old_interval_minutes = 0 OR f.repetitions = 1)
  `,
  COUNT_REVIEW_CARDS_TODAY: `
    SELECT COUNT(*) as count FROM review_logs rl
    JOIN flashcards f ON rl.flashcard_id = f.id
    WHERE f.deck_id = ?
      AND rl.reviewed_at >= ? AND rl.reviewed_at <= ?
      AND rl.old_interval_minutes > 0
  `,
  // Statistics queries
  COUNT_NEW_CARDS: `
    SELECT COUNT(*) FROM flashcards
    WHERE deck_id = ? AND state = 'new' AND due_date <= ?
  `,
  COUNT_DUE_CARDS: `
    SELECT COUNT(*) FROM flashcards
    WHERE deck_id = ? AND state = 'review' AND due_date <= ?
  `,
  COUNT_TOTAL_CARDS: `
    SELECT COUNT(*) FROM flashcards WHERE deck_id = ?
  `,
  GET_REVIEW_COUNTS_BY_DATE: `
    SELECT DATE(reviewed_at) as review_date, COUNT(*) as count
    FROM review_logs
    WHERE reviewed_at >= ? AND reviewed_at <= ?
    GROUP BY DATE(reviewed_at)
    ORDER BY review_date
  `,
  // Migration helpers
  CHECK_EXISTING_TABLES: `
    SELECT name FROM sqlite_master
    WHERE type='table' AND name IN ('decks', 'flashcards', 'review_logs')
  `,
  // Statistics queries for overall stats
  GET_DAILY_STATS: `
    SELECT
      DATE(reviewed_at) as date,
      COUNT(*) as reviews,
      AVG(time_elapsed_ms / 1000.0) as avg_time_seconds,
      SUM(CASE WHEN old_repetitions = 0 THEN 1 ELSE 0 END) as new_cards,
      SUM(CASE WHEN old_repetitions > 0 AND old_repetitions < 3 THEN 1 ELSE 0 END) as learning_cards,
      SUM(CASE WHEN old_repetitions >= 3 THEN 1 ELSE 0 END) as review_cards,
      AVG(CASE WHEN rating >= 3 THEN 1.0 ELSE 0.0 END) as correct_rate
    FROM review_logs rl
    WHERE rl.reviewed_at >= ? AND rl.reviewed_at <= ?
    GROUP BY DATE(reviewed_at)
    ORDER BY date
  `,
  GET_DAILY_STATS_OVERALL: `
    SELECT
      DATE(reviewed_at) as date,
      COUNT(*) as reviews,
      COUNT(CASE WHEN rating_label != 'again' THEN 1 END) as correct,
      COUNT(CASE WHEN f.state = 'new' THEN 1 END) as new_cards,
      COUNT(CASE WHEN f.state = 'review' THEN 1 END) as review_cards
    FROM review_logs rl
    JOIN flashcards f ON rl.flashcard_id = f.id
    WHERE DATE(reviewed_at) >= DATE(?)
    GROUP BY DATE(reviewed_at)
    ORDER BY date DESC
  `,
  GET_CARD_STATS: `
    SELECT
      CASE
        WHEN f.state = 'new' THEN 'new'
        WHEN f.state = 'review' AND f.interval > 30240 THEN 'mature'
        ELSE 'review'
      END as card_type,
      COUNT(*) as count
    FROM flashcards f
    GROUP BY card_type
  `,
  GET_ANSWER_BUTTON_STATS: `
    SELECT
      rl.rating_label,
      COUNT(*) as count
    FROM review_logs rl
    WHERE rl.reviewed_at >= ? AND rl.reviewed_at <= ?
    GROUP BY rl.rating_label
  `,
  GET_INTERVAL_DISTRIBUTION: `
    SELECT
      CASE
        WHEN f.interval < 1440 THEN '<1d'
        WHEN f.interval < 10080 THEN '1-7d'
        WHEN f.interval < 43200 THEN '1-4w'
        WHEN f.interval < 129600 THEN '1-3m'
        WHEN f.interval < 525600 THEN '3-12m'
        ELSE '>1y'
      END as interval_range,
      COUNT(*) as count
    FROM flashcards f
    WHERE f.state = 'review'
    GROUP BY interval_range
    ORDER BY
      CASE interval_range
        WHEN '<1d' THEN 1
        WHEN '1-7d' THEN 2
        WHEN '1-4w' THEN 3
        WHEN '1-3m' THEN 4
        WHEN '3-12m' THEN 5
        WHEN '>1y' THEN 6
      END
  `,
  GET_FORECAST_DUE_COUNT: `
    SELECT COUNT(*) as due_count
    FROM flashcards f
    WHERE DATE(f.due_date) = DATE(?)
  `,
  GET_PACE_STATS: `
    SELECT
      AVG(rl.time_elapsed_ms / 1000.0) as avg_pace,
      SUM(rl.time_elapsed_ms / 1000.0) as total_time
    FROM review_logs rl
    WHERE rl.reviewed_at >= ? AND rl.reviewed_at <= ?
      AND rl.time_elapsed_ms IS NOT NULL
      AND rl.time_elapsed_ms > 0
  `,
  // Review Session operations
  INSERT_REVIEW_SESSION: `
    INSERT INTO review_sessions (
      id, deck_id, started_at, ended_at, goal_total, done_unique
    ) VALUES (?, ?, ?, ?, ?, ?)
  `,
  GET_REVIEW_SESSION_BY_ID: `SELECT * FROM review_sessions WHERE id = ?`,
  UPDATE_REVIEW_SESSION_DONE_UNIQUE: `
    UPDATE review_sessions
    SET done_unique = ?
    WHERE id = ?
  `,
  UPDATE_REVIEW_SESSION_END: `
    UPDATE review_sessions
    SET ended_at = ?
    WHERE id = ?
  `,
  GET_ACTIVE_REVIEW_SESSION: `
    SELECT * FROM review_sessions
    WHERE deck_id = ? AND ended_at IS NULL
    ORDER BY started_at DESC
    LIMIT 1
  `,
  CHECK_CARD_REVIEWED_IN_SESSION: `
    SELECT COUNT(*) as count
    FROM review_logs
    WHERE session_id = ? AND flashcard_id = ?
  `
};
var BACKUP_TABLES_SQL = `
  CREATE TABLE review_logs (
    id TEXT PRIMARY KEY,
    flashcard_id TEXT NOT NULL,
    session_id TEXT,
    last_reviewed_at TEXT NOT NULL,
    shown_at TEXT,
    reviewed_at TEXT NOT NULL,
    rating INTEGER NOT NULL CHECK (rating IN (1, 2, 3, 4)),
    rating_label TEXT NOT NULL CHECK (rating_label IN ('again', 'hard', 'good', 'easy')),
    time_elapsed_ms INTEGER,
    old_state TEXT NOT NULL CHECK (old_state IN ('new', 'review')),
    old_repetitions INTEGER NOT NULL DEFAULT 0,
    old_lapses INTEGER NOT NULL DEFAULT 0,
    old_stability REAL NOT NULL DEFAULT 0,
    old_difficulty REAL NOT NULL DEFAULT 5.0,
    new_state TEXT NOT NULL CHECK (new_state IN ('new', 'review')),
    new_repetitions INTEGER NOT NULL DEFAULT 0,
    new_lapses INTEGER NOT NULL DEFAULT 0,
    new_stability REAL NOT NULL DEFAULT 2.5,
    new_difficulty REAL NOT NULL DEFAULT 5.0,
    old_interval_minutes INTEGER NOT NULL,
    new_interval_minutes INTEGER NOT NULL,
    old_due_at TEXT NOT NULL,
    new_due_at TEXT NOT NULL,
    elapsed_days REAL NOT NULL,
    retrievability REAL NOT NULL,
    request_retention REAL NOT NULL,
    profile TEXT NOT NULL DEFAULT 'STANDARD' CHECK (profile IN ('INTENSIVE', 'STANDARD')),
    maximum_interval_days INTEGER NOT NULL,
    min_minutes INTEGER NOT NULL,
    fsrs_weights_version TEXT NOT NULL,
    scheduler_version TEXT NOT NULL,
    note_model_id TEXT,
    card_template_id TEXT,
    content_hash TEXT,
    client TEXT
  );

  CREATE TABLE review_sessions (
    id TEXT PRIMARY KEY,
    deck_id TEXT NOT NULL,
    started_at TEXT NOT NULL,
    ended_at TEXT,
    goal_total INTEGER NOT NULL,
    done_unique INTEGER NOT NULL DEFAULT 0
  );
`;

// src/database/migrations.ts
function getCurrentSchemaVersion(db) {
  try {
    const stmt = db.prepare(`PRAGMA user_version`);
    let version = 0;
    if (stmt.step()) {
      const row = stmt.get();
      version = Number(row[0]) || 0;
    }
    stmt.free();
    return version;
  } catch (error) {
    return 0;
  }
}
function needsMigration(db) {
  return getCurrentSchemaVersion(db) !== CURRENT_SCHEMA_VERSION;
}
function createTables(db, debugLog) {
  const log = debugLog || (() => {
  });
  try {
    log(`Creating fresh database schema (version ${CURRENT_SCHEMA_VERSION})`);
    db.run(CREATE_TABLES_SQL);
    log(`\u2705 Database schema created successfully`);
  } catch (error) {
    log(`\u274C Schema creation failed: ${error}`);
    throw new Error(`Schema creation failed: ${error}`);
  }
}
function migrate(db, debugLog) {
  const log = debugLog || (() => {
  });
  const currentVersion = getCurrentSchemaVersion(db);
  if (currentVersion === CURRENT_SCHEMA_VERSION) {
    log(`Schema is already up to date (version ${CURRENT_SCHEMA_VERSION})`);
    return;
  }
  log(
    `Migrating schema from version ${currentVersion} to ${CURRENT_SCHEMA_VERSION}`
  );
  try {
    db.run(CREATE_TABLES_SQL);
    const migrationSQL = buildMigrationSQL(db);
    db.run(migrationSQL);
    log(`\u2705 Migration completed successfully`);
  } catch (error) {
    log(`\u274C Migration failed: ${error}`);
  }
}

// src/utils/ui.ts
async function yieldToUI() {
  await new Promise((resolve) => {
    if (typeof requestAnimationFrame !== "undefined") {
      requestAnimationFrame(() => resolve(null));
    } else {
      setTimeout(() => resolve(null), 0);
    }
  });
}
async function yieldEvery(currentIndex, yieldInterval = 100) {
  if (currentIndex > 0 && currentIndex % yieldInterval === 0) {
    await yieldToUI();
  }
}

// src/database/DatabaseService.ts
var DatabaseService = class {
  constructor(dbPath, adapter, debugLog) {
    this.db = null;
    this.SQL = null;
    this.dbPath = dbPath;
    this.adapter = adapter;
    this.debugLog = debugLog;
  }
  async initialize() {
    try {
      this.SQL = await (0, import_sql.default)({
        locateFile: (file7) => `https://sql.js.org/dist/${file7}`
      });
      const buffer = await this.loadDatabaseFile();
      if (buffer) {
        this.db = new this.SQL.Database(new Uint8Array(buffer));
        await this.migrateSchemaIfNeeded();
      } else {
        this.db = new this.SQL.Database();
        await this.createFreshDatabase();
      }
    } catch (error) {
      console.error("Failed to initialize database:", error);
      throw error;
    }
  }
  async loadDatabaseFile() {
    try {
      if (await this.adapter.exists(this.dbPath)) {
        const data = await this.adapter.readBinary(this.dbPath);
        return data;
      }
      return null;
    } catch (error) {
      this.debugLog("Database file doesn't exist yet, will create new one");
      return null;
    }
  }
  async save() {
    if (!this.db)
      throw new Error("Database not initialized");
    try {
      const data = this.db.export();
      const dir = this.dbPath.substring(0, this.dbPath.lastIndexOf("/"));
      if (!await this.adapter.exists(dir)) {
        await this.adapter.mkdir(dir);
      }
      await this.adapter.writeBinary(this.dbPath, data);
      this.debugLog("Database saved successfully!");
    } catch (error) {
      console.error("Failed to save database:", error);
      throw error;
    }
  }
  // Generic CRUD helper methods
  executeStatement(sql, params = []) {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(sql);
    try {
      stmt.run(params);
    } finally {
      stmt.free();
    }
  }
  async executeStatementWithCallback(sql, params, callback) {
    if (!this.db)
      throw new Error("Database not initialized");
    let stmt;
    try {
      stmt = this.db.prepare(sql);
      stmt.run(params);
      stmt.free();
      stmt = null;
      if (callback) {
        await callback();
      }
    } catch (error) {
      if (stmt) {
        try {
          stmt.free();
        } catch (freeError) {
          console.error(`Failed to free statement:`, freeError);
        }
      }
      throw error;
    }
  }
  queryAll(sql, params = [], parser) {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(sql);
    const results = [];
    try {
      if (params.length > 0) {
        stmt.bind(params);
      }
      while (stmt.step()) {
        results.push(parser(stmt.get()));
      }
    } finally {
      stmt.free();
    }
    return results;
  }
  queryOne(sql, params = [], parser) {
    const results = this.queryAll(sql, params, parser);
    return results.length > 0 ? results[0] : null;
  }
  // Transaction methods
  beginTransaction() {
    if (!this.db)
      throw new Error("Database not initialized");
    this.db.run("BEGIN TRANSACTION;");
  }
  commitTransaction() {
    if (!this.db)
      throw new Error("Database not initialized");
    this.db.run("COMMIT;");
  }
  rollbackTransaction() {
    if (!this.db)
      throw new Error("Database not initialized");
    this.db.run("ROLLBACK;");
  }
  // Batch operations using single prepared statements
  batchCreateFlashcards(flashcards) {
    if (!this.db)
      throw new Error("Database not initialized");
    if (flashcards.length === 0)
      return;
    const stmt = this.db.prepare(SQL_QUERIES.INSERT_FLASHCARD);
    const now = (/* @__PURE__ */ new Date()).toISOString();
    try {
      for (const flashcard of flashcards) {
        stmt.run([
          flashcard.id,
          flashcard.deckId,
          flashcard.front,
          flashcard.back,
          flashcard.type,
          flashcard.sourceFile,
          flashcard.contentHash,
          flashcard.state,
          flashcard.dueDate,
          flashcard.interval,
          flashcard.repetitions,
          flashcard.difficulty,
          flashcard.stability,
          flashcard.lapses,
          flashcard.lastReviewed,
          now,
          // created
          now
          // modified
        ]);
      }
    } finally {
      stmt.free();
    }
  }
  batchUpdateFlashcards(updates) {
    if (!this.db)
      throw new Error("Database not initialized");
    if (updates.length === 0)
      return;
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const updateGroups = /* @__PURE__ */ new Map();
    for (const { id, updates: updateData } of updates) {
      const fields = [];
      const values = [];
      for (const [key, value] of Object.entries(updateData)) {
        if (value !== void 0) {
          const dbField = key === "dueDate" ? "due_date" : key === "lastReviewed" ? "last_reviewed" : key === "contentHash" ? "content_hash" : key;
          fields.push(`${dbField} = ?`);
          values.push(value);
        }
      }
      if (fields.length === 0)
        continue;
      fields.push("modified = ?");
      values.push(now, id);
      const fieldSignature = fields.slice(0, -1).join(",");
      if (!updateGroups.has(fieldSignature)) {
        updateGroups.set(fieldSignature, []);
      }
      updateGroups.get(fieldSignature).push({ id, values });
    }
    for (const [fieldSignature, groupUpdates] of updateGroups) {
      const fields = fieldSignature.split(",").map((f) => f.trim());
      fields.push("modified = ?");
      const sql = `UPDATE flashcards SET ${fields.join(", ")} WHERE id = ?`;
      const stmt = this.db.prepare(sql);
      try {
        for (const { values } of groupUpdates) {
          stmt.run(values);
        }
      } finally {
        stmt.free();
      }
    }
  }
  batchDeleteFlashcards(flashcardIds) {
    if (!this.db)
      throw new Error("Database not initialized");
    if (flashcardIds.length === 0)
      return;
    const stmt = this.db.prepare(SQL_QUERIES.DELETE_FLASHCARD);
    try {
      for (const id of flashcardIds) {
        stmt.run([id]);
      }
    } finally {
      stmt.free();
    }
  }
  async createFreshDatabase() {
    if (!this.db)
      throw new Error("Database not initialized");
    try {
      this.debugLog("Creating fresh database schema...");
      createTables(this.db, this.debugLog.bind(this));
      await this.save();
      this.debugLog("Fresh database created successfully");
    } catch (error) {
      this.debugLog(`Fresh database creation failed: ${error}`);
      throw new Error(`Fresh database creation failed: ${error}`);
    }
  }
  // Helper method to parse deck rows
  parseDeckRow(row) {
    let config = DEFAULT_DECK_CONFIG;
    if (row[5]) {
      try {
        config = JSON.parse(row[5]);
      } catch (error) {
        this.debugLog(
          `Failed to parse deck config JSON: ${row[5]}, using default config. Error: ${error}`
        );
        config = DEFAULT_DECK_CONFIG;
      }
    }
    if (!config.fsrs) {
      config = {
        ...config,
        fsrs: DEFAULT_DECK_CONFIG.fsrs
      };
    }
    if (config.hasNewCardsLimitEnabled === void 0) {
      config = {
        ...config,
        hasNewCardsLimitEnabled: config.newCardsPerDay >= 0,
        hasReviewCardsLimitEnabled: config.reviewCardsPerDay >= 0,
        newCardsPerDay: config.newCardsPerDay >= 0 ? config.newCardsPerDay || 20 : 20,
        reviewCardsPerDay: config.reviewCardsPerDay >= 0 ? config.reviewCardsPerDay || 100 : 100
      };
    }
    const legacyConfig = config;
    if (config.newCardsPerDay === void 0 && legacyConfig.newCardsLimit !== void 0) {
      config = {
        ...config,
        hasNewCardsLimitEnabled: legacyConfig.enableNewCardsLimit || false,
        newCardsPerDay: legacyConfig.newCardsLimit || 20,
        hasReviewCardsLimitEnabled: legacyConfig.enableReviewCardsLimit || false,
        reviewCardsPerDay: legacyConfig.reviewCardsLimit || 100
      };
    }
    if (config.headerLevel === void 0) {
      config = {
        ...config,
        headerLevel: DEFAULT_DECK_CONFIG.headerLevel
      };
    }
    return {
      id: row[0],
      name: row[1],
      filepath: row[2],
      tag: row[3],
      lastReviewed: row[4],
      config,
      created: row[6],
      modified: row[7]
    };
  }
  // Deck operations
  async createDeck(deck) {
    if (!this.db)
      throw new Error("Database not initialized");
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const fullDeck = {
      ...deck,
      created: now,
      modified: now
    };
    try {
      const stmt = this.db.prepare(SQL_QUERIES.INSERT_DECK);
      stmt.run([
        fullDeck.id,
        fullDeck.name,
        fullDeck.filepath,
        fullDeck.tag,
        fullDeck.lastReviewed,
        JSON.stringify(fullDeck.config),
        fullDeck.created,
        fullDeck.modified
      ]);
      stmt.free();
      return fullDeck;
    } catch (error) {
      throw error;
    }
  }
  async getDeckByTag(tag) {
    return this.queryOne(
      SQL_QUERIES.GET_DECK_BY_TAG,
      [tag],
      this.parseDeckRow.bind(this)
    );
  }
  async getDeckByFilepath(filepath) {
    return this.queryOne(
      SQL_QUERIES.GET_DECK_BY_FILEPATH,
      [filepath],
      this.parseDeckRow.bind(this)
    );
  }
  async getDeckById(id) {
    return this.queryOne(
      SQL_QUERIES.GET_DECK_BY_ID,
      [id],
      this.parseDeckRow.bind(this)
    );
  }
  async updateDeck(deckId, updates) {
    if (!this.db)
      throw new Error("Database not initialized");
    const now = (/* @__PURE__ */ new Date()).toISOString();
    if (Object.keys(updates).length === 0) {
      return;
    }
    const updateFields = Object.keys(updates).map((key) => {
      const dbField = key === "lastReviewed" ? "last_reviewed" : key;
      return `${dbField} = ?`;
    }).join(", ");
    const sql = `UPDATE decks SET ${updateFields}, modified = ? WHERE id = ?`;
    const stmt = this.db.prepare(sql);
    const values = Object.values(updates).map(
      (value, index) => {
        const key = Object.keys(updates)[index];
        return key === "config" ? JSON.stringify(value) : value;
      }
    );
    values.push(now, deckId);
    stmt.run(values);
    stmt.free();
  }
  updateDeckTimestampCore(deckId, timestamp) {
    this.executeStatement(SQL_QUERIES.UPDATE_DECK_TIMESTAMP, [
      timestamp,
      deckId
    ]);
  }
  async updateDeckTimestamp(deckId, timestamp) {
    this.updateDeckTimestampCore(deckId, timestamp);
  }
  // Version without save for use in transactions
  async updateDeckTimestampWithoutSave(deckId, timestamp) {
    this.updateDeckTimestampCore(deckId, timestamp);
  }
  async getAllDecks() {
    return this.queryAll(
      SQL_QUERIES.GET_ALL_DECKS,
      [],
      this.parseDeckRow.bind(this)
    );
  }
  async updateDeckLastReviewed(deckId) {
    const now = (/* @__PURE__ */ new Date()).toISOString();
    this.executeStatement(SQL_QUERIES.UPDATE_DECK_LAST_REVIEWED, [
      now,
      now,
      deckId
    ]);
  }
  async updateDeckHeaderLevel(deckId, headerLevel) {
    if (!this.db)
      throw new Error("Database not initialized");
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const stmt = this.db.prepare(`
      UPDATE decks
      SET header_level = ?, modified = ?
      WHERE id = ?
    `);
    stmt.run([headerLevel, now, deckId]);
    stmt.free();
  }
  async renameDeck(oldDeckId, newDeckId, newName, newFilepath) {
    const now = (/* @__PURE__ */ new Date()).toISOString();
    this.executeStatement(SQL_QUERIES.RENAME_DECK, [
      newDeckId,
      newName,
      newFilepath,
      now,
      oldDeckId
    ]);
  }
  async deleteDeckByFilepath(filepath) {
    if (!this.db)
      throw new Error("Database not initialized");
    const deck = await this.getDeckByFilepath(filepath);
    if (!deck)
      return;
    const stmt = this.db.prepare(SQL_QUERIES.DELETE_DECK_BY_FILEPATH);
    stmt.run([filepath]);
    stmt.free();
  }
  async deleteDeck(deckId) {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(SQL_QUERIES.DELETE_DECK);
    stmt.run([deckId]);
    stmt.free();
  }
  // Flashcard operations
  createFlashcardCore(flashcard) {
    if (!this.db)
      throw new Error("Database not initialized");
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const fullFlashcard = {
      ...flashcard,
      created: now,
      modified: now
    };
    let stmt;
    try {
      stmt = this.db.prepare(SQL_QUERIES.INSERT_FLASHCARD);
      stmt.run([
        fullFlashcard.id,
        fullFlashcard.deckId,
        fullFlashcard.front,
        fullFlashcard.back,
        fullFlashcard.type,
        fullFlashcard.sourceFile,
        fullFlashcard.contentHash,
        fullFlashcard.state,
        fullFlashcard.dueDate,
        flashcard.interval,
        flashcard.repetitions,
        flashcard.difficulty,
        flashcard.stability,
        flashcard.lapses,
        fullFlashcard.lastReviewed,
        fullFlashcard.created,
        fullFlashcard.modified
      ]);
      stmt.free();
      return fullFlashcard;
    } catch (error) {
      console.error(`Failed to create flashcard ${fullFlashcard.id}:`, error);
      if (stmt) {
        try {
          stmt.free();
        } catch (freeError) {
          console.error(`Failed to free statement:`, freeError);
        }
      }
      throw error;
    }
  }
  async createFlashcard(flashcard) {
    const result = this.createFlashcardCore(flashcard);
    return result;
  }
  // Version without save for use in transactions
  async createFlashcardWithoutSave(flashcard) {
    return this.createFlashcardCore(flashcard);
  }
  updateFlashcardCore(flashcardId, updates) {
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const fields = [];
    const values = [];
    for (const [key, value] of Object.entries(updates)) {
      if (value !== void 0) {
        const dbField = key === "dueDate" ? "due_date" : key === "lastReviewed" ? "last_reviewed" : key === "contentHash" ? "content_hash" : key;
        fields.push(`${dbField} = ?`);
        values.push(value);
      }
    }
    if (fields.length === 0)
      return;
    fields.push("modified = ?");
    values.push(now, flashcardId);
    const sql = `UPDATE flashcards SET ${fields.join(", ")} WHERE id = ?`;
    this.executeStatement(sql, values);
  }
  async updateFlashcard(flashcardId, updates) {
    this.updateFlashcardCore(flashcardId, updates);
  }
  deleteFlashcardCore(flashcardId) {
    this.executeStatement(SQL_QUERIES.DELETE_FLASHCARD, [flashcardId]);
  }
  async deleteFlashcard(flashcardId) {
    this.deleteFlashcardCore(flashcardId);
  }
  // Version without save for use in transactions
  async deleteFlashcardWithoutSave(flashcardId) {
    this.deleteFlashcardCore(flashcardId);
  }
  async updateFlashcardDeckIds(oldDeckId, newDeckId) {
    this.executeStatement(SQL_QUERIES.UPDATE_FLASHCARD_DECK_IDS, [
      newDeckId,
      oldDeckId
    ]);
  }
  async getFlashcardsByDeck(deckId) {
    return this.queryAll(
      SQL_QUERIES.GET_FLASHCARDS_BY_DECK,
      [deckId],
      this.rowToFlashcard.bind(this)
    );
  }
  async getDueFlashcards(deckId) {
    const now = (/* @__PURE__ */ new Date()).toISOString();
    return this.queryAll(
      SQL_QUERIES.GET_DUE_FLASHCARDS,
      [deckId, now],
      this.rowToFlashcard.bind(this)
    );
  }
  async getDailyReviewCounts(deckId) {
    const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    const todayStart = `${today}T00:00:00.000Z`;
    const todayEnd = `${today}T23:59:59.999Z`;
    const newResult = this.queryOne(
      SQL_QUERIES.COUNT_NEW_CARDS_TODAY,
      [deckId, todayStart, todayEnd],
      (row) => Number(row[0])
    );
    const newCount = newResult || 0;
    const reviewResult = this.queryOne(
      SQL_QUERIES.COUNT_REVIEW_CARDS_TODAY,
      [deckId, todayStart, todayEnd],
      (row) => Number(row[0])
    );
    const reviewCount = reviewResult || 0;
    return { newCount, reviewCount };
  }
  async getReviewableFlashcards(deckId) {
    if (!this.db)
      throw new Error("Database not initialized");
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const deck = await this.getDeckById(deckId);
    if (!deck) {
      throw new Error(`Deck not found: ${deckId}`);
    }
    const config = deck.config;
    const flashcards = [];
    const dailyCounts = await this.getDailyReviewCounts(deckId);
    const newCardsLimit = config.newCardsPerDay;
    const newCountToday = Number(dailyCounts.newCount) || 0;
    const remainingNewCards = config.hasNewCardsLimitEnabled ? Math.max(0, newCardsLimit - newCountToday) : Number.MAX_SAFE_INTEGER;
    if (remainingNewCards > 0) {
      const sql = `${SQL_QUERIES.GET_NEW_CARDS_FOR_REVIEW}${config.hasNewCardsLimitEnabled ? ` LIMIT ${remainingNewCards}` : ""}`;
      const newCardsStmt = this.db.prepare(sql);
      newCardsStmt.bind([deckId, now]);
      while (newCardsStmt.step()) {
        const row = newCardsStmt.get();
        flashcards.push(this.rowToFlashcard(row));
      }
      newCardsStmt.free();
    }
    const reviewCardsLimit = config.reviewCardsPerDay;
    const reviewCountToday = Number(dailyCounts.reviewCount) || 0;
    const remainingReviewCards = config.hasReviewCardsLimitEnabled ? Math.max(0, reviewCardsLimit - reviewCountToday) : Number.MAX_SAFE_INTEGER;
    if (remainingReviewCards > 0) {
      const sql = `${SQL_QUERIES.GET_REVIEW_CARDS_FOR_REVIEW}${config.hasReviewCardsLimitEnabled ? ` LIMIT ${remainingReviewCards}` : ""}`;
      const reviewCardsStmt = this.db.prepare(sql);
      reviewCardsStmt.bind([deckId, now]);
      while (reviewCardsStmt.step()) {
        const row = reviewCardsStmt.get();
        flashcards.push(this.rowToFlashcard(row));
      }
      reviewCardsStmt.free();
    }
    flashcards.sort((a, b) => {
      const stateOrder = { review: 1, new: 2 };
      const aOrder = stateOrder[a.state];
      const bOrder = stateOrder[b.state];
      if (aOrder !== bOrder) {
        return aOrder - bOrder;
      }
      if (a.state === "review") {
        if (config.reviewOrder === "random") {
          return Math.random() - 0.5;
        } else {
          return new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime();
        }
      } else if (a.state === "new") {
        return new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime();
      }
      return 0;
    });
    return flashcards;
  }
  async getLatestReviewLogForFlashcard(flashcardId) {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(SQL_QUERIES.GET_LATEST_REVIEW_LOG);
    stmt.bind([flashcardId]);
    if (stmt.step()) {
      const row = stmt.get();
      stmt.free();
      return {
        id: row[0],
        flashcardId: row[1],
        lastReviewedAt: row[2],
        shownAt: row[3],
        reviewedAt: row[4],
        rating: row[5],
        ratingLabel: row[6],
        timeElapsedMs: row[7],
        oldState: row[8],
        oldRepetitions: row[9],
        oldLapses: row[10],
        oldStability: row[11],
        oldDifficulty: row[12],
        newState: row[13],
        newRepetitions: row[14],
        newLapses: row[15],
        newStability: row[16],
        newDifficulty: row[17],
        oldIntervalMinutes: row[18],
        newIntervalMinutes: row[19],
        oldDueAt: row[20],
        newDueAt: row[21],
        elapsedDays: row[22],
        retrievability: row[23],
        requestRetention: row[24],
        profile: row[25] || "STANDARD",
        maximumIntervalDays: row[26],
        minMinutes: row[27],
        fsrsWeightsVersion: row[28],
        schedulerVersion: row[29],
        noteModelId: row[30],
        cardTemplateId: row[31],
        contentHash: row[32],
        client: row[33]
      };
    }
    stmt.free();
    return null;
  }
  async deleteFlashcardsByFile(sourceFile) {
    this.executeStatement(SQL_QUERIES.DELETE_FLASHCARDS_BY_FILE, [sourceFile]);
  }
  // Review log operations
  async createReviewLog(log) {
    if (!this.db)
      throw new Error("Database not initialized");
    const id = `review_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const stmt = this.db.prepare(SQL_QUERIES.INSERT_REVIEW_LOG);
    stmt.run([
      id,
      log.flashcardId,
      log.sessionId || null,
      log.lastReviewedAt,
      log.shownAt || null,
      log.reviewedAt,
      log.rating,
      log.ratingLabel,
      log.timeElapsedMs || null,
      log.oldState,
      log.oldRepetitions,
      log.oldLapses,
      log.oldStability,
      log.oldDifficulty,
      log.newState,
      log.newRepetitions,
      log.newLapses,
      log.newStability,
      log.newDifficulty,
      log.oldIntervalMinutes,
      log.newIntervalMinutes,
      log.oldDueAt,
      log.newDueAt,
      log.elapsedDays,
      log.retrievability,
      log.requestRetention,
      log.profile,
      log.maximumIntervalDays,
      log.minMinutes,
      log.fsrsWeightsVersion,
      log.schedulerVersion,
      log.noteModelId || null,
      log.cardTemplateId || null,
      log.contentHash || null,
      log.client || null
    ]);
    stmt.free();
  }
  // Review session operations
  async createReviewSession(session) {
    if (!this.db)
      throw new Error("Database not initialized");
    const id = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const stmt = this.db.prepare(SQL_QUERIES.INSERT_REVIEW_SESSION);
    stmt.run([
      id,
      session.deckId,
      session.startedAt,
      session.endedAt || null,
      session.goalTotal,
      session.doneUnique
    ]);
    stmt.free();
    return id;
  }
  async getReviewSessionById(sessionId) {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(SQL_QUERIES.GET_REVIEW_SESSION_BY_ID);
    stmt.bind([sessionId]);
    if (stmt.step()) {
      const row = stmt.get();
      stmt.free();
      return this.rowToReviewSession(row);
    }
    stmt.free();
    return null;
  }
  async getActiveReviewSession(deckId) {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(SQL_QUERIES.GET_ACTIVE_REVIEW_SESSION);
    stmt.bind([deckId]);
    if (stmt.step()) {
      const row = stmt.get();
      stmt.free();
      return this.rowToReviewSession(row);
    }
    stmt.free();
    return null;
  }
  async updateReviewSessionDoneUnique(sessionId, doneUnique) {
    this.executeStatement(SQL_QUERIES.UPDATE_REVIEW_SESSION_DONE_UNIQUE, [
      doneUnique,
      sessionId
    ]);
  }
  async endReviewSession(sessionId, endedAt) {
    this.executeStatement(SQL_QUERIES.UPDATE_REVIEW_SESSION_END, [
      endedAt,
      sessionId
    ]);
  }
  async isCardReviewedInSession(sessionId, flashcardId) {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(SQL_QUERIES.CHECK_CARD_REVIEWED_IN_SESSION);
    stmt.bind([sessionId, flashcardId]);
    let count = 0;
    if (stmt.step()) {
      const row = stmt.get();
      count = row[0];
    }
    stmt.free();
    return count > 0;
  }
  // Statistics operations
  async getDeckStats(deckId) {
    if (!this.db)
      throw new Error("Database not initialized");
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const deck = await this.getDeckById(deckId);
    if (!deck) {
      throw new Error(`Deck not found: ${deckId}`);
    }
    const config = deck.config;
    const dailyCounts = await this.getDailyReviewCounts(deckId);
    const newStmt = this.db.prepare(SQL_QUERIES.COUNT_NEW_CARDS);
    newStmt.bind([deckId, now]);
    newStmt.step();
    const totalNewCards = newStmt.get()[0] || 0;
    newStmt.free();
    let newCount = totalNewCards;
    const newCardsLimit = config.newCardsPerDay;
    const newCountToday = Number(dailyCounts.newCount) || 0;
    if (config.hasNewCardsLimitEnabled) {
      const remainingNew = Math.max(0, newCardsLimit - newCountToday);
      newCount = Math.min(totalNewCards, remainingNew);
    }
    const learningCount = 0;
    const dueStmt = this.db.prepare(SQL_QUERIES.COUNT_DUE_CARDS);
    dueStmt.bind([deckId, now]);
    dueStmt.step();
    const totalDueCards = dueStmt.get()[0] || 0;
    dueStmt.free();
    let dueCount = totalDueCards;
    const reviewCardsLimit = config.reviewCardsPerDay;
    const reviewCountToday = Number(dailyCounts.reviewCount) || 0;
    if (config.hasReviewCardsLimitEnabled) {
      const remainingReview = Math.max(0, reviewCardsLimit - reviewCountToday);
      dueCount = Math.min(totalDueCards, remainingReview);
    }
    const totalStmt = this.db.prepare(SQL_QUERIES.COUNT_TOTAL_CARDS);
    totalStmt.bind([deckId]);
    totalStmt.step();
    const totalCount = totalStmt.get()[0] || 0;
    totalStmt.free();
    return {
      deckId,
      newCount,
      dueCount,
      totalCount
    };
  }
  async getAllDeckStats() {
    if (!this.db)
      throw new Error("Database not initialized");
    const decks = await this.getAllDecks();
    const stats = [];
    for (const deck of decks) {
      const deckStats = await this.getDeckStats(deck.id);
      stats.push(deckStats);
    }
    return stats;
  }
  async getReviewCountsByDate(days = 365) {
    if (!this.db)
      throw new Error("Database not initialized");
    const endDate = /* @__PURE__ */ new Date();
    const startDate = /* @__PURE__ */ new Date();
    startDate.setDate(endDate.getDate() - days);
    const stmt = this.db.prepare(SQL_QUERIES.GET_REVIEW_COUNTS_BY_DATE);
    stmt.bind([startDate.toISOString(), endDate.toISOString()]);
    const reviewCounts = /* @__PURE__ */ new Map();
    while (stmt.step()) {
      const row = stmt.get();
      const date = row[0];
      const count = row[1];
      reviewCounts.set(date, count);
    }
    stmt.free();
    return reviewCounts;
  }
  async getStudyStats() {
    if (!this.db)
      throw new Error("Database not initialized");
    const now = /* @__PURE__ */ new Date();
    const todayStart = new Date(
      now.getFullYear(),
      now.getMonth(),
      now.getDate()
    );
    const todayEnd = new Date(todayStart);
    todayEnd.setDate(todayEnd.getDate() + 1);
    const weekStart = new Date(todayStart);
    weekStart.setDate(weekStart.getDate() - 7);
    const monthStart = new Date(todayStart);
    monthStart.setDate(monthStart.getDate() - 30);
    const totalStmt = this.db.prepare(`
      SELECT SUM(time_elapsed_ms / 1000.0 / 3600.0) as totalHours
      FROM review_logs
      WHERE time_elapsed_ms IS NOT NULL
    `);
    totalStmt.step();
    const totalResult = totalStmt.get();
    const totalHours = totalResult[0] || 0;
    totalStmt.free();
    await yieldToUI();
    const monthStmt = this.db.prepare(`
      SELECT SUM(time_elapsed_ms / 1000.0 / 3600.0) as monthHours
      FROM review_logs
      WHERE time_elapsed_ms IS NOT NULL
        AND reviewed_at >= ?
    `);
    monthStmt.bind([monthStart.toISOString()]);
    monthStmt.step();
    const monthResult = monthStmt.get();
    const pastMonthHours = monthResult[0] || 0;
    monthStmt.free();
    await yieldToUI();
    const weekStmt = this.db.prepare(`
      SELECT SUM(time_elapsed_ms / 1000.0 / 3600.0) as weekHours
      FROM review_logs
      WHERE time_elapsed_ms IS NOT NULL
        AND reviewed_at >= ?
    `);
    weekStmt.bind([weekStart.toISOString()]);
    weekStmt.step();
    const weekResult = weekStmt.get();
    const pastWeekHours = weekResult[0] || 0;
    weekStmt.free();
    await yieldToUI();
    const todayStmt = this.db.prepare(`
      SELECT
        COUNT(*) as cards,
        SUM(time_elapsed_ms / 1000.0 / 3600.0) as hours,
        AVG(time_elapsed_ms / 1000.0) as avgSeconds
      FROM review_logs
      WHERE reviewed_at >= ? AND reviewed_at < ?
        AND time_elapsed_ms IS NOT NULL
    `);
    todayStmt.bind([todayStart.toISOString(), todayEnd.toISOString()]);
    todayStmt.step();
    const todayResult = todayStmt.get();
    const todayCards = todayResult[0] || 0;
    const todayHours = todayResult[1] || 0;
    const todayPaceSeconds = todayResult[2] || 0;
    todayStmt.free();
    await yieldToUI();
    return {
      totalHours: Number(totalHours),
      pastMonthHours: Number(pastMonthHours),
      pastWeekHours: Number(pastWeekHours),
      todayCards: Number(todayCards),
      todayHours: Number(todayHours),
      todayPaceSeconds: Number(todayPaceSeconds)
    };
  }
  async migrateSchemaIfNeeded() {
    if (!this.db)
      return;
    try {
      this.debugLog("Starting database migration check...");
      if (needsMigration(this.db)) {
        this.debugLog("Migration needed, applying...");
        migrate(this.db, this.debugLog.bind(this));
        await this.save();
        this.debugLog("Migration completed successfully");
      } else {
        this.debugLog("Database schema is up to date");
      }
    } catch (error) {
      this.debugLog(`Migration failed: ${error}`);
      throw new Error(`Database migration failed: ${error}`);
    }
  }
  // Helper methods
  rowToFlashcard(row) {
    return {
      id: row[0],
      deckId: row[1],
      front: row[2],
      back: row[3],
      type: row[4],
      sourceFile: row[5],
      contentHash: row[6],
      state: row[7],
      dueDate: row[8],
      interval: row[9],
      repetitions: row[10],
      difficulty: row[11],
      stability: row[12],
      lapses: row[13],
      lastReviewed: row[14],
      created: row[15],
      modified: row[16]
    };
  }
  rowToReviewSession(row) {
    return {
      id: row[0],
      deckId: row[1],
      startedAt: row[2],
      endedAt: row[3],
      goalTotal: row[4],
      doneUnique: row[5]
    };
  }
  async getOverallStatistics(deckFilter = "all", timeframe = "12months") {
    if (!this.db)
      throw new Error("Database not initialized");
    try {
      const cutoffDate = /* @__PURE__ */ new Date();
      if (timeframe === "12months") {
        cutoffDate.setFullYear(cutoffDate.getFullYear() - 1);
      } else {
        cutoffDate.setFullYear(cutoffDate.getFullYear() - 10);
      }
      let deckFilterCondition = "";
      let deckFilterParams = [];
      if (deckFilter.startsWith("deck:")) {
        const deckId = deckFilter.substring(5);
        deckFilterCondition = "AND f.deck_id = ?";
        deckFilterParams.push(deckId);
      } else if (deckFilter.startsWith("tag:")) {
        const tag = deckFilter.substring(4);
        deckFilterCondition = "AND d.tag = ?";
        deckFilterParams.push(tag);
      }
      const dailyStatsStmt = this.db.prepare(
        deckFilterCondition ? SQL_QUERIES.GET_DAILY_STATS_OVERALL.replace(
          "FROM review_logs rl",
          "FROM review_logs rl"
        ).replace(
          "JOIN flashcards f ON rl.flashcard_id = f.id",
          "JOIN flashcards f ON rl.flashcard_id = f.id JOIN decks d ON f.deck_id = d.id"
        ).replace(
          "WHERE DATE(reviewed_at) >= DATE(?)",
          `WHERE DATE(reviewed_at) >= DATE(?) ${deckFilterCondition}`
        ) : SQL_QUERIES.GET_DAILY_STATS_OVERALL
      );
      dailyStatsStmt.bind([
        cutoffDate.toISOString().split("T")[0],
        ...deckFilterParams
      ]);
      const dailyStats = [];
      while (dailyStatsStmt.step()) {
        const row = dailyStatsStmt.get();
        const reviews = row[1];
        const correct = row[2];
        dailyStats.push({
          date: row[0],
          reviews,
          timeSpent: reviews * 30,
          // Estimate 30 seconds per review
          newCards: row[3],
          learningCards: 0,
          // No learning cards in pure FSRS
          reviewCards: row[4],
          correctRate: reviews > 0 ? correct / reviews * 100 : 0
        });
      }
      dailyStatsStmt.free();
      const cardStatsStmt = this.db.prepare(
        deckFilterCondition ? SQL_QUERIES.GET_CARD_STATS.replace(
          "FROM flashcards f",
          "FROM flashcards f JOIN decks d ON f.deck_id = d.id"
        ).replace(
          "GROUP BY f.state",
          `WHERE ${deckFilterCondition.replace("d.", "d.")} GROUP BY f.state`
        ) : SQL_QUERIES.GET_CARD_STATS
      );
      const cardStats = {
        new: 0,
        review: 0,
        mature: 0
      };
      if (deckFilterCondition) {
        cardStatsStmt.bind(deckFilterParams);
      }
      while (cardStatsStmt.step()) {
        const row = cardStatsStmt.get();
        const cardType = row[0];
        const count = row[1];
        if (cardType === "new")
          cardStats.new = count;
        else if (cardType === "review")
          cardStats.review = count;
        else if (cardType === "mature")
          cardStats.mature = count;
      }
      cardStatsStmt.free();
      const answerButtonsStmt = this.db.prepare(
        deckFilterCondition ? SQL_QUERIES.GET_ANSWER_BUTTON_STATS.replace(
          "FROM review_logs rl",
          "FROM review_logs rl JOIN flashcards f ON rl.flashcard_id = f.id JOIN decks d ON f.deck_id = d.id"
        ).replace(
          "WHERE rl.reviewed_at >= ? AND rl.reviewed_at <= ?",
          `WHERE rl.reviewed_at >= ? AND rl.reviewed_at <= ? ${deckFilterCondition}`
        ) : SQL_QUERIES.GET_ANSWER_BUTTON_STATS
      );
      const answerButtons = {
        again: 0,
        hard: 0,
        good: 0,
        easy: 0
      };
      answerButtonsStmt.bind([
        cutoffDate.toISOString().split("T")[0],
        ...deckFilterParams
      ]);
      while (answerButtonsStmt.step()) {
        const row = answerButtonsStmt.get();
        const ratingLabel = row[0];
        const count = row[1];
        answerButtons[ratingLabel] = count;
      }
      answerButtonsStmt.free();
      const totalReviews = Object.values(answerButtons).reduce(
        (sum, count) => sum + count,
        0
      );
      const correctReviews = totalReviews - answerButtons.again;
      const retentionRate = totalReviews > 0 ? correctReviews / totalReviews * 100 : 0;
      const intervalsStmt = this.db.prepare(`
      SELECT
        CASE
          WHEN f.interval < 1440 THEN CAST(f.interval / 60 AS INTEGER) || 'h'
          WHEN f.interval < 43200 THEN CAST(f.interval / 1440 AS INTEGER) || 'd'
          ELSE CAST(f.interval / 43200 AS INTEGER) || 'm'
        END as interval_group,
        COUNT(*) as count
      FROM flashcards f
      ${deckFilterCondition ? "JOIN decks d ON f.deck_id = d.id" : ""}
      WHERE f.state != 'new'
      ${deckFilterCondition}
      GROUP BY interval_group
      ORDER BY f.interval
    `);
      if (deckFilterCondition) {
        intervalsStmt.bind(deckFilterParams);
      }
      const intervals = [];
      while (intervalsStmt.step()) {
        const row = intervalsStmt.get();
        intervals.push({
          interval: row[0],
          count: row[1]
        });
      }
      intervalsStmt.free();
      const forecast = [];
      const today = /* @__PURE__ */ new Date();
      for (let i = 0; i < 90; i++) {
        const forecastDate = new Date(today);
        forecastDate.setDate(today.getDate() + i);
        const dateStr = forecastDate.toISOString().split("T")[0];
        const forecastStmt = this.db.prepare(
          deckFilterCondition ? SQL_QUERIES.GET_FORECAST_DUE_COUNT.replace(
            "FROM flashcards f",
            "FROM flashcards f JOIN decks d ON f.deck_id = d.id"
          ).replace(
            "WHERE DATE(f.due_date) = DATE(?)",
            `WHERE DATE(f.due_date) = DATE(?) ${deckFilterCondition}`
          ) : SQL_QUERIES.GET_FORECAST_DUE_COUNT
        );
        forecastStmt.bind([dateStr, ...deckFilterParams]);
        let dueCount = 0;
        if (forecastStmt.step()) {
          const row = forecastStmt.get();
          dueCount = row[0];
        }
        forecastStmt.free();
        forecast.push({
          date: dateStr,
          dueCount
        });
      }
      const paceStmt = this.db.prepare(
        deckFilterCondition ? SQL_QUERIES.GET_PACE_STATS.replace(
          "FROM review_logs rl",
          "FROM review_logs rl JOIN flashcards f ON rl.flashcard_id = f.id JOIN decks d ON f.deck_id = d.id"
        ).replace(
          "WHERE rl.reviewed_at >= ? AND rl.reviewed_at <= ?",
          `WHERE rl.reviewed_at >= ? AND rl.reviewed_at <= ? ${deckFilterCondition}`
        ) : SQL_QUERIES.GET_PACE_STATS
      );
      const endDate = (/* @__PURE__ */ new Date()).toISOString();
      if (deckFilterCondition) {
        paceStmt.bind([cutoffDate.toISOString(), endDate, ...deckFilterParams]);
      } else {
        paceStmt.bind([cutoffDate.toISOString(), endDate]);
      }
      let averagePace = 0;
      let totalReviewTime = 0;
      if (paceStmt.step()) {
        const row = paceStmt.get();
        averagePace = row[0] || 0;
        totalReviewTime = row[1] || 0;
      }
      paceStmt.free();
      return {
        dailyStats,
        cardStats,
        answerButtons,
        retentionRate,
        intervals,
        forecast,
        averagePace,
        totalReviewTime
      };
    } catch (error) {
      console.error("Error in getOverallStatistics:", error);
      return {
        dailyStats: [],
        cardStats: { new: 0, review: 0, mature: 0 },
        answerButtons: { again: 0, hard: 0, good: 0, easy: 0 },
        retentionRate: 0,
        intervals: [],
        forecast: [],
        averagePace: 0,
        totalReviewTime: 0
      };
    }
  }
  async purgeDatabase() {
    this.debugLog("Purging database - deleting all data");
    try {
      if (this.db) {
        this.db.exec(`
          DROP TABLE IF EXISTS review_logs;
          DROP TABLE IF EXISTS flashcards;
          DROP TABLE IF EXISTS decks;
        `);
        this.debugLog("All tables dropped, recreating schema");
        await this.createFreshDatabase();
        await this.save();
        this.debugLog("Database purged and recreated successfully");
      }
    } catch (error) {
      console.error("Error purging database:", error);
      throw error;
    }
  }
  async getFlashcardById(cardId) {
    return this.queryOne(
      "SELECT * FROM flashcards WHERE id = ?",
      [cardId],
      this.rowToFlashcard.bind(this)
    );
  }
  /**
   * Execute multiple operations in a database transaction
   * Note: For sql.js compatibility, avoid using this for now
   */
  async runInTransaction(operations) {
    if (!this.db)
      throw new Error("Database not initialized");
    try {
      this.db.exec("BEGIN TRANSACTION");
      const result = await operations();
      this.db.exec("COMMIT");
      return result;
    } catch (error) {
      try {
        this.db.exec("ROLLBACK");
      } catch (rollbackError) {
        console.warn("Transaction rollback failed:", rollbackError);
      }
      throw error;
    }
  }
  /**
   * Execute a raw SQL query and return results
   */
  async query(sql, params = []) {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(sql);
    stmt.bind(params);
    const results = [];
    while (stmt.step()) {
      results.push(stmt.get());
    }
    stmt.free();
    return results;
  }
  async close() {
    if (this.db) {
      this.db.close();
      this.db = null;
    }
  }
  // Backup operations
  async getAllReviewLogs() {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(`
      SELECT id, flashcard_id, session_id, last_reviewed_at, shown_at, reviewed_at,
             rating, rating_label, time_elapsed_ms, old_state, old_repetitions,
             old_lapses, old_stability, old_difficulty, new_state, new_repetitions,
             new_lapses, new_stability, new_difficulty, old_interval_minutes,
             new_interval_minutes, old_due_at, new_due_at, elapsed_days,
             retrievability, request_retention, profile, maximum_interval_days,
             min_minutes, fsrs_weights_version, scheduler_version, note_model_id,
             card_template_id, content_hash, client
      FROM review_logs
      ORDER BY reviewed_at ASC
    `);
    const results = [];
    while (stmt.step()) {
      const row = stmt.get();
      results.push({
        id: row[0],
        flashcardId: row[1],
        sessionId: row[2],
        lastReviewedAt: row[3],
        shownAt: row[4],
        reviewedAt: row[5],
        rating: row[6],
        ratingLabel: row[7],
        timeElapsedMs: row[8],
        oldState: row[9],
        oldRepetitions: row[10],
        oldLapses: row[11],
        oldStability: row[12],
        oldDifficulty: row[13],
        newState: row[14],
        newRepetitions: row[15],
        newLapses: row[16],
        newStability: row[17],
        newDifficulty: row[18],
        oldIntervalMinutes: row[19],
        newIntervalMinutes: row[20],
        oldDueAt: row[21],
        newDueAt: row[22],
        elapsedDays: row[23],
        retrievability: row[24],
        requestRetention: row[25],
        profile: row[26],
        maximumIntervalDays: row[27],
        minMinutes: row[28],
        fsrsWeightsVersion: row[29],
        schedulerVersion: row[30],
        noteModelId: row[31],
        cardTemplateId: row[32],
        contentHash: row[33],
        client: row[34]
      });
    }
    stmt.free();
    return results;
  }
  async getAllReviewSessions() {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(`
      SELECT id, deck_id, started_at, ended_at, goal_total, done_unique
      FROM review_sessions
      ORDER BY started_at ASC
    `);
    const results = [];
    while (stmt.step()) {
      const row = stmt.get();
      results.push({
        id: row[0],
        deckId: row[1],
        startedAt: row[2],
        endedAt: row[3],
        goalTotal: row[4],
        doneUnique: row[5]
      });
    }
    stmt.free();
    return results;
  }
  async reviewLogExists(id) {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(`
      SELECT COUNT(*) FROM review_logs WHERE id = ?
    `);
    stmt.bind([id]);
    let exists = false;
    if (stmt.step()) {
      const row = stmt.get();
      exists = row[0] > 0;
    }
    stmt.free();
    return exists;
  }
  async reviewSessionExists(id) {
    if (!this.db)
      throw new Error("Database not initialized");
    const stmt = this.db.prepare(`
      SELECT COUNT(*) FROM review_sessions WHERE id = ?
    `);
    stmt.bind([id]);
    let exists = false;
    if (stmt.step()) {
      const row = stmt.get();
      exists = row[0] > 0;
    }
    stmt.free();
    return exists;
  }
  async insertReviewLog(log) {
    if (!this.db)
      throw new Error("Database not initialized");
    this.executeStatement(
      `
      INSERT INTO review_logs (
        id, flashcard_id, session_id, last_reviewed_at, shown_at, reviewed_at,
        rating, rating_label, time_elapsed_ms, old_state, old_repetitions,
        old_lapses, old_stability, old_difficulty, new_state, new_repetitions,
        new_lapses, new_stability, new_difficulty, old_interval_minutes,
        new_interval_minutes, old_due_at, new_due_at, elapsed_days,
        retrievability, request_retention, profile, maximum_interval_days,
        min_minutes, fsrs_weights_version, scheduler_version, note_model_id,
        card_template_id, content_hash, client
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `,
      [
        log.id,
        log.flashcardId,
        log.sessionId,
        log.lastReviewedAt,
        log.shownAt,
        log.reviewedAt,
        log.rating,
        log.ratingLabel,
        log.timeElapsedMs,
        log.oldState,
        log.oldRepetitions,
        log.oldLapses,
        log.oldStability,
        log.oldDifficulty,
        log.newState,
        log.newRepetitions,
        log.newLapses,
        log.newStability,
        log.newDifficulty,
        log.oldIntervalMinutes,
        log.newIntervalMinutes,
        log.oldDueAt,
        log.newDueAt,
        log.elapsedDays,
        log.retrievability,
        log.requestRetention,
        log.profile,
        log.maximumIntervalDays,
        log.minMinutes,
        log.fsrsWeightsVersion,
        log.schedulerVersion,
        log.noteModelId,
        log.cardTemplateId,
        log.contentHash,
        log.client
      ]
    );
  }
  async insertReviewSession(session) {
    if (!this.db)
      throw new Error("Database not initialized");
    this.executeStatement(
      `
      INSERT INTO review_sessions (
        id, deck_id, started_at, ended_at, goal_total, done_unique
      ) VALUES (?, ?, ?, ?, ?, ?)
    `,
      [
        session.id,
        session.deckId,
        session.startedAt,
        session.endedAt,
        session.goalTotal,
        session.doneUnique
      ]
    );
  }
};

// src/services/DeckManager.ts
var import_obsidian = require("obsidian");

// src/utils/logging.ts
var Logger = class {
  constructor(settings, adapter, configDir) {
    this.settings = settings;
    this.adapter = adapter;
    this.configDir = configDir;
  }
  debug(message, ...args) {
    var _a, _b;
    if ((_b = (_a = this.settings) == null ? void 0 : _a.debug) == null ? void 0 : _b.enableLogging) {
      console.log(`[Decks Debug] ${message}`, ...args);
      if (this.adapter && this.configDir) {
        this.writeToLogFile(message, ...args);
      }
    }
  }
  performance(message, ...args) {
    var _a, _b;
    if ((_b = (_a = this.settings) == null ? void 0 : _a.debug) == null ? void 0 : _b.performanceLogs) {
      console.log(`[Decks Performance] ${message}`, ...args);
    }
  }
  async writeToLogFile(message, ...args) {
    try {
      if (!this.adapter || !this.configDir)
        return;
      const logPath = `${this.configDir}/plugins/decks/debug.log`;
      const timestamp = (/* @__PURE__ */ new Date()).toISOString();
      const argsStr = args.length > 0 ? ` ${args.map(
        (arg) => typeof arg === "object" ? JSON.stringify(arg) : String(arg)
      ).join(" ")}` : "";
      const logEntry = `[${timestamp}] ${message}${argsStr}
`;
      let existingContent = "";
      if (await this.adapter.exists(logPath)) {
        existingContent = await this.adapter.read(logPath);
      }
      await this.adapter.write(logPath, existingContent + logEntry);
    } catch (error) {
      console.error("[Decks Debug] Failed to write to log file:", error);
    }
  }
};
function formatTime(ms) {
  if (ms < 1e3) {
    return `${ms.toFixed(2)}ms`;
  } else {
    return `${(ms / 1e3).toFixed(2)}s`;
  }
}

// src/utils/fileFilter.ts
var FileFilter = class {
  constructor(folderSearchPath) {
    this.folderSearchPath = folderSearchPath;
  }
  updateFolderSearchPath(folderSearchPath) {
    this.folderSearchPath = folderSearchPath;
  }
  filterFiles(files) {
    if (!this.folderSearchPath || this.folderSearchPath.trim() === "") {
      return files;
    }
    const searchPath = this.folderSearchPath.trim();
    return files.filter(
      (file7) => file7.path.startsWith(searchPath + "/") || file7.path === searchPath
    );
  }
  shouldIncludeFile(file7) {
    if (!this.folderSearchPath || this.folderSearchPath.trim() === "") {
      return true;
    }
    const searchPath = this.folderSearchPath.trim();
    return file7.path.startsWith(searchPath + "/") || file7.path === searchPath;
  }
};

// src/services/DeckManager.ts
var MAX_FLASHCARDS_PER_DECK = 5e4;
var _DeckManager = class _DeckManager {
  constructor(vault, metadataCache, db, plugin, folderSearchPath) {
    this.vault = vault;
    this.metadataCache = metadataCache;
    this.db = db;
    this.plugin = plugin;
    this.fileFilter = new FileFilter(folderSearchPath);
    if ((plugin == null ? void 0 : plugin.settings) && (plugin == null ? void 0 : plugin.app)) {
      this.logger = new Logger(
        plugin.settings,
        this.vault.adapter,
        plugin.app.vault.configDir
      );
    }
  }
  /**
   * Update the folder search path for filtering files
   */
  updateFolderSearchPath(folderSearchPath) {
    this.fileFilter.updateFolderSearchPath(folderSearchPath);
  }
  debugLog(message, ...args) {
    var _a;
    (_a = this.logger) == null ? void 0 : _a.debug(message, ...args);
  }
  performanceLog(message, ...args) {
    var _a;
    (_a = this.logger) == null ? void 0 : _a.performance(message, ...args);
  }
  /**
   * Scan vault for all decks (files with #flashcards tags)
   */
  async scanVaultForDecks() {
    const decksMap = /* @__PURE__ */ new Map();
    let files = this.vault.getMarkdownFiles();
    files = this.fileFilter.filterFiles(files);
    this.debugLog(`Filtered to ${files.length} files for scanning`);
    this.debugLog(`Scanning ${files.length} markdown files for flashcard tags`);
    for (const file7 of files) {
      const metadata = this.metadataCache.getFileCache(file7);
      if (!metadata) {
        this.debugLog(`No metadata for file: ${file7.path}`);
        continue;
      }
      this.debugLog(`Checking file: ${file7.path}`);
      const allTags = [];
      if (metadata.tags) {
        const inlineTags = metadata.tags.map((t) => t.tag);
        allTags.push(...inlineTags);
        this.debugLog(`File ${file7.path} has inline tags:`, inlineTags);
      }
      if (metadata.frontmatter && metadata.frontmatter.tags) {
        const frontmatterTags = Array.isArray(metadata.frontmatter.tags) ? metadata.frontmatter.tags : [metadata.frontmatter.tags];
        const normalizedTags = frontmatterTags.map(
          (tag) => tag.startsWith("#") ? tag : `#${tag}`
        );
        allTags.push(...normalizedTags);
        this.debugLog(
          `File ${file7.path} has frontmatter tags:`,
          normalizedTags
        );
      }
      if (allTags.length === 0) {
        continue;
      }
      const flashcardTags = allTags.filter(
        (tag) => tag.startsWith("#flashcards")
      );
      this.debugLog(`All tags for ${file7.path}:`, allTags);
      this.debugLog(`Flashcard tags for ${file7.path}:`, flashcardTags);
      for (const tag of flashcardTags) {
        if (!decksMap.has(tag)) {
          decksMap.set(tag, []);
        }
        decksMap.get(tag).push(file7);
      }
    }
    this.debugLog(`Found ${decksMap.size} decks:`, Array.from(decksMap.keys()));
    return decksMap;
  }
  /**
   * Sync decks with database
   */
  async syncDecks() {
    const syncDecksStartTime = performance.now();
    try {
      this.debugLog("Starting deck sync...");
      const decksMap = await this.scanVaultForDecks();
      this.debugLog("Decks found in vault:", decksMap);
      const existingDecks = await this.db.getAllDecks();
      this.debugLog("Existing decks in database:", existingDecks);
      const existingDecksByFile = /* @__PURE__ */ new Map();
      for (const deck of existingDecks) {
        existingDecksByFile.set(deck.filepath, deck);
      }
      let newDecksCreated = 0;
      let totalFiles = 0;
      for (const [tag, files] of decksMap) {
        for (const file7 of files) {
          totalFiles++;
          const filePath = file7.path;
          const deckName = file7.basename;
          const existingDeck = existingDecksByFile.get(filePath);
          this.debugLog(`Checking file: ${filePath}`);
          this.debugLog(
            `Existing deck found:`,
            existingDeck ? `YES (ID: ${existingDeck.id})` : "NO"
          );
          if (existingDeck) {
            if (existingDeck.tag !== tag) {
              this.debugLog(
                `Updating deck "${deckName}" tag from ${existingDeck.tag} to ${tag}`
              );
              await this.db.updateDeck(existingDeck.id, {
                tag
              });
            } else {
              this.debugLog(
                `Deck "${deckName}" already exists with correct tag, no update needed`
              );
            }
          } else {
            const file8 = this.vault.getAbstractFileByPath(filePath);
            let deckModTime = /* @__PURE__ */ new Date();
            if (file8 instanceof import_obsidian.TFile) {
              const fileModTime = new Date(file8.stat.mtime);
              const fileCreateTime = new Date(file8.stat.ctime);
              deckModTime = fileModTime < fileCreateTime ? fileModTime : fileCreateTime;
            }
            const deck = {
              id: this.generateDeckId(filePath),
              name: deckName,
              // Store clean file name
              filepath: filePath,
              // Store full file path separately
              tag,
              lastReviewed: null,
              config: DEFAULT_DECK_CONFIG,
              modified: deckModTime.toISOString()
            };
            this.debugLog(
              `Creating new deck: "${deckName}" with ID: ${deck.id}, tag: ${tag}, filepath: ${filePath}`
            );
            await this.db.createDeck(deck);
            newDecksCreated++;
          }
        }
      }
      const allFiles = /* @__PURE__ */ new Set();
      for (const [tag, files] of decksMap) {
        for (const file7 of files) {
          allFiles.add(file7.path);
        }
      }
      let deletedDecks = 0;
      for (const deck of existingDecks) {
        if (!allFiles.has(deck.filepath)) {
          this.debugLog(
            `Deleting orphaned deck: "${deck.name}" (${deck.filepath})`
          );
          await this.db.deleteDeckByFilepath(deck.filepath);
          deletedDecks++;
        }
      }
      this.debugLog(
        `Deck sync completed. Processed ${totalFiles} files, created ${newDecksCreated} new decks, deleted ${deletedDecks} orphaned decks.`
      );
      const syncDecksTime = performance.now() - syncDecksStartTime;
      this.performanceLog(
        `Deck sync completed successfully in ${formatTime(syncDecksTime)} (${newDecksCreated} created, ${deletedDecks} deleted)`
      );
    } catch (error) {
      console.error("Error during deck sync:", error);
      throw error;
    }
  }
  /**
   * Parse flashcards from a file
   */
  async parseFlashcardsFromFile(file7, headerLevel = 2) {
    const parseStartTime = performance.now();
    const content = await this.vault.read(file7);
    const readTime = performance.now() - parseStartTime;
    const parseContentStartTime = performance.now();
    const flashcards = this.parseFlashcardsFromContent(content, headerLevel);
    const parseTime = performance.now() - parseContentStartTime;
    const totalTime = performance.now() - parseStartTime;
    this.performanceLog(
      `Parsed ${flashcards.length} flashcards from ${file7.path} in ${formatTime(totalTime)} (read: ${formatTime(readTime)}, parse: ${formatTime(parseTime)})`
    );
    return flashcards;
  }
  /**
   * Parse flashcards from content string (optimized single-pass parsing)
   */
  parseFlashcardsFromContent(content, headerLevel = 2) {
    const lines = content.split("\n");
    const flashcards = [];
    let inTable = false;
    let headerSeen = false;
    let currentHeader = null;
    let currentContent = [];
    let inFrontmatter = false;
    let skipNextParagraph = false;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const trimmedLine = line.trim();
      if (i === 0 && trimmedLine === "---") {
        inFrontmatter = true;
        continue;
      }
      if (inFrontmatter) {
        if (trimmedLine === "---") {
          inFrontmatter = false;
        }
        continue;
      }
      if (_DeckManager.TABLE_ROW_REGEX.test(trimmedLine)) {
        if (!inTable) {
          inTable = true;
          headerSeen = false;
        }
        if (!headerSeen) {
          headerSeen = true;
          continue;
        }
        if (_DeckManager.TABLE_SEPARATOR_REGEX.test(trimmedLine)) {
          continue;
        }
        const cells = trimmedLine.slice(1, -1).split("|").map((cell) => cell.trim());
        if (cells.length >= 2 && cells[0] && cells[1]) {
          flashcards.push({
            front: cells[0],
            // TODO strip of unnecessary characters
            back: cells[1],
            type: "table"
          });
        }
      } else {
        if (inTable) {
          inTable = false;
        }
        const headerMatch = _DeckManager.HEADER_REGEX.exec(line);
        if (headerMatch) {
          const currentHeaderLevel = headerMatch[1].length;
          if (line.match(/^#\s+/) && line.toLowerCase().includes("flashcard")) {
            skipNextParagraph = true;
            this.finalizeCurrentHeader(
              currentHeader,
              currentContent,
              flashcards,
              headerLevel
            );
            currentHeader = null;
            currentContent = [];
            continue;
          }
          this.finalizeCurrentHeader(
            currentHeader,
            currentContent,
            flashcards,
            headerLevel
          );
          currentHeader = {
            text: line,
            level: currentHeaderLevel
          };
          currentContent = [];
          skipNextParagraph = false;
        } else if (skipNextParagraph) {
          if (trimmedLine === "") {
            skipNextParagraph = false;
          }
        } else if (currentHeader) {
          if (trimmedLine === "" && currentContent.length === 0) {
            continue;
          }
          currentContent.push(line);
        }
      }
    }
    this.finalizeCurrentHeader(
      currentHeader,
      currentContent,
      flashcards,
      headerLevel
    );
    return flashcards;
  }
  /**
   * Helper to finalize current header flashcard
   */
  finalizeCurrentHeader(currentHeader, currentContent, flashcards, targetHeaderLevel) {
    if (currentHeader && currentContent.length > 0 && currentHeader.level === targetHeaderLevel) {
      flashcards.push({
        front: currentHeader.text.replace(/^#{1,6}\s+/, ""),
        back: currentContent.join("\n").trim(),
        type: "header-paragraph"
      });
    }
  }
  /**
   * Execute batch database operations using transactions with prepared statements for optimal performance
   */
  async executeBatchOperations(operations) {
    const batchStartTime = performance.now();
    let createCount = 0;
    let updateCount = 0;
    let deleteCount = 0;
    this.debugLog(`Starting transaction for ${operations.length} operations`);
    try {
      this.db.beginTransaction();
      this.debugLog(`Transaction started successfully`);
      const deleteOps = operations.filter(
        (op) => op.type === "delete" && op.flashcardId
      );
      const createOps = operations.filter(
        (op) => op.type === "create" && op.flashcard
      );
      const updateOps = operations.filter(
        (op) => op.type === "update" && op.flashcardId && op.updates
      );
      if (deleteOps.length > 0) {
        this.db.batchDeleteFlashcards(deleteOps.map((op) => op.flashcardId));
        deleteCount = deleteOps.length;
        this.debugLog(`Batch deleted ${deleteCount} flashcards`);
      }
      if (createOps.length > 0) {
        this.db.batchCreateFlashcards(createOps.map((op) => op.flashcard));
        createCount = createOps.length;
        this.debugLog(`Batch created ${createCount} flashcards`);
      }
      if (updateOps.length > 0) {
        this.db.batchUpdateFlashcards(
          updateOps.map((op) => ({
            id: op.flashcardId,
            updates: op.updates
          }))
        );
        updateCount = updateOps.length;
        this.debugLog(`Batch updated ${updateCount} flashcards`);
      }
      await yieldToUI();
      this.db.commitTransaction();
      this.debugLog(`Transaction committed successfully`);
      const totalBatchTime = performance.now() - batchStartTime;
      this.performanceLog(
        `Transaction completed in ${formatTime(totalBatchTime)} (${createCount} created, ${updateCount} updated, ${deleteCount} deleted)`
      );
    } catch (error) {
      console.error(`Critical error in transaction:`, error);
      try {
        this.db.rollbackTransaction();
        this.debugLog(`Transaction rolled back due to error`);
      } catch (rollbackError) {
        console.error(`Failed to rollback transaction:`, rollbackError);
      }
      throw error;
    }
  }
  /**
   * Sync flashcards for a specific deck
   */
  async syncFlashcardsForDeck(deckId, force = false) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i;
    const deckSyncStartTime = performance.now();
    this.debugLog(`Syncing flashcards for deck ID: ${deckId}`);
    const deck = await this.db.getDeckById(deckId);
    if (!deck) {
      this.debugLog(`No deck found for ID: ${deckId}`);
      return;
    }
    this.debugLog(
      `Found deck ID: ${deck.id}, name: ${deck.name}, filepath: ${deck.filepath}`
    );
    const file7 = this.vault.getAbstractFileByPath(deck.filepath);
    if (!file7 || !(file7 instanceof import_obsidian.TFile))
      return;
    const fileModifiedTime = new Date(file7.stat.mtime);
    if (!force) {
      const deckModifiedTime = new Date(deck.modified);
      if (fileModifiedTime <= deckModifiedTime) {
        this.debugLog(
          `File ${deck.filepath} not modified since last sync, skipping`
        );
        return;
      }
    }
    this.debugLog(
      `File modified: ${fileModifiedTime.toISOString()}, last sync: ${deck.modified}`
    );
    const existingFlashcards = await this.db.getFlashcardsByDeck(deck.id);
    this.debugLog(
      `Found ${existingFlashcards.length} existing flashcards for deck ${deck.name}`
    );
    const existingById = /* @__PURE__ */ new Map();
    existingFlashcards.forEach((card) => {
      existingById.set(card.id, card);
      this.debugLog(`Existing card ID: ${card.id}, Front: "${card.front}"`);
    });
    const processedIds = /* @__PURE__ */ new Set();
    const duplicateWarnings = /* @__PURE__ */ new Set();
    const batchOperations = [];
    const allParsedCards = await this.parseFlashcardsFromFile(
      file7,
      deck.config.headerLevel
    );
    const parsedCards = allParsedCards.slice(0, MAX_FLASHCARDS_PER_DECK);
    this.debugLog(
      `Parsed ${allParsedCards.length} flashcards from ${deck.filepath}, processing first ${parsedCards.length} (limit: ${MAX_FLASHCARDS_PER_DECK})`
    );
    if (allParsedCards.length > MAX_FLASHCARDS_PER_DECK) {
      this.debugLog(
        `\u26A0\uFE0F Deck "${deck.name}" exceeds flashcard limit. ${allParsedCards.length - MAX_FLASHCARDS_PER_DECK} flashcards will be skipped.`
      );
      if ((_c = (_b = (_a = this.plugin) == null ? void 0 : _a.settings) == null ? void 0 : _b.ui) == null ? void 0 : _c.enableNotices) {
        new import_obsidian.Notice(
          `\u26A0\uFE0F Deck "${deck.name}" has ${allParsedCards.length} flashcards. Only processing first ${MAX_FLASHCARDS_PER_DECK} for performance.`,
          8e3
        );
      }
    }
    for (let i = 0; i < parsedCards.length; i++) {
      const parsed = parsedCards[i];
      const flashcardId = this.generateFlashcardId(parsed.front);
      const contentHash = this.generateContentHash(parsed.back);
      const existingCard = existingById.get(flashcardId);
      if (processedIds.has(flashcardId)) {
        const duplicateKey = `${deck.name}:${parsed.front}`;
        if (!duplicateWarnings.has(duplicateKey)) {
          if ((_f = (_e = (_d = this.plugin) == null ? void 0 : _d.settings) == null ? void 0 : _e.ui) == null ? void 0 : _f.enableNotices) {
            new import_obsidian.Notice(
              `\u26A0\uFE0F Duplicate flashcard detected in "${deck.name}": "${parsed.front.substring(0, 50)}${parsed.front.length > 50 ? "..." : ""}". Only the first occurrence will be used.`,
              8e3
            );
          }
          duplicateWarnings.add(duplicateKey);
          this.debugLog(
            `Duplicate flashcard detected: "${parsed.front}" in deck "${deck.name}"`
          );
        }
        continue;
      }
      this.debugLog(
        `Processing flashcard: "${parsed.front.substring(0, 50)}..."`
      );
      this.debugLog(
        `Generated ID: ${flashcardId} (from front: "${parsed.front.substring(0, 30)}..." + deck: ${deck.id})`
      );
      this.debugLog(`Existing card found:`, existingCard ? "YES" : "NO");
      if (existingCard) {
        this.debugLog(
          `Existing card - ID: ${existingCard.id}, Front: "${existingCard.front.substring(0, 30)}...", Hash: ${existingCard.contentHash}`
        );
      }
      processedIds.add(flashcardId);
      await yieldEvery(i);
      if (existingCard) {
        if (existingCard.contentHash !== contentHash) {
          this.debugLog(
            `Content changed, updating flashcard: ${parsed.front.substring(0, 30)}...`
          );
          batchOperations.push({
            type: "update",
            flashcardId: existingCard.id,
            updates: {
              front: parsed.front,
              back: parsed.back,
              type: parsed.type,
              contentHash
            }
          });
        } else {
          this.debugLog(
            `No content change, skipping update: ${parsed.front.substring(0, 30)}...`
          );
        }
      } else {
        const previousProgress = await this.db.getLatestReviewLogForFlashcard(flashcardId);
        const flashcard = {
          id: flashcardId,
          deckId: deck.id,
          front: parsed.front,
          back: parsed.back,
          type: parsed.type,
          sourceFile: file7.path,
          contentHash,
          // Restore progress from review logs or use defaults
          state: (previousProgress == null ? void 0 : previousProgress.newState) || "new",
          dueDate: previousProgress ? new Date(
            new Date(previousProgress.reviewedAt).getTime() + previousProgress.newIntervalMinutes * 60 * 1e3
          ).toISOString() : (/* @__PURE__ */ new Date()).toISOString(),
          interval: (previousProgress == null ? void 0 : previousProgress.newIntervalMinutes) || 0,
          repetitions: (previousProgress == null ? void 0 : previousProgress.newRepetitions) || 0,
          difficulty: (previousProgress == null ? void 0 : previousProgress.newDifficulty) || 5,
          // FSRS initial difficulty
          stability: (previousProgress == null ? void 0 : previousProgress.newStability) || 2.5,
          // FSRS initial stability
          lapses: (previousProgress == null ? void 0 : previousProgress.newLapses) || 0,
          lastReviewed: (previousProgress == null ? void 0 : previousProgress.reviewedAt) || null
        };
        if (previousProgress) {
          this.debugLog(
            `Restoring flashcard progress from review logs: ${flashcard.front} (state: ${previousProgress.newState}, interval: ${previousProgress.newIntervalMinutes})`
          );
          if ((_i = (_h = (_g = this.plugin) == null ? void 0 : _g.settings) == null ? void 0 : _h.ui) == null ? void 0 : _i.enableNotices) {
            new import_obsidian.Notice(
              `\u2705 Progress restored for flashcard: "${parsed.front.substring(0, 40)}${parsed.front.length > 40 ? "..." : ""}" (${previousProgress.newState}, ${previousProgress.newRepetitions} reviews)`,
              5e3
            );
          }
        } else {
          this.debugLog(`Creating new flashcard: ${flashcard.front}`);
        }
        batchOperations.push({
          type: "create",
          flashcard
        });
      }
    }
    for (const [flashcardId, existingCard] of existingById) {
      if (!processedIds.has(flashcardId)) {
        this.debugLog(`Deleting flashcard: ${existingCard.front}`);
        batchOperations.push({
          type: "delete",
          flashcardId: existingCard.id
        });
      }
    }
    if (batchOperations.length > 0) {
      this.debugLog(
        `Executing ${batchOperations.length} batch database operations`
      );
      await this.executeBatchOperations(batchOperations);
      this.debugLog(`Batch operations completed successfully`);
    }
    const timestampStartTime = performance.now();
    try {
      this.debugLog(`Updating deck timestamp for: ${deck.name}`);
      await this.db.updateDeckTimestampWithoutSave(
        deck.id,
        fileModifiedTime.toISOString()
      );
      this.debugLog(`Deck timestamp updated successfully`);
    } catch (error) {
      console.error(`Failed to update deck timestamp for ${deck.name}:`, error);
      throw error;
    }
    try {
      this.debugLog(`Checking for duplicates in deck: ${deck.name}`);
      await this.checkForDuplicatesInDeck(deck.id);
      this.debugLog(`Duplicate check completed for deck: ${deck.name}`);
    } catch (error) {
      console.error(`Failed to check duplicates for ${deck.name}:`, error);
      throw error;
    }
    const timestampTime = performance.now() - timestampStartTime;
    const totalDeckSyncTime = performance.now() - deckSyncStartTime;
    this.performanceLog(
      `Sync completed for deck: ${deck.name} in ${formatTime(totalDeckSyncTime)} (${parsedCards.length} flashcards, ${batchOperations.length} operations, cleanup: ${formatTime(timestampTime)}) - DB save deferred`
    );
    yieldToUI();
  }
  /**
   * Create deck for a single file without running full sync
   */
  async createDeckForFile(filePath, tag) {
    const file7 = this.vault.getAbstractFileByPath(filePath);
    if (!file7 || !(file7 instanceof import_obsidian.TFile))
      return;
    const deckName = file7.basename;
    const existingDeck = await this.db.getDeckByFilepath(filePath);
    if (!existingDeck) {
      const fileModTime = new Date(file7.stat.mtime);
      const fileCreateTime = new Date(file7.stat.ctime);
      const deckModTime = fileModTime < fileCreateTime ? fileModTime : fileCreateTime;
      const deck = {
        id: this.generateDeckId(filePath),
        name: deckName,
        filepath: filePath,
        tag,
        lastReviewed: null,
        config: DEFAULT_DECK_CONFIG,
        modified: deckModTime.toISOString()
      };
      this.debugLog(
        `Creating new deck: "${deckName}" with ID: ${deck.id}, tag: ${tag}, filepath: ${filePath}`
      );
      await this.db.createDeck(deck);
    }
  }
  /**
   * Generate content hash for flashcard back content (front is used for ID)
   */
  generateContentHash(back) {
    let hash = 0;
    for (let i = 0; i < back.length; i++) {
      const char = back.charCodeAt(i);
      hash = (hash << 5) - hash + char;
      hash = hash & hash;
    }
    return Math.abs(hash).toString(16);
  }
  /**
   * Extract deck name from files (use the first file's name)
   */
  extractDeckNameFromFiles(files) {
    if (files.length === 0) {
      return "General";
    }
    const firstFile = files[0];
    return firstFile.basename;
  }
  /**
   * Extract deck name from tag (legacy method for compatibility)
   */
  extractDeckName(tag) {
    let name = tag.replace("#flashcards", "");
    if (name.startsWith("/")) {
      name = name.substring(1);
    }
    if (!name) {
      return "General";
    }
    const parts = name.split("/");
    return parts.map((part) => part.charAt(0).toUpperCase() + part.slice(1)).join(" - ");
  }
  /**
   * Generate deterministic deck ID based on filepath
   */
  generateDeckId(filepath) {
    if (filepath) {
      let hash = 0;
      for (let i = 0; i < filepath.length; i++) {
        const char = filepath.charCodeAt(i);
        hash = (hash << 5) - hash + char;
        hash = hash & hash;
      }
      return `deck_${Math.abs(hash).toString(36)}`;
    }
    return `deck_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * Generate unique flashcard ID using hash of front text only
   */
  generateFlashcardId(frontText, deckId) {
    let hash = 0;
    for (let i = 0; i < frontText.length; i++) {
      const char = frontText.charCodeAt(i);
      hash = (hash << 5) - hash + char;
      hash = hash & hash;
    }
    return `card_${Math.abs(hash).toString(36)}`;
  }
  /**
   * Check for duplicate flashcards in a deck and warn the user
   */
  async checkForDuplicatesInDeck(deckId) {
    var _a, _b, _c;
    const existingFlashcards = await this.db.getFlashcardsByDeck(deckId);
    const frontTextMap = /* @__PURE__ */ new Map();
    for (const card of existingFlashcards) {
      const normalizedFront = card.front.trim().toLowerCase();
      if (!frontTextMap.has(normalizedFront)) {
        frontTextMap.set(normalizedFront, []);
      }
      frontTextMap.get(normalizedFront).push(card);
    }
    const deck = await this.db.getDeckById(deckId);
    const deckName = (deck == null ? void 0 : deck.name) || "Unknown Deck";
    for (const [frontText, cards] of frontTextMap) {
      if (cards.length > 1) {
        if ((_c = (_b = (_a = this.plugin) == null ? void 0 : _a.settings) == null ? void 0 : _b.ui) == null ? void 0 : _c.enableNotices) {
          new import_obsidian.Notice(
            `\u26A0\uFE0F Found ${cards.length} duplicate flashcards in "${deckName}": "${cards[0].front.substring(0, 50)}${cards[0].front.length > 50 ? "..." : ""}". Consider removing duplicates to avoid confusion.`,
            1e4
          );
        }
        this.debugLog(
          `Duplicate flashcards found in deck "${deckName}": "${cards[0].front}" (${cards.length} copies)`
        );
      }
    }
  }
  /**
   * Update deck IDs for all flashcards when a deck ID changes (e.g., file rename)
   */
  async updateFlashcardDeckIds(oldDeckId, newDeckId) {
    this.debugLog(
      `Updating flashcard deck IDs from ${oldDeckId} to ${newDeckId}`
    );
    await this.db.updateFlashcardDeckIds(oldDeckId, newDeckId);
  }
};
// Pre-compiled regex patterns for better performance
_DeckManager.HEADER_REGEX = /^(#{1,6})\s+/;
_DeckManager.TABLE_ROW_REGEX = /^\|.*\|$/;
_DeckManager.TABLE_SEPARATOR_REGEX = /^\|[\s-]+\|[\s-]+\|$/;
var DeckManager = _DeckManager;

// src/services/DeckSynchronizer.ts
var DeckSynchronizer = class {
  constructor(db, deckManager, settings, adapter, configDir) {
    this.isSyncing = false;
    this.db = db;
    this.deckManager = deckManager;
    this.logger = new Logger(settings, adapter, configDir);
  }
  debugLog(message, ...args) {
    this.logger.debug(message, ...args);
  }
  performanceLog(message, ...args) {
    this.logger.performance(message, ...args);
  }
  /**
   * Check if a sync operation is currently in progress
   */
  get isInProgress() {
    return this.isSyncing;
  }
  /**
   * Format time duration in human-readable format
   */
  /**
   * Perform initial sync with graceful error handling
   */
  async performInitialSync() {
    try {
      this.debugLog("Starting initial sync...");
      await new Promise((resolve) => setTimeout(resolve, 5e3));
      await this.performSync({ forceSync: false, showProgress: true });
      this.debugLog("Initial sync completed successfully");
    } catch (error) {
      console.error("Initial sync failed:", error);
    }
  }
  /**
   * Main sync operation - coordinates deck discovery and flashcard synchronization
   */
  async performSync(options = {}) {
    const { forceSync = false, showProgress = false, onProgress } = options;
    if (this.isSyncing) {
      this.debugLog("Sync already in progress, skipping...");
      throw new Error("Sync already in progress");
    }
    this.isSyncing = true;
    const syncStartTime = performance.now();
    try {
      this.debugLog(
        `Performing ${forceSync ? "forced " : ""}sync of decks and flashcards...`
      );
      if (showProgress && onProgress) {
        onProgress({ message: "\u{1F50D} Discovering decks...", percentage: 10 });
      }
      const decksStartTime = performance.now();
      await this.deckManager.syncDecks();
      const decksTime = performance.now() - decksStartTime;
      this.performanceLog(
        `Deck discovery completed in ${formatTime(decksTime)}`
      );
      const decks = await this.db.getAllDecks();
      this.debugLog(
        `Found ${decks.length} decks after sync:`,
        decks.map((d) => d.name)
      );
      if (showProgress && onProgress) {
        onProgress({
          message: `\u{1F4DA} Processing ${decks.length} decks...`,
          percentage: 20
        });
      }
      let totalFlashcards = 0;
      const flashcardSyncStartTime = performance.now();
      for (let i = 0; i < decks.length; i++) {
        const deck = decks[i];
        const deckStartTime = performance.now();
        if (showProgress && onProgress) {
          const deckProgress = 20 + i / decks.length * 70;
          onProgress({
            message: `\u{1F4C4} Processing deck: ${deck.name} (${i + 1}/${decks.length})`,
            percentage: deckProgress
          });
        }
        this.debugLog(
          `${forceSync ? "Force s" : "S"}yncing flashcards for deck: ${deck.name} (${deck.filepath})`
        );
        await this.deckManager.syncFlashcardsForDeck(deck.id, forceSync);
        await yieldToUI();
        const flashcards = await this.db.getFlashcardsByDeck(deck.id);
        const deckTime = performance.now() - deckStartTime;
        totalFlashcards += flashcards.length;
        this.performanceLog(
          `Deck ${deck.name} processed in ${formatTime(deckTime)} - ${flashcards.length} flashcards`
        );
      }
      if (showProgress && onProgress) {
        onProgress({ message: "\u{1F4BE} Saving database...", percentage: 95 });
      }
      this.debugLog("Saving database after processing all decks...");
      const saveStartTime = performance.now();
      await yieldToUI();
      await this.db.save();
      await yieldToUI();
      const saveTime = performance.now() - saveStartTime;
      this.debugLog("Database saved successfully");
      this.performanceLog(
        `Database saved in ${formatTime(saveTime)} after processing ${decks.length} decks`
      );
      const flashcardSyncTime = performance.now() - flashcardSyncStartTime;
      const totalSyncTime = performance.now() - syncStartTime;
      this.performanceLog(
        `Total sync completed in ${formatTime(totalSyncTime)} - ${totalFlashcards} flashcards across ${decks.length} decks`
      );
      if (decks.length > 0) {
        const avgDeckTime = flashcardSyncTime / decks.length;
        const avgFlashcardTime = totalFlashcards > 0 ? flashcardSyncTime / totalFlashcards : 0;
        this.performanceLog(
          `Performance: ${formatTime(avgDeckTime)}/deck, ${formatTime(avgFlashcardTime)}/flashcard`
        );
      }
      if (showProgress && onProgress) {
        onProgress({
          message: `\u2705 Sync complete! Processed ${totalFlashcards} flashcards across ${decks.length} decks in ${formatTime(totalSyncTime)} (DB saved in ${formatTime(saveTime)})`,
          percentage: 100
        });
      }
      return {
        totalDecks: decks.length,
        totalFlashcards,
        syncTime: totalSyncTime,
        saveTime,
        success: true
      };
    } catch (error) {
      this.debugLog("Error during sync:", error);
      if (showProgress && onProgress) {
        onProgress({
          message: `\u274C Sync failed - check console for details, message: ${error.message}, stack ${error.stack}`,
          percentage: 0
        });
      }
      return {
        totalDecks: 0,
        totalFlashcards: 0,
        syncTime: performance.now() - syncStartTime,
        saveTime: 0,
        success: false,
        error
      };
    } finally {
      this.isSyncing = false;
    }
  }
  /**
   * Sync flashcards for a specific deck
   */
  async syncDeck(deckId, forceSync = false, onProgress) {
    this.debugLog(`Syncing specific deck ID: ${deckId}`);
    const deck = await this.db.getDeckById(deckId);
    if (!deck) {
      this.debugLog(`No deck found for ID: ${deckId}`);
      return;
    }
    const deckDisplayName = deck.name;
    if (onProgress) {
      onProgress({
        message: `\u{1F504} Force refreshing deck: ${deckDisplayName}...`,
        percentage: 20
      });
    }
    const startTime = performance.now();
    await this.deckManager.syncFlashcardsForDeck(deckId, forceSync);
    const duration = performance.now() - startTime;
    if (onProgress) {
      onProgress({
        message: `\u2705 Force refresh complete: ${deckDisplayName} (${Math.round(duration)}ms)`,
        percentage: 100
      });
    }
  }
  /**
   * Create a deck for a specific file
   */
  async createDeckForFile(filePath, tag) {
    this.debugLog(`Creating deck for file: ${filePath} with tag: ${tag}`);
    await this.deckManager.createDeckForFile(filePath, tag);
  }
  /**
   * Update flashcard deck IDs when a deck is renamed
   */
  async updateFlashcardDeckIds(oldDeckId, newDeckId) {
    this.debugLog(
      `Updating flashcard deck IDs from ${oldDeckId} to ${newDeckId}`
    );
    await this.deckManager.updateFlashcardDeckIds(oldDeckId, newDeckId);
  }
  /**
   * Get sync statistics
   */
  getSyncStats() {
    return {
      isInProgress: this.isSyncing
    };
  }
};

// src/algorithm/fsrs.ts
var MILLISECONDS_PER_DAY = 864e5;
var MINUTES_PER_DAY = 1440;
var MILLISECONDS_PER_MINUTE = 6e4;
function roundForDisplay(value, decimals) {
  return value.toFixed(decimals);
}
var FSRS = class {
  constructor(params) {
    this.params = {
      requestRetention: 0.9,
      profile: "STANDARD",
      ...params
    };
    this.validateParameters();
  }
  /**
   * Update FSRS parameters
   */
  updateParameters(params) {
    this.params = { ...this.params, ...params };
    this.validateParameters();
  }
  /**
   * Get current profile weights (hardcoded, not user-editable)
   */
  getWeights() {
    return getWeightsForProfile(this.params.profile);
  }
  /**
   * Get minimum minutes for current profile (hardcoded)
   */
  getMinMinutes() {
    return getMinMinutesForProfile(this.params.profile);
  }
  /**
   * Get maximum interval days for current profile (hardcoded)
   */
  getMaxIntervalDays() {
    return getMaxIntervalDaysForProfile(this.params.profile);
  }
  /**
   * Validate FSRS parameters
   */
  validateParameters() {
    if (!validateProfile(this.params.profile)) {
      throw new Error(
        `Invalid profile: ${this.params.profile}, must be "INTENSIVE" or "STANDARD"`
      );
    }
    if (!validateRequestRetention(this.params.requestRetention)) {
      throw new Error(
        `requestRetention must be in range (0.5, 0.995), got ${this.params.requestRetention}`
      );
    }
    const weights = this.getWeights();
    if (!validateFSRSWeights(weights)) {
      throw new Error(
        `Invalid hardcoded weights for profile ${this.params.profile}`
      );
    }
  }
  /**
   * Calculate the next scheduling info for a flashcard based on review difficulty
   */
  getSchedulingInfo(card) {
    const fsrsCard = this.flashcardToFSRS(card);
    const now = /* @__PURE__ */ new Date();
    return {
      again: this.calculateScheduleForRating(fsrsCard, 1, now),
      hard: this.calculateScheduleForRating(fsrsCard, 2, now),
      good: this.calculateScheduleForRating(fsrsCard, 3, now),
      easy: this.calculateScheduleForRating(fsrsCard, 4, now)
    };
  }
  /**
   * Update a flashcard based on the selected difficulty
   */
  updateCard(card, difficulty) {
    const rating = this.difficultyToRating(difficulty);
    const fsrsCard = this.flashcardToFSRS(card);
    const now = /* @__PURE__ */ new Date();
    const updatedFsrsCard = this.calculateUpdatedFsrsCard(
      fsrsCard,
      rating,
      now
    );
    let intervalMinutes;
    if (rating === 1) {
      intervalMinutes = this.getMinMinutes();
    } else {
      intervalMinutes = this.nextIntervalMinutes(updatedFsrsCard.stability);
    }
    const schedule = this.createSchedulingCard(
      intervalMinutes,
      updatedFsrsCard,
      now
    );
    return {
      ...card,
      state: schedule.state,
      dueDate: schedule.dueDate,
      interval: schedule.interval,
      difficulty: schedule.difficulty,
      // Store FSRS difficulty with full precision
      repetitions: schedule.repetitions,
      stability: schedule.stability,
      // Store stability with full precision
      lapses: updatedFsrsCard.lapses,
      lastReviewed: now.toISOString(),
      modified: now.toISOString()
    };
  }
  calculateUpdatedFsrsCard(card, rating, now) {
    if (card.state === "New" || card.stability === 0 || card.difficulty === 0) {
      return {
        ...card,
        stability: this.initStability(rating),
        difficulty: this.initDifficulty(rating),
        reps: 1,
        lapses: rating === 1 ? 1 : 0,
        lastReview: now,
        state: "Review",
        elapsedDays: 0
      };
    } else {
      const newCard = { ...card };
      newCard.elapsedDays = this.getElapsedDays(card.lastReview, now);
      newCard.reps += 1;
      if (rating === 1) {
        newCard.lapses += 1;
        if (!isFinite(newCard.difficulty) || newCard.difficulty <= 0) {
          newCard.difficulty = this.initDifficulty(3);
        }
        newCard.difficulty = this.nextDifficulty(newCard.difficulty, rating);
        newCard.stability = this.initStability(rating);
      } else {
        if (!isFinite(newCard.stability) || newCard.stability <= 0) {
          newCard.stability = this.initStability(3);
        }
        const retrievability = this.forgettingCurve(
          newCard.elapsedDays,
          newCard.stability
        );
        newCard.difficulty = this.nextDifficulty(newCard.difficulty, rating);
        newCard.stability = this.nextStability(
          newCard.difficulty,
          newCard.stability,
          retrievability,
          rating
        );
        if (!isFinite(newCard.stability) || newCard.stability <= 0) {
          newCard.stability = this.initStability(rating);
        }
      }
      newCard.lastReview = now;
      newCard.state = "Review";
      return newCard;
    }
  }
  calculateScheduleForRating(card, rating, now) {
    const updatedCard = this.calculateUpdatedFsrsCard(card, rating, now);
    if (!isFinite(updatedCard.stability) || updatedCard.stability <= 0) {
      updatedCard.stability = this.initStability(rating);
    }
    let intervalMinutes;
    if (rating === 1) {
      intervalMinutes = this.getMinMinutes();
    } else {
      intervalMinutes = this.nextIntervalMinutes(updatedCard.stability);
    }
    return this.createSchedulingCard(intervalMinutes, updatedCard, now);
  }
  createSchedulingCard(intervalMinutes, card, now) {
    if (!isFinite(now.getTime())) {
      throw new Error("Invalid date provided to createSchedulingCard");
    }
    const intervalMilliseconds = intervalMinutes * MILLISECONDS_PER_MINUTE;
    const dueDate = new Date(now.getTime() + intervalMilliseconds);
    if (!isFinite(dueDate.getTime())) {
      throw new Error(
        `Invalid due date calculated: intervalMinutes=${intervalMinutes}, now=${now.toISOString()}`
      );
    }
    return {
      dueDate: dueDate.toISOString(),
      interval: intervalMinutes,
      // Store full precision interval
      repetitions: card.reps,
      stability: card.stability,
      // Store full precision stability
      difficulty: card.difficulty,
      // Store full precision difficulty
      state: this.fsrsStateToFlashcardState(card.state)
    };
  }
  initStability(rating) {
    const weights = this.getWeights();
    const stability = weights[rating - 1];
    const result = isFinite(stability) ? stability : 0.01;
    return result;
  }
  initDifficulty(rating) {
    const weights = this.getWeights();
    const w4 = weights[4];
    const w5 = weights[5];
    const ratingDiff = rating - 3;
    const difficulty = w4 - w5 * ratingDiff;
    const validDifficulty = isFinite(difficulty) ? difficulty : 5;
    if (validDifficulty < 1)
      return 1;
    if (validDifficulty > 10)
      return 10;
    return validDifficulty;
  }
  /**
   * Forgetting curve function with maximum precision
   */
  forgettingCurve(elapsedDays, stability) {
    if (!isFinite(elapsedDays) || !isFinite(stability) || stability <= 0) {
      return 0;
    }
    const stabilityFactor = 9 * stability;
    const elapsedToStabilityRatio = elapsedDays / stabilityFactor;
    const baseTerm = 1 + elapsedToStabilityRatio;
    if (!isFinite(baseTerm) || baseTerm <= 0) {
      return 0;
    }
    const powerTerm = Math.pow(baseTerm, -1);
    return isFinite(powerTerm) ? powerTerm : 0;
  }
  /**
   * Calculate retrievability for a flashcard at review time
   * @param card - The flashcard being reviewed
   * @param reviewedAt - When the review is happening
   * @returns Retrievability value (0-1)
   */
  getRetrievability(card, reviewedAt = /* @__PURE__ */ new Date()) {
    if (!card.lastReviewed || card.stability <= 0) {
      return 0.9;
    }
    const reviewedAtTime = reviewedAt.getTime();
    const lastReviewedTime = new Date(card.lastReviewed).getTime();
    const elapsedMilliseconds = reviewedAtTime - lastReviewedTime;
    const elapsedDays = Math.max(0, elapsedMilliseconds / MILLISECONDS_PER_DAY);
    return this.forgettingCurve(elapsedDays, card.stability);
  }
  /**
   * Calculate next difficulty with maximum precision
   */
  nextDifficulty(difficulty, rating) {
    if (!isFinite(difficulty) || !isFinite(rating)) {
      return 5;
    }
    const weights = this.getWeights();
    const w6 = weights[6];
    const ratingDiff = rating - 3;
    const difficultyChange = w6 * ratingDiff;
    const nextD = difficulty - difficultyChange;
    const w4 = weights[4];
    const revertedD = this.meanReversion(w4, nextD);
    if (revertedD < 1)
      return 1;
    if (revertedD > 10)
      return 10;
    return revertedD;
  }
  /**
   * Mean reversion calculation with maximum precision
   */
  meanReversion(init2, current) {
    if (!isFinite(init2) || !isFinite(current)) {
      return init2;
    }
    const weights = this.getWeights();
    const w7 = weights[7];
    const initWeight = w7 * init2;
    const currentWeight = (1 - w7) * current;
    return initWeight + currentWeight;
  }
  /**
   * Calculate next stability with maximum precision
   */
  nextStability(difficulty, stability, retrievability, rating) {
    if (!isFinite(difficulty) || !isFinite(stability) || !isFinite(retrievability)) {
      return Math.max(stability, 0.01);
    }
    const weights = this.getWeights();
    const w8 = isFinite(weights[8]) ? weights[8] : 0;
    const w9 = isFinite(weights[9]) ? weights[9] : 0.1;
    const w10 = isFinite(weights[10]) ? weights[10] : 0;
    const w15 = isFinite(weights[15]) ? weights[15] : 1;
    const w16 = isFinite(weights[16]) ? weights[16] : 1;
    const hardPenalty = rating === 2 ? w15 : 1;
    const easyBonus = rating === 4 ? w16 : 1;
    const expW8 = Math.exp(w8);
    const difficultyTerm = 11 - difficulty;
    const stabilityPowerTerm = stability > 0 ? Math.pow(stability, -w9) : 1;
    const retrievabilityTerm = 1 - retrievability;
    const retrievabilityProduct = retrievabilityTerm * w10;
    const expRetrievabilityTerm = Math.exp(retrievabilityProduct) - 1;
    if (!isFinite(expW8) || !isFinite(difficultyTerm) || !isFinite(stabilityPowerTerm) || !isFinite(expRetrievabilityTerm)) {
      return Math.max(stability, 0.01);
    }
    const growthFactor = expW8 * difficultyTerm * stabilityPowerTerm * expRetrievabilityTerm;
    const totalGrowthFactor = growthFactor * hardPenalty * easyBonus;
    const newStabilityFactor = 1 + totalGrowthFactor;
    const result = stability * newStabilityFactor;
    return isFinite(result) && result > 0 ? result : Math.max(stability, 0.1);
  }
  /**
   * Calculate next interval in minutes with maximum precision
   */
  nextIntervalMinutes(stability) {
    const minInterval = this.getMinMinutes();
    if (!isFinite(stability) || stability <= 0) {
      console.warn(`Invalid stability: ${stability}, using minMinutes`);
      return minInterval;
    }
    if (!isFinite(this.params.requestRetention) || this.params.requestRetention <= 0 || this.params.requestRetention >= 1) {
      console.warn(
        `Invalid requestRetention: ${this.params.requestRetention}, using minMinutes`
      );
      return minInterval;
    }
    const retentionLog = Math.log(this.params.requestRetention);
    const baseLog = Math.log(0.9);
    const k = retentionLog / baseLog;
    const intervalDays = stability * k;
    const intervalMinutes = intervalDays * MINUTES_PER_DAY;
    if (!isFinite(intervalMinutes)) {
      console.warn(
        `Invalid minutes calculation: stability=${stability}, k=${k}, using minMinutes`
      );
      return minInterval;
    }
    const maxInterval = this.getMaxIntervalDays() * MINUTES_PER_DAY;
    let result = intervalMinutes;
    if (result < minInterval)
      result = minInterval;
    if (result > maxInterval)
      result = maxInterval;
    if (!isFinite(result)) {
      console.warn(`Invalid final result: ${result}, using minMinutes`);
      return minInterval;
    }
    return result;
  }
  /**
   * Calculate elapsed days with maximum precision
   */
  getElapsedDays(lastReview, now) {
    const nowTime = now.getTime();
    const lastReviewTime = lastReview.getTime();
    const elapsedMilliseconds = nowTime - lastReviewTime;
    const elapsedDays = elapsedMilliseconds / MILLISECONDS_PER_DAY;
    return Math.max(0, elapsedDays);
  }
  flashcardToFSRS(card) {
    const lastReview = card.lastReviewed ? new Date(card.lastReviewed) : /* @__PURE__ */ new Date();
    const difficulty = card.difficulty || 5;
    return {
      stability: card.stability || 0,
      difficulty: difficulty || 0,
      elapsedDays: 0,
      // Will be calculated in scheduling
      reps: card.repetitions,
      lapses: card.lapses || 0,
      state: this.flashcardStateToFSRSState(card.state),
      lastReview
    };
  }
  flashcardStateToFSRSState(state) {
    return state === "new" ? "New" : "Review";
  }
  fsrsStateToFlashcardState(state) {
    return state === "New" ? "new" : "review";
  }
  difficultyToRating(difficulty) {
    switch (difficulty) {
      case "again":
        return 1;
      case "hard":
        return 2;
      case "good":
        return 3;
      case "easy":
        return 4;
      default:
        return 3;
    }
  }
  /**
   * Get display text for intervals - UI formatting only
   */
  static getIntervalDisplay(minutes) {
    if (minutes < 60) {
      return `${Math.round(minutes)}m`;
    } else if (minutes < MINUTES_PER_DAY) {
      const hours = Math.round(minutes / 60);
      return `${hours}h`;
    } else {
      const days = Math.round(minutes / MINUTES_PER_DAY);
      if (days < 30) {
        return `${days}d`;
      } else if (days < 365) {
        const months = Math.round(days / 30);
        return `${months}mo`;
      } else {
        const years = days / 365;
        return `${roundForDisplay(years, 1)}y`;
      }
    }
  }
};

// src/services/Scheduler.ts
var Scheduler = class {
  constructor(db, settings, adapter, configDir, backupService) {
    this.currentSessionId = null;
    this.backupService = null;
    this.db = db;
    this.fsrs = new FSRS();
    this.logger = new Logger(settings, adapter, configDir);
    this.backupService = backupService || null;
    this.settings = settings;
  }
  debugLog(message, ...args) {
    this.logger.debug(message, ...args);
  }
  /**
   * Start a new review session for a deck
   */
  async startReviewSession(deckId, now = /* @__PURE__ */ new Date(), sessionDurationMinutes) {
    this.debugLog(`Starting review session for deck: ${deckId}`);
    const deck = await this.db.getDeckById(deckId);
    if (!deck) {
      this.debugLog(`Error: Deck not found: ${deckId}`);
      throw new Error(`Deck not found: ${deckId}`);
    }
    this.debugLog(`Found deck: ${deck.name} (${deck.id})`);
    const dailyCounts = await this.db.getDailyReviewCounts(deckId);
    const dueCardCount = await this.getDueCardCount(
      now,
      deckId,
      sessionDurationMinutes
    );
    const newCardCount = await this.getNewCardCount(deckId);
    let goalTotal = 0;
    if (deck.config.hasReviewCardsLimitEnabled) {
      const remainingReviewQuota = Math.max(
        0,
        deck.config.reviewCardsPerDay - dailyCounts.reviewCount
      );
      goalTotal += Math.min(dueCardCount, remainingReviewQuota);
    } else {
      goalTotal += dueCardCount;
    }
    if (deck.config.hasNewCardsLimitEnabled) {
      const remainingNewQuota = Math.max(
        0,
        deck.config.newCardsPerDay - dailyCounts.newCount
      );
      goalTotal += Math.min(newCardCount, remainingNewQuota);
    } else {
      goalTotal += newCardCount;
    }
    const finalGoalTotal = Math.max(1, goalTotal);
    const sessionId = await this.db.createReviewSession({
      deckId,
      startedAt: now.toISOString(),
      endedAt: null,
      goalTotal: finalGoalTotal,
      doneUnique: 0
    });
    this.debugLog(
      `Review session created: ${sessionId}, goal: ${finalGoalTotal}`
    );
    return sessionId;
  }
  /**
   * Get progress for a review session
   */
  async getSessionProgress(sessionId) {
    const session = await this.db.getReviewSessionById(sessionId);
    if (!session)
      return null;
    const progress = session.goalTotal > 0 ? Math.min(100, session.doneUnique / session.goalTotal * 100) : 0;
    return {
      doneUnique: session.doneUnique,
      goalTotal: session.goalTotal,
      progress
    };
  }
  /**
   * End a review session
   */
  async endReviewSession(sessionId, now = /* @__PURE__ */ new Date()) {
    await this.db.endReviewSession(sessionId, now.toISOString());
    this.save();
    if (this.backupService && this.settings.backup.enableAutoBackup) {
      try {
        await this.backupService.createBackup(this.db);
      } catch (error) {
        this.debugLog("Failed to create backup after session end:", error);
      }
    }
  }
  /**
   * Start a fresh review session for a deck (ends any existing session)
   */
  async startFreshSession(deckId, now = /* @__PURE__ */ new Date(), sessionDurationMinutes) {
    const activeSession = await this.db.getActiveReviewSession(deckId);
    if (activeSession) {
      await this.db.endReviewSession(activeSession.id, now.toISOString());
    }
    this.currentSessionId = await this.startReviewSession(
      deckId,
      now,
      sessionDurationMinutes
    );
    return this.currentSessionId;
  }
  /**
   * Set the current active session for tracking
   */
  setCurrentSession(sessionId) {
    this.currentSessionId = sessionId;
  }
  /**
   * Get the current active session
   */
  getCurrentSession() {
    return this.currentSessionId;
  }
  /**
   * Get the next due card for review
   */
  async getNext(now, deckId, options = {}) {
    this.debugLog(
      `Getting next card for deck: ${deckId}, allowNew: ${options.allowNew}`
    );
    const { allowNew = true } = options;
    if (await this.hasReviewCardQuota(deckId)) {
      this.debugLog(`Checking for due cards for deck: ${deckId}`);
      const dueCard = await this.getNextDueCard(now, deckId);
      if (dueCard) {
        this.debugLog(`Found due card: ${dueCard.id}`);
        return dueCard;
      }
      this.debugLog(`No due cards found for deck: ${deckId}`);
    } else {
      this.debugLog(`Review card quota exhausted for deck: ${deckId}`);
    }
    if (allowNew && await this.hasNewCardQuota(deckId)) {
      this.debugLog(`Checking for new cards for deck: ${deckId}`);
      const newCard = await this.getNextNewCard(deckId);
      if (newCard) {
        this.debugLog(`Found new card: ${newCard.id}`);
      } else {
        this.debugLog(`No new cards found for deck: ${deckId}`);
      }
      return newCard;
    } else if (!allowNew) {
      this.debugLog(`New cards not allowed for this request`);
    } else {
      this.debugLog(`New card quota exhausted for deck: ${deckId}`);
    }
    this.debugLog(`No cards available for deck: ${deckId}`);
    return null;
  }
  /**
   * Preview scheduling outcomes for all four ratings without mutations
   */
  async preview(cardId, now = /* @__PURE__ */ new Date()) {
    const card = await this.db.getFlashcardById(cardId);
    if (!card)
      return null;
    const deck = await this.db.getDeckById(card.deckId);
    if (!deck)
      return null;
    this.updateFSRSForDeck(deck);
    const ratings = ["again", "hard", "good", "easy"];
    const preview = {};
    for (const rating of ratings) {
      const updatedCard = this.fsrs.updateCard(card, rating);
      preview[rating] = {
        dueDate: updatedCard.dueDate,
        interval: updatedCard.interval,
        repetitions: updatedCard.repetitions,
        stability: updatedCard.stability,
        difficulty: updatedCard.difficulty,
        state: updatedCard.state
      };
    }
    return preview;
  }
  /**
   * Rate a card and update its state atomically with session tracking
   */
  async rate(cardId, rating, now = /* @__PURE__ */ new Date(), timeElapsed) {
    this.debugLog(`Rating card ${cardId} with rating: ${rating}`);
    const card = await this.db.getFlashcardById(cardId);
    if (!card) {
      this.debugLog(`Error: Card not found: ${cardId}`);
      throw new Error(`Card not found: ${cardId}`);
    }
    const deck = await this.db.getDeckById(card.deckId);
    if (!deck) {
      this.debugLog(`Error: Deck not found: ${card.deckId}`);
      throw new Error(`Deck not found: ${card.deckId}`);
    }
    this.debugLog(
      `Found card: ${card.front.substring(0, 50)}... in deck: ${deck.name}`
    );
    this.updateFSRSForDeck(deck);
    const oldCard = { ...card };
    const updatedCard = this.fsrs.updateCard(card, rating);
    const elapsedDays = this.getElapsedDays(card, now);
    const retrievability = this.calculateRetrievability(card, elapsedDays);
    let isFirstReviewInSession = false;
    if (this.currentSessionId) {
      isFirstReviewInSession = !await this.db.isCardReviewedInSession(
        this.currentSessionId,
        card.id
      );
      if (isFirstReviewInSession) {
        const session = await this.db.getReviewSessionById(
          this.currentSessionId
        );
        if (session) {
          const newDoneUnique = session.doneUnique + 1;
          await this.db.updateReviewSessionDoneUnique(
            this.currentSessionId,
            newDoneUnique
          );
        }
      }
    }
    const reviewLog = {
      flashcardId: card.id,
      sessionId: this.currentSessionId || void 0,
      lastReviewedAt: oldCard.lastReviewed || oldCard.dueDate,
      reviewedAt: now.toISOString(),
      rating: this.ratingToNumber(rating),
      ratingLabel: rating,
      timeElapsedMs: timeElapsed || 0,
      // Pre-state
      oldState: oldCard.state,
      oldRepetitions: oldCard.repetitions || 0,
      oldLapses: oldCard.lapses || 0,
      oldStability: oldCard.stability || 0,
      oldDifficulty: oldCard.difficulty || 0,
      // Post-state
      newState: updatedCard.state,
      newRepetitions: updatedCard.repetitions,
      newLapses: updatedCard.lapses,
      newStability: updatedCard.stability,
      newDifficulty: updatedCard.difficulty,
      // Intervals & due times
      oldIntervalMinutes: oldCard.interval,
      newIntervalMinutes: updatedCard.interval,
      oldDueAt: oldCard.dueDate,
      newDueAt: updatedCard.dueDate,
      // Derived values
      elapsedDays,
      retrievability,
      // Configuration context
      requestRetention: deck.config.fsrs.requestRetention,
      profile: deck.config.fsrs.profile,
      maximumIntervalDays: getMaxIntervalDaysForProfile(
        deck.config.fsrs.profile
      ),
      minMinutes: getMinMinutesForProfile(deck.config.fsrs.profile),
      fsrsWeightsVersion: this.getWeightsHash(deck.config.fsrs.profile),
      schedulerVersion: "1.0",
      // Content context
      contentHash: card.contentHash
    };
    await this.db.updateFlashcard(updatedCard.id, {
      state: updatedCard.state,
      dueDate: updatedCard.dueDate,
      interval: updatedCard.interval,
      repetitions: updatedCard.repetitions,
      difficulty: updatedCard.difficulty,
      stability: updatedCard.stability,
      lapses: updatedCard.lapses,
      lastReviewed: updatedCard.lastReviewed
    });
    await yieldToUI();
    await this.db.createReviewLog(reviewLog);
    return updatedCard;
  }
  /**
   * Save all pending changes to disk
   */
  async save() {
    await yieldToUI();
    await this.db.save();
    await yieldToUI();
  }
  /**
   * Peek at the next N due cards without mutations
   */
  async peekDue(now, deckId, limit = 10) {
    this.debugLog(`Peeking at due cards for deck: ${deckId}, limit: ${limit}`);
    const deck = await this.db.getDeckById(deckId);
    if (!deck)
      return [];
    let query = `
      SELECT * FROM flashcards
      WHERE deck_id = ? AND due_date <= ? AND state = 'review'
    `;
    const params = [deckId, now.toISOString()];
    if (deck.config.reviewOrder === "random") {
      query += " ORDER BY RANDOM() LIMIT ?";
    } else {
      query += " ORDER BY due_date ASC, last_reviewed ASC LIMIT ?";
    }
    params.push(limit.toString());
    const dueCards = await this.queryFlashcards(query, params);
    this.debugLog(`Found ${dueCards.length} due cards for deck: ${deckId}`);
    return dueCards;
  }
  /**
   * Get milliseconds until next card is due
   */
  async timeToNext(now, deckId) {
    const query = `
      SELECT MIN(due_date) as next_due
      FROM flashcards
      WHERE deck_id = ? AND due_date > ?
      ORDER BY due_date ASC
      LIMIT 1
    `;
    const results = await this.queryRaw(query, [deckId, now.toISOString()]);
    const nextDue = results.length > 0 ? results[0][0] : null;
    if (!nextDue) {
      return null;
    }
    const nextDueDate = new Date(nextDue);
    return Math.max(0, nextDueDate.getTime() - now.getTime());
  }
  // Private helper methods
  async getNextDueCard(now, deckId) {
    const deck = await this.db.getDeckById(deckId);
    if (!deck)
      return null;
    let query = `
      SELECT * FROM flashcards
      WHERE deck_id = ? AND due_date <= ? AND state = 'review'
    `;
    const params = [deckId, now.toISOString()];
    if (deck.config.reviewOrder === "random") {
      query += " ORDER BY RANDOM() LIMIT 1";
    } else {
      query += " ORDER BY due_date ASC, last_reviewed ASC LIMIT 1";
    }
    const results = await this.queryFlashcards(query, params);
    return results.length > 0 ? results[0] : null;
  }
  async getNextNewCard(deckId) {
    let query = `
      SELECT * FROM flashcards
      WHERE deck_id = ? AND state = 'new'
    `;
    const params = [deckId];
    query += " ORDER BY due_date ASC LIMIT 1";
    const results = await this.queryFlashcards(query, params);
    return results.length > 0 ? results[0] : null;
  }
  async hasNewCardQuota(deckId) {
    const deck = await this.db.getDeckById(deckId);
    if (!deck)
      return false;
    if (!deck.config.hasNewCardsLimitEnabled)
      return true;
    const dailyCounts = await this.db.getDailyReviewCounts(deckId);
    return dailyCounts.newCount < deck.config.newCardsPerDay;
  }
  async hasReviewCardQuota(deckId) {
    const deck = await this.db.getDeckById(deckId);
    if (!deck)
      return false;
    if (!deck.config.hasReviewCardsLimitEnabled)
      return true;
    const dailyCounts = await this.db.getDailyReviewCounts(deckId);
    return dailyCounts.reviewCount < deck.config.reviewCardsPerDay;
  }
  updateFSRSForDeck(deck) {
    this.fsrs.updateParameters({
      requestRetention: deck.config.fsrs.requestRetention,
      profile: deck.config.fsrs.profile
    });
  }
  getElapsedDays(card, now) {
    if (!card.lastReviewed)
      return 0;
    const lastReview = new Date(card.lastReviewed);
    return Math.max(0, (now.getTime() - lastReview.getTime()) / 864e5);
  }
  calculateRetrievability(card, elapsedDays) {
    if (!card.stability || card.state === "new")
      return 1;
    return Math.pow(1 + elapsedDays / (9 * card.stability), -1);
  }
  ratingToNumber(rating) {
    const ratingMap = {
      again: 1,
      hard: 2,
      good: 3,
      easy: 4
    };
    return ratingMap[rating];
  }
  getWeightsHash(profile) {
    return `${profile}-v1.0`;
  }
  async getDueCardCount(now, deckId, sessionDurationMinutes = 25) {
    const sessionEndTime = new Date(
      now.getTime() + sessionDurationMinutes * 60 * 1e3
    );
    const query = `
    SELECT COUNT(*) as count
    FROM flashcards
    WHERE deck_id = ? AND due_date <= ? AND state = 'review'
  `;
    const results = await this.queryRaw(query, [
      deckId,
      sessionEndTime.toISOString()
    ]);
    return results.length > 0 ? results[0][0] : 0;
  }
  async getNewCardCount(deckId) {
    const query = `
    SELECT COUNT(*) as count
    FROM flashcards
    WHERE deck_id = ? AND state = 'new'
  `;
    const results = await this.queryRaw(query, [deckId]);
    return results.length > 0 ? results[0][0] : 0;
  }
  /**
   * Helper method to query flashcards and convert rows to Flashcard objects
   */
  async queryFlashcards(query, params) {
    const results = await this.queryRaw(query, params);
    return results.map((row) => this.rowToFlashcard(row));
  }
  /**
   * Execute raw SQL query and return results
   */
  async queryRaw(query, params) {
    return await this.db.query(query, params);
  }
  /**
   * Convert database row to Flashcard object (same logic as DatabaseService)
   */
  rowToFlashcard(row) {
    return {
      id: row[0],
      deckId: row[1],
      front: row[2],
      back: row[3],
      type: row[4],
      sourceFile: row[5],
      contentHash: row[6],
      state: row[7],
      dueDate: row[8],
      interval: row[9],
      repetitions: row[10],
      difficulty: row[11],
      stability: row[12],
      lapses: row[13],
      lastReviewed: row[14],
      created: row[15],
      modified: row[16]
    };
  }
};

// src/services/BackupService.ts
var import_sql2 = __toESM(require_sql_wasm());
var BackupService = class {
  constructor(adapter, vaultConfigDir, debugLog) {
    this.maxBackups = 5;
    this.adapter = adapter;
    this.backupDir = `${vaultConfigDir}/plugins/decks/backups`;
    this.debugLog = debugLog;
  }
  /**
   * Create a backup of review_logs and review_sessions tables
   */
  async createBackup(db) {
    try {
      await this.ensureBackupDir();
      const SQL = await (0, import_sql2.default)({
        locateFile: (file7) => `https://sql.js.org/dist/${file7}`
      });
      const backupDb = new SQL.Database();
      backupDb.exec(BACKUP_TABLES_SQL);
      const reviewLogs = await db.getAllReviewLogs();
      const reviewSessions = await db.getAllReviewSessions();
      const reviewLogStmt = backupDb.prepare(`
        INSERT INTO review_logs VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
      `);
      for (const log of reviewLogs) {
        reviewLogStmt.run([
          log.id,
          log.flashcardId,
          log.sessionId || null,
          log.lastReviewedAt,
          log.shownAt || null,
          log.reviewedAt,
          log.rating,
          log.ratingLabel,
          log.timeElapsedMs || null,
          log.oldState,
          log.oldRepetitions,
          log.oldLapses,
          log.oldStability,
          log.oldDifficulty,
          log.newState,
          log.newRepetitions,
          log.newLapses,
          log.newStability,
          log.newDifficulty,
          log.oldIntervalMinutes,
          log.newIntervalMinutes,
          log.oldDueAt,
          log.newDueAt,
          log.elapsedDays,
          log.retrievability,
          log.requestRetention,
          log.profile,
          log.maximumIntervalDays,
          log.minMinutes,
          log.fsrsWeightsVersion,
          log.schedulerVersion,
          log.noteModelId || null,
          log.cardTemplateId || null,
          log.contentHash || null,
          log.client || null
        ]);
      }
      reviewLogStmt.free();
      await yieldToUI();
      const reviewSessionStmt = backupDb.prepare(`
        INSERT INTO review_sessions VALUES (?, ?, ?, ?, ?, ?)
      `);
      for (const session of reviewSessions) {
        reviewSessionStmt.run([
          session.id,
          session.deckId,
          session.startedAt,
          session.endedAt,
          session.goalTotal,
          session.doneUnique
        ]);
      }
      reviewSessionStmt.free();
      await yieldToUI();
      const now = /* @__PURE__ */ new Date();
      const dateString = now.toISOString().split("T")[0];
      const filename = `backup-${dateString}.db`;
      const filepath = `${this.backupDir}/${filename}`;
      const backupBuffer = backupDb.export();
      await this.adapter.writeBinary(filepath, backupBuffer);
      await yieldToUI();
      backupDb.close();
      this.debugLog(`Backup created: ${filename}`);
      await this.cleanupOldBackups();
    } catch (error) {
      this.debugLog("Failed to create backup:", error);
    }
  }
  /**
   * Get list of available backups
   */
  async getAvailableBackups() {
    try {
      this.debugLog(`Checking backup directory: ${this.backupDir}`);
      await this.ensureBackupDir();
      const files = await this.adapter.list(this.backupDir);
      this.debugLog(`Listed files in backup directory:`, files);
      const backups = [];
      this.debugLog(`Found ${files.files.length} files to check`);
      for (const file7 of files.files) {
        this.debugLog(`Checking file: ${file7}`);
        const filename = file7.split("/").pop() || file7;
        if (filename.endsWith(".db") && filename.startsWith("backup-")) {
          this.debugLog(`File matches backup pattern: ${file7}`);
          const dateMatch = filename.match(/^backup-(\d{4}-\d{2}-\d{2})\.db$/);
          this.debugLog(`Filename extracted: ${filename}`);
          this.debugLog(`Date match for ${filename}:`, dateMatch);
          if (dateMatch) {
            const timestamp = /* @__PURE__ */ new Date(dateMatch[1] + "T00:00:00");
            this.debugLog(`Parsed timestamp for ${filename}:`, timestamp);
            backups.push({
              filename,
              timestamp
            });
          } else {
            this.debugLog(
              `Date pattern did not match for filename: ${filename}`
            );
          }
        } else {
          this.debugLog(`File does not match backup pattern: ${file7}`);
        }
      }
      backups.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());
      return backups;
    } catch (error) {
      this.debugLog("Failed to list backups:", error);
      return [];
    }
  }
  /**
   * Restore backup data to database
   */
  async restoreBackup(filename, db, onProgress) {
    try {
      const filepath = `${this.backupDir}/${filename}`;
      if (!await this.adapter.exists(filepath)) {
        throw new Error(`Backup file not found: ${filename}`);
      }
      const SQL = await (0, import_sql2.default)({
        locateFile: (file7) => `https://sql.js.org/dist/${file7}`
      });
      const backupBuffer = await this.adapter.readBinary(filepath);
      const backupDb = new SQL.Database(new Uint8Array(backupBuffer));
      const reviewLogs = [];
      const reviewSessions = [];
      const reviewLogStmt = backupDb.prepare(`
        SELECT id, flashcard_id, session_id, last_reviewed_at, shown_at, reviewed_at,
               rating, rating_label, time_elapsed_ms, old_state, old_repetitions,
               old_lapses, old_stability, old_difficulty, new_state, new_repetitions,
               new_lapses, new_stability, new_difficulty, old_interval_minutes,
               new_interval_minutes, old_due_at, new_due_at, elapsed_days,
               retrievability, request_retention, profile, maximum_interval_days,
               min_minutes, fsrs_weights_version, scheduler_version, note_model_id,
               card_template_id, content_hash, client
        FROM review_logs
      `);
      while (reviewLogStmt.step()) {
        const row = reviewLogStmt.get();
        reviewLogs.push({
          id: row[0],
          flashcardId: row[1],
          sessionId: row[2],
          lastReviewedAt: row[3],
          shownAt: row[4],
          reviewedAt: row[5],
          rating: row[6],
          ratingLabel: row[7],
          timeElapsedMs: row[8],
          oldState: row[9],
          oldRepetitions: row[10],
          oldLapses: row[11],
          oldStability: row[12],
          oldDifficulty: row[13],
          newState: row[14],
          newRepetitions: row[15],
          newLapses: row[16],
          newStability: row[17],
          newDifficulty: row[18],
          oldIntervalMinutes: row[19],
          newIntervalMinutes: row[20],
          oldDueAt: row[21],
          newDueAt: row[22],
          elapsedDays: row[23],
          retrievability: row[24],
          requestRetention: row[25],
          profile: row[26],
          maximumIntervalDays: row[27],
          minMinutes: row[28],
          fsrsWeightsVersion: row[29],
          schedulerVersion: row[30],
          noteModelId: row[31],
          cardTemplateId: row[32],
          contentHash: row[33],
          client: row[34]
        });
      }
      reviewLogStmt.free();
      await yieldToUI();
      const reviewSessionStmt = backupDb.prepare(`
        SELECT id, deck_id, started_at, ended_at, goal_total, done_unique
        FROM review_sessions
      `);
      while (reviewSessionStmt.step()) {
        const row = reviewSessionStmt.get();
        reviewSessions.push({
          id: row[0],
          deckId: row[1],
          startedAt: row[2],
          endedAt: row[3],
          goalTotal: row[4],
          doneUnique: row[5]
        });
      }
      reviewSessionStmt.free();
      await yieldToUI();
      backupDb.close();
      let restored = 0;
      const total = reviewLogs.length + reviewSessions.length;
      for (const log of reviewLogs) {
        try {
          const exists = await db.reviewLogExists(log.id);
          if (!exists) {
            await db.insertReviewLog(log);
          }
          restored++;
          onProgress == null ? void 0 : onProgress(restored, total);
        } catch (error) {
          this.debugLog(`Failed to restore review log ${log.id}:`, error);
        }
      }
      for (const session of reviewSessions) {
        try {
          const exists = await db.reviewSessionExists(session.id);
          if (!exists) {
            await db.insertReviewSession(session);
          }
          restored++;
          onProgress == null ? void 0 : onProgress(restored, total);
        } catch (error) {
          this.debugLog(
            `Failed to restore review session ${session.id}:`,
            error
          );
        }
      }
      await yieldToUI();
      this.debugLog(
        `Backup restored: ${filename}, ${restored}/${total} records processed`
      );
    } catch (error) {
      this.debugLog("Failed to restore backup:", error);
      throw error;
    }
  }
  /**
   * Ensure backup directory exists
   */
  async ensureBackupDir() {
    try {
      if (!await this.adapter.exists(this.backupDir)) {
        await this.adapter.mkdir(this.backupDir);
        this.debugLog(`Created backup directory: ${this.backupDir}`);
      }
    } catch (error) {
      this.debugLog("Failed to create backup directory:", error);
      throw error;
    }
  }
  /**
   * Clean up old backups, keeping only the most recent ones
   */
  async cleanupOldBackups() {
    try {
      const backups = await this.getAvailableBackups();
      if (backups.length > this.maxBackups) {
        const toDelete = backups.slice(this.maxBackups);
        for (const backup of toDelete) {
          try {
            const filepath = `${this.backupDir}/${backup.filename}`;
            await this.adapter.remove(filepath);
            this.debugLog(`Deleted old backup: ${backup.filename}`);
          } catch (error) {
            this.debugLog(
              `Failed to delete old backup ${backup.filename}:`,
              error
            );
          }
        }
      }
    } catch (error) {
      this.debugLog("Failed to cleanup old backups:", error);
    }
  }
  /**
   * Format timestamp for display
   */
  static formatTimestamp(timestamp) {
    return timestamp.toLocaleString();
  }
};

// src/utils/progress.ts
var import_obsidian2 = require("obsidian");
var ProgressTracker = class {
  constructor(settings) {
    this.progressNotice = null;
    this.settings = settings;
  }
  show(message) {
    var _a, _b;
    if (((_b = (_a = this.settings) == null ? void 0 : _a.ui) == null ? void 0 : _b.enableNotices) !== false) {
      this.progressNotice = new import_obsidian2.Notice(message, 0);
    }
  }
  update(message, progress = 0) {
    if (this.progressNotice) {
      const progressBar = this.createProgressBar(progress);
      this.progressNotice.setMessage(`${message}
${progressBar}`);
    }
  }
  hide() {
    if (this.progressNotice) {
      this.progressNotice.hide();
      this.progressNotice = null;
    }
  }
  createProgressBar(progress) {
    const width = 25;
    const filled = Math.round(progress / 100 * width);
    const empty2 = width - filled;
    const bar = "\u2588".repeat(filled) + "\u2591".repeat(empty2);
    const percentage = Math.round(progress);
    return `[${bar}] ${percentage}%`;
  }
};

// src/settings.ts
var DEFAULT_SETTINGS = {
  review: {
    showProgress: true,
    enableKeyboardShortcuts: true,
    sessionDuration: 25
  },
  parsing: {
    folderSearchPath: ""
    // Default: scan entire vault
  },
  ui: {
    enableBackgroundRefresh: true,
    backgroundRefreshInterval: 5,
    enableNotices: true
  },
  backup: {
    enableAutoBackup: true,
    maxBackups: 5
  },
  debug: {
    enableLogging: false,
    performanceLogs: false
  }
};

// src/components/SettingsTab.ts
var import_obsidian3 = require("obsidian");
var DecksSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin, settings, db, saveSettings, logger, performSync, refreshViewStats, restartBackgroundRefresh, startBackgroundRefresh, stopBackgroundRefresh, purgeDatabase, backupService) {
    super(app, plugin);
    this.plugin = plugin;
    this.settings = settings;
    this.db = db;
    this.logger = logger;
    this.saveSettings = saveSettings;
    this.performSync = performSync;
    this.refreshViewStats = refreshViewStats;
    this.restartBackgroundRefresh = restartBackgroundRefresh;
    this.startBackgroundRefresh = startBackgroundRefresh;
    this.stopBackgroundRefresh = stopBackgroundRefresh;
    this.purgeDatabase = purgeDatabase;
    this.backupService = backupService;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Decks Plugin Settings" });
    this.addReviewSettings(containerEl);
    this.addParsingSettings(containerEl);
    this.addUISettings(containerEl);
    this.addBackupSettings(containerEl);
    this.addDebugSettings(containerEl);
    this.addDatabaseSettings(containerEl);
  }
  addReviewSettings(containerEl) {
    containerEl.createEl("h3", { text: "Review Sessions" });
    new import_obsidian3.Setting(containerEl).setName("Show Progress").setDesc("Display progress bar during review sessions").addToggle(
      (toggle) => toggle.setValue(this.settings.review.showProgress).onChange(async (value) => {
        this.settings.review.showProgress = value;
        await this.saveSettings();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Keyboard Shortcuts").setDesc("Enable keyboard shortcuts in review modal (1-4 for difficulty)").addToggle(
      (toggle) => toggle.setValue(this.settings.review.enableKeyboardShortcuts).onChange(async (value) => {
        this.settings.review.enableKeyboardShortcuts = value;
        await this.saveSettings();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Session Duration").setDesc(
      "Maximum duration for flashcard review sessions in minutes (1-60)"
    ).addText(
      (text2) => text2.setPlaceholder("25").setValue(this.settings.review.sessionDuration.toString()).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num >= 1 && num <= 60) {
          this.settings.review.sessionDuration = num;
          await this.saveSettings();
        }
      })
    );
  }
  addParsingSettings(containerEl) {
    containerEl.createEl("h3", { text: "Parsing" });
    const folderOptions = {
      "": "Scan entire vault (default)"
    };
    this.app.vault.getAllFolders().forEach((folder) => {
      folderOptions[folder.path] = folder.path;
    });
    new import_obsidian3.Setting(containerEl).setName("Folder Search Path").setDesc(
      "Limit scanning to a specific folder. Select 'Scan entire vault' to scan all files."
    ).addDropdown((dropdown) => {
      Object.entries(folderOptions).forEach(([value, display]) => {
        dropdown.addOption(value, display);
      });
      dropdown.setValue(this.settings.parsing.folderSearchPath).onChange(async (value) => {
        this.settings.parsing.folderSearchPath = value;
        await this.saveSettings();
      });
    });
  }
  addUISettings(containerEl) {
    containerEl.createEl("h3", { text: "User Interface" });
    const intervalSetting = new import_obsidian3.Setting(containerEl).setName("Background Refresh Interval").setDesc("How often to refresh deck stats in the side panel (in seconds)").addText(
      (text2) => text2.setPlaceholder("5").setValue(this.settings.ui.backgroundRefreshInterval.toString()).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num >= 1 && num <= 60) {
          this.settings.ui.backgroundRefreshInterval = num;
          await this.saveSettings();
          this.restartBackgroundRefresh();
        }
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Enable Background Refresh").setDesc("Automatically refresh deck stats in the side panel").addToggle(
      (toggle) => toggle.setValue(this.settings.ui.enableBackgroundRefresh).onChange(async (value) => {
        this.settings.ui.enableBackgroundRefresh = value;
        await this.saveSettings();
        intervalSetting.setDisabled(!value);
        if (value) {
          this.startBackgroundRefresh();
        } else {
          this.stopBackgroundRefresh();
        }
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Enable Notices").setDesc(
      "Show notification messages for completed review sessions and sync operations"
    ).addToggle(
      (toggle) => toggle.setValue(this.settings.ui.enableNotices).onChange(async (value) => {
        this.settings.ui.enableNotices = value;
        await this.saveSettings();
      })
    );
    intervalSetting.setDisabled(!this.settings.ui.enableBackgroundRefresh);
  }
  addDebugSettings(containerEl) {
    containerEl.createEl("h3", { text: "Debug" });
    containerEl.createEl("p", {
      text: "Debug settings for troubleshooting and development.",
      cls: "setting-item-description"
    });
    new import_obsidian3.Setting(containerEl).setName("Enable Debug Logging").setDesc(
      "Show detailed logging in the console for sync operations and flashcard processing"
    ).addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue(((_a = this.settings.debug) == null ? void 0 : _a.enableLogging) || false).onChange(async (value) => {
          if (!this.settings.debug) {
            this.settings.debug = {
              enableLogging: false,
              performanceLogs: false
            };
          }
          this.settings.debug.enableLogging = value;
          await this.saveSettings();
        });
      }
    );
    new import_obsidian3.Setting(containerEl).setName("Enable Performance Logs").setDesc(
      "Show performance timing metrics in the console (sync times, parsing performance, etc.)"
    ).addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue(((_a = this.settings.debug) == null ? void 0 : _a.performanceLogs) || false).onChange(async (value) => {
          if (!this.settings.debug) {
            this.settings.debug = {
              enableLogging: false,
              performanceLogs: false
            };
          }
          this.settings.debug.performanceLogs = value;
          await this.saveSettings();
        });
      }
    );
  }
  addDatabaseSettings(containerEl) {
    containerEl.createEl("h3", { text: "Database Management" });
    containerEl.createEl("p", {
      text: "Manage your flashcard database. Use with caution - these actions cannot be undone.",
      cls: "setting-item-description"
    });
    new import_obsidian3.Setting(containerEl).setName("Purge Database").setDesc(
      "\u26A0\uFE0F Permanently delete all flashcards, review history, and deck data. This will force a clean rebuild from your vault files. All progress will be lost!"
    ).addButton(
      (button) => button.setButtonText("Purge Database").setWarning().onClick(() => {
        new DatabasePurgeModal(
          this.app,
          this.purgeDatabase,
          this.performSync,
          this.refreshViewStats,
          this.logger
        ).open();
      })
    );
  }
  addBackupSettings(containerEl) {
    containerEl.createEl("h3", { text: "Backup" });
    new import_obsidian3.Setting(containerEl).setName("Enable Auto Backup").setDesc("Automatically backup review data after each session").addToggle(
      (toggle) => toggle.setValue(this.settings.backup.enableAutoBackup).onChange(async (value) => {
        this.settings.backup.enableAutoBackup = value;
        await this.saveSettings();
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Max Backups").setDesc("Maximum number of backups to keep (3-10)").addSlider(
      (slider) => slider.setLimits(3, 10, 1).setValue(this.settings.backup.maxBackups).setDynamicTooltip().onChange(async (value) => {
        this.settings.backup.maxBackups = value;
        await this.saveSettings();
      })
    );
    containerEl.createEl("h4", { text: "Restore Backup" });
    let selectedBackup = "";
    const backupSetting = new import_obsidian3.Setting(containerEl).setName("Available Backups").setDesc("Select a backup to restore").addDropdown((dropdown) => {
      dropdown.addOption("", "Select backup...");
      dropdown.onChange((value) => {
        selectedBackup = value;
      });
    }).addButton(
      (button) => button.setButtonText("Refresh").setTooltip("Refresh backup list").onClick(async () => {
        await this.refreshBackupList(backupSetting);
      })
    ).addButton(
      (button) => button.setButtonText("Restore").setCta().onClick(async () => {
        if (!selectedBackup) {
          new import_obsidian3.Notice("Please select a backup to restore");
          return;
        }
        await this.restoreBackup(selectedBackup);
      })
    );
    this.refreshBackupList(backupSetting);
  }
  async refreshBackupList(setting) {
    try {
      this.logger.debug("Refreshing backup list...");
      const backups = await this.backupService.getAvailableBackups();
      this.logger.debug("Found backups:", backups);
      const dropdown = setting.components.find(
        (comp) => comp instanceof import_obsidian3.DropdownComponent
      );
      if (!dropdown) {
        this.logger.debug("Dropdown component not found");
        new import_obsidian3.Notice("Dropdown not found", 3e3);
        return;
      }
      while (dropdown.selectEl.firstChild) {
        dropdown.selectEl.removeChild(dropdown.selectEl.firstChild);
      }
      const defaultOption = dropdown.selectEl.createEl("option");
      defaultOption.value = "";
      defaultOption.textContent = "Select backup...";
      if (backups.length === 0) {
        const noBackupsOption = dropdown.selectEl.createEl("option");
        noBackupsOption.value = "";
        noBackupsOption.textContent = "No backups found";
        dropdown.setDisabled(true);
        new import_obsidian3.Notice("No backups found", 3e3);
      } else {
        dropdown.setDisabled(false);
        for (const backup of backups) {
          const option = dropdown.selectEl.createEl("option");
          option.value = backup.filename;
          option.textContent = `${BackupService.formatTimestamp(backup.timestamp)}`;
        }
        new import_obsidian3.Notice(`Found ${backups.length} backup(s)`, 3e3);
      }
    } catch (error) {
      this.logger.debug("Failed to load backup list:", error);
      new import_obsidian3.Notice(`Failed to load backup list: ${error.message}`, 5e3);
    }
  }
  async restoreBackup(filename) {
    const progressNotice = new import_obsidian3.Notice("Restoring backup...", 0);
    try {
      if (!this.db) {
        throw new Error("Database not available");
      }
      let current = 0;
      let total = 0;
      await this.backupService.restoreBackup(
        filename,
        this.db,
        (currentCount, totalCount) => {
          current = currentCount;
          total = totalCount;
          const progress = Math.round(current / total * 100);
          progressNotice.setMessage(
            `Restoring backup: ${progress}% (${current}/${total})`
          );
        }
      );
      progressNotice.hide();
      new import_obsidian3.Notice(
        `\u2705 Backup restored successfully! Processed ${current}/${total} records.`,
        5e3
      );
      if (this.plugin.view) {
        await this.plugin.view.refresh(true);
      }
    } catch (error) {
      progressNotice.hide();
      this.logger.debug("Backup restoration failed:", error);
      new import_obsidian3.Notice(`\u274C Backup restoration failed: ${error.message}`, 8e3);
    }
  }
};
var DatabasePurgeModal = class extends import_obsidian3.Modal {
  constructor(app, purgeDatabase, performSync, refreshViewStats, logger) {
    super(app);
    this.purgeDatabase = purgeDatabase;
    this.performSync = performSync;
    this.refreshViewStats = refreshViewStats;
    this.logger = logger;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "\u26A0\uFE0F Purge Database" });
    const warning = contentEl.createEl("div", {
      cls: "setting-item-description"
    });
    warning.innerHTML = `
      <p><strong>This will permanently delete ALL flashcard data including:</strong></p>
      <ul>
        <li>All flashcards and their content</li>
        <li>Complete review history and progress</li>
        <li>All deck information</li>
        <li>Statistical data</li>
      </ul>
      <p><strong>This action cannot be undone!</strong></p>
      <p>The database will be rebuilt from your current vault files, but all progress will be lost.</p>
    `;
    contentEl.createEl("p", {
      text: 'Type "DELETE ALL DATA" to confirm:',
      cls: "setting-item-description"
    });
    const input = contentEl.createEl("input", {
      type: "text",
      placeholder: "DELETE ALL DATA"
    });
    input.style.width = "100%";
    input.style.marginBottom = "1rem";
    const buttonContainer = contentEl.createEl("div");
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "0.5rem";
    buttonContainer.style.justifyContent = "flex-end";
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.onclick = () => this.close();
    const confirmButton = buttonContainer.createEl("button", {
      text: "Purge Database",
      cls: "mod-warning"
    });
    confirmButton.onclick = async () => {
      if (input.value === "DELETE ALL DATA") {
        try {
          this.close();
          const notice = new import_obsidian3.Notice("Purging database...", 0);
          await this.purgeDatabase();
          await this.performSync(true);
          notice.setMessage("\u2705 Database purged and rebuilt successfully");
          setTimeout(() => notice.hide(), 3e3);
          await this.refreshViewStats();
        } catch (error) {
          this.logger.debug("Failed to purge database:", error);
          new import_obsidian3.Notice(
            "\u274C Failed to purge database. Check console for details.",
            5e3
          );
        }
      } else {
        new import_obsidian3.Notice(
          "Confirmation text doesn't match. Database purge cancelled.",
          3e3
        );
      }
    };
    input.focus();
    input.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        confirmButton.click();
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/components/DecksView.ts
var import_obsidian11 = require("obsidian");

// src/components/FlashcardReviewModalWrapper.ts
var import_obsidian4 = require("obsidian");

// node_modules/svelte/internal/index.mjs
function noop() {
}
function add_location(element2, file7, line, column, char) {
  element2.__svelte_meta = {
    loc: { file: file7, line, column, char }
  };
}
function run(fn) {
  return fn();
}
function blank_object() {
  return /* @__PURE__ */ Object.create(null);
}
function run_all(fns) {
  fns.forEach(run);
}
function is_function(thing) {
  return typeof thing === "function";
}
function safe_not_equal(a, b) {
  return a != a ? b == b : a !== b || (a && typeof a === "object" || typeof a === "function");
}
var src_url_equal_anchor;
function src_url_equal(element_src, url) {
  if (!src_url_equal_anchor) {
    src_url_equal_anchor = document.createElement("a");
  }
  src_url_equal_anchor.href = url;
  return element_src === src_url_equal_anchor.href;
}
function is_empty(obj) {
  return Object.keys(obj).length === 0;
}
var globals = typeof window !== "undefined" ? window : typeof globalThis !== "undefined" ? globalThis : global;
var ResizeObserverSingleton = class _ResizeObserverSingleton {
  constructor(options) {
    this.options = options;
    this._listeners = "WeakMap" in globals ? /* @__PURE__ */ new WeakMap() : void 0;
  }
  observe(element2, listener) {
    this._listeners.set(element2, listener);
    this._getObserver().observe(element2, this.options);
    return () => {
      this._listeners.delete(element2);
      this._observer.unobserve(element2);
    };
  }
  _getObserver() {
    var _a;
    return (_a = this._observer) !== null && _a !== void 0 ? _a : this._observer = new ResizeObserver((entries) => {
      var _a2;
      for (const entry of entries) {
        _ResizeObserverSingleton.entries.set(entry.target, entry);
        (_a2 = this._listeners.get(entry.target)) === null || _a2 === void 0 ? void 0 : _a2(entry);
      }
    });
  }
};
ResizeObserverSingleton.entries = "WeakMap" in globals ? /* @__PURE__ */ new WeakMap() : void 0;
var is_hydrating = false;
function start_hydrating() {
  is_hydrating = true;
}
function end_hydrating() {
  is_hydrating = false;
}
function append(target, node) {
  target.appendChild(node);
}
function insert(target, node, anchor) {
  target.insertBefore(node, anchor || null);
}
function detach(node) {
  if (node.parentNode) {
    node.parentNode.removeChild(node);
  }
}
function destroy_each(iterations, detaching) {
  for (let i = 0; i < iterations.length; i += 1) {
    if (iterations[i])
      iterations[i].d(detaching);
  }
}
function element(name) {
  return document.createElement(name);
}
function svg_element(name) {
  return document.createElementNS("http://www.w3.org/2000/svg", name);
}
function text(data) {
  return document.createTextNode(data);
}
function space() {
  return text(" ");
}
function empty() {
  return text("");
}
function listen(node, event, handler, options) {
  node.addEventListener(event, handler, options);
  return () => node.removeEventListener(event, handler, options);
}
function prevent_default(fn) {
  return function(event) {
    event.preventDefault();
    return fn.call(this, event);
  };
}
function attr(node, attribute, value) {
  if (value == null)
    node.removeAttribute(attribute);
  else if (node.getAttribute(attribute) !== value)
    node.setAttribute(attribute, value);
}
function children(element2) {
  return Array.from(element2.childNodes);
}
function set_input_value(input, value) {
  input.value = value == null ? "" : value;
}
function set_style(node, key, value, important) {
  if (value == null) {
    node.style.removeProperty(key);
  } else {
    node.style.setProperty(key, value, important ? "important" : "");
  }
}
function toggle_class(element2, name, toggle) {
  element2.classList[toggle ? "add" : "remove"](name);
}
function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {
  const e = document.createEvent("CustomEvent");
  e.initCustomEvent(type, bubbles, cancelable, detail);
  return e;
}
var current_component;
function set_current_component(component) {
  current_component = component;
}
function get_current_component() {
  if (!current_component)
    throw new Error("Function called outside component initialization");
  return current_component;
}
function onMount(fn) {
  get_current_component().$$.on_mount.push(fn);
}
function onDestroy(fn) {
  get_current_component().$$.on_destroy.push(fn);
}
function createEventDispatcher() {
  const component = get_current_component();
  return (type, detail, { cancelable = false } = {}) => {
    const callbacks = component.$$.callbacks[type];
    if (callbacks) {
      const event = custom_event(type, detail, { cancelable });
      callbacks.slice().forEach((fn) => {
        fn.call(component, event);
      });
      return !event.defaultPrevented;
    }
    return true;
  };
}
var dirty_components = [];
var binding_callbacks = [];
var render_callbacks = [];
var flush_callbacks = [];
var resolved_promise = /* @__PURE__ */ Promise.resolve();
var update_scheduled = false;
function schedule_update() {
  if (!update_scheduled) {
    update_scheduled = true;
    resolved_promise.then(flush);
  }
}
function tick() {
  schedule_update();
  return resolved_promise;
}
function add_render_callback(fn) {
  render_callbacks.push(fn);
}
var seen_callbacks = /* @__PURE__ */ new Set();
var flushidx = 0;
function flush() {
  if (flushidx !== 0) {
    return;
  }
  const saved_component = current_component;
  do {
    try {
      while (flushidx < dirty_components.length) {
        const component = dirty_components[flushidx];
        flushidx++;
        set_current_component(component);
        update(component.$$);
      }
    } catch (e) {
      dirty_components.length = 0;
      flushidx = 0;
      throw e;
    }
    set_current_component(null);
    dirty_components.length = 0;
    flushidx = 0;
    while (binding_callbacks.length)
      binding_callbacks.pop()();
    for (let i = 0; i < render_callbacks.length; i += 1) {
      const callback = render_callbacks[i];
      if (!seen_callbacks.has(callback)) {
        seen_callbacks.add(callback);
        callback();
      }
    }
    render_callbacks.length = 0;
  } while (dirty_components.length);
  while (flush_callbacks.length) {
    flush_callbacks.pop()();
  }
  update_scheduled = false;
  seen_callbacks.clear();
  set_current_component(saved_component);
}
function update($$) {
  if ($$.fragment !== null) {
    $$.update();
    run_all($$.before_update);
    const dirty = $$.dirty;
    $$.dirty = [-1];
    $$.fragment && $$.fragment.p($$.ctx, dirty);
    $$.after_update.forEach(add_render_callback);
  }
}
function flush_render_callbacks(fns) {
  const filtered = [];
  const targets = [];
  render_callbacks.forEach((c) => fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c));
  targets.forEach((c) => c());
  render_callbacks = filtered;
}
var outroing = /* @__PURE__ */ new Set();
var outros;
function group_outros() {
  outros = {
    r: 0,
    c: [],
    p: outros
    // parent group
  };
}
function check_outros() {
  if (!outros.r) {
    run_all(outros.c);
  }
  outros = outros.p;
}
function transition_in(block, local) {
  if (block && block.i) {
    outroing.delete(block);
    block.i(local);
  }
}
function transition_out(block, local, detach2, callback) {
  if (block && block.o) {
    if (outroing.has(block))
      return;
    outroing.add(block);
    outros.c.push(() => {
      outroing.delete(block);
      if (callback) {
        if (detach2)
          block.d(1);
        callback();
      }
    });
    block.o(local);
  } else if (callback) {
    callback();
  }
}
var _boolean_attributes = [
  "allowfullscreen",
  "allowpaymentrequest",
  "async",
  "autofocus",
  "autoplay",
  "checked",
  "controls",
  "default",
  "defer",
  "disabled",
  "formnovalidate",
  "hidden",
  "inert",
  "ismap",
  "loop",
  "multiple",
  "muted",
  "nomodule",
  "novalidate",
  "open",
  "playsinline",
  "readonly",
  "required",
  "reversed",
  "selected"
];
var boolean_attributes = /* @__PURE__ */ new Set([..._boolean_attributes]);
function create_component(block) {
  block && block.c();
}
function mount_component(component, target, anchor, customElement) {
  const { fragment, after_update } = component.$$;
  fragment && fragment.m(target, anchor);
  if (!customElement) {
    add_render_callback(() => {
      const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);
      if (component.$$.on_destroy) {
        component.$$.on_destroy.push(...new_on_destroy);
      } else {
        run_all(new_on_destroy);
      }
      component.$$.on_mount = [];
    });
  }
  after_update.forEach(add_render_callback);
}
function destroy_component(component, detaching) {
  const $$ = component.$$;
  if ($$.fragment !== null) {
    flush_render_callbacks($$.after_update);
    run_all($$.on_destroy);
    $$.fragment && $$.fragment.d(detaching);
    $$.on_destroy = $$.fragment = null;
    $$.ctx = [];
  }
}
function make_dirty(component, i) {
  if (component.$$.dirty[0] === -1) {
    dirty_components.push(component);
    schedule_update();
    component.$$.dirty.fill(0);
  }
  component.$$.dirty[i / 31 | 0] |= 1 << i % 31;
}
function init(component, options, instance7, create_fragment7, not_equal, props, append_styles, dirty = [-1]) {
  const parent_component = current_component;
  set_current_component(component);
  const $$ = component.$$ = {
    fragment: null,
    ctx: [],
    // state
    props,
    update: noop,
    not_equal,
    bound: blank_object(),
    // lifecycle
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),
    // everything else
    callbacks: blank_object(),
    dirty,
    skip_bound: false,
    root: options.target || parent_component.$$.root
  };
  append_styles && append_styles($$.root);
  let ready = false;
  $$.ctx = instance7 ? instance7(component, options.props || {}, (i, ret, ...rest) => {
    const value = rest.length ? rest[0] : ret;
    if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
      if (!$$.skip_bound && $$.bound[i])
        $$.bound[i](value);
      if (ready)
        make_dirty(component, i);
    }
    return ret;
  }) : [];
  $$.update();
  ready = true;
  run_all($$.before_update);
  $$.fragment = create_fragment7 ? create_fragment7($$.ctx) : false;
  if (options.target) {
    if (options.hydrate) {
      start_hydrating();
      const nodes = children(options.target);
      $$.fragment && $$.fragment.l(nodes);
      nodes.forEach(detach);
    } else {
      $$.fragment && $$.fragment.c();
    }
    if (options.intro)
      transition_in(component.$$.fragment);
    mount_component(component, options.target, options.anchor, options.customElement);
    end_hydrating();
    flush();
  }
  set_current_component(parent_component);
}
var SvelteElement;
if (typeof HTMLElement === "function") {
  SvelteElement = class extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: "open" });
    }
    connectedCallback() {
      const { on_mount } = this.$$;
      this.$$.on_disconnect = on_mount.map(run).filter(is_function);
      for (const key in this.$$.slotted) {
        this.appendChild(this.$$.slotted[key]);
      }
    }
    attributeChangedCallback(attr2, _oldValue, newValue) {
      this[attr2] = newValue;
    }
    disconnectedCallback() {
      run_all(this.$$.on_disconnect);
    }
    $destroy() {
      destroy_component(this, 1);
      this.$destroy = noop;
    }
    $on(type, callback) {
      if (!is_function(callback)) {
        return noop;
      }
      const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
      callbacks.push(callback);
      return () => {
        const index = callbacks.indexOf(callback);
        if (index !== -1)
          callbacks.splice(index, 1);
      };
    }
    $set($$props) {
      if (this.$$set && !is_empty($$props)) {
        this.$$.skip_bound = true;
        this.$$set($$props);
        this.$$.skip_bound = false;
      }
    }
  };
}
var SvelteComponent = class {
  $destroy() {
    destroy_component(this, 1);
    this.$destroy = noop;
  }
  $on(type, callback) {
    if (!is_function(callback)) {
      return noop;
    }
    const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
    callbacks.push(callback);
    return () => {
      const index = callbacks.indexOf(callback);
      if (index !== -1)
        callbacks.splice(index, 1);
    };
  }
  $set($$props) {
    if (this.$$set && !is_empty($$props)) {
      this.$$.skip_bound = true;
      this.$$set($$props);
      this.$$.skip_bound = false;
    }
  }
};
function dispatch_dev(type, detail) {
  document.dispatchEvent(custom_event(type, Object.assign({ version: "3.59.2" }, detail), { bubbles: true }));
}
function append_dev(target, node) {
  dispatch_dev("SvelteDOMInsert", { target, node });
  append(target, node);
}
function insert_dev(target, node, anchor) {
  dispatch_dev("SvelteDOMInsert", { target, node, anchor });
  insert(target, node, anchor);
}
function detach_dev(node) {
  dispatch_dev("SvelteDOMRemove", { node });
  detach(node);
}
function listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation, has_stop_immediate_propagation) {
  const modifiers = options === true ? ["capture"] : options ? Array.from(Object.keys(options)) : [];
  if (has_prevent_default)
    modifiers.push("preventDefault");
  if (has_stop_propagation)
    modifiers.push("stopPropagation");
  if (has_stop_immediate_propagation)
    modifiers.push("stopImmediatePropagation");
  dispatch_dev("SvelteDOMAddEventListener", { node, event, handler, modifiers });
  const dispose = listen(node, event, handler, options);
  return () => {
    dispatch_dev("SvelteDOMRemoveEventListener", { node, event, handler, modifiers });
    dispose();
  };
}
function attr_dev(node, attribute, value) {
  attr(node, attribute, value);
  if (value == null)
    dispatch_dev("SvelteDOMRemoveAttribute", { node, attribute });
  else
    dispatch_dev("SvelteDOMSetAttribute", { node, attribute, value });
}
function prop_dev(node, property, value) {
  node[property] = value;
  dispatch_dev("SvelteDOMSetProperty", { node, property, value });
}
function set_data_dev(text2, data) {
  data = "" + data;
  if (text2.data === data)
    return;
  dispatch_dev("SvelteDOMSetData", { node: text2, data });
  text2.data = data;
}
function validate_each_argument(arg) {
  if (typeof arg !== "string" && !(arg && typeof arg === "object" && "length" in arg)) {
    let msg = "{#each} only iterates over array-like objects.";
    if (typeof Symbol === "function" && arg && Symbol.iterator in arg) {
      msg += " You can use a spread to convert this iterable into an array.";
    }
    throw new Error(msg);
  }
}
function validate_slots(name, slot, keys) {
  for (const slot_key of Object.keys(slot)) {
    if (!~keys.indexOf(slot_key)) {
      console.warn(`<${name}> received an unexpected slot "${slot_key}".`);
    }
  }
}
var SvelteComponentDev = class extends SvelteComponent {
  constructor(options) {
    if (!options || !options.target && !options.$$inline) {
      throw new Error("'target' is a required option");
    }
    super();
  }
  $destroy() {
    super.$destroy();
    this.$destroy = () => {
      console.warn("Component was already destroyed");
    };
  }
  $capture_state() {
  }
  $inject_state() {
  }
};

// node_modules/tslib/tslib.es6.mjs
function __awaiter(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}

// src/components/FlashcardReviewModal.svelte
var { console: console_1 } = globals;
var file = "src/components/FlashcardReviewModal.svelte";
function create_if_block_3(ctx) {
  let div1;
  let div0;
  const block = {
    c: function create() {
      div1 = element("div");
      div0 = element("div");
      attr_dev(div0, "class", "decks-progress-fill svelte-1s1dei0");
      set_style(
        div0,
        "width",
        /*progress*/
        ctx[12] + "%"
      );
      add_location(div0, file, 289, 12, 9174);
      attr_dev(div1, "class", "decks-review-progress-bar svelte-1s1dei0");
      add_location(div1, file, 288, 8, 9122);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div1, anchor);
      append_dev(div1, div0);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*progress*/
      4096) {
        set_style(
          div0,
          "width",
          /*progress*/
          ctx2[12] + "%"
        );
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div1);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_3.name,
    type: "if",
    source: "(288:4) {#if settings?.review?.showProgress !== false}",
    ctx
  });
  return block;
}
function create_else_block(ctx) {
  let div;
  let p;
  const block = {
    c: function create() {
      div = element("div");
      p = element("p");
      p.textContent = "No cards to review";
      add_location(p, file, 385, 12, 13141);
      attr_dev(div, "class", "decks-empty-state svelte-1s1dei0");
      add_location(div, file, 384, 8, 13097);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, p);
    },
    p: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_else_block.name,
    type: "else",
    source: "(384:4) {:else}",
    ctx
  });
  return block;
}
function create_if_block(ctx) {
  let div5;
  let div1;
  let div0;
  let t0;
  let div4;
  let div2;
  let t1;
  let div3;
  let t2;
  let div6;
  let t3;
  let if_block0 = !/*showAnswer*/
  ctx[5] && create_if_block_2(ctx);
  let if_block1 = (
    /*showAnswer*/
    ctx[5] && /*schedulingInfo*/
    ctx[9] && create_if_block_1(ctx)
  );
  const block = {
    c: function create() {
      div5 = element("div");
      div1 = element("div");
      div0 = element("div");
      t0 = space();
      div4 = element("div");
      div2 = element("div");
      t1 = space();
      div3 = element("div");
      t2 = space();
      div6 = element("div");
      if (if_block0)
        if_block0.c();
      t3 = space();
      if (if_block1)
        if_block1.c();
      attr_dev(div0, "class", "decks-card-side decks-front svelte-1s1dei0");
      add_location(div0, file, 296, 16, 9395);
      attr_dev(div1, "class", "decks-question-section svelte-1s1dei0");
      add_location(div1, file, 295, 12, 9342);
      attr_dev(div2, "class", "decks-separator svelte-1s1dei0");
      add_location(div2, file, 303, 16, 9630);
      attr_dev(div3, "class", "decks-card-side decks-back svelte-1s1dei0");
      add_location(div3, file, 304, 16, 9682);
      attr_dev(div4, "class", "decks-answer-section svelte-1s1dei0");
      toggle_class(div4, "hidden", !/*showAnswer*/
      ctx[5]);
      add_location(div4, file, 302, 12, 9552);
      attr_dev(div5, "class", "decks-card-content svelte-1s1dei0");
      add_location(div5, file, 294, 8, 9297);
      attr_dev(div6, "class", "decks-action-buttons svelte-1s1dei0");
      add_location(div6, file, 311, 8, 9848);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div5, anchor);
      append_dev(div5, div1);
      append_dev(div1, div0);
      ctx[20](div0);
      append_dev(div5, t0);
      append_dev(div5, div4);
      append_dev(div4, div2);
      append_dev(div4, t1);
      append_dev(div4, div3);
      ctx[21](div3);
      insert_dev(target, t2, anchor);
      insert_dev(target, div6, anchor);
      if (if_block0)
        if_block0.m(div6, null);
      append_dev(div6, t3);
      if (if_block1)
        if_block1.m(div6, null);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*showAnswer*/
      32) {
        toggle_class(div4, "hidden", !/*showAnswer*/
        ctx2[5]);
      }
      if (!/*showAnswer*/
      ctx2[5]) {
        if (if_block0) {
          if_block0.p(ctx2, dirty);
        } else {
          if_block0 = create_if_block_2(ctx2);
          if_block0.c();
          if_block0.m(div6, t3);
        }
      } else if (if_block0) {
        if_block0.d(1);
        if_block0 = null;
      }
      if (
        /*showAnswer*/
        ctx2[5] && /*schedulingInfo*/
        ctx2[9]
      ) {
        if (if_block1) {
          if_block1.p(ctx2, dirty);
        } else {
          if_block1 = create_if_block_1(ctx2);
          if_block1.c();
          if_block1.m(div6, null);
        }
      } else if (if_block1) {
        if_block1.d(1);
        if_block1 = null;
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div5);
      ctx[20](null);
      ctx[21](null);
      if (detaching)
        detach_dev(t2);
      if (detaching)
        detach_dev(div6);
      if (if_block0)
        if_block0.d();
      if (if_block1)
        if_block1.d();
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block.name,
    type: "if",
    source: "(294:4) {#if currentCard}",
    ctx
  });
  return block;
}
function create_if_block_2(ctx) {
  let button;
  let span0;
  let t1;
  let span1;
  let mounted;
  let dispose;
  const block = {
    c: function create() {
      button = element("button");
      span0 = element("span");
      span0.textContent = "Show Answer";
      t1 = space();
      span1 = element("span");
      span1.textContent = "Space";
      add_location(span0, file, 320, 20, 10229);
      attr_dev(span1, "class", "decks-shortcut svelte-1s1dei0");
      add_location(span1, file, 321, 20, 10274);
      attr_dev(button, "class", "decks-show-answer-button svelte-1s1dei0");
      button.disabled = /*isLoading*/
      ctx[6];
      set_style(button, "touch-action", "manipulation");
      attr_dev(button, "type", "button");
      add_location(button, file, 313, 16, 9929);
    },
    m: function mount(target, anchor) {
      insert_dev(target, button, anchor);
      append_dev(button, span0);
      append_dev(button, t1);
      append_dev(button, span1);
      if (!mounted) {
        dispose = listen_dev(
          button,
          "pointerup",
          /*pointerup_handler*/
          ctx[22],
          false,
          false,
          false,
          false
        );
        mounted = true;
      }
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*isLoading*/
      64) {
        prop_dev(
          button,
          "disabled",
          /*isLoading*/
          ctx2[6]
        );
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(button);
      mounted = false;
      dispose();
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_2.name,
    type: "if",
    source: "(313:12) {#if !showAnswer}",
    ctx
  });
  return block;
}
function create_if_block_1(ctx) {
  let div12;
  let button0;
  let div0;
  let t1;
  let div1;
  let t2_value = getIntervalDisplay(
    /*schedulingInfo*/
    ctx[9].again.interval
  ) + "";
  let t2;
  let t3;
  let div2;
  let t5;
  let button1;
  let div3;
  let t7;
  let div4;
  let t8_value = getIntervalDisplay(
    /*schedulingInfo*/
    ctx[9].hard.interval
  ) + "";
  let t8;
  let t9;
  let div5;
  let t11;
  let button2;
  let div6;
  let t13;
  let div7;
  let t14_value = getIntervalDisplay(
    /*schedulingInfo*/
    ctx[9].good.interval
  ) + "";
  let t14;
  let t15;
  let div8;
  let t17;
  let button3;
  let div9;
  let t19;
  let div10;
  let t20_value = getIntervalDisplay(
    /*schedulingInfo*/
    ctx[9].easy.interval
  ) + "";
  let t20;
  let t21;
  let div11;
  let mounted;
  let dispose;
  const block = {
    c: function create() {
      div12 = element("div");
      button0 = element("button");
      div0 = element("div");
      div0.textContent = "Again";
      t1 = space();
      div1 = element("div");
      t2 = text(t2_value);
      t3 = space();
      div2 = element("div");
      div2.textContent = "1";
      t5 = space();
      button1 = element("button");
      div3 = element("div");
      div3.textContent = "Hard";
      t7 = space();
      div4 = element("div");
      t8 = text(t8_value);
      t9 = space();
      div5 = element("div");
      div5.textContent = "2";
      t11 = space();
      button2 = element("button");
      div6 = element("div");
      div6.textContent = "Good";
      t13 = space();
      div7 = element("div");
      t14 = text(t14_value);
      t15 = space();
      div8 = element("div");
      div8.textContent = "3";
      t17 = space();
      button3 = element("button");
      div9 = element("div");
      div9.textContent = "Easy";
      t19 = space();
      div10 = element("div");
      t20 = text(t20_value);
      t21 = space();
      div11 = element("div");
      div11.textContent = "4";
      attr_dev(div0, "class", "decks-button-label svelte-1s1dei0");
      add_location(div0, file, 334, 24, 10836);
      attr_dev(div1, "class", "decks-interval svelte-1s1dei0");
      add_location(div1, file, 335, 24, 10904);
      attr_dev(div2, "class", "decks-shortcut svelte-1s1dei0");
      add_location(div2, file, 338, 24, 11068);
      attr_dev(button0, "class", "decks-difficulty-button decks-again decks-rate-btn svelte-1s1dei0");
      button0.disabled = /*isLoading*/
      ctx[6];
      set_style(button0, "touch-action", "manipulation");
      attr_dev(button0, "type", "button");
      add_location(button0, file, 327, 20, 10483);
      attr_dev(div3, "class", "decks-button-label svelte-1s1dei0");
      add_location(div3, file, 348, 24, 11507);
      attr_dev(div4, "class", "decks-interval svelte-1s1dei0");
      add_location(div4, file, 349, 24, 11574);
      attr_dev(div5, "class", "decks-shortcut svelte-1s1dei0");
      add_location(div5, file, 352, 24, 11737);
      attr_dev(button1, "class", "decks-difficulty-button decks-hard decks-rate-btn svelte-1s1dei0");
      set_style(button1, "touch-action", "manipulation");
      button1.disabled = /*isLoading*/
      ctx[6];
      attr_dev(button1, "type", "button");
      add_location(button1, file, 341, 20, 11155);
      attr_dev(div6, "class", "decks-button-label svelte-1s1dei0");
      add_location(div6, file, 361, 24, 12116);
      attr_dev(div7, "class", "decks-interval svelte-1s1dei0");
      add_location(div7, file, 362, 24, 12183);
      attr_dev(div8, "class", "decks-shortcut svelte-1s1dei0");
      add_location(div8, file, 365, 24, 12346);
      attr_dev(button2, "class", "decks-difficulty-button decks-good decks-rate-btn svelte-1s1dei0");
      button2.disabled = /*isLoading*/
      ctx[6];
      attr_dev(button2, "type", "button");
      add_location(button2, file, 355, 20, 11824);
      attr_dev(div9, "class", "decks-button-label svelte-1s1dei0");
      add_location(div9, file, 374, 24, 12725);
      attr_dev(div10, "class", "decks-interval svelte-1s1dei0");
      add_location(div10, file, 375, 24, 12792);
      attr_dev(div11, "class", "decks-shortcut svelte-1s1dei0");
      add_location(div11, file, 378, 24, 12955);
      attr_dev(button3, "class", "decks-difficulty-button decks-easy decks-rate-btn svelte-1s1dei0");
      button3.disabled = /*isLoading*/
      ctx[6];
      attr_dev(button3, "type", "button");
      add_location(button3, file, 368, 20, 12433);
      attr_dev(div12, "class", "decks-difficulty-buttons svelte-1s1dei0");
      add_location(div12, file, 326, 16, 10424);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div12, anchor);
      append_dev(div12, button0);
      append_dev(button0, div0);
      append_dev(button0, t1);
      append_dev(button0, div1);
      append_dev(div1, t2);
      append_dev(button0, t3);
      append_dev(button0, div2);
      append_dev(div12, t5);
      append_dev(div12, button1);
      append_dev(button1, div3);
      append_dev(button1, t7);
      append_dev(button1, div4);
      append_dev(div4, t8);
      append_dev(button1, t9);
      append_dev(button1, div5);
      append_dev(div12, t11);
      append_dev(div12, button2);
      append_dev(button2, div6);
      append_dev(button2, t13);
      append_dev(button2, div7);
      append_dev(div7, t14);
      append_dev(button2, t15);
      append_dev(button2, div8);
      append_dev(div12, t17);
      append_dev(div12, button3);
      append_dev(button3, div9);
      append_dev(button3, t19);
      append_dev(button3, div10);
      append_dev(div10, t20);
      append_dev(button3, t21);
      append_dev(button3, div11);
      if (!mounted) {
        dispose = [
          listen_dev(
            button0,
            "pointerup",
            /*pointerup_handler_1*/
            ctx[23],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button1,
            "pointerup",
            /*pointerup_handler_2*/
            ctx[24],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button2,
            "pointerup",
            /*pointerup_handler_3*/
            ctx[25],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button3,
            "pointerup",
            /*pointerup_handler_4*/
            ctx[26],
            false,
            false,
            false,
            false
          )
        ];
        mounted = true;
      }
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*schedulingInfo*/
      512 && t2_value !== (t2_value = getIntervalDisplay(
        /*schedulingInfo*/
        ctx2[9].again.interval
      ) + ""))
        set_data_dev(t2, t2_value);
      if (dirty[0] & /*isLoading*/
      64) {
        prop_dev(
          button0,
          "disabled",
          /*isLoading*/
          ctx2[6]
        );
      }
      if (dirty[0] & /*schedulingInfo*/
      512 && t8_value !== (t8_value = getIntervalDisplay(
        /*schedulingInfo*/
        ctx2[9].hard.interval
      ) + ""))
        set_data_dev(t8, t8_value);
      if (dirty[0] & /*isLoading*/
      64) {
        prop_dev(
          button1,
          "disabled",
          /*isLoading*/
          ctx2[6]
        );
      }
      if (dirty[0] & /*schedulingInfo*/
      512 && t14_value !== (t14_value = getIntervalDisplay(
        /*schedulingInfo*/
        ctx2[9].good.interval
      ) + ""))
        set_data_dev(t14, t14_value);
      if (dirty[0] & /*isLoading*/
      64) {
        prop_dev(
          button2,
          "disabled",
          /*isLoading*/
          ctx2[6]
        );
      }
      if (dirty[0] & /*schedulingInfo*/
      512 && t20_value !== (t20_value = getIntervalDisplay(
        /*schedulingInfo*/
        ctx2[9].easy.interval
      ) + ""))
        set_data_dev(t20, t20_value);
      if (dirty[0] & /*isLoading*/
      64) {
        prop_dev(
          button3,
          "disabled",
          /*isLoading*/
          ctx2[6]
        );
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div12);
      mounted = false;
      run_all(dispose);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_1.name,
    type: "if",
    source: "(326:12) {#if showAnswer && schedulingInfo}",
    ctx
  });
  return block;
}
function create_fragment(ctx) {
  var _a, _b;
  let div4;
  let div3;
  let h3;
  let t0;
  let t1_value = (
    /*deck*/
    ctx[0].name + ""
  );
  let t1;
  let t2;
  let div2;
  let div0;
  let span0;
  let t3;
  let t4_value = (
    /*sessionProgress*/
    (ctx[3] ? (
      /*sessionProgress*/
      ctx[3].doneUnique
    ) : (
      /*reviewedCount*/
      ctx[10]
    )) + ""
  );
  let t4;
  let t5;
  let span1;
  let t6;
  let t7_value = (
    /*sessionProgress*/
    ctx[3] ? `${/*sessionProgress*/
    ctx[3].goalTotal - /*sessionProgress*/
    ctx[3].doneUnique} remaining` : (
      /*currentCard*/
      ctx[2] ? "More cards available" : "Session complete"
    )
  );
  let t7;
  let t8;
  let t9;
  let div1;
  let span2;
  let t11;
  let span3;
  let t12;
  let t13;
  let t14;
  let if_block0 = (
    /*settings*/
    ((_b = (_a = ctx[1]) == null ? void 0 : _a.review) == null ? void 0 : _b.showProgress) !== false && create_if_block_3(ctx)
  );
  function select_block_type(ctx2, dirty) {
    if (
      /*currentCard*/
      ctx2[2]
    )
      return create_if_block;
    return create_else_block;
  }
  let current_block_type = select_block_type(ctx, [-1, -1]);
  let if_block1 = current_block_type(ctx);
  const block = {
    c: function create() {
      div4 = element("div");
      div3 = element("div");
      h3 = element("h3");
      t0 = text("Review Session - ");
      t1 = text(t1_value);
      t2 = space();
      div2 = element("div");
      div0 = element("div");
      span0 = element("span");
      t3 = text("Reviewed: ");
      t4 = text(t4_value);
      t5 = space();
      span1 = element("span");
      t6 = text("(");
      t7 = text(t7_value);
      t8 = text(")");
      t9 = space();
      div1 = element("div");
      span2 = element("span");
      span2.textContent = "Time Remaining:";
      t11 = space();
      span3 = element("span");
      t12 = text(
        /*timeRemainingDisplay*/
        ctx[11]
      );
      t13 = space();
      if (if_block0)
        if_block0.c();
      t14 = space();
      if_block1.c();
      attr_dev(h3, "class", "svelte-1s1dei0");
      add_location(h3, file, 259, 8, 7995);
      add_location(span0, file, 262, 16, 8136);
      attr_dev(span1, "class", "decks-remaining svelte-1s1dei0");
      add_location(span1, file, 267, 16, 8324);
      attr_dev(div0, "class", "decks-progress-info svelte-1s1dei0");
      add_location(div0, file, 261, 12, 8086);
      attr_dev(span2, "class", "decks-timer-label svelte-1s1dei0");
      add_location(span2, file, 276, 16, 8732);
      attr_dev(span3, "class", "decks-timer-value svelte-1s1dei0");
      toggle_class(
        span3,
        "decks-timer-warning",
        /*sessionTimeRemaining*/
        ctx[4] < 6e4
      );
      add_location(span3, file, 277, 16, 8803);
      attr_dev(div1, "class", "decks-timer-display svelte-1s1dei0");
      add_location(div1, file, 275, 12, 8682);
      attr_dev(div2, "class", "decks-header-stats svelte-1s1dei0");
      add_location(div2, file, 260, 8, 8041);
      attr_dev(div3, "class", "decks-modal-header svelte-1s1dei0");
      add_location(div3, file, 258, 4, 7954);
      attr_dev(div4, "class", "decks-review-modal svelte-1s1dei0");
      add_location(div4, file, 257, 0, 7917);
    },
    l: function claim(nodes) {
      throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
    },
    m: function mount(target, anchor) {
      insert_dev(target, div4, anchor);
      append_dev(div4, div3);
      append_dev(div3, h3);
      append_dev(h3, t0);
      append_dev(h3, t1);
      append_dev(div3, t2);
      append_dev(div3, div2);
      append_dev(div2, div0);
      append_dev(div0, span0);
      append_dev(span0, t3);
      append_dev(span0, t4);
      append_dev(div0, t5);
      append_dev(div0, span1);
      append_dev(span1, t6);
      append_dev(span1, t7);
      append_dev(span1, t8);
      append_dev(div2, t9);
      append_dev(div2, div1);
      append_dev(div1, span2);
      append_dev(div1, t11);
      append_dev(div1, span3);
      append_dev(span3, t12);
      append_dev(div4, t13);
      if (if_block0)
        if_block0.m(div4, null);
      append_dev(div4, t14);
      if_block1.m(div4, null);
    },
    p: function update2(ctx2, dirty) {
      var _a2, _b2;
      if (dirty[0] & /*deck*/
      1 && t1_value !== (t1_value = /*deck*/
      ctx2[0].name + ""))
        set_data_dev(t1, t1_value);
      if (dirty[0] & /*sessionProgress, reviewedCount*/
      1032 && t4_value !== (t4_value = /*sessionProgress*/
      (ctx2[3] ? (
        /*sessionProgress*/
        ctx2[3].doneUnique
      ) : (
        /*reviewedCount*/
        ctx2[10]
      )) + ""))
        set_data_dev(t4, t4_value);
      if (dirty[0] & /*sessionProgress, currentCard*/
      12 && t7_value !== (t7_value = /*sessionProgress*/
      ctx2[3] ? `${/*sessionProgress*/
      ctx2[3].goalTotal - /*sessionProgress*/
      ctx2[3].doneUnique} remaining` : (
        /*currentCard*/
        ctx2[2] ? "More cards available" : "Session complete"
      )))
        set_data_dev(t7, t7_value);
      if (dirty[0] & /*timeRemainingDisplay*/
      2048)
        set_data_dev(
          t12,
          /*timeRemainingDisplay*/
          ctx2[11]
        );
      if (dirty[0] & /*sessionTimeRemaining*/
      16) {
        toggle_class(
          span3,
          "decks-timer-warning",
          /*sessionTimeRemaining*/
          ctx2[4] < 6e4
        );
      }
      if (
        /*settings*/
        ((_b2 = (_a2 = ctx2[1]) == null ? void 0 : _a2.review) == null ? void 0 : _b2.showProgress) !== false
      ) {
        if (if_block0) {
          if_block0.p(ctx2, dirty);
        } else {
          if_block0 = create_if_block_3(ctx2);
          if_block0.c();
          if_block0.m(div4, t14);
        }
      } else if (if_block0) {
        if_block0.d(1);
        if_block0 = null;
      }
      if (current_block_type === (current_block_type = select_block_type(ctx2, dirty)) && if_block1) {
        if_block1.p(ctx2, dirty);
      } else {
        if_block1.d(1);
        if_block1 = current_block_type(ctx2);
        if (if_block1) {
          if_block1.c();
          if_block1.m(div4, null);
        }
      }
    },
    i: noop,
    o: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div4);
      if (if_block0)
        if_block0.d();
      if_block1.d();
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_fragment.name,
    type: "component",
    source: "",
    ctx
  });
  return block;
}
function getIntervalDisplay(minutes) {
  if (minutes < 60) {
    return `${Math.round(minutes)}m`;
  } else if (minutes < 1440) {
    const hours = Math.round(minutes / 60);
    return `${hours}h`;
  } else {
    const days = Math.round(minutes / 1440);
    return `${days}d`;
  }
}
function formatTimeRemaining(ms) {
  const totalSeconds = Math.ceil(ms / 1e3);
  const minutes = Math.floor(totalSeconds / 60);
  const seconds = totalSeconds % 60;
  return `${minutes}:${seconds.toString().padStart(2, "0")}`;
}
function instance($$self, $$props, $$invalidate) {
  let progress;
  let timeRemainingDisplay;
  let { $$slots: slots = {}, $$scope } = $$props;
  validate_slots("FlashcardReviewModal", slots, []);
  let { deck } = $$props;
  let { initialCard = null } = $$props;
  let { onReview } = $$props;
  let { renderMarkdown } = $$props;
  let { settings } = $$props;
  let { scheduler } = $$props;
  let { onCardReviewed = void 0 } = $$props;
  const dispatch = createEventDispatcher();
  let showAnswer = false;
  let isLoading = false;
  let reviewFinished = false;
  let frontEl;
  let backEl;
  let schedulingInfo = null;
  let reviewedCount = 0;
  let cardStartTime = 0;
  let currentCard = initialCard;
  let sessionId = null;
  let sessionProgress = null;
  let sessionStartTime = 0;
  let sessionTimeRemaining = 0;
  let sessionTimer = null;
  let lastEventTime = 0;
  let lastEventType = "";
  onMount(() => __awaiter(void 0, void 0, void 0, function* () {
    sessionId = yield scheduler.startFreshSession(deck.id, /* @__PURE__ */ new Date(), settings.review.sessionDuration);
    scheduler.setCurrentSession(sessionId);
    $$invalidate(3, sessionProgress = yield scheduler.getSessionProgress(sessionId));
    startSessionTimer();
    if (!currentCard) {
      $$invalidate(2, currentCard = yield scheduler.getNext(/* @__PURE__ */ new Date(), deck.id, { allowNew: true }));
    }
    if (currentCard) {
      yield loadCard();
    } else {
      yield endReview();
    }
    window.addEventListener("keydown", handleKeydown);
  }));
  function loadCard() {
    return __awaiter(this, void 0, void 0, function* () {
      if (!currentCard)
        return;
      $$invalidate(5, showAnswer = false);
      try {
        $$invalidate(9, schedulingInfo = yield scheduler.preview(currentCard.id));
      } catch (error) {
        console.error("Error getting scheduling preview:", error);
        $$invalidate(9, schedulingInfo = null);
      }
      cardStartTime = Date.now();
      if (frontEl) {
        frontEl.empty();
        renderMarkdown(currentCard.front, frontEl);
      }
      tick().then(() => {
        if (backEl && currentCard) {
          backEl.empty();
          renderMarkdown(currentCard.back, backEl);
        }
      });
    });
  }
  function revealAnswer() {
    $$invalidate(5, showAnswer = true);
    tick().then(() => {
      if (backEl && currentCard) {
        backEl.empty();
        renderMarkdown(currentCard.back, backEl);
      }
    });
  }
  function handleReview(rating) {
    return __awaiter(this, void 0, void 0, function* () {
      if (!currentCard || isLoading)
        return;
      $$invalidate(6, isLoading = true);
      try {
        const timeElapsed = Date.now() - cardStartTime;
        yield onReview(currentCard, rating, timeElapsed);
        $$invalidate(10, reviewedCount++, reviewedCount);
        if (sessionId) {
          $$invalidate(3, sessionProgress = yield scheduler.getSessionProgress(sessionId));
        }
        if (onCardReviewed) {
          yield onCardReviewed(currentCard);
          yield yieldToUI();
        }
        $$invalidate(2, currentCard = yield scheduler.getNext(/* @__PURE__ */ new Date(), deck.id, { allowNew: true }));
        yield yieldToUI();
        if (currentCard) {
          yield loadCard();
        } else {
          yield endReview();
        }
      } catch (error) {
        console.error("Error reviewing card:", error);
      } finally {
        $$invalidate(6, isLoading = false);
      }
    });
  }
  function handleKeydown(event) {
    if (isLoading)
      return;
    const now = Date.now();
    const eventType = "keyboard";
    if (now - lastEventTime < 100 && lastEventType === eventType) {
      return;
    }
    if (!showAnswer && event.key === " ") {
      event.preventDefault();
      lastEventTime = now;
      lastEventType = eventType;
      revealAnswer();
    } else if (showAnswer) {
      lastEventTime = now;
      lastEventType = eventType;
      switch (event.key) {
        case "1":
          handleReview("again");
          break;
        case "2":
          handleReview("hard");
          break;
        case "3":
        case " ":
          handleReview("good");
          break;
        case "4":
          handleReview("easy");
          break;
      }
    }
  }
  function rate(v) {
    return __awaiter(this, void 0, void 0, function* () {
      if (v === 1)
        yield handleReview("again");
      else if (v === 2)
        yield handleReview("hard");
      else if (v === 3)
        yield handleReview("good");
      else if (v === 4)
        yield handleReview("easy");
    });
  }
  const onShowAnswer = (e) => __awaiter(void 0, void 0, void 0, function* () {
    e.preventDefault();
    revealAnswer();
    yield yieldToUI();
  });
  const onRating = (e, v) => __awaiter(void 0, void 0, void 0, function* () {
    e.preventDefault();
    yield rate(v);
    yield yieldToUI();
  });
  onDestroy(() => __awaiter(void 0, void 0, void 0, function* () {
    window.removeEventListener("keydown", handleKeydown);
    if (sessionTimer) {
      clearInterval(sessionTimer);
      sessionTimer = null;
    }
    yield endReview();
  }));
  const endReview = () => __awaiter(void 0, void 0, void 0, function* () {
    if (reviewFinished)
      return;
    if (sessionTimer) {
      clearInterval(sessionTimer);
      sessionTimer = null;
    }
    if (sessionId) {
      yield scheduler.endReviewSession(sessionId);
      scheduler.setCurrentSession(null);
    }
    dispatch("complete", {
      reason: "end-review",
      reviewed: sessionProgress ? sessionProgress.doneUnique : reviewedCount
    });
    reviewFinished = true;
  });
  function startSessionTimer() {
    const sessionDurationMs = settings.review.sessionDuration * 60 * 1e3;
    sessionStartTime = Date.now();
    $$invalidate(4, sessionTimeRemaining = sessionDurationMs);
    sessionTimer = setInterval(
      () => {
        const elapsed = Date.now() - sessionStartTime;
        $$invalidate(4, sessionTimeRemaining = Math.max(0, sessionDurationMs - elapsed));
        if (sessionTimeRemaining <= 0) {
          endReview();
        }
      },
      1e3
    );
  }
  $$self.$$.on_mount.push(function() {
    if (deck === void 0 && !("deck" in $$props || $$self.$$.bound[$$self.$$.props["deck"]])) {
      console_1.warn("<FlashcardReviewModal> was created without expected prop 'deck'");
    }
    if (onReview === void 0 && !("onReview" in $$props || $$self.$$.bound[$$self.$$.props["onReview"]])) {
      console_1.warn("<FlashcardReviewModal> was created without expected prop 'onReview'");
    }
    if (renderMarkdown === void 0 && !("renderMarkdown" in $$props || $$self.$$.bound[$$self.$$.props["renderMarkdown"]])) {
      console_1.warn("<FlashcardReviewModal> was created without expected prop 'renderMarkdown'");
    }
    if (settings === void 0 && !("settings" in $$props || $$self.$$.bound[$$self.$$.props["settings"]])) {
      console_1.warn("<FlashcardReviewModal> was created without expected prop 'settings'");
    }
    if (scheduler === void 0 && !("scheduler" in $$props || $$self.$$.bound[$$self.$$.props["scheduler"]])) {
      console_1.warn("<FlashcardReviewModal> was created without expected prop 'scheduler'");
    }
  });
  const writable_props = [
    "deck",
    "initialCard",
    "onReview",
    "renderMarkdown",
    "settings",
    "scheduler",
    "onCardReviewed"
  ];
  Object.keys($$props).forEach((key) => {
    if (!~writable_props.indexOf(key) && key.slice(0, 2) !== "$$" && key !== "slot")
      console_1.warn(`<FlashcardReviewModal> was created with unknown prop '${key}'`);
  });
  function div0_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      frontEl = $$value;
      $$invalidate(7, frontEl);
    });
  }
  function div3_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      backEl = $$value;
      $$invalidate(8, backEl);
    });
  }
  const pointerup_handler = async (e) => await onShowAnswer(e);
  const pointerup_handler_1 = async (e) => await onRating(e, 1);
  const pointerup_handler_2 = async (e) => await onRating(e, 2);
  const pointerup_handler_3 = async (e) => await onRating(e, 3);
  const pointerup_handler_4 = async (e) => await onRating(e, 4);
  $$self.$$set = ($$props2) => {
    if ("deck" in $$props2)
      $$invalidate(0, deck = $$props2.deck);
    if ("initialCard" in $$props2)
      $$invalidate(15, initialCard = $$props2.initialCard);
    if ("onReview" in $$props2)
      $$invalidate(16, onReview = $$props2.onReview);
    if ("renderMarkdown" in $$props2)
      $$invalidate(17, renderMarkdown = $$props2.renderMarkdown);
    if ("settings" in $$props2)
      $$invalidate(1, settings = $$props2.settings);
    if ("scheduler" in $$props2)
      $$invalidate(18, scheduler = $$props2.scheduler);
    if ("onCardReviewed" in $$props2)
      $$invalidate(19, onCardReviewed = $$props2.onCardReviewed);
  };
  $$self.$capture_state = () => ({
    __awaiter,
    createEventDispatcher,
    onMount,
    onDestroy,
    tick,
    yieldToUI,
    deck,
    initialCard,
    onReview,
    renderMarkdown,
    settings,
    scheduler,
    onCardReviewed,
    dispatch,
    showAnswer,
    isLoading,
    reviewFinished,
    frontEl,
    backEl,
    schedulingInfo,
    reviewedCount,
    cardStartTime,
    currentCard,
    sessionId,
    sessionProgress,
    sessionStartTime,
    sessionTimeRemaining,
    sessionTimer,
    lastEventTime,
    lastEventType,
    loadCard,
    revealAnswer,
    handleReview,
    getIntervalDisplay,
    handleKeydown,
    rate,
    onShowAnswer,
    onRating,
    endReview,
    startSessionTimer,
    formatTimeRemaining,
    timeRemainingDisplay,
    progress
  });
  $$self.$inject_state = ($$props2) => {
    if ("deck" in $$props2)
      $$invalidate(0, deck = $$props2.deck);
    if ("initialCard" in $$props2)
      $$invalidate(15, initialCard = $$props2.initialCard);
    if ("onReview" in $$props2)
      $$invalidate(16, onReview = $$props2.onReview);
    if ("renderMarkdown" in $$props2)
      $$invalidate(17, renderMarkdown = $$props2.renderMarkdown);
    if ("settings" in $$props2)
      $$invalidate(1, settings = $$props2.settings);
    if ("scheduler" in $$props2)
      $$invalidate(18, scheduler = $$props2.scheduler);
    if ("onCardReviewed" in $$props2)
      $$invalidate(19, onCardReviewed = $$props2.onCardReviewed);
    if ("showAnswer" in $$props2)
      $$invalidate(5, showAnswer = $$props2.showAnswer);
    if ("isLoading" in $$props2)
      $$invalidate(6, isLoading = $$props2.isLoading);
    if ("reviewFinished" in $$props2)
      reviewFinished = $$props2.reviewFinished;
    if ("frontEl" in $$props2)
      $$invalidate(7, frontEl = $$props2.frontEl);
    if ("backEl" in $$props2)
      $$invalidate(8, backEl = $$props2.backEl);
    if ("schedulingInfo" in $$props2)
      $$invalidate(9, schedulingInfo = $$props2.schedulingInfo);
    if ("reviewedCount" in $$props2)
      $$invalidate(10, reviewedCount = $$props2.reviewedCount);
    if ("cardStartTime" in $$props2)
      cardStartTime = $$props2.cardStartTime;
    if ("currentCard" in $$props2)
      $$invalidate(2, currentCard = $$props2.currentCard);
    if ("sessionId" in $$props2)
      sessionId = $$props2.sessionId;
    if ("sessionProgress" in $$props2)
      $$invalidate(3, sessionProgress = $$props2.sessionProgress);
    if ("sessionStartTime" in $$props2)
      sessionStartTime = $$props2.sessionStartTime;
    if ("sessionTimeRemaining" in $$props2)
      $$invalidate(4, sessionTimeRemaining = $$props2.sessionTimeRemaining);
    if ("sessionTimer" in $$props2)
      sessionTimer = $$props2.sessionTimer;
    if ("lastEventTime" in $$props2)
      lastEventTime = $$props2.lastEventTime;
    if ("lastEventType" in $$props2)
      lastEventType = $$props2.lastEventType;
    if ("timeRemainingDisplay" in $$props2)
      $$invalidate(11, timeRemainingDisplay = $$props2.timeRemainingDisplay);
    if ("progress" in $$props2)
      $$invalidate(12, progress = $$props2.progress);
  };
  if ($$props && "$$inject" in $$props) {
    $$self.$inject_state($$props.$$inject);
  }
  $$self.$$.update = () => {
    if ($$self.$$.dirty[0] & /*sessionProgress*/
    8) {
      $:
        $$invalidate(12, progress = sessionProgress ? sessionProgress.progress : 0);
    }
    if ($$self.$$.dirty[0] & /*sessionTimeRemaining*/
    16) {
      $:
        $$invalidate(11, timeRemainingDisplay = formatTimeRemaining(sessionTimeRemaining));
    }
    if ($$self.$$.dirty[0] & /*currentCard*/
    4) {
      $:
        if (currentCard) {
          loadCard();
        }
    }
  };
  return [
    deck,
    settings,
    currentCard,
    sessionProgress,
    sessionTimeRemaining,
    showAnswer,
    isLoading,
    frontEl,
    backEl,
    schedulingInfo,
    reviewedCount,
    timeRemainingDisplay,
    progress,
    onShowAnswer,
    onRating,
    initialCard,
    onReview,
    renderMarkdown,
    scheduler,
    onCardReviewed,
    div0_binding,
    div3_binding,
    pointerup_handler,
    pointerup_handler_1,
    pointerup_handler_2,
    pointerup_handler_3,
    pointerup_handler_4
  ];
}
var FlashcardReviewModal = class extends SvelteComponentDev {
  constructor(options) {
    super(options);
    init(
      this,
      options,
      instance,
      create_fragment,
      safe_not_equal,
      {
        deck: 0,
        initialCard: 15,
        onReview: 16,
        renderMarkdown: 17,
        settings: 1,
        scheduler: 18,
        onCardReviewed: 19
      },
      null,
      [-1, -1]
    );
    dispatch_dev("SvelteRegisterComponent", {
      component: this,
      tagName: "FlashcardReviewModal",
      options,
      id: create_fragment.name
    });
  }
  get deck() {
    throw new Error("<FlashcardReviewModal>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set deck(value) {
    throw new Error("<FlashcardReviewModal>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get initialCard() {
    throw new Error("<FlashcardReviewModal>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set initialCard(value) {
    throw new Error("<FlashcardReviewModal>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get onReview() {
    throw new Error("<FlashcardReviewModal>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set onReview(value) {
    throw new Error("<FlashcardReviewModal>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get renderMarkdown() {
    throw new Error("<FlashcardReviewModal>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set renderMarkdown(value) {
    throw new Error("<FlashcardReviewModal>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get settings() {
    throw new Error("<FlashcardReviewModal>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set settings(value) {
    throw new Error("<FlashcardReviewModal>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get scheduler() {
    throw new Error("<FlashcardReviewModal>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set scheduler(value) {
    throw new Error("<FlashcardReviewModal>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get onCardReviewed() {
    throw new Error("<FlashcardReviewModal>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set onCardReviewed(value) {
    throw new Error("<FlashcardReviewModal>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
};
var FlashcardReviewModal_default = FlashcardReviewModal;

// src/components/FlashcardReviewModalWrapper.ts
var FlashcardReviewModalWrapper = class extends import_obsidian4.Modal {
  constructor(app, deck, flashcards, scheduler, settings, db, refreshStats, refreshStatsById) {
    super(app);
    this.component = null;
    this.markdownComponents = [];
    this.deck = deck;
    this.initialCard = flashcards.length > 0 ? flashcards[0] : null;
    this.scheduler = scheduler;
    this.settings = settings;
    this.db = db;
    this.refreshStats = refreshStats;
    this.refreshStatsById = refreshStatsById;
  }
  renderMarkdown(content, el) {
    try {
      const component = new import_obsidian4.Component();
      import_obsidian4.MarkdownRenderer.renderMarkdown(content, el, "", component);
      return component;
    } catch (error) {
      console.error("Error rendering markdown:", error);
      el.textContent = content;
      return null;
    }
  }
  async reviewFlashcard(deck, flashcard, difficulty, timeElapsed) {
    await this.scheduler.rate(
      flashcard.id,
      difficulty,
      /* @__PURE__ */ new Date(),
      timeElapsed
    );
    await this.db.updateDeckLastReviewed(flashcard.deckId);
    await this.refreshStatsById(flashcard.deckId);
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const modalEl = this.containerEl.querySelector(".modal");
    if (modalEl instanceof HTMLElement) {
      modalEl.addClass("decks-modal");
      if (window.innerWidth <= 768) {
        modalEl.addClass("decks-modal-mobile");
      } else {
        modalEl.removeClass("decks-modal-mobile");
      }
    }
    contentEl.addClass("decks-review-modal-container");
    this.component = new FlashcardReviewModal_default({
      target: contentEl,
      props: {
        initialCard: this.initialCard,
        deck: this.deck,
        onReview: async (card, rating, timeElapsed) => {
          await this.reviewFlashcard(this.deck, card, rating, timeElapsed);
        },
        renderMarkdown: (content, el) => {
          const component = this.renderMarkdown(content, el);
          if (component) {
            this.markdownComponents.push(component);
          }
        },
        settings: this.settings,
        scheduler: this.scheduler,
        onCardReviewed: async (reviewedCard) => {
          if (reviewedCard) {
            await this.refreshStatsById(reviewedCard.deckId);
          }
        }
      }
    });
    this.component.$on("complete", async (event) => {
      var _a, _b;
      console.log("Review Complete");
      const { reason, reviewed } = event.detail;
      let message = `Review session complete for ${this.deck.name}!`;
      if (((_b = (_a = this.settings) == null ? void 0 : _a.ui) == null ? void 0 : _b.enableNotices) !== false) {
        new import_obsidian4.Notice(message);
      }
      await this.refreshStatsById(this.deck.id);
    });
    const handleResize = () => {
      const modalEl2 = this.containerEl.querySelector(".modal");
      if (modalEl2 instanceof HTMLElement) {
        if (window.innerWidth <= 768) {
          modalEl2.addClass("decks-modal-mobile");
        } else {
          modalEl2.removeClass("decks-modal-mobile");
        }
      }
    };
    window.addEventListener("resize", handleResize);
    this.resizeHandler = handleResize;
  }
  async onClose() {
    if (this.resizeHandler) {
      window.removeEventListener("resize", this.resizeHandler);
      this.resizeHandler = void 0;
    }
    if (this.component) {
      this.component.$destroy();
      this.component = null;
    }
    this.markdownComponents.forEach((comp) => comp.unload());
    this.markdownComponents = [];
    this.refreshStatsById(this.deck.id);
  }
};

// src/components/StatisticsModal.ts
var import_obsidian6 = require("obsidian");

// src/components/StatisticsUI.svelte
var import_obsidian5 = require("obsidian");

// src/components/ReviewHeatmap.svelte
var { console: console_12 } = globals;
var file2 = "src/components/ReviewHeatmap.svelte";
function get_each_context(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[25] = list[i].month;
  child_ctx[26] = list[i].weeks;
  return child_ctx;
}
function get_each_context_1(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[29] = list[i];
  return child_ctx;
}
function get_each_context_2(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[32] = list[i];
  const constants_0 = new Date(
    /*day*/
    child_ctx[32].date
  ).getFullYear();
  child_ctx[33] = constants_0;
  return child_ctx;
}
function create_if_block_12(ctx) {
  let span;
  let t0_value = Array.from(
    /*reviewCounts*/
    ctx[0].values()
  ).reduce(func, 0) + "";
  let t0;
  let t1;
  const block = {
    c: function create() {
      span = element("span");
      t0 = text(t0_value);
      t1 = text(" reviews");
      attr_dev(span, "class", "decks-total-reviews svelte-1llxsmz");
      add_location(span, file2, 213, 16, 6588);
    },
    m: function mount(target, anchor) {
      insert_dev(target, span, anchor);
      append_dev(span, t0);
      append_dev(span, t1);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*reviewCounts*/
      1 && t0_value !== (t0_value = Array.from(
        /*reviewCounts*/
        ctx2[0].values()
      ).reduce(func, 0) + ""))
        set_data_dev(t0, t0_value);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(span);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_12.name,
    type: "if",
    source: "(213:12) {#if !isLoading}",
    ctx
  });
  return block;
}
function create_else_block2(ctx) {
  let div1;
  let div0;
  let t0;
  let div8;
  let span0;
  let t2;
  let div7;
  let div2;
  let t3;
  let div3;
  let t4;
  let div4;
  let t5;
  let div5;
  let t6;
  let div6;
  let t7;
  let span1;
  let each_value = (
    /*getMonthsData*/
    ctx[5]()
  );
  validate_each_argument(each_value);
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));
  }
  const block = {
    c: function create() {
      div1 = element("div");
      div0 = element("div");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t0 = space();
      div8 = element("div");
      span0 = element("span");
      span0.textContent = "Less";
      t2 = space();
      div7 = element("div");
      div2 = element("div");
      t3 = space();
      div3 = element("div");
      t4 = space();
      div4 = element("div");
      t5 = space();
      div5 = element("div");
      t6 = space();
      div6 = element("div");
      t7 = space();
      span1 = element("span");
      span1.textContent = "More";
      attr_dev(div0, "class", "decks-months-container svelte-1llxsmz");
      add_location(div0, file2, 262, 12, 8300);
      attr_dev(div1, "class", "decks-heatmap svelte-1llxsmz");
      add_location(div1, file2, 261, 8, 8260);
      attr_dev(span0, "class", "decks-legend-label svelte-1llxsmz");
      add_location(span0, file2, 296, 12, 10007);
      attr_dev(div2, "class", "decks-legend-square decks-intensity-0 svelte-1llxsmz");
      add_location(div2, file2, 298, 16, 10114);
      attr_dev(div3, "class", "decks-legend-square decks-intensity-1 svelte-1llxsmz");
      add_location(div3, file2, 299, 16, 10188);
      attr_dev(div4, "class", "decks-legend-square decks-intensity-2 svelte-1llxsmz");
      add_location(div4, file2, 300, 16, 10262);
      attr_dev(div5, "class", "decks-legend-square decks-intensity-3 svelte-1llxsmz");
      add_location(div5, file2, 301, 16, 10336);
      attr_dev(div6, "class", "decks-legend-square decks-intensity-4 svelte-1llxsmz");
      add_location(div6, file2, 302, 16, 10410);
      attr_dev(div7, "class", "decks-legend-colors svelte-1llxsmz");
      add_location(div7, file2, 297, 12, 10064);
      attr_dev(span1, "class", "decks-legend-label svelte-1llxsmz");
      add_location(span1, file2, 304, 12, 10499);
      attr_dev(div8, "class", "decks-legend svelte-1llxsmz");
      add_location(div8, file2, 295, 8, 9968);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div1, anchor);
      append_dev(div1, div0);
      for (let i = 0; i < each_blocks.length; i += 1) {
        if (each_blocks[i]) {
          each_blocks[i].m(div0, null);
        }
      }
      insert_dev(target, t0, anchor);
      insert_dev(target, div8, anchor);
      append_dev(div8, span0);
      append_dev(div8, t2);
      append_dev(div8, div7);
      append_dev(div7, div2);
      append_dev(div7, t3);
      append_dev(div7, div3);
      append_dev(div7, t4);
      append_dev(div7, div4);
      append_dev(div7, t5);
      append_dev(div7, div5);
      append_dev(div7, t6);
      append_dev(div7, div6);
      append_dev(div8, t7);
      append_dev(div8, span1);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*getMonthsData, getIntensityClass, currentYear*/
      56) {
        each_value = /*getMonthsData*/
        ctx2[5]();
        validate_each_argument(each_value);
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(div0, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div1);
      destroy_each(each_blocks, detaching);
      if (detaching)
        detach_dev(t0);
      if (detaching)
        detach_dev(div8);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_else_block2.name,
    type: "else",
    source: "(261:4) {:else}",
    ctx
  });
  return block;
}
function create_if_block2(ctx) {
  let div;
  const block = {
    c: function create() {
      div = element("div");
      div.textContent = "Loading...";
      attr_dev(div, "class", "decks-loading svelte-1llxsmz");
      add_location(div, file2, 259, 8, 8196);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
    },
    p: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block2.name,
    type: "if",
    source: "(259:4) {#if isLoading}",
    ctx
  });
  return block;
}
function create_each_block_2(ctx) {
  let div;
  let div_class_value;
  let div_title_value;
  const block = {
    c: function create() {
      div = element("div");
      attr_dev(div, "class", div_class_value = "decks-day " + /*getIntensityClass*/
      ctx[4](
        /*day*/
        ctx[32].count
      ) + " svelte-1llxsmz");
      attr_dev(div, "title", div_title_value = /*day*/
      ctx[32].count + " reviews on " + formatDate(
        /*day*/
        ctx[32].date
      ));
      toggle_class(div, "decks-today", isToday(
        /*day*/
        ctx[32].date
      ));
      toggle_class(
        div,
        "outside-year",
        /*dayYear*/
        ctx[33] !== /*currentYear*/
        ctx[3]
      );
      add_location(div, file2, 273, 40, 8976);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*getMonthsData, currentYear*/
      40) {
        toggle_class(
          div,
          "outside-year",
          /*dayYear*/
          ctx2[33] !== /*currentYear*/
          ctx2[3]
        );
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_each_block_2.name,
    type: "each",
    source: "(270:36) {#each week as day}",
    ctx
  });
  return block;
}
function create_each_block_1(ctx) {
  let div;
  let t;
  let each_value_2 = (
    /*week*/
    ctx[29]
  );
  validate_each_argument(each_value_2);
  let each_blocks = [];
  for (let i = 0; i < each_value_2.length; i += 1) {
    each_blocks[i] = create_each_block_2(get_each_context_2(ctx, each_value_2, i));
  }
  const block = {
    c: function create() {
      div = element("div");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t = space();
      attr_dev(div, "class", "decks-week svelte-1llxsmz");
      add_location(div, file2, 268, 32, 8676);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      for (let i = 0; i < each_blocks.length; i += 1) {
        if (each_blocks[i]) {
          each_blocks[i].m(div, null);
        }
      }
      append_dev(div, t);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*getIntensityClass, getMonthsData, currentYear*/
      56) {
        each_value_2 = /*week*/
        ctx2[29];
        validate_each_argument(each_value_2);
        let i;
        for (i = 0; i < each_value_2.length; i += 1) {
          const child_ctx = get_each_context_2(ctx2, each_value_2, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_2(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(div, t);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_2.length;
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
      destroy_each(each_blocks, detaching);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_each_block_1.name,
    type: "each",
    source: "(268:28) {#each monthWeeks as week}",
    ctx
  });
  return block;
}
function create_each_block(ctx) {
  let div2;
  let div0;
  let t0_value = (
    /*month*/
    ctx[25] + ""
  );
  let t0;
  let t1;
  let div1;
  let t2;
  let each_value_1 = (
    /*monthWeeks*/
    ctx[26]
  );
  validate_each_argument(each_value_1);
  let each_blocks = [];
  for (let i = 0; i < each_value_1.length; i += 1) {
    each_blocks[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));
  }
  const block = {
    c: function create() {
      div2 = element("div");
      div0 = element("div");
      t0 = text(t0_value);
      t1 = space();
      div1 = element("div");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t2 = space();
      attr_dev(div0, "class", "decks-month-label svelte-1llxsmz");
      add_location(div0, file2, 265, 24, 8489);
      attr_dev(div1, "class", "decks-month-grid svelte-1llxsmz");
      add_location(div1, file2, 266, 24, 8558);
      attr_dev(div2, "class", "decks-month-container svelte-1llxsmz");
      add_location(div2, file2, 264, 20, 8429);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div2, anchor);
      append_dev(div2, div0);
      append_dev(div0, t0);
      append_dev(div2, t1);
      append_dev(div2, div1);
      for (let i = 0; i < each_blocks.length; i += 1) {
        if (each_blocks[i]) {
          each_blocks[i].m(div1, null);
        }
      }
      append_dev(div2, t2);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*getMonthsData, getIntensityClass, currentYear*/
      56) {
        each_value_1 = /*monthWeeks*/
        ctx2[26];
        validate_each_argument(each_value_1);
        let i;
        for (i = 0; i < each_value_1.length; i += 1) {
          const child_ctx = get_each_context_1(ctx2, each_value_1, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_1(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(div1, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_1.length;
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div2);
      destroy_each(each_blocks, detaching);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_each_block.name,
    type: "each",
    source: "(264:16) {#each getMonthsData() as { month, weeks: monthWeeks }}",
    ctx
  });
  return block;
}
function create_fragment2(ctx) {
  let div3;
  let div2;
  let div0;
  let h4;
  let t1;
  let t2;
  let div1;
  let button0;
  let svg0;
  let path0;
  let t3;
  let span;
  let t4;
  let t5;
  let button1;
  let svg1;
  let path1;
  let t6;
  let mounted;
  let dispose;
  let if_block0 = !/*isLoading*/
  ctx[1] && create_if_block_12(ctx);
  function select_block_type(ctx2, dirty) {
    if (
      /*isLoading*/
      ctx2[1]
    )
      return create_if_block2;
    return create_else_block2;
  }
  let current_block_type = select_block_type(ctx, [-1, -1]);
  let if_block1 = current_block_type(ctx);
  const block = {
    c: function create() {
      div3 = element("div");
      div2 = element("div");
      div0 = element("div");
      h4 = element("h4");
      h4.textContent = "Review Activity";
      t1 = space();
      if (if_block0)
        if_block0.c();
      t2 = space();
      div1 = element("div");
      button0 = element("button");
      svg0 = svg_element("svg");
      path0 = svg_element("path");
      t3 = space();
      span = element("span");
      t4 = text(
        /*currentYear*/
        ctx[3]
      );
      t5 = space();
      button1 = element("button");
      svg1 = svg_element("svg");
      path1 = svg_element("path");
      t6 = space();
      if_block1.c();
      attr_dev(h4, "class", "svelte-1llxsmz");
      add_location(h4, file2, 211, 12, 6518);
      attr_dev(div0, "class", "decks-header-left svelte-1llxsmz");
      add_location(div0, file2, 210, 8, 6474);
      attr_dev(path0, "d", "M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z");
      add_location(path0, file2, 235, 20, 7382);
      attr_dev(svg0, "width", "12");
      attr_dev(svg0, "height", "12");
      attr_dev(svg0, "viewBox", "0 0 24 24");
      attr_dev(svg0, "fill", "currentColor");
      attr_dev(svg0, "class", "svelte-1llxsmz");
      add_location(svg0, file2, 229, 16, 7196);
      attr_dev(button0, "class", "decks-nav-button svelte-1llxsmz");
      add_location(button0, file2, 222, 12, 6910);
      attr_dev(span, "class", "decks-current-year svelte-1llxsmz");
      add_location(span, file2, 238, 12, 7498);
      attr_dev(path1, "d", "M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z");
      add_location(path1, file2, 252, 20, 8036);
      attr_dev(svg1, "width", "12");
      attr_dev(svg1, "height", "12");
      attr_dev(svg1, "viewBox", "0 0 24 24");
      attr_dev(svg1, "fill", "currentColor");
      attr_dev(svg1, "class", "svelte-1llxsmz");
      add_location(svg1, file2, 246, 16, 7850);
      attr_dev(button1, "class", "decks-nav-button svelte-1llxsmz");
      add_location(button1, file2, 239, 12, 7564);
      attr_dev(div1, "class", "decks-year-navigation svelte-1llxsmz");
      add_location(div1, file2, 221, 8, 6862);
      attr_dev(div2, "class", "decks-heatmap-header svelte-1llxsmz");
      add_location(div2, file2, 209, 4, 6431);
      attr_dev(div3, "class", "decks-heatmap-container svelte-1llxsmz");
      add_location(div3, file2, 208, 0, 6360);
    },
    l: function claim(nodes) {
      throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
    },
    m: function mount(target, anchor) {
      insert_dev(target, div3, anchor);
      append_dev(div3, div2);
      append_dev(div2, div0);
      append_dev(div0, h4);
      append_dev(div0, t1);
      if (if_block0)
        if_block0.m(div0, null);
      append_dev(div2, t2);
      append_dev(div2, div1);
      append_dev(div1, button0);
      append_dev(button0, svg0);
      append_dev(svg0, path0);
      append_dev(div1, t3);
      append_dev(div1, span);
      append_dev(span, t4);
      append_dev(div1, t5);
      append_dev(div1, button1);
      append_dev(button1, svg1);
      append_dev(svg1, path1);
      append_dev(div3, t6);
      if_block1.m(div3, null);
      ctx[16](div3);
      if (!mounted) {
        dispose = [
          listen_dev(
            button0,
            "click",
            /*click_handler*/
            ctx[12],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button0,
            "touchend",
            /*touchend_handler*/
            ctx[13],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button1,
            "click",
            /*click_handler_1*/
            ctx[14],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button1,
            "touchend",
            /*touchend_handler_1*/
            ctx[15],
            false,
            false,
            false,
            false
          )
        ];
        mounted = true;
      }
    },
    p: function update2(ctx2, dirty) {
      if (!/*isLoading*/
      ctx2[1]) {
        if (if_block0) {
          if_block0.p(ctx2, dirty);
        } else {
          if_block0 = create_if_block_12(ctx2);
          if_block0.c();
          if_block0.m(div0, null);
        }
      } else if (if_block0) {
        if_block0.d(1);
        if_block0 = null;
      }
      if (dirty[0] & /*currentYear*/
      8)
        set_data_dev(
          t4,
          /*currentYear*/
          ctx2[3]
        );
      if (current_block_type === (current_block_type = select_block_type(ctx2, dirty)) && if_block1) {
        if_block1.p(ctx2, dirty);
      } else {
        if_block1.d(1);
        if_block1 = current_block_type(ctx2);
        if (if_block1) {
          if_block1.c();
          if_block1.m(div3, null);
        }
      }
    },
    i: noop,
    o: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div3);
      if (if_block0)
        if_block0.d();
      if_block1.d();
      ctx[16](null);
      mounted = false;
      run_all(dispose);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_fragment2.name,
    type: "component",
    source: "",
    ctx
  });
  return block;
}
function formatDate(dateStr) {
  const date = new Date(dateStr);
  return date.toLocaleDateString("en-US", {
    weekday: "long",
    year: "numeric",
    month: "long",
    day: "numeric"
  });
}
function isToday(dateStr) {
  const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
  return dateStr === today;
}
function calculateMaxWeeks(width) {
  if (width === 0)
    return 20;
  const availableWidth = width - 50;
  const weekWidth = 12;
  const calculatedWeeks = Math.floor(availableWidth / weekWidth);
  return Math.min(Math.max(calculatedWeeks, 8), 52);
}
var func = (sum, count) => sum + count;
function instance2($$self, $$props, $$invalidate) {
  let { $$slots: slots = {}, $$scope } = $$props;
  validate_slots("ReviewHeatmap", slots, []);
  let { getReviewCounts } = $$props;
  let reviewCounts = /* @__PURE__ */ new Map();
  let days = [];
  let weeks = [];
  let maxCount = 0;
  let isLoading = true;
  let containerElement;
  let maxWeeks = 52;
  let containerWidth = 0;
  let currentYear = (/* @__PURE__ */ new Date()).getFullYear();
  let lastEventTime = 0;
  let lastEventType = "";
  const months = [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec"
  ];
  function generateDays() {
    const yearStart = new Date(currentYear, 0, 1);
    const yearEnd = new Date(currentYear, 11, 31);
    const startDate = new Date(yearStart);
    const startDayOfWeek = startDate.getDay();
    startDate.setDate(startDate.getDate() - startDayOfWeek);
    const endDate = new Date(yearEnd);
    const endDayOfWeek = endDate.getDay();
    endDate.setDate(endDate.getDate() + (6 - endDayOfWeek));
    const daysArray = [];
    const current = new Date(startDate);
    while (current <= endDate) {
      const dateStr = current.toISOString().split("T")[0];
      const currentDateYear = current.getFullYear();
      if (currentDateYear === currentYear) {
        const count = reviewCounts.get(dateStr) || 0;
        daysArray.push({
          date: dateStr,
          count,
          dayOfWeek: current.getDay()
        });
        if (count > maxCount) {
          maxCount = count;
        }
      } else {
        daysArray.push({
          date: dateStr,
          count: 0,
          dayOfWeek: current.getDay()
        });
      }
      current.setDate(current.getDate() + 1);
    }
    days = daysArray;
    weeks = [];
    for (let i = 0; i < days.length; i += 7) {
      weeks.push(days.slice(i, i + 7));
    }
  }
  function getIntensityClass(count) {
    if (count === 0)
      return "decks-intensity-0";
    const intensity = Math.min(Math.ceil(count / maxCount * 4), 4);
    return `decks-intensity-${intensity}`;
  }
  function getMonthsData() {
    if (weeks.length === 0)
      return [];
    const monthsData = [];
    let currentMonth = -1;
    let currentMonthWeeks = [];
    weeks.forEach((week) => {
      const firstDay = week[0];
      if (firstDay) {
        const date = new Date(firstDay.date);
        const month = date.getMonth();
        const year = date.getFullYear();
        if (year === currentYear) {
          if (month !== currentMonth) {
            if (currentMonth !== -1 && currentMonthWeeks.length > 0) {
              monthsData.push({
                month: months[currentMonth],
                weeks: currentMonthWeeks
              });
            }
            currentMonth = month;
            currentMonthWeeks = [week];
          } else {
            currentMonthWeeks.push(week);
          }
        }
      }
    });
    if (currentMonth !== -1 && currentMonthWeeks.length > 0) {
      monthsData.push({
        month: months[currentMonth],
        weeks: currentMonthWeeks
      });
    }
    return monthsData;
  }
  function updateContainerWidth() {
    if (containerElement) {
      $$invalidate(11, containerWidth = containerElement.clientWidth);
    }
  }
  function navigateYear(direction) {
    if (direction === "prev") {
      $$invalidate(3, currentYear--, currentYear);
    } else {
      $$invalidate(3, currentYear++, currentYear);
    }
    generateDays();
    refresh();
  }
  function handleTouchClick(callback, event) {
    const now = Date.now();
    const eventType = event.type;
    if (now - lastEventTime < 100 && lastEventType !== eventType) {
      return;
    }
    lastEventTime = now;
    lastEventType = eventType;
    callback();
  }
  function refresh() {
    return __awaiter(this, void 0, void 0, function* () {
      $$invalidate(1, isLoading = true);
      try {
        $$invalidate(0, reviewCounts = yield getReviewCounts(366));
        maxCount = 0;
        generateDays();
      } catch (error) {
        console.error("Failed to load review counts:", error);
      } finally {
        $$invalidate(1, isLoading = false);
      }
    });
  }
  onMount(() => {
    setTimeout(
      () => {
        updateContainerWidth();
        refresh();
      },
      100
    );
  });
  $$self.$$.on_mount.push(function() {
    if (getReviewCounts === void 0 && !("getReviewCounts" in $$props || $$self.$$.bound[$$self.$$.props["getReviewCounts"]])) {
      console_12.warn("<ReviewHeatmap> was created without expected prop 'getReviewCounts'");
    }
  });
  const writable_props = ["getReviewCounts"];
  Object.keys($$props).forEach((key) => {
    if (!~writable_props.indexOf(key) && key.slice(0, 2) !== "$$" && key !== "slot")
      console_12.warn(`<ReviewHeatmap> was created with unknown prop '${key}'`);
  });
  const click_handler = (e) => handleTouchClick(() => navigateYear("prev"), e);
  const touchend_handler = (e) => handleTouchClick(() => navigateYear("prev"), e);
  const click_handler_1 = (e) => handleTouchClick(() => navigateYear("next"), e);
  const touchend_handler_1 = (e) => handleTouchClick(() => navigateYear("next"), e);
  function div3_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      containerElement = $$value;
      $$invalidate(2, containerElement);
    });
  }
  $$self.$$set = ($$props2) => {
    if ("getReviewCounts" in $$props2)
      $$invalidate(8, getReviewCounts = $$props2.getReviewCounts);
  };
  $$self.$capture_state = () => ({
    __awaiter,
    onMount,
    getReviewCounts,
    reviewCounts,
    days,
    weeks,
    maxCount,
    isLoading,
    containerElement,
    maxWeeks,
    containerWidth,
    currentYear,
    lastEventTime,
    lastEventType,
    months,
    generateDays,
    getIntensityClass,
    formatDate,
    isToday,
    getMonthsData,
    calculateMaxWeeks,
    updateContainerWidth,
    navigateYear,
    handleTouchClick,
    refresh
  });
  $$self.$inject_state = ($$props2) => {
    if ("getReviewCounts" in $$props2)
      $$invalidate(8, getReviewCounts = $$props2.getReviewCounts);
    if ("reviewCounts" in $$props2)
      $$invalidate(0, reviewCounts = $$props2.reviewCounts);
    if ("days" in $$props2)
      days = $$props2.days;
    if ("weeks" in $$props2)
      weeks = $$props2.weeks;
    if ("maxCount" in $$props2)
      maxCount = $$props2.maxCount;
    if ("isLoading" in $$props2)
      $$invalidate(1, isLoading = $$props2.isLoading);
    if ("containerElement" in $$props2)
      $$invalidate(2, containerElement = $$props2.containerElement);
    if ("maxWeeks" in $$props2)
      $$invalidate(10, maxWeeks = $$props2.maxWeeks);
    if ("containerWidth" in $$props2)
      $$invalidate(11, containerWidth = $$props2.containerWidth);
    if ("currentYear" in $$props2)
      $$invalidate(3, currentYear = $$props2.currentYear);
    if ("lastEventTime" in $$props2)
      lastEventTime = $$props2.lastEventTime;
    if ("lastEventType" in $$props2)
      lastEventType = $$props2.lastEventType;
  };
  if ($$props && "$$inject" in $$props) {
    $$self.$inject_state($$props.$$inject);
  }
  $$self.$$.update = () => {
    if ($$self.$$.dirty[0] & /*containerWidth, maxWeeks*/
    3072) {
      $:
        if (containerWidth > 0) {
          const newMaxWeeks = calculateMaxWeeks(containerWidth);
          if (newMaxWeeks !== maxWeeks) {
            $$invalidate(10, maxWeeks = newMaxWeeks);
            refresh();
          }
        }
    }
  };
  return [
    reviewCounts,
    isLoading,
    containerElement,
    currentYear,
    getIntensityClass,
    getMonthsData,
    navigateYear,
    handleTouchClick,
    getReviewCounts,
    refresh,
    maxWeeks,
    containerWidth,
    click_handler,
    touchend_handler,
    click_handler_1,
    touchend_handler_1,
    div3_binding
  ];
}
var ReviewHeatmap = class extends SvelteComponentDev {
  constructor(options) {
    super(options);
    init(this, options, instance2, create_fragment2, safe_not_equal, { getReviewCounts: 8, refresh: 9 }, null, [-1, -1]);
    dispatch_dev("SvelteRegisterComponent", {
      component: this,
      tagName: "ReviewHeatmap",
      options,
      id: create_fragment2.name
    });
  }
  get getReviewCounts() {
    throw new Error("<ReviewHeatmap>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set getReviewCounts(value) {
    throw new Error("<ReviewHeatmap>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get refresh() {
    return this.$$.ctx[9];
  }
  set refresh(value) {
    throw new Error("<ReviewHeatmap>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
};
var ReviewHeatmap_default = ReviewHeatmap;

// src/components/StatisticsUI.svelte
var { console: console_13 } = globals;
var file3 = "src/components/StatisticsUI.svelte";
function get_each_context2(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[40] = list[i];
  child_ctx[43] = i;
  const constants_0 = (
    /*statistics*/
    child_ctx[2].forecast.indexOf(
      /*day*/
      child_ctx[40]
    )
  );
  child_ctx[41] = constants_0;
  return child_ctx;
}
function get_if_ctx(ctx) {
  const child_ctx = ctx.slice();
  const constants_0 = (
    /*statistics*/
    child_ctx[2].forecast.filter((day) => day.dueCount > 0).slice(0, 20)
  );
  child_ctx[38] = constants_0;
  const constants_1 = Math.max(.../*filteredForecast*/
  child_ctx[38].map((day) => day.dueCount));
  child_ctx[39] = constants_1;
  return child_ctx;
}
function create_else_block3(ctx) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;
  let div2;
  let div0;
  let t0;
  let div1;
  let t1;
  let div77;
  let div19;
  let h30;
  let t3;
  let div18;
  let div5;
  let div3;
  let t4_value = (
    /*statistics*/
    (((_b = (_a = ctx[2]) == null ? void 0 : _a.cardStats) == null ? void 0 : _b.new) || 0) + ""
  );
  let t4;
  let t5;
  let div4;
  let t7;
  let div8;
  let div6;
  let t9;
  let div7;
  let t11;
  let div11;
  let div9;
  let t12_value = (
    /*statistics*/
    (((_d = (_c = ctx[2]) == null ? void 0 : _c.cardStats) == null ? void 0 : _d.review) || 0) + ""
  );
  let t12;
  let t13;
  let div10;
  let t15;
  let div14;
  let div12;
  let t16_value = (
    /*statistics*/
    (((_f = (_e = ctx[2]) == null ? void 0 : _e.cardStats) == null ? void 0 : _f.mature) || 0) + ""
  );
  let t16;
  let t17;
  let div13;
  let t19;
  let div17;
  let div15;
  let t21;
  let div16;
  let t23;
  let div27;
  let h31;
  let t25;
  let div26;
  let div22;
  let div20;
  let t26_value = (
    /*statistics*/
    (((_g = ctx[2]) == null ? void 0 : _g.averagePace) ? formatPace(
      /*statistics*/
      ctx[2].averagePace
    ) : "N/A") + ""
  );
  let t26;
  let t27;
  let div21;
  let t29;
  let div25;
  let div23;
  let t30_value = (
    /*statistics*/
    (((_h = ctx[2]) == null ? void 0 : _h.totalReviewTime) ? formatTime2(
      /*statistics*/
      ctx[2].totalReviewTime
    ) : "N/A") + ""
  );
  let t30;
  let t31;
  let div24;
  let t33;
  let div28;
  let h32;
  let t35;
  let t36;
  let div29;
  let h33;
  let t38;
  let t39;
  let h34;
  let t41;
  let t42;
  let h35;
  let t44;
  let t45;
  let div73;
  let h36;
  let t47;
  let div62;
  let div33;
  let div30;
  let t48_value = (
    /*statistics*/
    (((_i = ctx[2]) == null ? void 0 : _i.retentionRate) || 0).toFixed(1) + ""
  );
  let t48;
  let t49;
  let t50;
  let div31;
  let t52;
  let div32;
  let t54;
  let div37;
  let div34;
  let t56;
  let div35;
  let t58;
  let div36;
  let t60;
  let div41;
  let div38;
  let t63;
  let div39;
  let t65;
  let div40;
  let t67;
  let div45;
  let div42;
  let t69;
  let div43;
  let t71;
  let div44;
  let t73;
  let div49;
  let div46;
  let t75;
  let div47;
  let t77;
  let div48;
  let t79;
  let div53;
  let div50;
  let t81;
  let div51;
  let t83;
  let div52;
  let t85;
  let div57;
  let div54;
  let t88;
  let div55;
  let t90;
  let div56;
  let t92;
  let div61;
  let div58;
  let t93_value = (
    /*statistics*/
    (((_k = (_j = ctx[2]) == null ? void 0 : _j.cardStats) == null ? void 0 : _k.new) || 0) + /*statistics*/
    (((_m = (_l = ctx[2]) == null ? void 0 : _l.cardStats) == null ? void 0 : _m.review) || 0) + /*statistics*/
    (((_o = (_n = ctx[2]) == null ? void 0 : _n.cardStats) == null ? void 0 : _o.mature) || 0) + ""
  );
  let t93;
  let t94;
  let div59;
  let t96;
  let div60;
  let t98;
  let h4;
  let t100;
  let div72;
  let div65;
  let div63;
  let t101_value = (
    /*statistics*/
    (((_q = (_p = ctx[2]) == null ? void 0 : _p.cardStats) == null ? void 0 : _q.new) || 0) + ""
  );
  let t101;
  let t102;
  let div64;
  let t104;
  let div68;
  let div66;
  let t106;
  let div67;
  let t108;
  let div71;
  let div69;
  let t109_value = (
    /*statistics*/
    (((_s = (_r = ctx[2]) == null ? void 0 : _r.cardStats) == null ? void 0 : _s.mature) || 0) + ""
  );
  let t109;
  let t110;
  let div70;
  let t112;
  let div74;
  let h37;
  let t114;
  let t115;
  let div75;
  let h38;
  let t117;
  let show_if;
  let t118;
  let div76;
  let h39;
  let t120;
  let p;
  let t122;
  let reviewheatmap;
  let t123;
  let div78;
  let a;
  let img;
  let img_src_value;
  let t124;
  let button;
  let current;
  let mounted;
  let dispose;
  function select_block_type_1(ctx2, dirty) {
    if (
      /*todayStats*/
      ctx2[6]
    )
      return create_if_block_8;
    return create_else_block_6;
  }
  let current_block_type = select_block_type_1(ctx, [-1, -1]);
  let if_block0 = current_block_type(ctx);
  function select_block_type_2(ctx2, dirty) {
    if (
      /*weekStats*/
      ctx2[7] && /*weekStats*/
      ctx2[7].reviews > 0
    )
      return create_if_block_7;
    return create_else_block_5;
  }
  let current_block_type_1 = select_block_type_2(ctx, [-1, -1]);
  let if_block1 = current_block_type_1(ctx);
  function select_block_type_3(ctx2, dirty) {
    if (
      /*monthStats*/
      ctx2[8] && /*monthStats*/
      ctx2[8].reviews > 0
    )
      return create_if_block_6;
    return create_else_block_4;
  }
  let current_block_type_2 = select_block_type_3(ctx, [-1, -1]);
  let if_block2 = current_block_type_2(ctx);
  function select_block_type_4(ctx2, dirty) {
    if (
      /*yearStats*/
      ctx2[9] && /*yearStats*/
      ctx2[9].reviews > 0
    )
      return create_if_block_5;
    return create_else_block_3;
  }
  let current_block_type_3 = select_block_type_4(ctx, [-1, -1]);
  let if_block3 = current_block_type_3(ctx);
  function select_block_type_5(ctx2, dirty) {
    var _a2;
    if (
      /*statistics*/
      ((_a2 = ctx2[2]) == null ? void 0 : _a2.answerButtons) && /*statistics*/
      (ctx2[2].answerButtons.again > 0 || /*statistics*/
      ctx2[2].answerButtons.hard > 0 || /*statistics*/
      ctx2[2].answerButtons.good > 0 || /*statistics*/
      ctx2[2].answerButtons.easy > 0)
    )
      return create_if_block_4;
    return create_else_block_2;
  }
  let current_block_type_4 = select_block_type_5(ctx, [-1, -1]);
  let if_block4 = current_block_type_4(ctx);
  function select_block_type_6(ctx2, dirty) {
    var _a2;
    if (dirty[0] & /*statistics*/
    4)
      show_if = null;
    if (show_if == null)
      show_if = !!/*statistics*/
      (((_a2 = ctx2[2]) == null ? void 0 : _a2.forecast) && /*statistics*/
      ctx2[2].forecast.length > 0 && /*statistics*/
      ctx2[2].forecast.some(func2));
    if (show_if)
      return create_if_block_32;
    return create_else_block_1;
  }
  function select_block_ctx(ctx2, type) {
    if (type === create_if_block_32)
      return get_if_ctx(ctx2);
    return ctx2;
  }
  let current_block_type_5 = select_block_type_6(ctx, [-1, -1]);
  let if_block5 = current_block_type_5(select_block_ctx(ctx, current_block_type_5));
  let reviewheatmap_props = { getReviewCounts: (
    /*func_3*/
    ctx[23]
  ) };
  reviewheatmap = new ReviewHeatmap_default({
    props: reviewheatmap_props,
    $$inline: true
  });
  ctx[24](reviewheatmap);
  const block = {
    c: function create() {
      div2 = element("div");
      div0 = element("div");
      t0 = space();
      div1 = element("div");
      t1 = space();
      div77 = element("div");
      div19 = element("div");
      h30 = element("h3");
      h30.textContent = "Current Status";
      t3 = space();
      div18 = element("div");
      div5 = element("div");
      div3 = element("div");
      t4 = text(t4_value);
      t5 = space();
      div4 = element("div");
      div4.textContent = "New Cards";
      t7 = space();
      div8 = element("div");
      div6 = element("div");
      div6.textContent = "0";
      t9 = space();
      div7 = element("div");
      div7.textContent = "Learning";
      t11 = space();
      div11 = element("div");
      div9 = element("div");
      t12 = text(t12_value);
      t13 = space();
      div10 = element("div");
      div10.textContent = "Review";
      t15 = space();
      div14 = element("div");
      div12 = element("div");
      t16 = text(t16_value);
      t17 = space();
      div13 = element("div");
      div13.textContent = "Mature";
      t19 = space();
      div17 = element("div");
      div15 = element("div");
      div15.textContent = `${/*getDueToday*/
      ctx[15]()}`;
      t21 = space();
      div16 = element("div");
      div16.textContent = "Due Today";
      t23 = space();
      div27 = element("div");
      h31 = element("h3");
      h31.textContent = "Review Pace";
      t25 = space();
      div26 = element("div");
      div22 = element("div");
      div20 = element("div");
      t26 = text(t26_value);
      t27 = space();
      div21 = element("div");
      div21.textContent = "Average per Card";
      t29 = space();
      div25 = element("div");
      div23 = element("div");
      t30 = text(t30_value);
      t31 = space();
      div24 = element("div");
      div24.textContent = "Total Review Time";
      t33 = space();
      div28 = element("div");
      h32 = element("h3");
      h32.textContent = "Today's Statistics";
      t35 = space();
      if_block0.c();
      t36 = space();
      div29 = element("div");
      h33 = element("h3");
      h33.textContent = "This Week";
      t38 = space();
      if_block1.c();
      t39 = space();
      h34 = element("h3");
      h34.textContent = "This Month";
      t41 = space();
      if_block2.c();
      t42 = space();
      h35 = element("h3");
      h35.textContent = "This Year";
      t44 = space();
      if_block3.c();
      t45 = space();
      div73 = element("div");
      h36 = element("h3");
      h36.textContent = "Deck Statistics & Metrics";
      t47 = space();
      div62 = element("div");
      div33 = element("div");
      div30 = element("div");
      t48 = text(t48_value);
      t49 = text("%");
      t50 = space();
      div31 = element("div");
      div31.textContent = "Retention Rate";
      t52 = space();
      div32 = element("div");
      div32.textContent = '% of reviews answered correctly (excluding "Again")';
      t54 = space();
      div37 = element("div");
      div34 = element("div");
      div34.textContent = `${/*calculateAverageEase*/
      ctx[13]()}`;
      t56 = space();
      div35 = element("div");
      div35.textContent = "Average Ease";
      t58 = space();
      div36 = element("div");
      div36.textContent = "Mean of ease button values";
      t60 = space();
      div41 = element("div");
      div38 = element("div");
      div38.textContent = `${/*calculateAverageInterval*/
      ctx[14]()}d`;
      t63 = space();
      div39 = element("div");
      div39.textContent = "Avg Interval";
      t65 = space();
      div40 = element("div");
      div40.textContent = "Mean interval of all review cards";
      t67 = space();
      div45 = element("div");
      div42 = element("div");
      div42.textContent = `${/*getDueToday*/
      ctx[15]()}`;
      t69 = space();
      div43 = element("div");
      div43.textContent = "Due Today";
      t71 = space();
      div44 = element("div");
      div44.textContent = "Number of cards due today";
      t73 = space();
      div49 = element("div");
      div46 = element("div");
      div46.textContent = `${/*getDueTomorrow*/
      ctx[16]()}`;
      t75 = space();
      div47 = element("div");
      div47.textContent = "Due Tomorrow";
      t77 = space();
      div48 = element("div");
      div48.textContent = "Number of cards due tomorrow";
      t79 = space();
      div53 = element("div");
      div50 = element("div");
      div50.textContent = "0";
      t81 = space();
      div51 = element("div");
      div51.textContent = "Learning Cards";
      t83 = space();
      div52 = element("div");
      div52.textContent = "Number of cards in the learning queue";
      t85 = space();
      div57 = element("div");
      div54 = element("div");
      div54.textContent = `${/*getMaturityRatio*/
      ctx[17]()}%`;
      t88 = space();
      div55 = element("div");
      div55.textContent = "Maturity Ratio";
      t90 = space();
      div56 = element("div");
      div56.textContent = "Mature cards \xF7 total cards";
      t92 = space();
      div61 = element("div");
      div58 = element("div");
      t93 = text(t93_value);
      t94 = space();
      div59 = element("div");
      div59.textContent = "Total Cards";
      t96 = space();
      div60 = element("div");
      div60.textContent = "All cards in collection";
      t98 = space();
      h4 = element("h4");
      h4.textContent = "Card Status Breakdown";
      t100 = space();
      div72 = element("div");
      div65 = element("div");
      div63 = element("div");
      t101 = text(t101_value);
      t102 = space();
      div64 = element("div");
      div64.textContent = "New Cards";
      t104 = space();
      div68 = element("div");
      div66 = element("div");
      div66.textContent = "0";
      t106 = space();
      div67 = element("div");
      div67.textContent = "Learning";
      t108 = space();
      div71 = element("div");
      div69 = element("div");
      t109 = text(t109_value);
      t110 = space();
      div70 = element("div");
      div70.textContent = "Mature";
      t112 = space();
      div74 = element("div");
      h37 = element("h3");
      h37.textContent = "Answer Button Usage";
      t114 = space();
      if_block4.c();
      t115 = space();
      div75 = element("div");
      h38 = element("h3");
      h38.textContent = "Review Load Forecast";
      t117 = space();
      if_block5.c();
      t118 = space();
      div76 = element("div");
      h39 = element("h3");
      h39.textContent = "Review Heatmap";
      t120 = space();
      p = element("p");
      p.textContent = "Daily review activity over time";
      t122 = space();
      create_component(reviewheatmap.$$.fragment);
      t123 = space();
      div78 = element("div");
      a = element("a");
      img = element("img");
      t124 = space();
      button = element("button");
      button.textContent = "Close";
      attr_dev(div0, "class", "svelte-1lz95jp");
      add_location(div0, file3, 293, 12, 10465);
      attr_dev(div1, "class", "svelte-1lz95jp");
      add_location(div1, file3, 294, 12, 10521);
      attr_dev(div2, "class", "decks-filters svelte-1lz95jp");
      add_location(div2, file3, 292, 8, 10425);
      attr_dev(h30, "class", "svelte-1lz95jp");
      add_location(h30, file3, 300, 16, 10718);
      attr_dev(div3, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div3, file3, 303, 24, 10863);
      attr_dev(div4, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div4, file3, 306, 24, 11011);
      attr_dev(div5, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div5, file3, 302, 20, 10809);
      attr_dev(div6, "class", "decks-stat-value svelte-1lz95jp");
      set_style(div6, "display", "none");
      add_location(div6, file3, 309, 24, 11158);
      attr_dev(div7, "class", "decks-stat-label svelte-1lz95jp");
      set_style(div7, "display", "none");
      add_location(div7, file3, 312, 24, 11297);
      attr_dev(div8, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div8, file3, 308, 20, 11104);
      attr_dev(div9, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div9, file3, 317, 24, 11520);
      attr_dev(div10, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div10, file3, 320, 24, 11671);
      attr_dev(div11, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div11, file3, 316, 20, 11466);
      attr_dev(div12, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div12, file3, 323, 24, 11815);
      attr_dev(div13, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div13, file3, 326, 24, 11966);
      attr_dev(div14, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div14, file3, 322, 20, 11761);
      attr_dev(div15, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div15, file3, 329, 24, 12110);
      attr_dev(div16, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div16, file3, 330, 24, 12186);
      attr_dev(div17, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div17, file3, 328, 20, 12056);
      attr_dev(div18, "class", "decks-stats-grid svelte-1lz95jp");
      add_location(div18, file3, 301, 16, 10758);
      attr_dev(div19, "class", "decks-stats-section svelte-1lz95jp");
      add_location(div19, file3, 299, 12, 10668);
      attr_dev(h31, "class", "svelte-1lz95jp");
      add_location(h31, file3, 337, 16, 12401);
      attr_dev(div20, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div20, file3, 340, 24, 12543);
      attr_dev(div21, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div21, file3, 345, 24, 12792);
      attr_dev(div22, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div22, file3, 339, 20, 12489);
      attr_dev(div23, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div23, file3, 348, 24, 12946);
      attr_dev(div24, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div24, file3, 353, 24, 13203);
      attr_dev(div25, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div25, file3, 347, 20, 12892);
      attr_dev(div26, "class", "decks-stats-grid svelte-1lz95jp");
      add_location(div26, file3, 338, 16, 12438);
      attr_dev(div27, "class", "decks-stats-section svelte-1lz95jp");
      add_location(div27, file3, 336, 12, 12351);
      attr_dev(h32, "class", "svelte-1lz95jp");
      add_location(h32, file3, 360, 16, 13429);
      attr_dev(div28, "class", "decks-stats-section svelte-1lz95jp");
      add_location(div28, file3, 359, 12, 13379);
      attr_dev(h33, "class", "svelte-1lz95jp");
      add_location(h33, file3, 409, 16, 15702);
      attr_dev(h34, "class", "svelte-1lz95jp");
      add_location(h34, file3, 437, 16, 17012);
      attr_dev(h35, "class", "svelte-1lz95jp");
      add_location(h35, file3, 465, 16, 18329);
      attr_dev(div29, "class", "decks-stats-section svelte-1lz95jp");
      add_location(div29, file3, 408, 12, 15652);
      attr_dev(h36, "class", "svelte-1lz95jp");
      add_location(h36, file3, 496, 16, 19751);
      attr_dev(div30, "class", "decks-metric-value svelte-1lz95jp");
      add_location(div30, file3, 499, 24, 19911);
      attr_dev(div31, "class", "decks-metric-label svelte-1lz95jp");
      add_location(div31, file3, 502, 24, 20074);
      attr_dev(div32, "class", "decks-metric-description svelte-1lz95jp");
      add_location(div32, file3, 503, 24, 20151);
      attr_dev(div33, "class", "decks-metric-card svelte-1lz95jp");
      add_location(div33, file3, 498, 20, 19855);
      attr_dev(div34, "class", "decks-metric-value svelte-1lz95jp");
      add_location(div34, file3, 508, 24, 20404);
      attr_dev(div35, "class", "decks-metric-label svelte-1lz95jp");
      add_location(div35, file3, 511, 24, 20545);
      attr_dev(div36, "class", "decks-metric-description svelte-1lz95jp");
      add_location(div36, file3, 512, 24, 20620);
      attr_dev(div37, "class", "decks-metric-card svelte-1lz95jp");
      add_location(div37, file3, 507, 20, 20348);
      attr_dev(div38, "class", "decks-metric-value svelte-1lz95jp");
      add_location(div38, file3, 517, 24, 20848);
      attr_dev(div39, "class", "decks-metric-label svelte-1lz95jp");
      add_location(div39, file3, 520, 24, 20994);
      attr_dev(div40, "class", "decks-metric-description svelte-1lz95jp");
      add_location(div40, file3, 521, 24, 21069);
      attr_dev(div41, "class", "decks-metric-card svelte-1lz95jp");
      add_location(div41, file3, 516, 20, 20792);
      attr_dev(div42, "class", "decks-metric-value svelte-1lz95jp");
      add_location(div42, file3, 526, 24, 21304);
      attr_dev(div43, "class", "decks-metric-label svelte-1lz95jp");
      add_location(div43, file3, 527, 24, 21382);
      attr_dev(div44, "class", "decks-metric-description svelte-1lz95jp");
      add_location(div44, file3, 528, 24, 21454);
      attr_dev(div45, "class", "decks-metric-card svelte-1lz95jp");
      add_location(div45, file3, 525, 20, 21248);
      attr_dev(div46, "class", "decks-metric-value svelte-1lz95jp");
      add_location(div46, file3, 533, 24, 21681);
      attr_dev(div47, "class", "decks-metric-label svelte-1lz95jp");
      add_location(div47, file3, 534, 24, 21762);
      attr_dev(div48, "class", "decks-metric-description svelte-1lz95jp");
      add_location(div48, file3, 535, 24, 21837);
      attr_dev(div49, "class", "decks-metric-card svelte-1lz95jp");
      add_location(div49, file3, 532, 20, 21625);
      attr_dev(div50, "class", "decks-metric-value svelte-1lz95jp");
      set_style(div50, "display", "none");
      add_location(div50, file3, 540, 24, 22067);
      attr_dev(div51, "class", "decks-metric-label svelte-1lz95jp");
      set_style(div51, "display", "none");
      add_location(div51, file3, 543, 24, 22208);
      attr_dev(div52, "class", "decks-metric-description svelte-1lz95jp");
      set_style(div52, "display", "none");
      add_location(div52, file3, 546, 24, 22362);
      attr_dev(div53, "class", "decks-metric-card svelte-1lz95jp");
      add_location(div53, file3, 539, 20, 22011);
      attr_dev(div54, "class", "decks-metric-value svelte-1lz95jp");
      add_location(div54, file3, 554, 24, 22705);
      attr_dev(div55, "class", "decks-metric-label svelte-1lz95jp");
      add_location(div55, file3, 557, 24, 22843);
      attr_dev(div56, "class", "decks-metric-description svelte-1lz95jp");
      add_location(div56, file3, 558, 24, 22920);
      attr_dev(div57, "class", "decks-metric-card svelte-1lz95jp");
      add_location(div57, file3, 553, 20, 22649);
      attr_dev(div58, "class", "decks-metric-value svelte-1lz95jp");
      add_location(div58, file3, 563, 24, 23148);
      attr_dev(div59, "class", "decks-metric-label svelte-1lz95jp");
      add_location(div59, file3, 568, 24, 23442);
      attr_dev(div60, "class", "decks-metric-description svelte-1lz95jp");
      add_location(div60, file3, 569, 24, 23516);
      attr_dev(div61, "class", "decks-metric-card svelte-1lz95jp");
      add_location(div61, file3, 562, 20, 23092);
      attr_dev(div62, "class", "decks-metrics-grid svelte-1lz95jp");
      add_location(div62, file3, 497, 16, 19802);
      attr_dev(h4, "class", "svelte-1lz95jp");
      add_location(h4, file3, 575, 16, 23705);
      attr_dev(div63, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div63, file3, 578, 24, 23857);
      attr_dev(div64, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div64, file3, 581, 24, 24005);
      attr_dev(div65, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div65, file3, 577, 20, 23803);
      attr_dev(div66, "class", "decks-stat-value svelte-1lz95jp");
      set_style(div66, "display", "none");
      add_location(div66, file3, 584, 24, 24152);
      attr_dev(div67, "class", "decks-stat-label svelte-1lz95jp");
      set_style(div67, "display", "none");
      add_location(div67, file3, 587, 24, 24291);
      attr_dev(div68, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div68, file3, 583, 20, 24098);
      attr_dev(div69, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div69, file3, 592, 24, 24514);
      attr_dev(div70, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div70, file3, 595, 24, 24665);
      attr_dev(div71, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div71, file3, 591, 20, 24460);
      attr_dev(div72, "class", "decks-stats-grid svelte-1lz95jp");
      add_location(div72, file3, 576, 16, 23752);
      attr_dev(div73, "class", "decks-stats-section svelte-1lz95jp");
      add_location(div73, file3, 495, 12, 19701);
      attr_dev(h37, "class", "svelte-1lz95jp");
      add_location(h37, file3, 602, 16, 24881);
      attr_dev(div74, "class", "decks-stats-section svelte-1lz95jp");
      add_location(div74, file3, 601, 12, 24831);
      attr_dev(h38, "class", "svelte-1lz95jp");
      add_location(h38, file3, 683, 16, 29390);
      attr_dev(div75, "class", "decks-stats-section svelte-1lz95jp");
      add_location(div75, file3, 682, 12, 29340);
      attr_dev(h39, "class", "svelte-1lz95jp");
      add_location(h39, file3, 739, 16, 32133);
      add_location(p, file3, 740, 16, 32173);
      attr_dev(div76, "class", "decks-stats-section svelte-1lz95jp");
      add_location(div76, file3, 738, 12, 32083);
      attr_dev(div77, "class", "decks-stats svelte-1lz95jp");
      add_location(div77, file3, 297, 8, 10594);
      if (!src_url_equal(img.src, img_src_value = "https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png"))
        attr_dev(img, "src", img_src_value);
      attr_dev(img, "alt", "Buy Me A Coffee");
      attr_dev(img, "height", "40");
      add_location(img, file3, 752, 16, 32614);
      attr_dev(a, "href", "https://www.buymeacoffee.com/dscherdil0");
      add_location(a, file3, 751, 12, 32547);
      attr_dev(button, "class", "decks-close-button svelte-1lz95jp");
      add_location(button, file3, 759, 12, 32827);
      attr_dev(div78, "class", "decks-modal-actions svelte-1lz95jp");
      add_location(div78, file3, 750, 8, 32501);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div2, anchor);
      append_dev(div2, div0);
      ctx[21](div0);
      append_dev(div2, t0);
      append_dev(div2, div1);
      ctx[22](div1);
      insert_dev(target, t1, anchor);
      insert_dev(target, div77, anchor);
      append_dev(div77, div19);
      append_dev(div19, h30);
      append_dev(div19, t3);
      append_dev(div19, div18);
      append_dev(div18, div5);
      append_dev(div5, div3);
      append_dev(div3, t4);
      append_dev(div5, t5);
      append_dev(div5, div4);
      append_dev(div18, t7);
      append_dev(div18, div8);
      append_dev(div8, div6);
      append_dev(div8, t9);
      append_dev(div8, div7);
      append_dev(div18, t11);
      append_dev(div18, div11);
      append_dev(div11, div9);
      append_dev(div9, t12);
      append_dev(div11, t13);
      append_dev(div11, div10);
      append_dev(div18, t15);
      append_dev(div18, div14);
      append_dev(div14, div12);
      append_dev(div12, t16);
      append_dev(div14, t17);
      append_dev(div14, div13);
      append_dev(div18, t19);
      append_dev(div18, div17);
      append_dev(div17, div15);
      append_dev(div17, t21);
      append_dev(div17, div16);
      append_dev(div77, t23);
      append_dev(div77, div27);
      append_dev(div27, h31);
      append_dev(div27, t25);
      append_dev(div27, div26);
      append_dev(div26, div22);
      append_dev(div22, div20);
      append_dev(div20, t26);
      append_dev(div22, t27);
      append_dev(div22, div21);
      append_dev(div26, t29);
      append_dev(div26, div25);
      append_dev(div25, div23);
      append_dev(div23, t30);
      append_dev(div25, t31);
      append_dev(div25, div24);
      append_dev(div77, t33);
      append_dev(div77, div28);
      append_dev(div28, h32);
      append_dev(div28, t35);
      if_block0.m(div28, null);
      append_dev(div77, t36);
      append_dev(div77, div29);
      append_dev(div29, h33);
      append_dev(div29, t38);
      if_block1.m(div29, null);
      append_dev(div29, t39);
      append_dev(div29, h34);
      append_dev(div29, t41);
      if_block2.m(div29, null);
      append_dev(div29, t42);
      append_dev(div29, h35);
      append_dev(div29, t44);
      if_block3.m(div29, null);
      append_dev(div77, t45);
      append_dev(div77, div73);
      append_dev(div73, h36);
      append_dev(div73, t47);
      append_dev(div73, div62);
      append_dev(div62, div33);
      append_dev(div33, div30);
      append_dev(div30, t48);
      append_dev(div30, t49);
      append_dev(div33, t50);
      append_dev(div33, div31);
      append_dev(div33, t52);
      append_dev(div33, div32);
      append_dev(div62, t54);
      append_dev(div62, div37);
      append_dev(div37, div34);
      append_dev(div37, t56);
      append_dev(div37, div35);
      append_dev(div37, t58);
      append_dev(div37, div36);
      append_dev(div62, t60);
      append_dev(div62, div41);
      append_dev(div41, div38);
      append_dev(div41, t63);
      append_dev(div41, div39);
      append_dev(div41, t65);
      append_dev(div41, div40);
      append_dev(div62, t67);
      append_dev(div62, div45);
      append_dev(div45, div42);
      append_dev(div45, t69);
      append_dev(div45, div43);
      append_dev(div45, t71);
      append_dev(div45, div44);
      append_dev(div62, t73);
      append_dev(div62, div49);
      append_dev(div49, div46);
      append_dev(div49, t75);
      append_dev(div49, div47);
      append_dev(div49, t77);
      append_dev(div49, div48);
      append_dev(div62, t79);
      append_dev(div62, div53);
      append_dev(div53, div50);
      append_dev(div53, t81);
      append_dev(div53, div51);
      append_dev(div53, t83);
      append_dev(div53, div52);
      append_dev(div62, t85);
      append_dev(div62, div57);
      append_dev(div57, div54);
      append_dev(div57, t88);
      append_dev(div57, div55);
      append_dev(div57, t90);
      append_dev(div57, div56);
      append_dev(div62, t92);
      append_dev(div62, div61);
      append_dev(div61, div58);
      append_dev(div58, t93);
      append_dev(div61, t94);
      append_dev(div61, div59);
      append_dev(div61, t96);
      append_dev(div61, div60);
      append_dev(div73, t98);
      append_dev(div73, h4);
      append_dev(div73, t100);
      append_dev(div73, div72);
      append_dev(div72, div65);
      append_dev(div65, div63);
      append_dev(div63, t101);
      append_dev(div65, t102);
      append_dev(div65, div64);
      append_dev(div72, t104);
      append_dev(div72, div68);
      append_dev(div68, div66);
      append_dev(div68, t106);
      append_dev(div68, div67);
      append_dev(div72, t108);
      append_dev(div72, div71);
      append_dev(div71, div69);
      append_dev(div69, t109);
      append_dev(div71, t110);
      append_dev(div71, div70);
      append_dev(div77, t112);
      append_dev(div77, div74);
      append_dev(div74, h37);
      append_dev(div74, t114);
      if_block4.m(div74, null);
      append_dev(div77, t115);
      append_dev(div77, div75);
      append_dev(div75, h38);
      append_dev(div75, t117);
      if_block5.m(div75, null);
      append_dev(div77, t118);
      append_dev(div77, div76);
      append_dev(div76, h39);
      append_dev(div76, t120);
      append_dev(div76, p);
      append_dev(div76, t122);
      mount_component(reviewheatmap, div76, null);
      insert_dev(target, t123, anchor);
      insert_dev(target, div78, anchor);
      append_dev(div78, a);
      append_dev(a, img);
      append_dev(div78, t124);
      append_dev(div78, button);
      current = true;
      if (!mounted) {
        dispose = [
          listen_dev(
            button,
            "click",
            /*click_handler_1*/
            ctx[25],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button,
            "touchend",
            /*touchend_handler_1*/
            ctx[26],
            false,
            false,
            false,
            false
          )
        ];
        mounted = true;
      }
    },
    p: function update2(ctx2, dirty) {
      var _a2, _b2, _c2, _d2, _e2, _f2, _g2, _h2, _i2, _j2, _k2, _l2, _m2, _n2, _o2, _p2, _q2, _r2, _s2;
      if ((!current || dirty[0] & /*statistics*/
      4) && t4_value !== (t4_value = /*statistics*/
      (((_b2 = (_a2 = ctx2[2]) == null ? void 0 : _a2.cardStats) == null ? void 0 : _b2.new) || 0) + ""))
        set_data_dev(t4, t4_value);
      if ((!current || dirty[0] & /*statistics*/
      4) && t12_value !== (t12_value = /*statistics*/
      (((_d2 = (_c2 = ctx2[2]) == null ? void 0 : _c2.cardStats) == null ? void 0 : _d2.review) || 0) + ""))
        set_data_dev(t12, t12_value);
      if ((!current || dirty[0] & /*statistics*/
      4) && t16_value !== (t16_value = /*statistics*/
      (((_f2 = (_e2 = ctx2[2]) == null ? void 0 : _e2.cardStats) == null ? void 0 : _f2.mature) || 0) + ""))
        set_data_dev(t16, t16_value);
      if ((!current || dirty[0] & /*statistics*/
      4) && t26_value !== (t26_value = /*statistics*/
      (((_g2 = ctx2[2]) == null ? void 0 : _g2.averagePace) ? formatPace(
        /*statistics*/
        ctx2[2].averagePace
      ) : "N/A") + ""))
        set_data_dev(t26, t26_value);
      if ((!current || dirty[0] & /*statistics*/
      4) && t30_value !== (t30_value = /*statistics*/
      (((_h2 = ctx2[2]) == null ? void 0 : _h2.totalReviewTime) ? formatTime2(
        /*statistics*/
        ctx2[2].totalReviewTime
      ) : "N/A") + ""))
        set_data_dev(t30, t30_value);
      if (current_block_type === (current_block_type = select_block_type_1(ctx2, dirty)) && if_block0) {
        if_block0.p(ctx2, dirty);
      } else {
        if_block0.d(1);
        if_block0 = current_block_type(ctx2);
        if (if_block0) {
          if_block0.c();
          if_block0.m(div28, null);
        }
      }
      if (current_block_type_1 === (current_block_type_1 = select_block_type_2(ctx2, dirty)) && if_block1) {
        if_block1.p(ctx2, dirty);
      } else {
        if_block1.d(1);
        if_block1 = current_block_type_1(ctx2);
        if (if_block1) {
          if_block1.c();
          if_block1.m(div29, t39);
        }
      }
      if (current_block_type_2 === (current_block_type_2 = select_block_type_3(ctx2, dirty)) && if_block2) {
        if_block2.p(ctx2, dirty);
      } else {
        if_block2.d(1);
        if_block2 = current_block_type_2(ctx2);
        if (if_block2) {
          if_block2.c();
          if_block2.m(div29, t42);
        }
      }
      if (current_block_type_3 === (current_block_type_3 = select_block_type_4(ctx2, dirty)) && if_block3) {
        if_block3.p(ctx2, dirty);
      } else {
        if_block3.d(1);
        if_block3 = current_block_type_3(ctx2);
        if (if_block3) {
          if_block3.c();
          if_block3.m(div29, null);
        }
      }
      if ((!current || dirty[0] & /*statistics*/
      4) && t48_value !== (t48_value = /*statistics*/
      (((_i2 = ctx2[2]) == null ? void 0 : _i2.retentionRate) || 0).toFixed(1) + ""))
        set_data_dev(t48, t48_value);
      if ((!current || dirty[0] & /*statistics*/
      4) && t93_value !== (t93_value = /*statistics*/
      (((_k2 = (_j2 = ctx2[2]) == null ? void 0 : _j2.cardStats) == null ? void 0 : _k2.new) || 0) + /*statistics*/
      (((_m2 = (_l2 = ctx2[2]) == null ? void 0 : _l2.cardStats) == null ? void 0 : _m2.review) || 0) + /*statistics*/
      (((_o2 = (_n2 = ctx2[2]) == null ? void 0 : _n2.cardStats) == null ? void 0 : _o2.mature) || 0) + ""))
        set_data_dev(t93, t93_value);
      if ((!current || dirty[0] & /*statistics*/
      4) && t101_value !== (t101_value = /*statistics*/
      (((_q2 = (_p2 = ctx2[2]) == null ? void 0 : _p2.cardStats) == null ? void 0 : _q2.new) || 0) + ""))
        set_data_dev(t101, t101_value);
      if ((!current || dirty[0] & /*statistics*/
      4) && t109_value !== (t109_value = /*statistics*/
      (((_s2 = (_r2 = ctx2[2]) == null ? void 0 : _r2.cardStats) == null ? void 0 : _s2.mature) || 0) + ""))
        set_data_dev(t109, t109_value);
      if (current_block_type_4 === (current_block_type_4 = select_block_type_5(ctx2, dirty)) && if_block4) {
        if_block4.p(ctx2, dirty);
      } else {
        if_block4.d(1);
        if_block4 = current_block_type_4(ctx2);
        if (if_block4) {
          if_block4.c();
          if_block4.m(div74, null);
        }
      }
      if (current_block_type_5 === (current_block_type_5 = select_block_type_6(ctx2, dirty)) && if_block5) {
        if_block5.p(select_block_ctx(ctx2, current_block_type_5), dirty);
      } else {
        if_block5.d(1);
        if_block5 = current_block_type_5(select_block_ctx(ctx2, current_block_type_5));
        if (if_block5) {
          if_block5.c();
          if_block5.m(div75, null);
        }
      }
      const reviewheatmap_changes = {};
      if (dirty[0] & /*db*/
      1)
        reviewheatmap_changes.getReviewCounts = /*func_3*/
        ctx2[23];
      reviewheatmap.$set(reviewheatmap_changes);
    },
    i: function intro(local) {
      if (current)
        return;
      transition_in(reviewheatmap.$$.fragment, local);
      current = true;
    },
    o: function outro(local) {
      transition_out(reviewheatmap.$$.fragment, local);
      current = false;
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div2);
      ctx[21](null);
      ctx[22](null);
      if (detaching)
        detach_dev(t1);
      if (detaching)
        detach_dev(div77);
      if_block0.d();
      if_block1.d();
      if_block2.d();
      if_block3.d();
      if_block4.d();
      if_block5.d();
      ctx[24](null);
      destroy_component(reviewheatmap);
      if (detaching)
        detach_dev(t123);
      if (detaching)
        detach_dev(div78);
      mounted = false;
      run_all(dispose);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_else_block3.name,
    type: "else",
    source: "(292:4) {:else}",
    ctx
  });
  return block;
}
function create_if_block_22(ctx) {
  let div;
  let p;
  let t1;
  let button;
  let mounted;
  let dispose;
  const block = {
    c: function create() {
      div = element("div");
      p = element("p");
      p.textContent = "Failed to load statistics";
      t1 = space();
      button = element("button");
      button.textContent = "Retry";
      add_location(p, file3, 282, 12, 10093);
      attr_dev(button, "class", "decks-retry-button svelte-1lz95jp");
      add_location(button, file3, 283, 12, 10138);
      attr_dev(div, "class", "decks-error svelte-1lz95jp");
      add_location(div, file3, 281, 8, 10055);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, p);
      append_dev(div, t1);
      append_dev(div, button);
      if (!mounted) {
        dispose = [
          listen_dev(
            button,
            "click",
            /*click_handler*/
            ctx[19],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button,
            "touchend",
            /*touchend_handler*/
            ctx[20],
            false,
            false,
            false,
            false
          )
        ];
        mounted = true;
      }
    },
    p: noop,
    i: noop,
    o: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
      mounted = false;
      run_all(dispose);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_22.name,
    type: "if",
    source: "(281:26) ",
    ctx
  });
  return block;
}
function create_if_block_13(ctx) {
  let div;
  const block = {
    c: function create() {
      div = element("div");
      div.textContent = "Loading statistics...";
      attr_dev(div, "class", "decks-loading svelte-1lz95jp");
      add_location(div, file3, 279, 8, 9965);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
    },
    p: noop,
    i: noop,
    o: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_13.name,
    type: "if",
    source: "(279:4) {#if loading}",
    ctx
  });
  return block;
}
function create_else_block_6(ctx) {
  let div;
  let p0;
  let t1;
  let p1;
  const block = {
    c: function create() {
      div = element("div");
      p0 = element("p");
      p0.textContent = "No reviews today yet.";
      t1 = space();
      p1 = element("p");
      p1.textContent = "Start reviewing flashcards to see your daily\n                            statistics here!";
      attr_dev(p0, "class", "svelte-1lz95jp");
      add_location(p0, file3, 398, 24, 15295);
      attr_dev(p1, "class", "decks-help-text svelte-1lz95jp");
      add_location(p1, file3, 399, 24, 15348);
      attr_dev(div, "class", "decks-no-data-message svelte-1lz95jp");
      add_location(div, file3, 397, 20, 15235);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, p0);
      append_dev(div, t1);
      append_dev(div, p1);
    },
    p: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_else_block_6.name,
    type: "else",
    source: "(397:16) {:else}",
    ctx
  });
  return block;
}
function create_if_block_8(ctx) {
  let div6;
  let div2;
  let div0;
  let t0_value = (
    /*todayStats*/
    ctx[6].reviews + ""
  );
  let t0;
  let t1;
  let div1;
  let t3;
  let div5;
  let div3;
  let t4_value = formatTime2(
    /*todayStats*/
    ctx[6].timeSpent
  ) + "";
  let t4;
  let t5;
  let div4;
  let t7;
  let h4;
  let t9;
  let div16;
  let div9;
  let div7;
  let t10_value = (
    /*todayStats*/
    ctx[6].newCards + ""
  );
  let t10;
  let t11;
  let div8;
  let t13;
  let div12;
  let div10;
  let t15;
  let div11;
  let t17;
  let div15;
  let div13;
  let t18_value = (
    /*todayStats*/
    ctx[6].reviewCards + ""
  );
  let t18;
  let t19;
  let div14;
  const block = {
    c: function create() {
      div6 = element("div");
      div2 = element("div");
      div0 = element("div");
      t0 = text(t0_value);
      t1 = space();
      div1 = element("div");
      div1.textContent = "Cards Studied";
      t3 = space();
      div5 = element("div");
      div3 = element("div");
      t4 = text(t4_value);
      t5 = space();
      div4 = element("div");
      div4.textContent = "Time Spent";
      t7 = space();
      h4 = element("h4");
      h4.textContent = "Breakdown by Card Type";
      t9 = space();
      div16 = element("div");
      div9 = element("div");
      div7 = element("div");
      t10 = text(t10_value);
      t11 = space();
      div8 = element("div");
      div8.textContent = "New Cards";
      t13 = space();
      div12 = element("div");
      div10 = element("div");
      div10.textContent = "0";
      t15 = space();
      div11 = element("div");
      div11.textContent = "Learning";
      t17 = space();
      div15 = element("div");
      div13 = element("div");
      t18 = text(t18_value);
      t19 = space();
      div14 = element("div");
      div14.textContent = "Review";
      attr_dev(div0, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div0, file3, 364, 28, 13623);
      attr_dev(div1, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div1, file3, 367, 28, 13770);
      attr_dev(div2, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div2, file3, 363, 24, 13565);
      attr_dev(div3, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div3, file3, 370, 28, 13933);
      attr_dev(div4, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div4, file3, 373, 28, 14094);
      attr_dev(div5, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div5, file3, 369, 24, 13875);
      attr_dev(div6, "class", "decks-stats-grid svelte-1lz95jp");
      add_location(div6, file3, 362, 20, 13510);
      attr_dev(h4, "class", "svelte-1lz95jp");
      add_location(h4, file3, 377, 20, 14220);
      attr_dev(div7, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div7, file3, 380, 28, 14385);
      attr_dev(div8, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div8, file3, 383, 28, 14533);
      attr_dev(div9, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div9, file3, 379, 24, 14327);
      attr_dev(div10, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div10, file3, 386, 28, 14715);
      attr_dev(div11, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div11, file3, 387, 28, 14781);
      attr_dev(div12, "class", "decks-stat-card svelte-1lz95jp");
      set_style(div12, "display", "none");
      add_location(div12, file3, 385, 24, 14634);
      attr_dev(div13, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div13, file3, 390, 28, 14939);
      attr_dev(div14, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div14, file3, 393, 28, 15090);
      attr_dev(div15, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div15, file3, 389, 24, 14881);
      attr_dev(div16, "class", "decks-stats-grid svelte-1lz95jp");
      add_location(div16, file3, 378, 20, 14272);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div6, anchor);
      append_dev(div6, div2);
      append_dev(div2, div0);
      append_dev(div0, t0);
      append_dev(div2, t1);
      append_dev(div2, div1);
      append_dev(div6, t3);
      append_dev(div6, div5);
      append_dev(div5, div3);
      append_dev(div3, t4);
      append_dev(div5, t5);
      append_dev(div5, div4);
      insert_dev(target, t7, anchor);
      insert_dev(target, h4, anchor);
      insert_dev(target, t9, anchor);
      insert_dev(target, div16, anchor);
      append_dev(div16, div9);
      append_dev(div9, div7);
      append_dev(div7, t10);
      append_dev(div9, t11);
      append_dev(div9, div8);
      append_dev(div16, t13);
      append_dev(div16, div12);
      append_dev(div12, div10);
      append_dev(div12, t15);
      append_dev(div12, div11);
      append_dev(div16, t17);
      append_dev(div16, div15);
      append_dev(div15, div13);
      append_dev(div13, t18);
      append_dev(div15, t19);
      append_dev(div15, div14);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*todayStats*/
      64 && t0_value !== (t0_value = /*todayStats*/
      ctx2[6].reviews + ""))
        set_data_dev(t0, t0_value);
      if (dirty[0] & /*todayStats*/
      64 && t4_value !== (t4_value = formatTime2(
        /*todayStats*/
        ctx2[6].timeSpent
      ) + ""))
        set_data_dev(t4, t4_value);
      if (dirty[0] & /*todayStats*/
      64 && t10_value !== (t10_value = /*todayStats*/
      ctx2[6].newCards + ""))
        set_data_dev(t10, t10_value);
      if (dirty[0] & /*todayStats*/
      64 && t18_value !== (t18_value = /*todayStats*/
      ctx2[6].reviewCards + ""))
        set_data_dev(t18, t18_value);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div6);
      if (detaching)
        detach_dev(t7);
      if (detaching)
        detach_dev(h4);
      if (detaching)
        detach_dev(t9);
      if (detaching)
        detach_dev(div16);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_8.name,
    type: "if",
    source: "(362:16) {#if todayStats}",
    ctx
  });
  return block;
}
function create_else_block_5(ctx) {
  let div;
  let p;
  const block = {
    c: function create() {
      div = element("div");
      p = element("p");
      p.textContent = "No reviews this week yet.";
      attr_dev(p, "class", "svelte-1lz95jp");
      add_location(p, file3, 433, 24, 16913);
      attr_dev(div, "class", "decks-no-data-message svelte-1lz95jp");
      add_location(div, file3, 432, 20, 16853);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, p);
    },
    p: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_else_block_5.name,
    type: "else",
    source: "(432:16) {:else}",
    ctx
  });
  return block;
}
function create_if_block_7(ctx) {
  let div9;
  let div2;
  let div0;
  let t0_value = (
    /*weekStats*/
    ctx[7].reviews + ""
  );
  let t0;
  let t1;
  let div1;
  let t3;
  let div5;
  let div3;
  let t4_value = formatTime2(
    /*weekStats*/
    ctx[7].timeSpent
  ) + "";
  let t4;
  let t5;
  let div4;
  let t7;
  let div8;
  let div6;
  let t8_value = (
    /*weekStats*/
    ctx[7].correctRate.toFixed(1) + ""
  );
  let t8;
  let t9;
  let t10;
  let div7;
  const block = {
    c: function create() {
      div9 = element("div");
      div2 = element("div");
      div0 = element("div");
      t0 = text(t0_value);
      t1 = space();
      div1 = element("div");
      div1.textContent = "Cards Studied";
      t3 = space();
      div5 = element("div");
      div3 = element("div");
      t4 = text(t4_value);
      t5 = space();
      div4 = element("div");
      div4.textContent = "Time Spent";
      t7 = space();
      div8 = element("div");
      div6 = element("div");
      t8 = text(t8_value);
      t9 = text("%");
      t10 = space();
      div7 = element("div");
      div7.textContent = "Success Rate";
      attr_dev(div0, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div0, file3, 413, 28, 15911);
      attr_dev(div1, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div1, file3, 416, 28, 16057);
      attr_dev(div2, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div2, file3, 412, 24, 15853);
      attr_dev(div3, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div3, file3, 419, 28, 16220);
      attr_dev(div4, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div4, file3, 422, 28, 16380);
      attr_dev(div5, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div5, file3, 418, 24, 16162);
      attr_dev(div6, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div6, file3, 425, 28, 16540);
      attr_dev(div7, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div7, file3, 428, 28, 16702);
      attr_dev(div8, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div8, file3, 424, 24, 16482);
      attr_dev(div9, "class", "decks-stats-grid svelte-1lz95jp");
      add_location(div9, file3, 411, 20, 15798);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div9, anchor);
      append_dev(div9, div2);
      append_dev(div2, div0);
      append_dev(div0, t0);
      append_dev(div2, t1);
      append_dev(div2, div1);
      append_dev(div9, t3);
      append_dev(div9, div5);
      append_dev(div5, div3);
      append_dev(div3, t4);
      append_dev(div5, t5);
      append_dev(div5, div4);
      append_dev(div9, t7);
      append_dev(div9, div8);
      append_dev(div8, div6);
      append_dev(div6, t8);
      append_dev(div6, t9);
      append_dev(div8, t10);
      append_dev(div8, div7);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*weekStats*/
      128 && t0_value !== (t0_value = /*weekStats*/
      ctx2[7].reviews + ""))
        set_data_dev(t0, t0_value);
      if (dirty[0] & /*weekStats*/
      128 && t4_value !== (t4_value = formatTime2(
        /*weekStats*/
        ctx2[7].timeSpent
      ) + ""))
        set_data_dev(t4, t4_value);
      if (dirty[0] & /*weekStats*/
      128 && t8_value !== (t8_value = /*weekStats*/
      ctx2[7].correctRate.toFixed(1) + ""))
        set_data_dev(t8, t8_value);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div9);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_7.name,
    type: "if",
    source: "(411:16) {#if weekStats && weekStats.reviews > 0}",
    ctx
  });
  return block;
}
function create_else_block_4(ctx) {
  let div;
  let p;
  const block = {
    c: function create() {
      div = element("div");
      p = element("p");
      p.textContent = "No reviews this month yet.";
      attr_dev(p, "class", "svelte-1lz95jp");
      add_location(p, file3, 461, 24, 18229);
      attr_dev(div, "class", "decks-no-data-message svelte-1lz95jp");
      add_location(div, file3, 460, 20, 18169);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, p);
    },
    p: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_else_block_4.name,
    type: "else",
    source: "(460:16) {:else}",
    ctx
  });
  return block;
}
function create_if_block_6(ctx) {
  let div9;
  let div2;
  let div0;
  let t0_value = (
    /*monthStats*/
    ctx[8].reviews + ""
  );
  let t0;
  let t1;
  let div1;
  let t3;
  let div5;
  let div3;
  let t4_value = formatTime2(
    /*monthStats*/
    ctx[8].timeSpent
  ) + "";
  let t4;
  let t5;
  let div4;
  let t7;
  let div8;
  let div6;
  let t8_value = (
    /*monthStats*/
    ctx[8].correctRate.toFixed(1) + ""
  );
  let t8;
  let t9;
  let t10;
  let div7;
  const block = {
    c: function create() {
      div9 = element("div");
      div2 = element("div");
      div0 = element("div");
      t0 = text(t0_value);
      t1 = space();
      div1 = element("div");
      div1.textContent = "Cards Studied";
      t3 = space();
      div5 = element("div");
      div3 = element("div");
      t4 = text(t4_value);
      t5 = space();
      div4 = element("div");
      div4.textContent = "Time Spent";
      t7 = space();
      div8 = element("div");
      div6 = element("div");
      t8 = text(t8_value);
      t9 = text("%");
      t10 = space();
      div7 = element("div");
      div7.textContent = "Success Rate";
      attr_dev(div0, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div0, file3, 441, 28, 17224);
      attr_dev(div1, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div1, file3, 444, 28, 17371);
      attr_dev(div2, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div2, file3, 440, 24, 17166);
      attr_dev(div3, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div3, file3, 447, 28, 17534);
      attr_dev(div4, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div4, file3, 450, 28, 17695);
      attr_dev(div5, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div5, file3, 446, 24, 17476);
      attr_dev(div6, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div6, file3, 453, 28, 17855);
      attr_dev(div7, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div7, file3, 456, 28, 18018);
      attr_dev(div8, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div8, file3, 452, 24, 17797);
      attr_dev(div9, "class", "decks-stats-grid svelte-1lz95jp");
      add_location(div9, file3, 439, 20, 17111);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div9, anchor);
      append_dev(div9, div2);
      append_dev(div2, div0);
      append_dev(div0, t0);
      append_dev(div2, t1);
      append_dev(div2, div1);
      append_dev(div9, t3);
      append_dev(div9, div5);
      append_dev(div5, div3);
      append_dev(div3, t4);
      append_dev(div5, t5);
      append_dev(div5, div4);
      append_dev(div9, t7);
      append_dev(div9, div8);
      append_dev(div8, div6);
      append_dev(div6, t8);
      append_dev(div6, t9);
      append_dev(div8, t10);
      append_dev(div8, div7);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*monthStats*/
      256 && t0_value !== (t0_value = /*monthStats*/
      ctx2[8].reviews + ""))
        set_data_dev(t0, t0_value);
      if (dirty[0] & /*monthStats*/
      256 && t4_value !== (t4_value = formatTime2(
        /*monthStats*/
        ctx2[8].timeSpent
      ) + ""))
        set_data_dev(t4, t4_value);
      if (dirty[0] & /*monthStats*/
      256 && t8_value !== (t8_value = /*monthStats*/
      ctx2[8].correctRate.toFixed(1) + ""))
        set_data_dev(t8, t8_value);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div9);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_6.name,
    type: "if",
    source: "(439:16) {#if monthStats && monthStats.reviews > 0}",
    ctx
  });
  return block;
}
function create_else_block_3(ctx) {
  let div;
  let p;
  const block = {
    c: function create() {
      div = element("div");
      p = element("p");
      p.textContent = "No reviews this year yet.";
      attr_dev(p, "class", "svelte-1lz95jp");
      add_location(p, file3, 489, 24, 19540);
      attr_dev(div, "class", "decks-no-data-message svelte-1lz95jp");
      add_location(div, file3, 488, 20, 19480);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, p);
    },
    p: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_else_block_3.name,
    type: "else",
    source: "(488:16) {:else}",
    ctx
  });
  return block;
}
function create_if_block_5(ctx) {
  let div9;
  let div2;
  let div0;
  let t0_value = (
    /*yearStats*/
    ctx[9].reviews + ""
  );
  let t0;
  let t1;
  let div1;
  let t3;
  let div5;
  let div3;
  let t4_value = formatTime2(
    /*yearStats*/
    ctx[9].timeSpent
  ) + "";
  let t4;
  let t5;
  let div4;
  let t7;
  let div8;
  let div6;
  let t8_value = (
    /*yearStats*/
    ctx[9].correctRate.toFixed(1) + ""
  );
  let t8;
  let t9;
  let t10;
  let div7;
  const block = {
    c: function create() {
      div9 = element("div");
      div2 = element("div");
      div0 = element("div");
      t0 = text(t0_value);
      t1 = space();
      div1 = element("div");
      div1.textContent = "Cards Studied";
      t3 = space();
      div5 = element("div");
      div3 = element("div");
      t4 = text(t4_value);
      t5 = space();
      div4 = element("div");
      div4.textContent = "Time Spent";
      t7 = space();
      div8 = element("div");
      div6 = element("div");
      t8 = text(t8_value);
      t9 = text("%");
      t10 = space();
      div7 = element("div");
      div7.textContent = "Success Rate";
      attr_dev(div0, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div0, file3, 469, 28, 18538);
      attr_dev(div1, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div1, file3, 472, 28, 18684);
      attr_dev(div2, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div2, file3, 468, 24, 18480);
      attr_dev(div3, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div3, file3, 475, 28, 18847);
      attr_dev(div4, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div4, file3, 478, 28, 19007);
      attr_dev(div5, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div5, file3, 474, 24, 18789);
      attr_dev(div6, "class", "decks-stat-value svelte-1lz95jp");
      add_location(div6, file3, 481, 28, 19167);
      attr_dev(div7, "class", "decks-stat-label svelte-1lz95jp");
      add_location(div7, file3, 484, 28, 19329);
      attr_dev(div8, "class", "decks-stat-card svelte-1lz95jp");
      add_location(div8, file3, 480, 24, 19109);
      attr_dev(div9, "class", "decks-stats-grid svelte-1lz95jp");
      add_location(div9, file3, 467, 20, 18425);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div9, anchor);
      append_dev(div9, div2);
      append_dev(div2, div0);
      append_dev(div0, t0);
      append_dev(div2, t1);
      append_dev(div2, div1);
      append_dev(div9, t3);
      append_dev(div9, div5);
      append_dev(div5, div3);
      append_dev(div3, t4);
      append_dev(div5, t5);
      append_dev(div5, div4);
      append_dev(div9, t7);
      append_dev(div9, div8);
      append_dev(div8, div6);
      append_dev(div6, t8);
      append_dev(div6, t9);
      append_dev(div8, t10);
      append_dev(div8, div7);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*yearStats*/
      512 && t0_value !== (t0_value = /*yearStats*/
      ctx2[9].reviews + ""))
        set_data_dev(t0, t0_value);
      if (dirty[0] & /*yearStats*/
      512 && t4_value !== (t4_value = formatTime2(
        /*yearStats*/
        ctx2[9].timeSpent
      ) + ""))
        set_data_dev(t4, t4_value);
      if (dirty[0] & /*yearStats*/
      512 && t8_value !== (t8_value = /*yearStats*/
      ctx2[9].correctRate.toFixed(1) + ""))
        set_data_dev(t8, t8_value);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div9);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_5.name,
    type: "if",
    source: "(467:16) {#if yearStats && yearStats.reviews > 0}",
    ctx
  });
  return block;
}
function create_else_block_2(ctx) {
  let div;
  let p0;
  let t1;
  let p1;
  const block = {
    c: function create() {
      div = element("div");
      p0 = element("p");
      p0.textContent = "No answer button data available yet.";
      t1 = space();
      p1 = element("p");
      p1.textContent = "Complete some reviews to see answer button\n                            statistics.";
      attr_dev(p0, "class", "svelte-1lz95jp");
      add_location(p0, file3, 672, 24, 28993);
      attr_dev(p1, "class", "decks-help-text svelte-1lz95jp");
      add_location(p1, file3, 673, 24, 29061);
      attr_dev(div, "class", "decks-no-data-message svelte-1lz95jp");
      add_location(div, file3, 671, 20, 28933);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, p0);
      append_dev(div, t1);
      append_dev(div, p1);
    },
    p: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_else_block_2.name,
    type: "else",
    source: "(671:16) {:else}",
    ctx
  });
  return block;
}
function create_if_block_4(ctx) {
  let div16;
  let div3;
  let div0;
  let t1;
  let div1;
  let t2_value = (
    /*statistics*/
    ctx[2].answerButtons.again + ""
  );
  let t2;
  let t3;
  let div2;
  let t4_value = (
    /*statistics*/
    (ctx[2].answerButtons.again / /*statistics*/
    (ctx[2].answerButtons.again + /*statistics*/
    ctx[2].answerButtons.hard + /*statistics*/
    ctx[2].answerButtons.good + /*statistics*/
    ctx[2].answerButtons.easy) * 100).toFixed(1) + ""
  );
  let t4;
  let t5;
  let t6;
  let div7;
  let div4;
  let t8;
  let div5;
  let t9_value = (
    /*statistics*/
    ctx[2].answerButtons.hard + ""
  );
  let t9;
  let t10;
  let div6;
  let t11_value = (
    /*statistics*/
    (ctx[2].answerButtons.hard / /*statistics*/
    (ctx[2].answerButtons.again + /*statistics*/
    ctx[2].answerButtons.hard + /*statistics*/
    ctx[2].answerButtons.good + /*statistics*/
    ctx[2].answerButtons.easy) * 100).toFixed(1) + ""
  );
  let t11;
  let t12;
  let t13;
  let div11;
  let div8;
  let t15;
  let div9;
  let t16_value = (
    /*statistics*/
    ctx[2].answerButtons.good + ""
  );
  let t16;
  let t17;
  let div10;
  let t18_value = (
    /*statistics*/
    (ctx[2].answerButtons.good / /*statistics*/
    (ctx[2].answerButtons.again + /*statistics*/
    ctx[2].answerButtons.hard + /*statistics*/
    ctx[2].answerButtons.good + /*statistics*/
    ctx[2].answerButtons.easy) * 100).toFixed(1) + ""
  );
  let t18;
  let t19;
  let t20;
  let div15;
  let div12;
  let t22;
  let div13;
  let t23_value = (
    /*statistics*/
    ctx[2].answerButtons.easy + ""
  );
  let t23;
  let t24;
  let div14;
  let t25_value = (
    /*statistics*/
    (ctx[2].answerButtons.easy / /*statistics*/
    (ctx[2].answerButtons.again + /*statistics*/
    ctx[2].answerButtons.hard + /*statistics*/
    ctx[2].answerButtons.good + /*statistics*/
    ctx[2].answerButtons.easy) * 100).toFixed(1) + ""
  );
  let t25;
  let t26;
  const block = {
    c: function create() {
      div16 = element("div");
      div3 = element("div");
      div0 = element("div");
      div0.textContent = "Again";
      t1 = space();
      div1 = element("div");
      t2 = text(t2_value);
      t3 = space();
      div2 = element("div");
      t4 = text(t4_value);
      t5 = text("%");
      t6 = space();
      div7 = element("div");
      div4 = element("div");
      div4.textContent = "Hard";
      t8 = space();
      div5 = element("div");
      t9 = text(t9_value);
      t10 = space();
      div6 = element("div");
      t11 = text(t11_value);
      t12 = text("%");
      t13 = space();
      div11 = element("div");
      div8 = element("div");
      div8.textContent = "Good";
      t15 = space();
      div9 = element("div");
      t16 = text(t16_value);
      t17 = space();
      div10 = element("div");
      t18 = text(t18_value);
      t19 = text("%");
      t20 = space();
      div15 = element("div");
      div12 = element("div");
      div12.textContent = "Easy";
      t22 = space();
      div13 = element("div");
      t23 = text(t23_value);
      t24 = space();
      div14 = element("div");
      t25 = text(t25_value);
      t26 = text("%");
      attr_dev(div0, "class", "decks-button-label svelte-1lz95jp");
      add_location(div0, file3, 606, 28, 25257);
      attr_dev(div1, "class", "decks-button-count svelte-1lz95jp");
      add_location(div1, file3, 607, 28, 25329);
      attr_dev(div2, "class", "decks-button-percentage svelte-1lz95jp");
      add_location(div2, file3, 610, 28, 25490);
      attr_dev(div3, "class", "decks-button-bar decks-again svelte-1lz95jp");
      add_location(div3, file3, 605, 24, 25186);
      attr_dev(div4, "class", "decks-button-label svelte-1lz95jp");
      add_location(div4, file3, 622, 28, 26184);
      attr_dev(div5, "class", "decks-button-count svelte-1lz95jp");
      add_location(div5, file3, 623, 28, 26255);
      attr_dev(div6, "class", "decks-button-percentage svelte-1lz95jp");
      add_location(div6, file3, 626, 28, 26415);
      attr_dev(div7, "class", "decks-button-bar decks-hard svelte-1lz95jp");
      add_location(div7, file3, 621, 24, 26114);
      attr_dev(div8, "class", "decks-button-label svelte-1lz95jp");
      add_location(div8, file3, 638, 28, 27108);
      attr_dev(div9, "class", "decks-button-count svelte-1lz95jp");
      add_location(div9, file3, 639, 28, 27179);
      attr_dev(div10, "class", "decks-button-percentage svelte-1lz95jp");
      add_location(div10, file3, 642, 28, 27339);
      attr_dev(div11, "class", "decks-button-bar decks-good svelte-1lz95jp");
      add_location(div11, file3, 637, 24, 27038);
      attr_dev(div12, "class", "decks-button-label svelte-1lz95jp");
      add_location(div12, file3, 654, 28, 28032);
      attr_dev(div13, "class", "decks-button-count svelte-1lz95jp");
      add_location(div13, file3, 655, 28, 28103);
      attr_dev(div14, "class", "decks-button-percentage svelte-1lz95jp");
      add_location(div14, file3, 658, 28, 28263);
      attr_dev(div15, "class", "decks-button-bar decks-easy svelte-1lz95jp");
      add_location(div15, file3, 653, 24, 27962);
      attr_dev(div16, "class", "decks-button-stats svelte-1lz95jp");
      add_location(div16, file3, 604, 20, 25129);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div16, anchor);
      append_dev(div16, div3);
      append_dev(div3, div0);
      append_dev(div3, t1);
      append_dev(div3, div1);
      append_dev(div1, t2);
      append_dev(div3, t3);
      append_dev(div3, div2);
      append_dev(div2, t4);
      append_dev(div2, t5);
      append_dev(div16, t6);
      append_dev(div16, div7);
      append_dev(div7, div4);
      append_dev(div7, t8);
      append_dev(div7, div5);
      append_dev(div5, t9);
      append_dev(div7, t10);
      append_dev(div7, div6);
      append_dev(div6, t11);
      append_dev(div6, t12);
      append_dev(div16, t13);
      append_dev(div16, div11);
      append_dev(div11, div8);
      append_dev(div11, t15);
      append_dev(div11, div9);
      append_dev(div9, t16);
      append_dev(div11, t17);
      append_dev(div11, div10);
      append_dev(div10, t18);
      append_dev(div10, t19);
      append_dev(div16, t20);
      append_dev(div16, div15);
      append_dev(div15, div12);
      append_dev(div15, t22);
      append_dev(div15, div13);
      append_dev(div13, t23);
      append_dev(div15, t24);
      append_dev(div15, div14);
      append_dev(div14, t25);
      append_dev(div14, t26);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*statistics*/
      4 && t2_value !== (t2_value = /*statistics*/
      ctx2[2].answerButtons.again + ""))
        set_data_dev(t2, t2_value);
      if (dirty[0] & /*statistics*/
      4 && t4_value !== (t4_value = /*statistics*/
      (ctx2[2].answerButtons.again / /*statistics*/
      (ctx2[2].answerButtons.again + /*statistics*/
      ctx2[2].answerButtons.hard + /*statistics*/
      ctx2[2].answerButtons.good + /*statistics*/
      ctx2[2].answerButtons.easy) * 100).toFixed(1) + ""))
        set_data_dev(t4, t4_value);
      if (dirty[0] & /*statistics*/
      4 && t9_value !== (t9_value = /*statistics*/
      ctx2[2].answerButtons.hard + ""))
        set_data_dev(t9, t9_value);
      if (dirty[0] & /*statistics*/
      4 && t11_value !== (t11_value = /*statistics*/
      (ctx2[2].answerButtons.hard / /*statistics*/
      (ctx2[2].answerButtons.again + /*statistics*/
      ctx2[2].answerButtons.hard + /*statistics*/
      ctx2[2].answerButtons.good + /*statistics*/
      ctx2[2].answerButtons.easy) * 100).toFixed(1) + ""))
        set_data_dev(t11, t11_value);
      if (dirty[0] & /*statistics*/
      4 && t16_value !== (t16_value = /*statistics*/
      ctx2[2].answerButtons.good + ""))
        set_data_dev(t16, t16_value);
      if (dirty[0] & /*statistics*/
      4 && t18_value !== (t18_value = /*statistics*/
      (ctx2[2].answerButtons.good / /*statistics*/
      (ctx2[2].answerButtons.again + /*statistics*/
      ctx2[2].answerButtons.hard + /*statistics*/
      ctx2[2].answerButtons.good + /*statistics*/
      ctx2[2].answerButtons.easy) * 100).toFixed(1) + ""))
        set_data_dev(t18, t18_value);
      if (dirty[0] & /*statistics*/
      4 && t23_value !== (t23_value = /*statistics*/
      ctx2[2].answerButtons.easy + ""))
        set_data_dev(t23, t23_value);
      if (dirty[0] & /*statistics*/
      4 && t25_value !== (t25_value = /*statistics*/
      (ctx2[2].answerButtons.easy / /*statistics*/
      (ctx2[2].answerButtons.again + /*statistics*/
      ctx2[2].answerButtons.hard + /*statistics*/
      ctx2[2].answerButtons.good + /*statistics*/
      ctx2[2].answerButtons.easy) * 100).toFixed(1) + ""))
        set_data_dev(t25, t25_value);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div16);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_4.name,
    type: "if",
    source: "(604:16) {#if statistics?.answerButtons && (statistics.answerButtons.again > 0 || statistics.answerButtons.hard > 0 || statistics.answerButtons.good > 0 || statistics.answerButtons.easy > 0)}",
    ctx
  });
  return block;
}
function create_else_block_1(ctx) {
  let div;
  let p0;
  let t1;
  let p1;
  const block = {
    c: function create() {
      div = element("div");
      p0 = element("p");
      p0.textContent = "No upcoming reviews scheduled.";
      t1 = space();
      p1 = element("p");
      p1.textContent = "Add flashcards to your decks to see future review\n                            forecasts.";
      attr_dev(p0, "class", "svelte-1lz95jp");
      add_location(p0, file3, 728, 24, 31730);
      attr_dev(p1, "class", "decks-help-text svelte-1lz95jp");
      add_location(p1, file3, 729, 24, 31792);
      attr_dev(div, "class", "decks-no-data-message svelte-1lz95jp");
      add_location(div, file3, 727, 20, 31670);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, p0);
      append_dev(div, t1);
      append_dev(div, p1);
    },
    p: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_else_block_1.name,
    type: "else",
    source: "(727:16) {:else}",
    ctx
  });
  return block;
}
function create_if_block_32(ctx) {
  let div;
  let t0;
  let p;
  let each_value = (
    /*filteredForecast*/
    ctx[38]
  );
  validate_each_argument(each_value);
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block2(get_each_context2(ctx, each_value, i));
  }
  const block = {
    c: function create() {
      div = element("div");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      t0 = space();
      p = element("p");
      p.textContent = "Showing days with scheduled reviews based on FSRS\n                        intervals.";
      attr_dev(div, "class", "decks-forecast-chart svelte-1lz95jp");
      add_location(div, file3, 691, 20, 29884);
      attr_dev(p, "class", "decks-forecast-note svelte-1lz95jp");
      add_location(p, file3, 722, 20, 31460);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      for (let i = 0; i < each_blocks.length; i += 1) {
        if (each_blocks[i]) {
          each_blocks[i].m(div, null);
        }
      }
      insert_dev(target, t0, anchor);
      insert_dev(target, p, anchor);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*statistics*/
      4) {
        each_value = /*filteredForecast*/
        ctx2[38];
        validate_each_argument(each_value);
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context2(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block2(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(div, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
      destroy_each(each_blocks, detaching);
      if (detaching)
        detach_dev(t0);
      if (detaching)
        detach_dev(p);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_32.name,
    type: "if",
    source: "(685:16) {#if statistics?.forecast && statistics.forecast.length > 0 && statistics.forecast.some((day) => day.dueCount > 0)}",
    ctx
  });
  return block;
}
function create_each_block2(ctx) {
  let div3;
  let div0;
  let t0;
  let div1;
  let t1_value = (
    /*originalIndex*/
    ctx[41] + ""
  );
  let t1;
  let t2;
  let div2;
  let t3_value = (
    /*day*/
    ctx[40].dueCount + ""
  );
  let t3;
  let t4;
  let div3_title_value;
  const block = {
    c: function create() {
      div3 = element("div");
      div0 = element("div");
      t0 = space();
      div1 = element("div");
      t1 = text(t1_value);
      t2 = space();
      div2 = element("div");
      t3 = text(t3_value);
      t4 = space();
      attr_dev(div0, "class", "decks-bar svelte-1lz95jp");
      set_style(div0, "height", calculateBarHeight(
        /*day*/
        ctx[40].dueCount,
        /*maxDueCount*/
        ctx[39]
      ) + "px");
      add_location(div0, file3, 706, 32, 30721);
      attr_dev(div1, "class", "decks-bar-label svelte-1lz95jp");
      add_location(div1, file3, 713, 32, 31073);
      attr_dev(div2, "class", "decks-bar-value svelte-1lz95jp");
      add_location(div2, file3, 716, 32, 31226);
      attr_dev(div3, "class", "decks-forecast-bar svelte-1lz95jp");
      attr_dev(div3, "title", div3_title_value = /*originalIndex*/
      (ctx[41] === 0 ? "Today" : (
        /*originalIndex*/
        ctx[41] === 1 ? "Tomorrow" : `Day ${/*originalIndex*/
        ctx[41]} (in ${/*originalIndex*/
        ctx[41]} days)`
      )) + ": " + /*day*/
      ctx[40].dueCount + " card" + /*day*/
      (ctx[40].dueCount !== 1 ? "s" : "") + " due");
      add_location(div3, file3, 695, 28, 30128);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div3, anchor);
      append_dev(div3, div0);
      append_dev(div3, t0);
      append_dev(div3, div1);
      append_dev(div1, t1);
      append_dev(div3, t2);
      append_dev(div3, div2);
      append_dev(div2, t3);
      append_dev(div3, t4);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*statistics*/
      4) {
        set_style(div0, "height", calculateBarHeight(
          /*day*/
          ctx2[40].dueCount,
          /*maxDueCount*/
          ctx2[39]
        ) + "px");
      }
      if (dirty[0] & /*statistics*/
      4 && t1_value !== (t1_value = /*originalIndex*/
      ctx2[41] + ""))
        set_data_dev(t1, t1_value);
      if (dirty[0] & /*statistics*/
      4 && t3_value !== (t3_value = /*day*/
      ctx2[40].dueCount + ""))
        set_data_dev(t3, t3_value);
      if (dirty[0] & /*statistics*/
      4 && div3_title_value !== (div3_title_value = /*originalIndex*/
      (ctx2[41] === 0 ? "Today" : (
        /*originalIndex*/
        ctx2[41] === 1 ? "Tomorrow" : `Day ${/*originalIndex*/
        ctx2[41]} (in ${/*originalIndex*/
        ctx2[41]} days)`
      )) + ": " + /*day*/
      ctx2[40].dueCount + " card" + /*day*/
      (ctx2[40].dueCount !== 1 ? "s" : "") + " due")) {
        attr_dev(div3, "title", div3_title_value);
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div3);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_each_block2.name,
    type: "each",
    source: "(693:24) {#each filteredForecast as day, index}",
    ctx
  });
  return block;
}
function create_fragment3(ctx) {
  let div;
  let h2;
  let t1;
  let current_block_type_index;
  let if_block0;
  let t2;
  let if_block1_anchor;
  let current;
  const if_block_creators = [create_if_block_13, create_if_block_22, create_else_block3];
  const if_blocks = [];
  function select_block_type(ctx2, dirty) {
    if (
      /*loading*/
      ctx2[1]
    )
      return 0;
    if (!/*statistics*/
    ctx2[2])
      return 1;
    return 2;
  }
  current_block_type_index = select_block_type(ctx, [-1, -1]);
  if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
  let if_block1 = false;
  const block = {
    c: function create() {
      div = element("div");
      h2 = element("h2");
      h2.textContent = "Overrall Statistics";
      t1 = space();
      if_block0.c();
      t2 = space();
      if (if_block1)
        if_block1.c();
      if_block1_anchor = empty();
      attr_dev(h2, "class", "decks-statistics-modal-title");
      add_location(h2, file3, 277, 4, 9873);
      attr_dev(div, "class", "decks-statistics-container svelte-1lz95jp");
      add_location(div, file3, 276, 0, 9828);
    },
    l: function claim(nodes) {
      throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, h2);
      append_dev(div, t1);
      if_blocks[current_block_type_index].m(div, null);
      insert_dev(target, t2, anchor);
      if (if_block1)
        if_block1.m(target, anchor);
      insert_dev(target, if_block1_anchor, anchor);
      current = true;
    },
    p: function update2(ctx2, dirty) {
      let previous_block_index = current_block_type_index;
      current_block_type_index = select_block_type(ctx2, dirty);
      if (current_block_type_index === previous_block_index) {
        if_blocks[current_block_type_index].p(ctx2, dirty);
      } else {
        group_outros();
        transition_out(if_blocks[previous_block_index], 1, 1, () => {
          if_blocks[previous_block_index] = null;
        });
        check_outros();
        if_block0 = if_blocks[current_block_type_index];
        if (!if_block0) {
          if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
          if_block0.c();
        } else {
          if_block0.p(ctx2, dirty);
        }
        transition_in(if_block0, 1);
        if_block0.m(div, null);
      }
    },
    i: function intro(local) {
      if (current)
        return;
      transition_in(if_block0);
      current = true;
    },
    o: function outro(local) {
      transition_out(if_block0);
      current = false;
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
      if_blocks[current_block_type_index].d();
      if (detaching)
        detach_dev(t2);
      if (if_block1)
        if_block1.d(detaching);
      if (detaching)
        detach_dev(if_block1_anchor);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_fragment3.name,
    type: "component",
    source: "",
    ctx
  });
  return block;
}
function formatDate2(dateString) {
  return new Date(dateString).toLocaleDateString();
}
function formatTime2(seconds) {
  const minutes = Math.floor(seconds / 60);
  const hours = Math.floor(minutes / 60);
  if (hours > 0) {
    return `${hours}h ${minutes % 60}m`;
  }
  return `${minutes}m`;
}
function formatPace(seconds) {
  if (seconds < 60) {
    return `${seconds.toFixed(1)}s`;
  }
  const minutes = Math.floor(seconds / 60);
  const remainingSeconds = Math.round(seconds % 60);
  return `${minutes}m ${remainingSeconds}s`;
}
function calculateBarHeight(dueCount, maxDueCount) {
  const barHeight = 400;
  if (maxDueCount === 0)
    return 0;
  const proportion = dueCount / maxDueCount;
  return Math.max(proportion * barHeight - 80, 10);
}
var func2 = (day) => day.dueCount > 0;
function instance3($$self, $$props, $$invalidate) {
  let { $$slots: slots = {}, $$scope } = $$props;
  validate_slots("StatisticsUI", slots, []);
  let { db } = $$props;
  let { deckFilter = "all" } = $$props;
  const dispatch = createEventDispatcher();
  let loading = true;
  let statistics = null;
  let selectedDeckFilter = deckFilter;
  let selectedTimeframe = "12months";
  let availableDecks = [];
  let availableTags = [];
  let heatmapComponent;
  let deckFilterContainer;
  let timeframeFilterContainer;
  let lastEventTime = 0;
  let lastEventType = "";
  let todayStats = null;
  let weekStats = null;
  let monthStats = null;
  let yearStats = null;
  onMount(() => __awaiter(void 0, void 0, void 0, function* () {
    $$invalidate(1, loading = true);
    yield loadDecksAndTags();
    yield loadStatistics();
    tick().then(() => {
      mountFilterComponents();
    });
  }));
  function mountFilterComponents() {
    if (deckFilterContainer) {
      new import_obsidian5.Setting(deckFilterContainer).setName("Select Deck(s):").setClass("decks-deck-filter-container").addDropdown((dropdown) => {
        dropdown.addOption("all", "All Decks");
        availableTags.forEach((tag) => {
          dropdown.addOption(`tag:${tag}`, `Tag: ${tag}`);
        });
        availableDecks.forEach((deck) => {
          dropdown.addOption(`deck:${deck.id}`, deck.name);
        });
        dropdown.setValue(selectedDeckFilter);
        dropdown.onChange((value) => {
          selectedDeckFilter = value;
          handleFilterChange();
        });
      });
    }
    if (timeframeFilterContainer) {
      new import_obsidian5.Setting(timeframeFilterContainer).setName("Timeframe:").setClass("decks-timeframe-filter-container").addDropdown((dropdown) => dropdown.addOption("12months", "Last 12 Months").addOption("all", "All History").setValue(selectedTimeframe).onChange((value) => {
        selectedTimeframe = value;
        handleFilterChange();
      }));
    }
  }
  function loadDecksAndTags() {
    return __awaiter(this, void 0, void 0, function* () {
      try {
        availableDecks = yield db.getAllDecks();
        availableTags = [...new Set(availableDecks.map((deck) => deck.tag))];
      } catch (error) {
        console.error("Error loading decks and tags:", error);
      }
    });
  }
  function handleTouchClick(callback, event) {
    const now = Date.now();
    const eventType = event.type;
    if (now - lastEventTime < 100 && lastEventType !== eventType) {
      return;
    }
    lastEventTime = now;
    lastEventType = eventType;
    callback();
  }
  function loadStatistics() {
    return __awaiter(this, void 0, void 0, function* () {
      try {
        $$invalidate(2, statistics = yield db.getOverallStatistics(selectedDeckFilter, selectedTimeframe));
        $$invalidate(6, todayStats = getTodayStats());
        $$invalidate(7, weekStats = getTimeframeStats(7));
        $$invalidate(8, monthStats = getTimeframeStats(30));
        $$invalidate(9, yearStats = getTimeframeStats(365));
      } catch (error) {
        console.error("Error loading statistics:", error);
        $$invalidate(2, statistics = {
          dailyStats: [],
          cardStats: { new: 0, review: 0, mature: 0 },
          answerButtons: { again: 0, hard: 0, good: 0, easy: 0 },
          retentionRate: 0,
          intervals: [],
          forecast: [],
          averagePace: 0,
          totalReviewTime: 0
        });
        $$invalidate(6, todayStats = null);
        $$invalidate(7, weekStats = null);
        $$invalidate(8, monthStats = null);
        $$invalidate(9, yearStats = null);
      } finally {
        $$invalidate(1, loading = false);
      }
    });
  }
  function handleFilterChange() {
    return __awaiter(this, void 0, void 0, function* () {
      yield loadStatistics();
    });
  }
  function getTodayStats() {
    if (!(statistics === null || statistics === void 0 ? void 0 : statistics.dailyStats) || statistics.dailyStats.length === 0)
      return null;
    const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    return statistics.dailyStats.find((day) => day.date === today) || statistics.dailyStats[0] || null;
  }
  function getTimeframeStats(days) {
    if (!(statistics === null || statistics === void 0 ? void 0 : statistics.dailyStats)) {
      return {
        reviews: 0,
        timeSpent: 0,
        newCards: 0,
        learningCards: 0,
        reviewCards: 0,
        correctRate: 0
      };
    }
    const cutoffDate = /* @__PURE__ */ new Date();
    cutoffDate.setDate(cutoffDate.getDate() - days);
    const cutoffStr = cutoffDate.toISOString().split("T")[0];
    const filteredStats = statistics.dailyStats.filter((day) => day.date >= cutoffStr);
    if (filteredStats.length === 0) {
      return {
        reviews: 0,
        timeSpent: 0,
        newCards: 0,
        learningCards: 0,
        reviewCards: 0,
        correctRate: 0
      };
    }
    return filteredStats.reduce(
      (acc, day) => ({
        reviews: acc.reviews + day.reviews,
        timeSpent: acc.timeSpent + day.timeSpent,
        newCards: acc.newCards + day.newCards,
        learningCards: 0,
        // No learning cards in pure FSRS
        reviewCards: acc.reviewCards + day.reviewCards,
        correctRate: acc.reviews + day.reviews > 0 ? (acc.correctRate * acc.reviews + day.correctRate * day.reviews) / (acc.reviews + day.reviews) : 0
      }),
      {
        reviews: 0,
        timeSpent: 0,
        newCards: 0,
        learningCards: 0,
        reviewCards: 0,
        correctRate: 0
      }
    );
  }
  function calculateAverageEase() {
    if (!(statistics === null || statistics === void 0 ? void 0 : statistics.answerButtons))
      return "0.00";
    const { again, hard, good, easy } = statistics.answerButtons;
    const total = again + hard + good + easy;
    if (total === 0)
      return "0.00";
    const weightedSum = again * 1 + hard * 2 + good * 3 + easy * 4;
    return (weightedSum / total).toFixed(2);
  }
  function calculateAverageInterval() {
    if (!(statistics === null || statistics === void 0 ? void 0 : statistics.intervals) || statistics.intervals.length === 0)
      return 0;
    let totalInterval = 0;
    let totalCards = 0;
    statistics.intervals.forEach((interval) => {
      const intervalStr = interval.interval;
      let minutes = 0;
      if (intervalStr.endsWith("h")) {
        minutes = parseInt(intervalStr) * 60;
      } else if (intervalStr.endsWith("d")) {
        minutes = parseInt(intervalStr) * 1440;
      } else if (intervalStr.endsWith("m")) {
        minutes = parseInt(intervalStr) * 43200;
      }
      totalInterval += minutes * interval.count;
      totalCards += interval.count;
    });
    if (totalCards === 0)
      return 0;
    const avgMinutes = totalInterval / totalCards;
    return Math.round(avgMinutes / 1440);
  }
  function getDueToday() {
    if (!(statistics === null || statistics === void 0 ? void 0 : statistics.forecast) || statistics.forecast.length === 0)
      return 0;
    const today = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    const todayForecast = statistics.forecast.find((day) => day.date === today);
    return todayForecast ? todayForecast.dueCount : 0;
  }
  function getDueTomorrow() {
    if (!(statistics === null || statistics === void 0 ? void 0 : statistics.forecast) || statistics.forecast.length === 0)
      return 0;
    const tomorrow = /* @__PURE__ */ new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    const tomorrowStr = tomorrow.toISOString().split("T")[0];
    const tomorrowForecast = statistics.forecast.find((day) => day.date === tomorrowStr);
    return tomorrowForecast ? tomorrowForecast.dueCount : 0;
  }
  function getMaturityRatio() {
    if (!(statistics === null || statistics === void 0 ? void 0 : statistics.cardStats))
      return "0.0";
    const { new: newCards, review, mature } = statistics.cardStats;
    const total = newCards + (review || 0) + mature;
    if (total === 0)
      return "0.0";
    return (mature / total * 100).toFixed(1);
  }
  $$self.$$.on_mount.push(function() {
    if (db === void 0 && !("db" in $$props || $$self.$$.bound[$$self.$$.props["db"]])) {
      console_13.warn("<StatisticsUI> was created without expected prop 'db'");
    }
  });
  const writable_props = ["db", "deckFilter"];
  Object.keys($$props).forEach((key) => {
    if (!~writable_props.indexOf(key) && key.slice(0, 2) !== "$$" && key !== "slot")
      console_13.warn(`<StatisticsUI> was created with unknown prop '${key}'`);
  });
  const click_handler = (e) => handleTouchClick(loadStatistics, e);
  const touchend_handler = (e) => handleTouchClick(loadStatistics, e);
  function div0_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      deckFilterContainer = $$value;
      $$invalidate(4, deckFilterContainer);
    });
  }
  function div1_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      timeframeFilterContainer = $$value;
      $$invalidate(5, timeframeFilterContainer);
    });
  }
  const func_3 = async (days) => {
    return await db.getReviewCountsByDate(days);
  };
  function reviewheatmap_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      heatmapComponent = $$value;
      $$invalidate(3, heatmapComponent);
    });
  }
  const click_handler_1 = (e) => handleTouchClick(() => dispatch("close"), e);
  const touchend_handler_1 = (e) => handleTouchClick(() => dispatch("close"), e);
  $$self.$$set = ($$props2) => {
    if ("db" in $$props2)
      $$invalidate(0, db = $$props2.db);
    if ("deckFilter" in $$props2)
      $$invalidate(18, deckFilter = $$props2.deckFilter);
  };
  $$self.$capture_state = () => ({
    __awaiter,
    onMount,
    createEventDispatcher,
    tick,
    Setting: import_obsidian5.Setting,
    ReviewHeatmap: ReviewHeatmap_default,
    db,
    deckFilter,
    dispatch,
    loading,
    statistics,
    selectedDeckFilter,
    selectedTimeframe,
    availableDecks,
    availableTags,
    heatmapComponent,
    deckFilterContainer,
    timeframeFilterContainer,
    lastEventTime,
    lastEventType,
    todayStats,
    weekStats,
    monthStats,
    yearStats,
    mountFilterComponents,
    loadDecksAndTags,
    handleTouchClick,
    loadStatistics,
    handleFilterChange,
    formatDate: formatDate2,
    formatTime: formatTime2,
    formatPace,
    getTodayStats,
    getTimeframeStats,
    calculateAverageEase,
    calculateAverageInterval,
    getDueToday,
    getDueTomorrow,
    calculateBarHeight,
    getMaturityRatio
  });
  $$self.$inject_state = ($$props2) => {
    if ("db" in $$props2)
      $$invalidate(0, db = $$props2.db);
    if ("deckFilter" in $$props2)
      $$invalidate(18, deckFilter = $$props2.deckFilter);
    if ("loading" in $$props2)
      $$invalidate(1, loading = $$props2.loading);
    if ("statistics" in $$props2)
      $$invalidate(2, statistics = $$props2.statistics);
    if ("selectedDeckFilter" in $$props2)
      selectedDeckFilter = $$props2.selectedDeckFilter;
    if ("selectedTimeframe" in $$props2)
      selectedTimeframe = $$props2.selectedTimeframe;
    if ("availableDecks" in $$props2)
      availableDecks = $$props2.availableDecks;
    if ("availableTags" in $$props2)
      availableTags = $$props2.availableTags;
    if ("heatmapComponent" in $$props2)
      $$invalidate(3, heatmapComponent = $$props2.heatmapComponent);
    if ("deckFilterContainer" in $$props2)
      $$invalidate(4, deckFilterContainer = $$props2.deckFilterContainer);
    if ("timeframeFilterContainer" in $$props2)
      $$invalidate(5, timeframeFilterContainer = $$props2.timeframeFilterContainer);
    if ("lastEventTime" in $$props2)
      lastEventTime = $$props2.lastEventTime;
    if ("lastEventType" in $$props2)
      lastEventType = $$props2.lastEventType;
    if ("todayStats" in $$props2)
      $$invalidate(6, todayStats = $$props2.todayStats);
    if ("weekStats" in $$props2)
      $$invalidate(7, weekStats = $$props2.weekStats);
    if ("monthStats" in $$props2)
      $$invalidate(8, monthStats = $$props2.monthStats);
    if ("yearStats" in $$props2)
      $$invalidate(9, yearStats = $$props2.yearStats);
  };
  if ($$props && "$$inject" in $$props) {
    $$self.$inject_state($$props.$$inject);
  }
  return [
    db,
    loading,
    statistics,
    heatmapComponent,
    deckFilterContainer,
    timeframeFilterContainer,
    todayStats,
    weekStats,
    monthStats,
    yearStats,
    dispatch,
    handleTouchClick,
    loadStatistics,
    calculateAverageEase,
    calculateAverageInterval,
    getDueToday,
    getDueTomorrow,
    getMaturityRatio,
    deckFilter,
    click_handler,
    touchend_handler,
    div0_binding,
    div1_binding,
    func_3,
    reviewheatmap_binding,
    click_handler_1,
    touchend_handler_1
  ];
}
var StatisticsUI = class extends SvelteComponentDev {
  constructor(options) {
    super(options);
    init(this, options, instance3, create_fragment3, safe_not_equal, { db: 0, deckFilter: 18 }, null, [-1, -1]);
    dispatch_dev("SvelteRegisterComponent", {
      component: this,
      tagName: "StatisticsUI",
      options,
      id: create_fragment3.name
    });
  }
  get db() {
    throw new Error("<StatisticsUI>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set db(value) {
    throw new Error("<StatisticsUI>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get deckFilter() {
    throw new Error("<StatisticsUI>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set deckFilter(value) {
    throw new Error("<StatisticsUI>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
};
var StatisticsUI_default = StatisticsUI;

// src/components/StatisticsModal.ts
var StatisticsModal = class extends import_obsidian6.Modal {
  constructor(app, db, deckFilter) {
    super(app);
    this.component = null;
    this.db = db;
    this.deckFilter = deckFilter;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const modalEl = this.containerEl.querySelector(".modal");
    if (modalEl instanceof HTMLElement) {
      modalEl.addClass("decks-modal");
      if (window.innerWidth <= 768) {
        modalEl.addClass("decks-modal-mobile");
      } else {
        modalEl.removeClass("decks-modal-mobile");
      }
    }
    this.containerEl.addClass("decks-statistics-modal-container");
    contentEl.addClass("decks-statistics-modal-content");
    this.component = new StatisticsUI_default({
      target: contentEl,
      props: {
        db: this.db,
        deckFilter: this.deckFilter
      }
    });
    this.component.$on("close", () => {
      this.close();
    });
    const handleResize = () => {
      if (modalEl instanceof HTMLElement) {
        if (window.innerWidth <= 768) {
          modalEl.addClass("decks-modal-mobile");
        } else {
          modalEl.removeClass("decks-modal-mobile");
        }
      }
    };
    window.addEventListener("resize", handleResize);
    this.resizeHandler = handleResize;
  }
  onClose() {
    const { contentEl } = this;
    if (this.resizeHandler) {
      window.removeEventListener("resize", this.resizeHandler);
      this.resizeHandler = void 0;
    }
    if (this.component) {
      this.component.$destroy();
      this.component = null;
    }
    contentEl.empty();
  }
};

// src/components/DeckConfigModal.ts
var import_obsidian8 = require("obsidian");

// src/components/DeckConfigUI.svelte
var import_obsidian7 = require("obsidian");
var file4 = "src/components/DeckConfigUI.svelte";
function create_fragment4(ctx) {
  let div17;
  let h2;
  let t0;
  let t1_value = (
    /*deck*/
    ctx[0].name + ""
  );
  let t1;
  let t2;
  let div0;
  let h30;
  let t4;
  let ul;
  let li0;
  let strong0;
  let t6;
  let t7_value = (
    /*deck*/
    ctx[0].name + ""
  );
  let t7;
  let t8;
  let li1;
  let strong1;
  let t10;
  let t11_value = (
    /*deck*/
    ctx[0].tag + ""
  );
  let t11;
  let t12;
  let li2;
  let strong2;
  let t14;
  let t15_value = (
    /*deck*/
    ctx[0].filepath + ""
  );
  let t15;
  let t16;
  let div7;
  let h31;
  let t18;
  let div1;
  let t20;
  let div2;
  let t21;
  let div3;
  let t22;
  let div4;
  let t23;
  let div5;
  let t24;
  let div6;
  let t25;
  let div10;
  let h32;
  let t27;
  let div8;
  let t29;
  let div9;
  let t30;
  let div15;
  let h33;
  let t32;
  let div11;
  let t34;
  let div12;
  let t35;
  let div13;
  let t36;
  let div14;
  let t37;
  let div16;
  let button0;
  let t38_value = (
    /*saving*/
    ctx[3] ? "Saving..." : "Save"
  );
  let t38;
  let t39;
  let button1;
  let t40;
  let mounted;
  let dispose;
  const block = {
    c: function create() {
      div17 = element("div");
      h2 = element("h2");
      t0 = text("Configure Deck: ");
      t1 = text(t1_value);
      t2 = space();
      div0 = element("div");
      h30 = element("h3");
      h30.textContent = "Deck Information";
      t4 = space();
      ul = element("ul");
      li0 = element("li");
      strong0 = element("strong");
      strong0.textContent = "Name:";
      t6 = space();
      t7 = text(t7_value);
      t8 = space();
      li1 = element("li");
      strong1 = element("strong");
      strong1.textContent = "Tag:";
      t10 = space();
      t11 = text(t11_value);
      t12 = space();
      li2 = element("li");
      strong2 = element("strong");
      strong2.textContent = "File:";
      t14 = space();
      t15 = text(t15_value);
      t16 = space();
      div7 = element("div");
      h31 = element("h3");
      h31.textContent = "Daily Card Limits";
      t18 = space();
      div1 = element("div");
      div1.textContent = "New cards are subject to daily limits when enabled.";
      t20 = space();
      div2 = element("div");
      t21 = space();
      div3 = element("div");
      t22 = space();
      div4 = element("div");
      t23 = space();
      div5 = element("div");
      t24 = space();
      div6 = element("div");
      t25 = space();
      div10 = element("div");
      h32 = element("h3");
      h32.textContent = "Parsing Settings";
      t27 = space();
      div8 = element("div");
      div8.textContent = "Configure how flashcards are parsed from your notes for this deck.";
      t29 = space();
      div9 = element("div");
      t30 = space();
      div15 = element("div");
      h33 = element("h3");
      h33.textContent = "FSRS Algorithm Settings";
      t32 = space();
      div11 = element("div");
      div11.textContent = "These settings control the spaced repetition algorithm for this\n            deck.";
      t34 = space();
      div12 = element("div");
      t35 = space();
      div13 = element("div");
      t36 = space();
      div14 = element("div");
      t37 = space();
      div16 = element("div");
      button0 = element("button");
      t38 = text(t38_value);
      t39 = space();
      button1 = element("button");
      t40 = text("Cancel");
      attr_dev(h2, "class", "");
      add_location(h2, file4, 202, 4, 7216);
      attr_dev(h30, "class", "svelte-1voy0ky");
      add_location(h30, file4, 205, 8, 7350);
      attr_dev(strong0, "class", "svelte-1voy0ky");
      add_location(strong0, file4, 207, 16, 7434);
      attr_dev(li0, "class", "svelte-1voy0ky");
      add_location(li0, file4, 207, 12, 7430);
      attr_dev(strong1, "class", "svelte-1voy0ky");
      add_location(strong1, file4, 208, 16, 7490);
      attr_dev(li1, "class", "svelte-1voy0ky");
      add_location(li1, file4, 208, 12, 7486);
      attr_dev(strong2, "class", "svelte-1voy0ky");
      add_location(strong2, file4, 209, 16, 7544);
      attr_dev(li2, "class", "svelte-1voy0ky");
      add_location(li2, file4, 209, 12, 7540);
      attr_dev(ul, "class", "decks-deck-info-list svelte-1voy0ky");
      add_location(ul, file4, 206, 8, 7384);
      attr_dev(div0, "class", "decks-deck-info-section svelte-1voy0ky");
      add_location(div0, file4, 204, 4, 7304);
      attr_dev(h31, "class", "svelte-1voy0ky");
      add_location(h31, file4, 215, 8, 7698);
      attr_dev(div1, "class", "decks-setting-item-description-global svelte-1voy0ky");
      add_location(div1, file4, 216, 8, 7733);
      add_location(div2, file4, 221, 8, 7917);
      attr_dev(div3, "class", "svelte-1voy0ky");
      toggle_class(div3, "disabled", !/*enableNewCardsLimit*/
      ctx[1]);
      add_location(div3, file4, 222, 8, 7973);
      add_location(div4, file4, 226, 8, 8099);
      attr_dev(div5, "class", "svelte-1voy0ky");
      toggle_class(div5, "disabled", !/*enableReviewCardsLimit*/
      ctx[2]);
      add_location(div5, file4, 227, 8, 8158);
      add_location(div6, file4, 231, 8, 8290);
      attr_dev(div7, "class", "decks-deck-settings-section svelte-1voy0ky");
      add_location(div7, file4, 214, 4, 7648);
      attr_dev(h32, "class", "svelte-1voy0ky");
      add_location(h32, file4, 236, 8, 8431);
      attr_dev(div8, "class", "decks-setting-item-description-global svelte-1voy0ky");
      add_location(div8, file4, 237, 8, 8465);
      add_location(div9, file4, 241, 8, 8620);
      attr_dev(div10, "class", "decks-deck-settings-section svelte-1voy0ky");
      add_location(div10, file4, 235, 4, 8381);
      attr_dev(h33, "class", "svelte-1voy0ky");
      add_location(h33, file4, 246, 8, 8768);
      attr_dev(div11, "class", "decks-setting-item-description-global svelte-1voy0ky");
      add_location(div11, file4, 247, 8, 8809);
      add_location(div12, file4, 252, 8, 8979);
      add_location(div13, file4, 253, 8, 9037);
      add_location(div14, file4, 254, 8, 9086);
      attr_dev(div15, "class", "decks-deck-settings-section svelte-1voy0ky");
      add_location(div15, file4, 245, 4, 8718);
      attr_dev(button0, "class", "mod-cta svelte-1voy0ky");
      button0.disabled = /*saving*/
      ctx[3];
      add_location(button0, file4, 259, 8, 9214);
      button1.disabled = /*saving*/
      ctx[3];
      attr_dev(button1, "class", "svelte-1voy0ky");
      add_location(button1, file4, 267, 8, 9487);
      attr_dev(div16, "class", "decks-modal-footer svelte-1voy0ky");
      add_location(div16, file4, 258, 4, 9173);
      attr_dev(div17, "class", "decks-deck-config-ui svelte-1voy0ky");
      add_location(div17, file4, 201, 0, 7177);
    },
    l: function claim(nodes) {
      throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
    },
    m: function mount(target, anchor) {
      insert_dev(target, div17, anchor);
      append_dev(div17, h2);
      append_dev(h2, t0);
      append_dev(h2, t1);
      append_dev(div17, t2);
      append_dev(div17, div0);
      append_dev(div0, h30);
      append_dev(div0, t4);
      append_dev(div0, ul);
      append_dev(ul, li0);
      append_dev(li0, strong0);
      append_dev(li0, t6);
      append_dev(li0, t7);
      append_dev(ul, t8);
      append_dev(ul, li1);
      append_dev(li1, strong1);
      append_dev(li1, t10);
      append_dev(li1, t11);
      append_dev(ul, t12);
      append_dev(ul, li2);
      append_dev(li2, strong2);
      append_dev(li2, t14);
      append_dev(li2, t15);
      append_dev(div17, t16);
      append_dev(div17, div7);
      append_dev(div7, h31);
      append_dev(div7, t18);
      append_dev(div7, div1);
      append_dev(div7, t20);
      append_dev(div7, div2);
      ctx[24](div2);
      append_dev(div7, t21);
      append_dev(div7, div3);
      ctx[25](div3);
      append_dev(div7, t22);
      append_dev(div7, div4);
      ctx[26](div4);
      append_dev(div7, t23);
      append_dev(div7, div5);
      ctx[27](div5);
      append_dev(div7, t24);
      append_dev(div7, div6);
      ctx[28](div6);
      append_dev(div17, t25);
      append_dev(div17, div10);
      append_dev(div10, h32);
      append_dev(div10, t27);
      append_dev(div10, div8);
      append_dev(div10, t29);
      append_dev(div10, div9);
      ctx[29](div9);
      append_dev(div17, t30);
      append_dev(div17, div15);
      append_dev(div15, h33);
      append_dev(div15, t32);
      append_dev(div15, div11);
      append_dev(div15, t34);
      append_dev(div15, div12);
      ctx[30](div12);
      append_dev(div15, t35);
      append_dev(div15, div13);
      ctx[31](div13);
      append_dev(div15, t36);
      append_dev(div15, div14);
      ctx[32](div14);
      append_dev(div17, t37);
      append_dev(div17, div16);
      append_dev(div16, button0);
      append_dev(button0, t38);
      append_dev(div16, t39);
      append_dev(div16, button1);
      append_dev(button1, t40);
      if (!mounted) {
        dispose = [
          listen_dev(
            window,
            "keydown",
            /*handleKeydown*/
            ctx[16],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button0,
            "click",
            /*click_handler*/
            ctx[33],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button0,
            "touchend",
            /*touchend_handler*/
            ctx[34],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button1,
            "click",
            /*click_handler_1*/
            ctx[35],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button1,
            "touchend",
            /*touchend_handler_1*/
            ctx[36],
            false,
            false,
            false,
            false
          )
        ];
        mounted = true;
      }
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*deck*/
      1 && t1_value !== (t1_value = /*deck*/
      ctx2[0].name + ""))
        set_data_dev(t1, t1_value);
      if (dirty[0] & /*deck*/
      1 && t7_value !== (t7_value = /*deck*/
      ctx2[0].name + ""))
        set_data_dev(t7, t7_value);
      if (dirty[0] & /*deck*/
      1 && t11_value !== (t11_value = /*deck*/
      ctx2[0].tag + ""))
        set_data_dev(t11, t11_value);
      if (dirty[0] & /*deck*/
      1 && t15_value !== (t15_value = /*deck*/
      ctx2[0].filepath + ""))
        set_data_dev(t15, t15_value);
      if (dirty[0] & /*enableNewCardsLimit*/
      2) {
        toggle_class(div3, "disabled", !/*enableNewCardsLimit*/
        ctx2[1]);
      }
      if (dirty[0] & /*enableReviewCardsLimit*/
      4) {
        toggle_class(div5, "disabled", !/*enableReviewCardsLimit*/
        ctx2[2]);
      }
      if (dirty[0] & /*saving*/
      8 && t38_value !== (t38_value = /*saving*/
      ctx2[3] ? "Saving..." : "Save"))
        set_data_dev(t38, t38_value);
      if (dirty[0] & /*saving*/
      8) {
        prop_dev(
          button0,
          "disabled",
          /*saving*/
          ctx2[3]
        );
      }
      if (dirty[0] & /*saving*/
      8) {
        prop_dev(
          button1,
          "disabled",
          /*saving*/
          ctx2[3]
        );
      }
    },
    i: noop,
    o: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div17);
      ctx[24](null);
      ctx[25](null);
      ctx[26](null);
      ctx[27](null);
      ctx[28](null);
      ctx[29](null);
      ctx[30](null);
      ctx[31](null);
      ctx[32](null);
      mounted = false;
      run_all(dispose);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_fragment4.name,
    type: "component",
    source: "",
    ctx
  });
  return block;
}
function instance4($$self, $$props, $$invalidate) {
  let { $$slots: slots = {}, $$scope } = $$props;
  validate_slots("DeckConfigUI", slots, []);
  let { deck } = $$props;
  let { config } = $$props;
  const dispatch = createEventDispatcher();
  let newCardsLimit = config.newCardsPerDay;
  let reviewCardsLimit = config.reviewCardsPerDay;
  let enableNewCardsLimit = config.hasNewCardsLimitEnabled;
  let enableReviewCardsLimit = config.hasReviewCardsLimitEnabled;
  let reviewOrder = config.reviewOrder;
  let headerLevel = config.headerLevel;
  let requestRetention = config.fsrs.requestRetention;
  let profile = config.fsrs.profile;
  let saving = false;
  let newCardsLimitContainer;
  let enableNewCardsContainer;
  let reviewCardsLimitContainer;
  let enableReviewCardsContainer;
  let enableReviewCardsLimitContainer;
  let reviewOrderContainer;
  let headerLevelContainer;
  let requestRetentionContainer;
  let profileContainer;
  let fsrsResetContainer;
  let lastEventTime = 0;
  let lastEventType = "";
  function handleSave() {
    $$invalidate(3, saving = true);
    const finalConfig = {
      hasNewCardsLimitEnabled: enableNewCardsLimit,
      newCardsPerDay: Number(newCardsLimit) || 20,
      hasReviewCardsLimitEnabled: enableReviewCardsLimit,
      reviewCardsPerDay: Number(reviewCardsLimit) || 100,
      reviewOrder,
      headerLevel: Number(headerLevel) || 2,
      fsrs: {
        requestRetention: Number(requestRetention) || 0.9,
        profile
      }
    };
    dispatch("save", finalConfig);
  }
  function handleTouchClick(callback, event) {
    const now = Date.now();
    const eventType = event.type;
    if (now - lastEventTime < 100 && lastEventType !== eventType) {
      return;
    }
    lastEventTime = now;
    lastEventType = eventType;
    callback();
  }
  function handleCancel() {
    dispatch("cancel");
  }
  function handleKeydown(event) {
    if (event.key === "Enter" && (event.ctrlKey || event.metaKey)) {
      handleSave();
    }
  }
  onMount(() => {
    if (enableNewCardsContainer) {
      new import_obsidian7.Setting(enableNewCardsContainer).setName("Enable New Cards Limit").setDesc("Limit how many new cards (never seen before) can be shown per day").addToggle((toggle) => toggle.setValue(enableNewCardsLimit).onChange((value) => {
        $$invalidate(1, enableNewCardsLimit = value);
      }));
    }
    if (newCardsLimitContainer) {
      new import_obsidian7.Setting(newCardsLimitContainer).setName("New Cards per Day").setDesc("Maximum number of new cards to introduce per day").addText((text2) => text2.setPlaceholder("20").setValue(newCardsLimit.toString()).onChange((value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num >= 0) {
          $$invalidate(18, newCardsLimit = num);
        }
      }));
    }
    if (enableReviewCardsContainer) {
      new import_obsidian7.Setting(enableReviewCardsContainer).setName("Enable Review Cards Limit").setDesc("Limit how many review cards (due for repetition) can be shown per day").addToggle((toggle) => toggle.setValue(enableReviewCardsLimit).onChange((value) => {
        $$invalidate(2, enableReviewCardsLimit = value);
      }));
    }
    if (reviewCardsLimitContainer) {
      new import_obsidian7.Setting(reviewCardsLimitContainer).setName("Review Cards per Day").setDesc("Maximum number of review cards to show per day").addText((text2) => text2.setPlaceholder("100").setValue(reviewCardsLimit.toString()).onChange((value) => {
        const num = parseInt(value);
        if (!isNaN(num) && num >= 0) {
          $$invalidate(19, reviewCardsLimit = num);
        }
      }));
    }
    if (reviewOrderContainer) {
      new import_obsidian7.Setting(reviewOrderContainer).setName("Review Order").setDesc("Order in which review cards are presented during study").addDropdown((dropdown) => dropdown.addOption("due-date", "Oldest due first").addOption("random", "Random order").setValue(reviewOrder).onChange((value) => {
        $$invalidate(20, reviewOrder = value);
      }));
    }
    if (headerLevelContainer) {
      new import_obsidian7.Setting(headerLevelContainer).setName("Header Level for Flashcards").setDesc("Which header level to use for header-paragraph flashcards").addDropdown((dropdown) => dropdown.addOption("1", "H1 (#)").addOption("2", "H2 (##)").addOption("3", "H3 (###)").addOption("4", "H4 (####)").addOption("5", "H5 (#####)").addOption("6", "H6 (######)").setValue(headerLevel.toString()).onChange((value) => {
        $$invalidate(21, headerLevel = parseInt(value));
      }));
    }
    if (requestRetentionContainer) {
      new import_obsidian7.Setting(requestRetentionContainer).setName("Request Retention").setDesc("Target recall rate for reviews (0.5-0.995)").addSlider((slider) => slider.setLimits(0.5, 0.995, 0.01).setValue(requestRetention).setDynamicTooltip().onChange((value) => {
        $$invalidate(22, requestRetention = value);
      }));
    }
    if (profileContainer) {
      new import_obsidian7.Setting(profileContainer).setName("FSRS Profile").setDesc("INTENSIVE: Sub-day intervals (1m/5m/10m/1d). STANDARD: Day-based intervals (\u22651 day minimum)").addDropdown((dropdown) => dropdown.addOption("INTENSIVE", "Intensive (Sub-day)").addOption("STANDARD", "Standard (Day-based)").setValue(profile).onChange((value) => {
        if (value === "INTENSIVE" || value === "STANDARD") {
          $$invalidate(23, profile = value);
        }
      }));
    }
    if (fsrsResetContainer) {
      new import_obsidian7.Setting(fsrsResetContainer).setName("Reset FSRS Settings").setDesc("Reset all FSRS parameters to default values").setName("Reset to Defaults").addButton((button) => button.setButtonText("Reset to Defaults").onClick(() => {
        $$invalidate(22, requestRetention = 0.9);
        $$invalidate(23, profile = "STANDARD");
      }));
    }
  });
  $$self.$$.on_mount.push(function() {
    if (deck === void 0 && !("deck" in $$props || $$self.$$.bound[$$self.$$.props["deck"]])) {
      console.warn("<DeckConfigUI> was created without expected prop 'deck'");
    }
    if (config === void 0 && !("config" in $$props || $$self.$$.bound[$$self.$$.props["config"]])) {
      console.warn("<DeckConfigUI> was created without expected prop 'config'");
    }
  });
  const writable_props = ["deck", "config"];
  Object.keys($$props).forEach((key) => {
    if (!~writable_props.indexOf(key) && key.slice(0, 2) !== "$$" && key !== "slot")
      console.warn(`<DeckConfigUI> was created with unknown prop '${key}'`);
  });
  function div2_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      enableNewCardsContainer = $$value;
      $$invalidate(5, enableNewCardsContainer);
    });
  }
  function div3_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      newCardsLimitContainer = $$value;
      $$invalidate(4, newCardsLimitContainer);
    });
  }
  function div4_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      enableReviewCardsContainer = $$value;
      $$invalidate(7, enableReviewCardsContainer);
    });
  }
  function div5_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      reviewCardsLimitContainer = $$value;
      $$invalidate(6, reviewCardsLimitContainer);
    });
  }
  function div6_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      reviewOrderContainer = $$value;
      $$invalidate(8, reviewOrderContainer);
    });
  }
  function div9_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      headerLevelContainer = $$value;
      $$invalidate(9, headerLevelContainer);
    });
  }
  function div12_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      requestRetentionContainer = $$value;
      $$invalidate(10, requestRetentionContainer);
    });
  }
  function div13_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      profileContainer = $$value;
      $$invalidate(11, profileContainer);
    });
  }
  function div14_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      fsrsResetContainer = $$value;
      $$invalidate(12, fsrsResetContainer);
    });
  }
  const click_handler = (e) => handleTouchClick(handleSave, e);
  const touchend_handler = (e) => handleTouchClick(handleSave, e);
  const click_handler_1 = (e) => handleTouchClick(handleCancel, e);
  const touchend_handler_1 = (e) => handleTouchClick(handleCancel, e);
  $$self.$$set = ($$props2) => {
    if ("deck" in $$props2)
      $$invalidate(0, deck = $$props2.deck);
    if ("config" in $$props2)
      $$invalidate(17, config = $$props2.config);
  };
  $$self.$capture_state = () => ({
    createEventDispatcher,
    onMount,
    Setting: import_obsidian7.Setting,
    deck,
    config,
    dispatch,
    newCardsLimit,
    reviewCardsLimit,
    enableNewCardsLimit,
    enableReviewCardsLimit,
    reviewOrder,
    headerLevel,
    requestRetention,
    profile,
    saving,
    newCardsLimitContainer,
    enableNewCardsContainer,
    reviewCardsLimitContainer,
    enableReviewCardsContainer,
    enableReviewCardsLimitContainer,
    reviewOrderContainer,
    headerLevelContainer,
    requestRetentionContainer,
    profileContainer,
    fsrsResetContainer,
    lastEventTime,
    lastEventType,
    handleSave,
    handleTouchClick,
    handleCancel,
    handleKeydown
  });
  $$self.$inject_state = ($$props2) => {
    if ("deck" in $$props2)
      $$invalidate(0, deck = $$props2.deck);
    if ("config" in $$props2)
      $$invalidate(17, config = $$props2.config);
    if ("newCardsLimit" in $$props2)
      $$invalidate(18, newCardsLimit = $$props2.newCardsLimit);
    if ("reviewCardsLimit" in $$props2)
      $$invalidate(19, reviewCardsLimit = $$props2.reviewCardsLimit);
    if ("enableNewCardsLimit" in $$props2)
      $$invalidate(1, enableNewCardsLimit = $$props2.enableNewCardsLimit);
    if ("enableReviewCardsLimit" in $$props2)
      $$invalidate(2, enableReviewCardsLimit = $$props2.enableReviewCardsLimit);
    if ("reviewOrder" in $$props2)
      $$invalidate(20, reviewOrder = $$props2.reviewOrder);
    if ("headerLevel" in $$props2)
      $$invalidate(21, headerLevel = $$props2.headerLevel);
    if ("requestRetention" in $$props2)
      $$invalidate(22, requestRetention = $$props2.requestRetention);
    if ("profile" in $$props2)
      $$invalidate(23, profile = $$props2.profile);
    if ("saving" in $$props2)
      $$invalidate(3, saving = $$props2.saving);
    if ("newCardsLimitContainer" in $$props2)
      $$invalidate(4, newCardsLimitContainer = $$props2.newCardsLimitContainer);
    if ("enableNewCardsContainer" in $$props2)
      $$invalidate(5, enableNewCardsContainer = $$props2.enableNewCardsContainer);
    if ("reviewCardsLimitContainer" in $$props2)
      $$invalidate(6, reviewCardsLimitContainer = $$props2.reviewCardsLimitContainer);
    if ("enableReviewCardsContainer" in $$props2)
      $$invalidate(7, enableReviewCardsContainer = $$props2.enableReviewCardsContainer);
    if ("enableReviewCardsLimitContainer" in $$props2)
      enableReviewCardsLimitContainer = $$props2.enableReviewCardsLimitContainer;
    if ("reviewOrderContainer" in $$props2)
      $$invalidate(8, reviewOrderContainer = $$props2.reviewOrderContainer);
    if ("headerLevelContainer" in $$props2)
      $$invalidate(9, headerLevelContainer = $$props2.headerLevelContainer);
    if ("requestRetentionContainer" in $$props2)
      $$invalidate(10, requestRetentionContainer = $$props2.requestRetentionContainer);
    if ("profileContainer" in $$props2)
      $$invalidate(11, profileContainer = $$props2.profileContainer);
    if ("fsrsResetContainer" in $$props2)
      $$invalidate(12, fsrsResetContainer = $$props2.fsrsResetContainer);
    if ("lastEventTime" in $$props2)
      lastEventTime = $$props2.lastEventTime;
    if ("lastEventType" in $$props2)
      lastEventType = $$props2.lastEventType;
  };
  if ($$props && "$$inject" in $$props) {
    $$self.$inject_state($$props.$$inject);
  }
  $$self.$$.update = () => {
    if ($$self.$$.dirty[0] & /*enableNewCardsLimit, newCardsLimit, enableReviewCardsLimit, reviewCardsLimit, reviewOrder, headerLevel, requestRetention, profile*/
    16515078) {
      $: {
        const newConfig = {
          hasNewCardsLimitEnabled: enableNewCardsLimit,
          newCardsPerDay: Number(newCardsLimit) || 20,
          hasReviewCardsLimitEnabled: enableReviewCardsLimit,
          reviewCardsPerDay: Number(reviewCardsLimit) || 100,
          reviewOrder,
          headerLevel: Number(headerLevel) || 2,
          fsrs: {
            requestRetention: Number(requestRetention) || 0.9,
            profile
          }
        };
        dispatch("configChange", newConfig);
      }
    }
  };
  return [
    deck,
    enableNewCardsLimit,
    enableReviewCardsLimit,
    saving,
    newCardsLimitContainer,
    enableNewCardsContainer,
    reviewCardsLimitContainer,
    enableReviewCardsContainer,
    reviewOrderContainer,
    headerLevelContainer,
    requestRetentionContainer,
    profileContainer,
    fsrsResetContainer,
    handleSave,
    handleTouchClick,
    handleCancel,
    handleKeydown,
    config,
    newCardsLimit,
    reviewCardsLimit,
    reviewOrder,
    headerLevel,
    requestRetention,
    profile,
    div2_binding,
    div3_binding,
    div4_binding,
    div5_binding,
    div6_binding,
    div9_binding,
    div12_binding,
    div13_binding,
    div14_binding,
    click_handler,
    touchend_handler,
    click_handler_1,
    touchend_handler_1
  ];
}
var DeckConfigUI = class extends SvelteComponentDev {
  constructor(options) {
    super(options);
    init(this, options, instance4, create_fragment4, safe_not_equal, { deck: 0, config: 17 }, null, [-1, -1]);
    dispatch_dev("SvelteRegisterComponent", {
      component: this,
      tagName: "DeckConfigUI",
      options,
      id: create_fragment4.name
    });
  }
  get deck() {
    throw new Error("<DeckConfigUI>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set deck(value) {
    throw new Error("<DeckConfigUI>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get config() {
    throw new Error("<DeckConfigUI>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set config(value) {
    throw new Error("<DeckConfigUI>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
};
var DeckConfigUI_default = DeckConfigUI;

// src/components/DeckConfigModal.ts
var DeckConfigModal = class extends import_obsidian8.Modal {
  constructor(app, deck, db, deckSynchronizer, onRefreshStats) {
    super(app);
    this.component = null;
    this.deck = deck;
    this.db = db;
    this.deckSynchronizer = deckSynchronizer;
    this.onRefreshStats = onRefreshStats;
    this.config = { ...deck.config };
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const modalEl = this.containerEl.querySelector(".modal");
    if (modalEl instanceof HTMLElement) {
      modalEl.addClass("decks-modal");
      if (window.innerWidth <= 768) {
        modalEl.addClass("decks-modal-mobile");
      } else {
        modalEl.removeClass("decks-modal-mobile");
      }
    }
    contentEl.addClass("decks-deck-config-container");
    this.component = new DeckConfigUI_default({
      target: contentEl,
      props: {
        deck: this.deck,
        config: this.config
      }
    });
    this.component.$on("save", (event) => {
      this.handleSave(event.detail);
    });
    this.component.$on("cancel", () => {
      this.close();
    });
    this.component.$on("configChange", (event) => {
      this.config = event.detail;
    });
    const handleResize = () => {
      const modalEl2 = this.containerEl.querySelector(".modal");
      if (modalEl2 instanceof HTMLElement) {
        if (window.innerWidth <= 768) {
          modalEl2.addClass("decks-modal-mobile");
        } else {
          modalEl2.removeClass("decks-modal-mobile");
        }
      }
    };
    window.addEventListener("resize", handleResize);
    this.resizeHandler = handleResize;
  }
  async handleSave(config) {
    try {
      await this.updateDeckConfig(this.deck.id, config);
      this.close();
    } catch (error) {
      console.error("Error saving deck configuration:", error);
    }
  }
  async updateDeckConfig(deckId, config) {
    var _a, _b;
    if (((_a = config.fsrs) == null ? void 0 : _a.profile) && !["INTENSIVE", "STANDARD"].includes(config.fsrs.profile)) {
      throw new Error(`Invalid profile: ${config.fsrs.profile}`);
    }
    if (((_b = config.fsrs) == null ? void 0 : _b.requestRetention) !== void 0) {
      const rr = config.fsrs.requestRetention;
      if (rr <= 0.5 || rr >= 0.995) {
        throw new Error(
          `requestRetention must be in range (0.5, 0.995), got ${rr}`
        );
      }
    }
    const decks = await this.db.getAllDecks();
    const deck = decks.find((d) => d.id === deckId);
    if (!deck) {
      throw new Error(`Deck not found: ${deckId}`);
    }
    const currentConfig = deck.config;
    const headerLevelChanged = config.headerLevel !== void 0 && config.headerLevel !== currentConfig.headerLevel;
    const updatedConfig = {
      ...currentConfig,
      ...config,
      fsrs: {
        ...currentConfig.fsrs,
        ...config.fsrs
      }
    };
    await this.db.updateDeck(deckId, { config: updatedConfig });
    if (headerLevelChanged) {
      const updatedDeck = await this.db.getDeckById(deckId);
      if (updatedDeck) {
        console.log(
          `Header level changed for deck ${updatedDeck.name}, forcing resync`
        );
        await yieldToUI();
        await this.deckSynchronizer.syncDeck(updatedDeck.filepath, true);
      }
    }
    await this.onRefreshStats(deckId);
  }
  onClose() {
    const { contentEl } = this;
    if (this.resizeHandler) {
      window.removeEventListener("resize", this.resizeHandler);
      this.resizeHandler = void 0;
    }
    if (this.component) {
      this.component.$destroy();
      this.component = null;
    }
    contentEl.empty();
  }
};

// src/components/AnkiExportModal.ts
var import_obsidian10 = require("obsidian");

// src/components/AnkiExportUI.svelte
var import_obsidian9 = require("obsidian");
var file5 = "src/components/AnkiExportUI.svelte";
function create_fragment5(ctx) {
  let div5;
  let h2;
  let t0;
  let t1_value = (
    /*deck*/
    ctx[0].name + ""
  );
  let t1;
  let t2;
  let t3;
  let div0;
  let h30;
  let t5;
  let ul;
  let li0;
  let strong0;
  let t7;
  let t8_value = (
    /*deck*/
    ctx[0].name + ""
  );
  let t8;
  let t9;
  let li1;
  let strong1;
  let t11;
  let t12_value = (
    /*deck*/
    ctx[0].tag + ""
  );
  let t12;
  let t13;
  let li2;
  let strong2;
  let t15;
  let t16_value = (
    /*deck*/
    ctx[0].filepath + ""
  );
  let t16;
  let t17;
  let div1;
  let h31;
  let t19;
  let ol;
  let li3;
  let t21;
  let li4;
  let t22;
  let strong3;
  let t24;
  let li5;
  let t26;
  let li6;
  let t28;
  let li7;
  let t29;
  let strong4;
  let t31;
  let t32;
  let div3;
  let h32;
  let t34;
  let div2;
  let t35;
  let div4;
  let button0;
  let t36_value = (
    /*exporting*/
    ctx[2] ? "Exporting..." : "Export to Anki"
  );
  let t36;
  let button0_disabled_value;
  let t37;
  let button1;
  let t38;
  let mounted;
  let dispose;
  const block = {
    c: function create() {
      div5 = element("div");
      h2 = element("h2");
      t0 = text("Export to Anki: ");
      t1 = text(t1_value);
      t2 = text("`");
      t3 = space();
      div0 = element("div");
      h30 = element("h3");
      h30.textContent = "Export Information";
      t5 = space();
      ul = element("ul");
      li0 = element("li");
      strong0 = element("strong");
      strong0.textContent = "Source Deck:";
      t7 = space();
      t8 = text(t8_value);
      t9 = space();
      li1 = element("li");
      strong1 = element("strong");
      strong1.textContent = "Source Tag:";
      t11 = space();
      t12 = text(t12_value);
      t13 = space();
      li2 = element("li");
      strong2 = element("strong");
      strong2.textContent = "Source File:";
      t15 = space();
      t16 = text(t16_value);
      t17 = space();
      div1 = element("div");
      h31 = element("h3");
      h31.textContent = "How to Import";
      t19 = space();
      ol = element("ol");
      li3 = element("li");
      li3.textContent = "This will download a text file compatible with Anki";
      t21 = space();
      li4 = element("li");
      t22 = text("Open Anki and go to ");
      strong3 = element("strong");
      strong3.textContent = "File \u2192 Import";
      t24 = space();
      li5 = element("li");
      li5.textContent = "Select the downloaded file";
      t26 = space();
      li6 = element("li");
      li6.textContent = "Choose your target deck and import settings";
      t28 = space();
      li7 = element("li");
      t29 = text("Click ");
      strong4 = element("strong");
      strong4.textContent = "Import";
      t31 = text(" to add the cards");
      t32 = space();
      div3 = element("div");
      h32 = element("h3");
      h32.textContent = "Export Settings";
      t34 = space();
      div2 = element("div");
      t35 = space();
      div4 = element("div");
      button0 = element("button");
      t36 = text(t36_value);
      t37 = space();
      button1 = element("button");
      t38 = text("Cancel");
      attr_dev(h2, "class", "");
      add_location(h2, file5, 68, 4, 1952);
      attr_dev(h30, "class", "svelte-1eprnjj");
      add_location(h30, file5, 71, 8, 2087);
      attr_dev(strong0, "class", "svelte-1eprnjj");
      add_location(strong0, file5, 73, 16, 2173);
      attr_dev(li0, "class", "svelte-1eprnjj");
      add_location(li0, file5, 73, 12, 2169);
      attr_dev(strong1, "class", "svelte-1eprnjj");
      add_location(strong1, file5, 74, 16, 2236);
      attr_dev(li1, "class", "svelte-1eprnjj");
      add_location(li1, file5, 74, 12, 2232);
      attr_dev(strong2, "class", "svelte-1eprnjj");
      add_location(strong2, file5, 75, 16, 2297);
      attr_dev(li2, "class", "svelte-1eprnjj");
      add_location(li2, file5, 75, 12, 2293);
      attr_dev(ul, "class", "decks-deck-info-list svelte-1eprnjj");
      add_location(ul, file5, 72, 8, 2123);
      attr_dev(div0, "class", "decks-deck-info-section svelte-1eprnjj");
      add_location(div0, file5, 70, 4, 2041);
      attr_dev(h31, "class", "svelte-1eprnjj");
      add_location(h31, file5, 81, 8, 2460);
      attr_dev(li3, "class", "svelte-1eprnjj");
      add_location(li3, file5, 83, 12, 2540);
      add_location(strong3, file5, 84, 36, 2637);
      attr_dev(li4, "class", "svelte-1eprnjj");
      add_location(li4, file5, 84, 12, 2613);
      attr_dev(li5, "class", "svelte-1eprnjj");
      add_location(li5, file5, 85, 12, 2685);
      attr_dev(li6, "class", "svelte-1eprnjj");
      add_location(li6, file5, 86, 12, 2733);
      add_location(strong4, file5, 87, 22, 2808);
      attr_dev(li7, "class", "svelte-1eprnjj");
      add_location(li7, file5, 87, 12, 2798);
      attr_dev(ol, "class", "decks-instructions-list svelte-1eprnjj");
      add_location(ol, file5, 82, 8, 2491);
      attr_dev(div1, "class", "decks-instructions-section svelte-1eprnjj");
      add_location(div1, file5, 80, 4, 2411);
      attr_dev(h32, "class", "svelte-1eprnjj");
      add_location(h32, file5, 93, 8, 2973);
      add_location(div2, file5, 96, 8, 3051);
      attr_dev(div3, "class", "decks-export-settings-section svelte-1eprnjj");
      add_location(div3, file5, 92, 4, 2921);
      attr_dev(button0, "class", "mod-cta svelte-1eprnjj");
      button0.disabled = button0_disabled_value = /*exporting*/
      ctx[2] || !/*ankiDeckName*/
      ctx[1].trim();
      add_location(button0, file5, 101, 8, 3178);
      button1.disabled = /*exporting*/
      ctx[2];
      attr_dev(button1, "class", "svelte-1eprnjj");
      add_location(button1, file5, 109, 8, 3498);
      attr_dev(div4, "class", "decks-modal-footer svelte-1eprnjj");
      add_location(div4, file5, 100, 4, 3137);
      attr_dev(div5, "class", "decks-anki-export-ui svelte-1eprnjj");
      add_location(div5, file5, 67, 0, 1913);
    },
    l: function claim(nodes) {
      throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
    },
    m: function mount(target, anchor) {
      insert_dev(target, div5, anchor);
      append_dev(div5, h2);
      append_dev(h2, t0);
      append_dev(h2, t1);
      append_dev(h2, t2);
      append_dev(div5, t3);
      append_dev(div5, div0);
      append_dev(div0, h30);
      append_dev(div0, t5);
      append_dev(div0, ul);
      append_dev(ul, li0);
      append_dev(li0, strong0);
      append_dev(li0, t7);
      append_dev(li0, t8);
      append_dev(ul, t9);
      append_dev(ul, li1);
      append_dev(li1, strong1);
      append_dev(li1, t11);
      append_dev(li1, t12);
      append_dev(ul, t13);
      append_dev(ul, li2);
      append_dev(li2, strong2);
      append_dev(li2, t15);
      append_dev(li2, t16);
      append_dev(div5, t17);
      append_dev(div5, div1);
      append_dev(div1, h31);
      append_dev(div1, t19);
      append_dev(div1, ol);
      append_dev(ol, li3);
      append_dev(ol, t21);
      append_dev(ol, li4);
      append_dev(li4, t22);
      append_dev(li4, strong3);
      append_dev(ol, t24);
      append_dev(ol, li5);
      append_dev(ol, t26);
      append_dev(ol, li6);
      append_dev(ol, t28);
      append_dev(ol, li7);
      append_dev(li7, t29);
      append_dev(li7, strong4);
      append_dev(li7, t31);
      append_dev(div5, t32);
      append_dev(div5, div3);
      append_dev(div3, h32);
      append_dev(div3, t34);
      append_dev(div3, div2);
      ctx[8](div2);
      append_dev(div5, t35);
      append_dev(div5, div4);
      append_dev(div4, button0);
      append_dev(button0, t36);
      append_dev(div4, t37);
      append_dev(div4, button1);
      append_dev(button1, t38);
      if (!mounted) {
        dispose = [
          listen_dev(
            window,
            "keydown",
            /*handleKeydown*/
            ctx[7],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button0,
            "click",
            /*click_handler*/
            ctx[9],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button0,
            "touchend",
            /*touchend_handler*/
            ctx[10],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button1,
            "click",
            /*click_handler_1*/
            ctx[11],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button1,
            "touchend",
            /*touchend_handler_1*/
            ctx[12],
            false,
            false,
            false,
            false
          )
        ];
        mounted = true;
      }
    },
    p: function update2(ctx2, [dirty]) {
      if (dirty & /*deck*/
      1 && t1_value !== (t1_value = /*deck*/
      ctx2[0].name + ""))
        set_data_dev(t1, t1_value);
      if (dirty & /*deck*/
      1 && t8_value !== (t8_value = /*deck*/
      ctx2[0].name + ""))
        set_data_dev(t8, t8_value);
      if (dirty & /*deck*/
      1 && t12_value !== (t12_value = /*deck*/
      ctx2[0].tag + ""))
        set_data_dev(t12, t12_value);
      if (dirty & /*deck*/
      1 && t16_value !== (t16_value = /*deck*/
      ctx2[0].filepath + ""))
        set_data_dev(t16, t16_value);
      if (dirty & /*exporting*/
      4 && t36_value !== (t36_value = /*exporting*/
      ctx2[2] ? "Exporting..." : "Export to Anki"))
        set_data_dev(t36, t36_value);
      if (dirty & /*exporting, ankiDeckName*/
      6 && button0_disabled_value !== (button0_disabled_value = /*exporting*/
      ctx2[2] || !/*ankiDeckName*/
      ctx2[1].trim())) {
        prop_dev(button0, "disabled", button0_disabled_value);
      }
      if (dirty & /*exporting*/
      4) {
        prop_dev(
          button1,
          "disabled",
          /*exporting*/
          ctx2[2]
        );
      }
    },
    i: noop,
    o: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div5);
      ctx[8](null);
      mounted = false;
      run_all(dispose);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_fragment5.name,
    type: "component",
    source: "",
    ctx
  });
  return block;
}
function instance5($$self, $$props, $$invalidate) {
  let { $$slots: slots = {}, $$scope } = $$props;
  validate_slots("AnkiExportUI", slots, []);
  let { deck } = $$props;
  const dispatch = createEventDispatcher();
  let ankiDeckName = deck.name;
  let separator = "tab";
  let exporting = false;
  let deckNameContainer;
  let lastEventTime = 0;
  let lastEventType = "";
  function handleExport() {
    $$invalidate(2, exporting = true);
    const separatorMap = {
      tab: "	",
      semicolon: ";",
      colon: ":",
      pipe: "|",
      comma: ",",
      space: " "
    };
    const config = {
      ankiDeckName: ankiDeckName.trim() || deck.name,
      separator: separatorMap[separator] || "	"
    };
    dispatch("export", config);
  }
  function handleTouchClick(callback, event) {
    const now = Date.now();
    const eventType = event.type;
    if (now - lastEventTime < 100 && lastEventType !== eventType) {
      return;
    }
    lastEventTime = now;
    lastEventType = eventType;
    callback();
  }
  function handleCancel() {
    dispatch("cancel");
  }
  function handleKeydown(event) {
    if (event.key === "Enter" && (event.ctrlKey || event.metaKey)) {
      handleExport();
    }
  }
  onMount(() => __awaiter(void 0, void 0, void 0, function* () {
    if (deckNameContainer) {
      new import_obsidian9.Setting(deckNameContainer).setName("Anki Deck Name").setDesc("Name of the deck in Anki where cards will be imported").addText((text2) => text2.setPlaceholder("Enter deck name...").setValue(ankiDeckName).onChange((value) => {
        $$invalidate(1, ankiDeckName = value);
      }));
    }
  }));
  $$self.$$.on_mount.push(function() {
    if (deck === void 0 && !("deck" in $$props || $$self.$$.bound[$$self.$$.props["deck"]])) {
      console.warn("<AnkiExportUI> was created without expected prop 'deck'");
    }
  });
  const writable_props = ["deck"];
  Object.keys($$props).forEach((key) => {
    if (!~writable_props.indexOf(key) && key.slice(0, 2) !== "$$" && key !== "slot")
      console.warn(`<AnkiExportUI> was created with unknown prop '${key}'`);
  });
  function div2_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      deckNameContainer = $$value;
      $$invalidate(3, deckNameContainer);
    });
  }
  const click_handler = (e) => handleTouchClick(handleExport, e);
  const touchend_handler = (e) => handleTouchClick(handleExport, e);
  const click_handler_1 = (e) => handleTouchClick(handleCancel, e);
  const touchend_handler_1 = (e) => handleTouchClick(handleCancel, e);
  $$self.$$set = ($$props2) => {
    if ("deck" in $$props2)
      $$invalidate(0, deck = $$props2.deck);
  };
  $$self.$capture_state = () => ({
    __awaiter,
    createEventDispatcher,
    onMount,
    Setting: import_obsidian9.Setting,
    deck,
    dispatch,
    ankiDeckName,
    separator,
    exporting,
    deckNameContainer,
    lastEventTime,
    lastEventType,
    handleExport,
    handleTouchClick,
    handleCancel,
    handleKeydown
  });
  $$self.$inject_state = ($$props2) => {
    if ("deck" in $$props2)
      $$invalidate(0, deck = $$props2.deck);
    if ("ankiDeckName" in $$props2)
      $$invalidate(1, ankiDeckName = $$props2.ankiDeckName);
    if ("separator" in $$props2)
      separator = $$props2.separator;
    if ("exporting" in $$props2)
      $$invalidate(2, exporting = $$props2.exporting);
    if ("deckNameContainer" in $$props2)
      $$invalidate(3, deckNameContainer = $$props2.deckNameContainer);
    if ("lastEventTime" in $$props2)
      lastEventTime = $$props2.lastEventTime;
    if ("lastEventType" in $$props2)
      lastEventType = $$props2.lastEventType;
  };
  if ($$props && "$$inject" in $$props) {
    $$self.$inject_state($$props.$$inject);
  }
  return [
    deck,
    ankiDeckName,
    exporting,
    deckNameContainer,
    handleExport,
    handleTouchClick,
    handleCancel,
    handleKeydown,
    div2_binding,
    click_handler,
    touchend_handler,
    click_handler_1,
    touchend_handler_1
  ];
}
var AnkiExportUI = class extends SvelteComponentDev {
  constructor(options) {
    super(options);
    init(this, options, instance5, create_fragment5, safe_not_equal, { deck: 0 });
    dispatch_dev("SvelteRegisterComponent", {
      component: this,
      tagName: "AnkiExportUI",
      options,
      id: create_fragment5.name
    });
  }
  get deck() {
    throw new Error("<AnkiExportUI>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set deck(value) {
    throw new Error("<AnkiExportUI>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
};
var AnkiExportUI_default = AnkiExportUI;

// src/components/AnkiExportModal.ts
var AnkiExportModal = class extends import_obsidian10.Modal {
  constructor(app, deck, db) {
    super(app);
    this.component = null;
    this.deck = deck;
    this.db = db;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const modalEl = this.containerEl.querySelector(".modal");
    if (modalEl instanceof HTMLElement && window.innerWidth <= 768) {
      modalEl.addClass("decks-modal");
      if (window.innerWidth <= 768) {
        modalEl.addClass("decks-modal-mobile");
      } else {
        modalEl.removeClass("decks-modal-mobile");
      }
    }
    contentEl.addClass("decks-anki-export-container");
    this.component = new AnkiExportUI_default({
      target: contentEl,
      props: {
        deck: this.deck
      }
    });
    this.component.$on("export", (event) => {
      this.handleExport(event.detail);
    });
    this.component.$on("cancel", () => {
      this.close();
    });
    const handleResize = () => {
      const modalEl2 = this.containerEl.querySelector(".modal");
      if (modalEl2 instanceof HTMLElement) {
        if (window.innerWidth <= 768) {
          modalEl2.addClass("decks-modal-mobile");
        } else {
          modalEl2.removeClass("decks-modal-mobile");
        }
      }
    };
    window.addEventListener("resize", handleResize);
    this.resizeHandler = handleResize;
  }
  async handleExport(config) {
    try {
      const flashcards = await this.db.getFlashcardsByDeck(this.deck.id);
      if (flashcards.length === 0) {
        new import_obsidian10.Notice("No flashcards found in this deck to export");
        return;
      }
      const ankiData = this.generateAnkiData(flashcards, config);
      await this.downloadAnkiFile(ankiData, config.ankiDeckName);
      new import_obsidian10.Notice(
        `Successfully exported ${flashcards.length} flashcards to Anki format`
      );
      this.close();
    } catch (error) {
      console.error("Error exporting to Anki:", error);
      new import_obsidian10.Notice("Failed to export deck to Anki format");
    }
  }
  generateAnkiData(flashcards, config) {
    const headers = ["Front", "Back"];
    const rows = [headers.join(config.separator)];
    flashcards.forEach((card) => {
      const front = this.sanitizeForAnki(card.front, config.separator);
      const back = this.sanitizeForAnki(card.back, config.separator);
      rows.push([front, back].join(config.separator));
    });
    return rows.join("\n");
  }
  sanitizeForAnki(text2, separator) {
    let sanitized = text2.replace(/\*\*(.*?)\*\*/g, "<b>$1</b>").replace(/\*(.*?)\*/g, "<i>$1</i>").replace(/`(.*?)`/g, "<code>$1</code>").replace(/\n/g, "<br>").trim();
    if (separator === "	") {
      sanitized = sanitized.replace(/\t/g, " ");
    } else {
      sanitized = sanitized.replace(
        new RegExp(`\\${separator}`, "g"),
        `\\${separator}`
      );
    }
    return sanitized;
  }
  async downloadAnkiFile(data, deckName) {
    const fileName = `${deckName.replace(/[^a-zA-Z0-9-_]/g, "_")}_export.txt`;
    const blob = new Blob([data], { type: "text/plain;charset=utf-8" });
    const url = URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.href = url;
    link.download = fileName;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);
  }
  onClose() {
    const { contentEl } = this;
    if (this.resizeHandler) {
      window.removeEventListener("resize", this.resizeHandler);
      this.resizeHandler = void 0;
    }
    if (this.component) {
      this.component.$destroy();
      this.component = null;
    }
    contentEl.empty();
  }
};

// src/components/DeckListPanel.svelte
var { console: console_14 } = globals;
var file6 = "src/components/DeckListPanel.svelte";
function get_each_context3(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[64] = list[i];
  const constants_0 = (
    /*getDeckStats*/
    child_ctx[14](
      /*deck*/
      child_ctx[64].id
    )
  );
  child_ctx[13] = constants_0;
  return child_ctx;
}
function get_each_context_22(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[67] = list[i];
  return child_ctx;
}
function get_each_context_12(ctx, list, i) {
  const child_ctx = ctx.slice();
  child_ctx[67] = list[i];
  return child_ctx;
}
function create_if_block_62(ctx) {
  let div1;
  let div0;
  let t1;
  let each_value_2 = (
    /*availableTags*/
    ctx[7].slice(0, 5)
  );
  validate_each_argument(each_value_2);
  let each_blocks = [];
  for (let i = 0; i < each_value_2.length; i += 1) {
    each_blocks[i] = create_each_block_22(get_each_context_22(ctx, each_value_2, i));
  }
  const block = {
    c: function create() {
      div1 = element("div");
      div0 = element("div");
      div0.textContent = "Available tags (click to filter):";
      t1 = space();
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      attr_dev(div0, "class", "decks-suggestions-header svelte-z5rqjc");
      add_location(div0, file6, 453, 24, 15548);
      attr_dev(div1, "class", "decks-suggestions-dropdown svelte-z5rqjc");
      add_location(div1, file6, 452, 20, 15483);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div1, anchor);
      append_dev(div1, div0);
      append_dev(div1, t1);
      for (let i = 0; i < each_blocks.length; i += 1) {
        if (each_blocks[i]) {
          each_blocks[i].m(div1, null);
        }
      }
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*selectSuggestion, availableTags, handleTouchClick*/
      4325504) {
        each_value_2 = /*availableTags*/
        ctx2[7].slice(0, 5);
        validate_each_argument(each_value_2);
        let i;
        for (i = 0; i < each_value_2.length; i += 1) {
          const child_ctx = get_each_context_22(ctx2, each_value_2, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_22(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(div1, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_2.length;
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div1);
      destroy_each(each_blocks, detaching);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_62.name,
    type: "if",
    source: "(452:89) ",
    ctx
  });
  return block;
}
function create_if_block_52(ctx) {
  let div1;
  let div0;
  let t1;
  let each_value_1 = (
    /*filteredSuggestions*/
    ctx[8]
  );
  validate_each_argument(each_value_1);
  let each_blocks = [];
  for (let i = 0; i < each_value_1.length; i += 1) {
    each_blocks[i] = create_each_block_12(get_each_context_12(ctx, each_value_1, i));
  }
  const block = {
    c: function create() {
      div1 = element("div");
      div0 = element("div");
      div0.textContent = "Filter by tags:";
      t1 = space();
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      attr_dev(div0, "class", "decks-suggestions-header svelte-z5rqjc");
      add_location(div0, file6, 428, 24, 14300);
      attr_dev(div1, "class", "decks-suggestions-dropdown svelte-z5rqjc");
      add_location(div1, file6, 427, 20, 14235);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div1, anchor);
      append_dev(div1, div0);
      append_dev(div1, t1);
      for (let i = 0; i < each_blocks.length; i += 1) {
        if (each_blocks[i]) {
          each_blocks[i].m(div1, null);
        }
      }
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*selectSuggestion, filteredSuggestions, handleTouchClick*/
      4325632) {
        each_value_1 = /*filteredSuggestions*/
        ctx2[8];
        validate_each_argument(each_value_1);
        let i;
        for (i = 0; i < each_value_1.length; i += 1) {
          const child_ctx = get_each_context_12(ctx2, each_value_1, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block_12(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(div1, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value_1.length;
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div1);
      destroy_each(each_blocks, detaching);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_52.name,
    type: "if",
    source: "(427:16) {#if showSuggestions && filteredSuggestions.length > 0}",
    ctx
  });
  return block;
}
function create_each_block_22(ctx) {
  let button;
  let t0_value = (
    /*tag*/
    ctx[67] + ""
  );
  let t0;
  let t1;
  let mounted;
  let dispose;
  function mousedown_handler_1() {
    return (
      /*mousedown_handler_1*/
      ctx[43](
        /*tag*/
        ctx[67]
      )
    );
  }
  function click_handler_3(...args) {
    return (
      /*click_handler_3*/
      ctx[44](
        /*tag*/
        ctx[67],
        ...args
      )
    );
  }
  function touchend_handler_3(...args) {
    return (
      /*touchend_handler_3*/
      ctx[45](
        /*tag*/
        ctx[67],
        ...args
      )
    );
  }
  const block = {
    c: function create() {
      button = element("button");
      t0 = text(t0_value);
      t1 = space();
      attr_dev(button, "class", "decks-suggestion-item svelte-z5rqjc");
      add_location(button, file6, 457, 28, 15773);
    },
    m: function mount(target, anchor) {
      insert_dev(target, button, anchor);
      append_dev(button, t0);
      append_dev(button, t1);
      if (!mounted) {
        dispose = [
          listen_dev(button, "mousedown", prevent_default(mousedown_handler_1), false, true, false, false),
          listen_dev(button, "click", click_handler_3, false, false, false, false),
          listen_dev(button, "touchend", touchend_handler_3, false, false, false, false)
        ];
        mounted = true;
      }
    },
    p: function update2(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty[0] & /*availableTags*/
      128 && t0_value !== (t0_value = /*tag*/
      ctx[67] + ""))
        set_data_dev(t0, t0_value);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(button);
      mounted = false;
      run_all(dispose);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_each_block_22.name,
    type: "each",
    source: "(457:24) {#each availableTags.slice(0, 5) as tag}",
    ctx
  });
  return block;
}
function create_each_block_12(ctx) {
  let button;
  let t0_value = (
    /*tag*/
    ctx[67] + ""
  );
  let t0;
  let t1;
  let mounted;
  let dispose;
  function mousedown_handler() {
    return (
      /*mousedown_handler*/
      ctx[40](
        /*tag*/
        ctx[67]
      )
    );
  }
  function click_handler_2(...args) {
    return (
      /*click_handler_2*/
      ctx[41](
        /*tag*/
        ctx[67],
        ...args
      )
    );
  }
  function touchend_handler_2(...args) {
    return (
      /*touchend_handler_2*/
      ctx[42](
        /*tag*/
        ctx[67],
        ...args
      )
    );
  }
  const block = {
    c: function create() {
      button = element("button");
      t0 = text(t0_value);
      t1 = space();
      attr_dev(button, "class", "decks-suggestion-item svelte-z5rqjc");
      add_location(button, file6, 432, 28, 14501);
    },
    m: function mount(target, anchor) {
      insert_dev(target, button, anchor);
      append_dev(button, t0);
      append_dev(button, t1);
      if (!mounted) {
        dispose = [
          listen_dev(button, "mousedown", prevent_default(mousedown_handler), false, true, false, false),
          listen_dev(button, "click", click_handler_2, false, false, false, false),
          listen_dev(button, "touchend", touchend_handler_2, false, false, false, false)
        ];
        mounted = true;
      }
    },
    p: function update2(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty[0] & /*filteredSuggestions*/
      256 && t0_value !== (t0_value = /*tag*/
      ctx[67] + ""))
        set_data_dev(t0, t0_value);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(button);
      mounted = false;
      run_all(dispose);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_each_block_12.name,
    type: "each",
    source: "(432:24) {#each filteredSuggestions as tag}",
    ctx
  });
  return block;
}
function create_else_block4(ctx) {
  let div6;
  let div4;
  let div0;
  let t1;
  let div1;
  let t3;
  let div2;
  let t5;
  let div3;
  let t6;
  let div5;
  let each_value = (
    /*decks*/
    ctx[2]
  );
  validate_each_argument(each_value);
  let each_blocks = [];
  for (let i = 0; i < each_value.length; i += 1) {
    each_blocks[i] = create_each_block3(get_each_context3(ctx, each_value, i));
  }
  const block = {
    c: function create() {
      div6 = element("div");
      div4 = element("div");
      div0 = element("div");
      div0.textContent = "Deck";
      t1 = space();
      div1 = element("div");
      div1.textContent = "New";
      t3 = space();
      div2 = element("div");
      div2.textContent = "Due";
      t5 = space();
      div3 = element("div");
      t6 = space();
      div5 = element("div");
      for (let i = 0; i < each_blocks.length; i += 1) {
        each_blocks[i].c();
      }
      attr_dev(div0, "class", "decks-col-deck svelte-z5rqjc");
      add_location(div0, file6, 495, 20, 17344);
      attr_dev(div1, "class", "decks-col-stat svelte-z5rqjc");
      add_location(div1, file6, 496, 20, 17403);
      attr_dev(div2, "class", "decks-col-stat svelte-z5rqjc");
      add_location(div2, file6, 497, 20, 17461);
      attr_dev(div3, "class", "decks-col-config svelte-z5rqjc");
      add_location(div3, file6, 498, 20, 17519);
      attr_dev(div4, "class", "decks-table-header svelte-z5rqjc");
      add_location(div4, file6, 494, 16, 17291);
      attr_dev(div5, "class", "decks-table-body svelte-z5rqjc");
      add_location(div5, file6, 501, 16, 17596);
      attr_dev(div6, "class", "decks-deck-table svelte-z5rqjc");
      add_location(div6, file6, 493, 12, 17244);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div6, anchor);
      append_dev(div6, div4);
      append_dev(div4, div0);
      append_dev(div4, t1);
      append_dev(div4, div1);
      append_dev(div4, t3);
      append_dev(div4, div2);
      append_dev(div4, t5);
      append_dev(div4, div3);
      append_dev(div6, t6);
      append_dev(div6, div5);
      for (let i = 0; i < each_blocks.length; i += 1) {
        if (each_blocks[i]) {
          each_blocks[i].m(div5, null);
        }
      }
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*decks, handleTouchClick, handleConfigClick, getDeckStats, isUpdatingStats, handleDeckClick*/
      7358468) {
        each_value = /*decks*/
        ctx2[2];
        validate_each_argument(each_value);
        let i;
        for (i = 0; i < each_value.length; i += 1) {
          const child_ctx = get_each_context3(ctx2, each_value, i);
          if (each_blocks[i]) {
            each_blocks[i].p(child_ctx, dirty);
          } else {
            each_blocks[i] = create_each_block3(child_ctx);
            each_blocks[i].c();
            each_blocks[i].m(div5, null);
          }
        }
        for (; i < each_blocks.length; i += 1) {
          each_blocks[i].d(1);
        }
        each_blocks.length = each_value.length;
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div6);
      destroy_each(each_blocks, detaching);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_else_block4.name,
    type: "else",
    source: "(493:8) {:else}",
    ctx
  });
  return block;
}
function create_if_block_23(ctx) {
  let div;
  let p0;
  let t1;
  let p1;
  const block = {
    c: function create() {
      div = element("div");
      p0 = element("p");
      p0.textContent = "No decks match your filter.";
      t1 = space();
      p1 = element("p");
      p1.textContent = "Try adjusting your search terms.";
      attr_dev(p0, "class", "svelte-z5rqjc");
      add_location(p0, file6, 489, 16, 17082);
      attr_dev(p1, "class", "decks-help-text svelte-z5rqjc");
      add_location(p1, file6, 490, 16, 17133);
      attr_dev(div, "class", "decks-empty-state svelte-z5rqjc");
      add_location(div, file6, 488, 12, 17034);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, p0);
      append_dev(div, t1);
      append_dev(div, p1);
    },
    p: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_23.name,
    type: "if",
    source: "(488:37) ",
    ctx
  });
  return block;
}
function create_if_block_14(ctx) {
  let div;
  let p0;
  let t1;
  let p1;
  const block = {
    c: function create() {
      div = element("div");
      p0 = element("p");
      p0.textContent = "No flashcard decks found.";
      t1 = space();
      p1 = element("p");
      p1.textContent = "Tag your notes with #flashcards to create decks.";
      attr_dev(p0, "class", "svelte-z5rqjc");
      add_location(p0, file6, 482, 16, 16798);
      attr_dev(p1, "class", "decks-help-text svelte-z5rqjc");
      add_location(p1, file6, 483, 16, 16847);
      attr_dev(div, "class", "decks-empty-state svelte-z5rqjc");
      add_location(div, file6, 481, 12, 16750);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, p0);
      append_dev(div, t1);
      append_dev(div, p1);
    },
    p: noop,
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_14.name,
    type: "if",
    source: "(481:8) {#if allDecks.length === 0}",
    ctx
  });
  return block;
}
function create_if_block_42(ctx) {
  let span;
  const block = {
    c: function create() {
      span = element("span");
      span.textContent = "\u26A0";
      attr_dev(span, "class", "decks-limit-indicator svelte-z5rqjc");
      add_location(span, file6, 540, 36, 19819);
    },
    m: function mount(target, anchor) {
      insert_dev(target, span, anchor);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(span);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_42.name,
    type: "if",
    source: "(540:32) {#if deck.config.hasNewCardsLimitEnabled}",
    ctx
  });
  return block;
}
function create_if_block_33(ctx) {
  let span;
  const block = {
    c: function create() {
      span = element("span");
      span.textContent = "\u{1F4C5}";
      attr_dev(span, "class", "decks-limit-indicator svelte-z5rqjc");
      add_location(span, file6, 564, 36, 21160);
    },
    m: function mount(target, anchor) {
      insert_dev(target, span, anchor);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(span);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block_33.name,
    type: "if",
    source: "(564:32) {#if deck.config.hasReviewCardsLimitEnabled}",
    ctx
  });
  return block;
}
function create_each_block3(ctx) {
  let div5;
  let div0;
  let span;
  let t0_value = formatDeckName(
    /*deck*/
    ctx[64]
  ) + "";
  let t0;
  let span_title_value;
  let t1;
  let div1;
  let t2_value = (
    /*stats*/
    ctx[13].newCount + ""
  );
  let t2;
  let t3;
  let div1_title_value;
  let t4;
  let div2;
  let t6;
  let div3;
  let t7_value = (
    /*stats*/
    ctx[13].dueCount + ""
  );
  let t7;
  let t8;
  let div3_title_value;
  let t9;
  let div4;
  let button;
  let svg;
  let circle;
  let path;
  let button_aria_label_value;
  let t10;
  let mounted;
  let dispose;
  function click_handler_4(...args) {
    return (
      /*click_handler_4*/
      ctx[46](
        /*deck*/
        ctx[64],
        ...args
      )
    );
  }
  function touchend_handler_4(...args) {
    return (
      /*touchend_handler_4*/
      ctx[47](
        /*deck*/
        ctx[64],
        ...args
      )
    );
  }
  function keydown_handler(...args) {
    return (
      /*keydown_handler*/
      ctx[48](
        /*deck*/
        ctx[64],
        ...args
      )
    );
  }
  let if_block0 = (
    /*deck*/
    ctx[64].config.hasNewCardsLimitEnabled && create_if_block_42(ctx)
  );
  let if_block1 = (
    /*deck*/
    ctx[64].config.hasReviewCardsLimitEnabled && create_if_block_33(ctx)
  );
  function click_handler_5(...args) {
    return (
      /*click_handler_5*/
      ctx[49](
        /*deck*/
        ctx[64],
        ...args
      )
    );
  }
  function touchend_handler_5(...args) {
    return (
      /*touchend_handler_5*/
      ctx[50](
        /*deck*/
        ctx[64],
        ...args
      )
    );
  }
  const block = {
    c: function create() {
      div5 = element("div");
      div0 = element("div");
      span = element("span");
      t0 = text(t0_value);
      t1 = space();
      div1 = element("div");
      t2 = text(t2_value);
      t3 = space();
      if (if_block0)
        if_block0.c();
      t4 = space();
      div2 = element("div");
      div2.textContent = "0";
      t6 = space();
      div3 = element("div");
      t7 = text(t7_value);
      t8 = space();
      if (if_block1)
        if_block1.c();
      t9 = space();
      div4 = element("div");
      button = element("button");
      svg = svg_element("svg");
      circle = svg_element("circle");
      path = svg_element("path");
      t10 = space();
      attr_dev(span, "class", "decks-deck-name-link svelte-z5rqjc");
      attr_dev(span, "role", "button");
      attr_dev(span, "tabindex", "0");
      attr_dev(span, "title", span_title_value = "Click to review " + /*deck*/
      ctx[64].name);
      add_location(span, file6, 506, 32, 17874);
      attr_dev(div0, "class", "decks-col-deck svelte-z5rqjc");
      add_location(div0, file6, 505, 28, 17813);
      attr_dev(div1, "class", "decks-col-stat svelte-z5rqjc");
      attr_dev(div1, "title", div1_title_value = /*deck*/
      ctx[64].config.hasNewCardsLimitEnabled ? `${/*stats*/
      ctx[13].newCount} new cards available today (limit: ${/*deck*/
      ctx[64].config.newCardsPerDay})` : `${/*stats*/
      ctx[13].newCount} new cards due`);
      toggle_class(
        div1,
        "has-cards",
        /*stats*/
        ctx[13].newCount > 0
      );
      toggle_class(
        div1,
        "updating",
        /*isUpdatingStats*/
        ctx[11]
      );
      toggle_class(
        div1,
        "has-limit",
        /*deck*/
        ctx[64].config.hasNewCardsLimitEnabled
      );
      add_location(div1, file6, 528, 28, 19042);
      attr_dev(div2, "class", "decks-col-stat svelte-z5rqjc");
      set_style(div2, "display", "none");
      toggle_class(div2, "has-cards", false);
      toggle_class(
        div2,
        "updating",
        /*isUpdatingStats*/
        ctx[11]
      );
      add_location(div2, file6, 544, 28, 20002);
      attr_dev(div3, "class", "decks-col-stat svelte-z5rqjc");
      attr_dev(div3, "title", div3_title_value = /*deck*/
      ctx[64].config.hasReviewCardsLimitEnabled ? `${/*stats*/
      ctx[13].dueCount} review cards available today (limit: ${/*deck*/
      ctx[64].config.reviewCardsPerDay})` : `${/*stats*/
      ctx[13].dueCount} review cards due`);
      toggle_class(
        div3,
        "has-cards",
        /*stats*/
        ctx[13].dueCount > 0
      );
      toggle_class(
        div3,
        "updating",
        /*isUpdatingStats*/
        ctx[11]
      );
      toggle_class(
        div3,
        "has-limit",
        /*deck*/
        ctx[64].config.hasReviewCardsLimitEnabled
      );
      add_location(div3, file6, 552, 28, 20365);
      attr_dev(circle, "cx", "12");
      attr_dev(circle, "cy", "12");
      attr_dev(circle, "r", "3");
      add_location(circle, file6, 595, 40, 22873);
      attr_dev(path, "d", "M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z");
      add_location(path, file6, 596, 40, 22953);
      attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
      attr_dev(svg, "width", "16");
      attr_dev(svg, "height", "16");
      attr_dev(svg, "viewBox", "0 0 24 24");
      attr_dev(svg, "fill", "none");
      attr_dev(svg, "stroke", "currentColor");
      attr_dev(svg, "stroke-width", "2");
      attr_dev(svg, "stroke-linecap", "round");
      attr_dev(svg, "stroke-linejoin", "round");
      add_location(svg, file6, 584, 36, 22254);
      attr_dev(button, "class", "decks-deck-config-button svelte-z5rqjc");
      attr_dev(button, "title", "Configure deck settings");
      attr_dev(button, "aria-label", button_aria_label_value = "Configure " + /*deck*/
      ctx[64].name);
      add_location(button, file6, 569, 32, 21407);
      attr_dev(div4, "class", "decks-col-config svelte-z5rqjc");
      add_location(div4, file6, 568, 28, 21344);
      attr_dev(div5, "class", "decks-deck-row svelte-z5rqjc");
      add_location(div5, file6, 504, 24, 17756);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div5, anchor);
      append_dev(div5, div0);
      append_dev(div0, span);
      append_dev(span, t0);
      append_dev(div5, t1);
      append_dev(div5, div1);
      append_dev(div1, t2);
      append_dev(div1, t3);
      if (if_block0)
        if_block0.m(div1, null);
      append_dev(div5, t4);
      append_dev(div5, div2);
      append_dev(div5, t6);
      append_dev(div5, div3);
      append_dev(div3, t7);
      append_dev(div3, t8);
      if (if_block1)
        if_block1.m(div3, null);
      append_dev(div5, t9);
      append_dev(div5, div4);
      append_dev(div4, button);
      append_dev(button, svg);
      append_dev(svg, circle);
      append_dev(svg, path);
      append_dev(div5, t10);
      if (!mounted) {
        dispose = [
          listen_dev(span, "click", click_handler_4, false, false, false, false),
          listen_dev(span, "touchend", touchend_handler_4, false, false, false, false),
          listen_dev(span, "keydown", keydown_handler, false, false, false, false),
          listen_dev(button, "click", click_handler_5, false, false, false, false),
          listen_dev(button, "touchend", touchend_handler_5, false, false, false, false)
        ];
        mounted = true;
      }
    },
    p: function update2(new_ctx, dirty) {
      ctx = new_ctx;
      if (dirty[0] & /*decks*/
      4 && t0_value !== (t0_value = formatDeckName(
        /*deck*/
        ctx[64]
      ) + ""))
        set_data_dev(t0, t0_value);
      if (dirty[0] & /*decks*/
      4 && span_title_value !== (span_title_value = "Click to review " + /*deck*/
      ctx[64].name)) {
        attr_dev(span, "title", span_title_value);
      }
      if (dirty[0] & /*decks*/
      4 && t2_value !== (t2_value = /*stats*/
      ctx[13].newCount + ""))
        set_data_dev(t2, t2_value);
      if (
        /*deck*/
        ctx[64].config.hasNewCardsLimitEnabled
      ) {
        if (if_block0) {
        } else {
          if_block0 = create_if_block_42(ctx);
          if_block0.c();
          if_block0.m(div1, null);
        }
      } else if (if_block0) {
        if_block0.d(1);
        if_block0 = null;
      }
      if (dirty[0] & /*decks*/
      4 && div1_title_value !== (div1_title_value = /*deck*/
      ctx[64].config.hasNewCardsLimitEnabled ? `${/*stats*/
      ctx[13].newCount} new cards available today (limit: ${/*deck*/
      ctx[64].config.newCardsPerDay})` : `${/*stats*/
      ctx[13].newCount} new cards due`)) {
        attr_dev(div1, "title", div1_title_value);
      }
      if (dirty[0] & /*getDeckStats, decks*/
      16388) {
        toggle_class(
          div1,
          "has-cards",
          /*stats*/
          ctx[13].newCount > 0
        );
      }
      if (dirty[0] & /*isUpdatingStats*/
      2048) {
        toggle_class(
          div1,
          "updating",
          /*isUpdatingStats*/
          ctx[11]
        );
      }
      if (dirty[0] & /*decks*/
      4) {
        toggle_class(
          div1,
          "has-limit",
          /*deck*/
          ctx[64].config.hasNewCardsLimitEnabled
        );
      }
      if (dirty[0] & /*isUpdatingStats*/
      2048) {
        toggle_class(
          div2,
          "updating",
          /*isUpdatingStats*/
          ctx[11]
        );
      }
      if (dirty[0] & /*decks*/
      4 && t7_value !== (t7_value = /*stats*/
      ctx[13].dueCount + ""))
        set_data_dev(t7, t7_value);
      if (
        /*deck*/
        ctx[64].config.hasReviewCardsLimitEnabled
      ) {
        if (if_block1) {
        } else {
          if_block1 = create_if_block_33(ctx);
          if_block1.c();
          if_block1.m(div3, null);
        }
      } else if (if_block1) {
        if_block1.d(1);
        if_block1 = null;
      }
      if (dirty[0] & /*decks*/
      4 && div3_title_value !== (div3_title_value = /*deck*/
      ctx[64].config.hasReviewCardsLimitEnabled ? `${/*stats*/
      ctx[13].dueCount} review cards available today (limit: ${/*deck*/
      ctx[64].config.reviewCardsPerDay})` : `${/*stats*/
      ctx[13].dueCount} review cards due`)) {
        attr_dev(div3, "title", div3_title_value);
      }
      if (dirty[0] & /*getDeckStats, decks*/
      16388) {
        toggle_class(
          div3,
          "has-cards",
          /*stats*/
          ctx[13].dueCount > 0
        );
      }
      if (dirty[0] & /*isUpdatingStats*/
      2048) {
        toggle_class(
          div3,
          "updating",
          /*isUpdatingStats*/
          ctx[11]
        );
      }
      if (dirty[0] & /*decks*/
      4) {
        toggle_class(
          div3,
          "has-limit",
          /*deck*/
          ctx[64].config.hasReviewCardsLimitEnabled
        );
      }
      if (dirty[0] & /*decks*/
      4 && button_aria_label_value !== (button_aria_label_value = "Configure " + /*deck*/
      ctx[64].name)) {
        attr_dev(button, "aria-label", button_aria_label_value);
      }
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div5);
      if (if_block0)
        if_block0.d();
      if (if_block1)
        if_block1.d();
      mounted = false;
      run_all(dispose);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_each_block3.name,
    type: "each",
    source: "(503:20) {#each decks as deck}",
    ctx
  });
  return block;
}
function create_if_block3(ctx) {
  let div;
  let t0;
  let t1_value = (
    /*studyStats*/
    ctx[12].todayCards + ""
  );
  let t1;
  let t2;
  let t3_value = formatHours(
    /*studyStats*/
    ctx[12].todayHours
  ) + "";
  let t3;
  let t4;
  let t5_value = formatPace2(
    /*studyStats*/
    ctx[12].todayPaceSeconds
  ) + "";
  let t5;
  let t6;
  const block = {
    c: function create() {
      div = element("div");
      t0 = text("Studied ");
      t1 = text(t1_value);
      t2 = text(" cards in ");
      t3 = text(t3_value);
      t4 = text(" today (");
      t5 = text(t5_value);
      t6 = text(")");
      attr_dev(div, "class", "decks-today-summary svelte-z5rqjc");
      add_location(div, file6, 615, 12, 24259);
    },
    m: function mount(target, anchor) {
      insert_dev(target, div, anchor);
      append_dev(div, t0);
      append_dev(div, t1);
      append_dev(div, t2);
      append_dev(div, t3);
      append_dev(div, t4);
      append_dev(div, t5);
      append_dev(div, t6);
    },
    p: function update2(ctx2, dirty) {
      if (dirty[0] & /*studyStats*/
      4096 && t1_value !== (t1_value = /*studyStats*/
      ctx2[12].todayCards + ""))
        set_data_dev(t1, t1_value);
      if (dirty[0] & /*studyStats*/
      4096 && t3_value !== (t3_value = formatHours(
        /*studyStats*/
        ctx2[12].todayHours
      ) + ""))
        set_data_dev(t3, t3_value);
      if (dirty[0] & /*studyStats*/
      4096 && t5_value !== (t5_value = formatPace2(
        /*studyStats*/
        ctx2[12].todayPaceSeconds
      ) + ""))
        set_data_dev(t5, t5_value);
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_if_block3.name,
    type: "if",
    source: "(615:8) {#if studyStats.todayCards > 0}",
    ctx
  });
  return block;
}
function create_fragment6(ctx) {
  let div17;
  let div1;
  let h3;
  let t1;
  let div0;
  let button0;
  let svg0;
  let path0;
  let path1;
  let path2;
  let path3;
  let t2;
  let button1;
  let svg1;
  let path4;
  let path5;
  let path6;
  let t3;
  let div4;
  let div3;
  let div2;
  let input;
  let t4;
  let show_if;
  let t5;
  let t6;
  let div5;
  let reviewheatmap;
  let t7;
  let div16;
  let t8;
  let div15;
  let div8;
  let div6;
  let t10;
  let div7;
  let t11_value = formatHours(
    /*studyStats*/
    ctx[12].totalHours
  ) + "";
  let t11;
  let t12;
  let div11;
  let div9;
  let t14;
  let div10;
  let t15_value = formatHours(
    /*studyStats*/
    ctx[12].pastMonthHours
  ) + "";
  let t15;
  let t16;
  let div14;
  let div12;
  let t18;
  let div13;
  let t19_value = formatHours(
    /*studyStats*/
    ctx[12].pastWeekHours
  ) + "";
  let t19;
  let current;
  let mounted;
  let dispose;
  function select_block_type(ctx2, dirty) {
    if (dirty[0] & /*filterText, availableTags, inputFocused*/
    656)
      show_if = null;
    if (
      /*showSuggestions*/
      ctx2[6] && /*filteredSuggestions*/
      ctx2[8].length > 0
    )
      return create_if_block_52;
    if (show_if == null)
      show_if = !!(!/*filterText*/
      ctx2[4].trim() && /*availableTags*/
      ctx2[7].length > 0 && /*inputFocused*/
      ctx2[9]);
    if (show_if)
      return create_if_block_62;
  }
  let current_block_type = select_block_type(ctx, [-1, -1, -1]);
  let if_block0 = current_block_type && current_block_type(ctx);
  function select_block_type_1(ctx2, dirty) {
    if (
      /*allDecks*/
      ctx2[3].length === 0
    )
      return create_if_block_14;
    if (
      /*decks*/
      ctx2[2].length === 0
    )
      return create_if_block_23;
    return create_else_block4;
  }
  let current_block_type_1 = select_block_type_1(ctx, [-1, -1, -1]);
  let if_block1 = current_block_type_1(ctx);
  let reviewheatmap_props = {
    getReviewCounts: (
      /*getReviewCounts*/
      ctx[0]
    )
  };
  reviewheatmap = new ReviewHeatmap_default({
    props: reviewheatmap_props,
    $$inline: true
  });
  ctx[51](reviewheatmap);
  let if_block2 = (
    /*studyStats*/
    ctx[12].todayCards > 0 && create_if_block3(ctx)
  );
  const block = {
    c: function create() {
      div17 = element("div");
      div1 = element("div");
      h3 = element("h3");
      h3.textContent = "Flashcard Decks";
      t1 = space();
      div0 = element("div");
      button0 = element("button");
      svg0 = svg_element("svg");
      path0 = svg_element("path");
      path1 = svg_element("path");
      path2 = svg_element("path");
      path3 = svg_element("path");
      t2 = space();
      button1 = element("button");
      svg1 = svg_element("svg");
      path4 = svg_element("path");
      path5 = svg_element("path");
      path6 = svg_element("path");
      t3 = space();
      div4 = element("div");
      div3 = element("div");
      div2 = element("div");
      input = element("input");
      t4 = space();
      if (if_block0)
        if_block0.c();
      t5 = space();
      if_block1.c();
      t6 = space();
      div5 = element("div");
      create_component(reviewheatmap.$$.fragment);
      t7 = space();
      div16 = element("div");
      if (if_block2)
        if_block2.c();
      t8 = space();
      div15 = element("div");
      div8 = element("div");
      div6 = element("div");
      div6.textContent = "Total";
      t10 = space();
      div7 = element("div");
      t11 = text(t11_value);
      t12 = space();
      div11 = element("div");
      div9 = element("div");
      div9.textContent = "Past Month";
      t14 = space();
      div10 = element("div");
      t15 = text(t15_value);
      t16 = space();
      div14 = element("div");
      div12 = element("div");
      div12.textContent = "Past Week";
      t18 = space();
      div13 = element("div");
      t19 = text(t19_value);
      attr_dev(h3, "class", "decks-panel-title svelte-z5rqjc");
      add_location(h3, file6, 361, 8, 11591);
      attr_dev(path0, "d", "M3 3v18h18");
      add_location(path0, file6, 380, 20, 12372);
      attr_dev(path1, "d", "M18 17V9");
      add_location(path1, file6, 381, 20, 12421);
      attr_dev(path2, "d", "M13 17V5");
      add_location(path2, file6, 382, 20, 12468);
      attr_dev(path3, "d", "M8 17v-3");
      add_location(path3, file6, 383, 20, 12515);
      attr_dev(svg0, "xmlns", "http://www.w3.org/2000/svg");
      attr_dev(svg0, "width", "14");
      attr_dev(svg0, "height", "14");
      attr_dev(svg0, "viewBox", "0 0 24 24");
      attr_dev(svg0, "fill", "none");
      attr_dev(svg0, "stroke", "currentColor");
      attr_dev(svg0, "stroke-width", "2");
      attr_dev(svg0, "stroke-linecap", "round");
      attr_dev(svg0, "stroke-linejoin", "round");
      add_location(svg0, file6, 369, 16, 11973);
      attr_dev(button0, "class", "decks-stats-button svelte-z5rqjc");
      attr_dev(button0, "title", "View Overall Statistics");
      add_location(button0, file6, 363, 12, 11697);
      attr_dev(path4, "d", "M23 4v6h-6");
      add_location(path4, file6, 404, 20, 13310);
      attr_dev(path5, "d", "M1 20v-6h6");
      add_location(path5, file6, 405, 20, 13359);
      attr_dev(path6, "d", "M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15");
      add_location(path6, file6, 406, 20, 13408);
      attr_dev(svg1, "xmlns", "http://www.w3.org/2000/svg");
      attr_dev(svg1, "width", "14");
      attr_dev(svg1, "height", "14");
      attr_dev(svg1, "viewBox", "0 0 24 24");
      attr_dev(svg1, "fill", "none");
      attr_dev(svg1, "stroke", "currentColor");
      attr_dev(svg1, "stroke-width", "2");
      attr_dev(svg1, "stroke-linecap", "round");
      attr_dev(svg1, "stroke-linejoin", "round");
      attr_dev(svg1, "class", "svelte-z5rqjc");
      add_location(svg1, file6, 393, 16, 12911);
      attr_dev(button1, "class", "decks-refresh-button svelte-z5rqjc");
      button1.disabled = /*isRefreshing*/
      ctx[10];
      toggle_class(
        button1,
        "refreshing",
        /*isRefreshing*/
        ctx[10]
      );
      add_location(button1, file6, 386, 12, 12599);
      attr_dev(div0, "class", "decks-header-buttons svelte-z5rqjc");
      add_location(div0, file6, 362, 8, 11650);
      attr_dev(div1, "class", "decks-panel-header svelte-z5rqjc");
      add_location(div1, file6, 360, 4, 11550);
      attr_dev(input, "type", "text");
      attr_dev(input, "class", "decks-filter-input svelte-z5rqjc");
      attr_dev(input, "placeholder", "Filter by name or tag... (e.g., 'spanish', '#flashcards')");
      add_location(input, file6, 417, 16, 13757);
      attr_dev(div2, "class", "decks-filter-container svelte-z5rqjc");
      add_location(div2, file6, 416, 12, 13704);
      attr_dev(div3, "class", "decks-filter-section svelte-z5rqjc");
      add_location(div3, file6, 415, 8, 13657);
      attr_dev(div4, "class", "decks-deck-content svelte-z5rqjc");
      add_location(div4, file6, 414, 4, 13616);
      attr_dev(div5, "class", "decks-heatmap-section svelte-z5rqjc");
      add_location(div5, file6, 609, 4, 24042);
      attr_dev(div6, "class", "decks-stat-label svelte-z5rqjc");
      add_location(div6, file6, 624, 16, 24607);
      attr_dev(div7, "class", "decks-stat-value svelte-z5rqjc");
      add_location(div7, file6, 625, 16, 24665);
      attr_dev(div8, "class", "decks-stat-item svelte-z5rqjc");
      add_location(div8, file6, 623, 12, 24561);
      attr_dev(div9, "class", "decks-stat-label svelte-z5rqjc");
      add_location(div9, file6, 630, 16, 24853);
      attr_dev(div10, "class", "decks-stat-value svelte-z5rqjc");
      add_location(div10, file6, 631, 16, 24916);
      attr_dev(div11, "class", "decks-stat-item svelte-z5rqjc");
      add_location(div11, file6, 629, 12, 24807);
      attr_dev(div12, "class", "decks-stat-label svelte-z5rqjc");
      add_location(div12, file6, 636, 16, 25108);
      attr_dev(div13, "class", "decks-stat-value svelte-z5rqjc");
      add_location(div13, file6, 637, 16, 25170);
      attr_dev(div14, "class", "decks-stat-item svelte-z5rqjc");
      add_location(div14, file6, 635, 12, 25062);
      attr_dev(div15, "class", "decks-stats-grid svelte-z5rqjc");
      add_location(div15, file6, 622, 8, 24518);
      attr_dev(div16, "class", "decks-study-stats-section svelte-z5rqjc");
      add_location(div16, file6, 613, 4, 24167);
      attr_dev(div17, "class", "decks-deck-list-panel svelte-z5rqjc");
      add_location(div17, file6, 359, 0, 11510);
    },
    l: function claim(nodes) {
      throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
    },
    m: function mount(target, anchor) {
      insert_dev(target, div17, anchor);
      append_dev(div17, div1);
      append_dev(div1, h3);
      append_dev(div1, t1);
      append_dev(div1, div0);
      append_dev(div0, button0);
      append_dev(button0, svg0);
      append_dev(svg0, path0);
      append_dev(svg0, path1);
      append_dev(svg0, path2);
      append_dev(svg0, path3);
      append_dev(div0, t2);
      append_dev(div0, button1);
      append_dev(button1, svg1);
      append_dev(svg1, path4);
      append_dev(svg1, path5);
      append_dev(svg1, path6);
      append_dev(div17, t3);
      append_dev(div17, div4);
      append_dev(div4, div3);
      append_dev(div3, div2);
      append_dev(div2, input);
      set_input_value(
        input,
        /*filterText*/
        ctx[4]
      );
      append_dev(div2, t4);
      if (if_block0)
        if_block0.m(div2, null);
      append_dev(div4, t5);
      if_block1.m(div4, null);
      append_dev(div17, t6);
      append_dev(div17, div5);
      mount_component(reviewheatmap, div5, null);
      append_dev(div17, t7);
      append_dev(div17, div16);
      if (if_block2)
        if_block2.m(div16, null);
      append_dev(div16, t8);
      append_dev(div16, div15);
      append_dev(div15, div8);
      append_dev(div8, div6);
      append_dev(div8, t10);
      append_dev(div8, div7);
      append_dev(div7, t11);
      append_dev(div15, t12);
      append_dev(div15, div11);
      append_dev(div11, div9);
      append_dev(div11, t14);
      append_dev(div11, div10);
      append_dev(div10, t15);
      append_dev(div15, t16);
      append_dev(div15, div14);
      append_dev(div14, div12);
      append_dev(div14, t18);
      append_dev(div14, div13);
      append_dev(div13, t19);
      current = true;
      if (!mounted) {
        dispose = [
          listen_dev(
            button0,
            "click",
            /*click_handler*/
            ctx[35],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button0,
            "touchend",
            /*touchend_handler*/
            ctx[36],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button1,
            "click",
            /*click_handler_1*/
            ctx[37],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            button1,
            "touchend",
            /*touchend_handler_1*/
            ctx[38],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            input,
            "input",
            /*input_input_handler*/
            ctx[39]
          ),
          listen_dev(
            input,
            "input",
            /*handleFilterInput*/
            ctx[16],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            input,
            "focus",
            /*handleFilterFocus*/
            ctx[18],
            false,
            false,
            false,
            false
          ),
          listen_dev(
            input,
            "blur",
            /*handleFilterBlur*/
            ctx[19],
            false,
            false,
            false,
            false
          )
        ];
        mounted = true;
      }
    },
    p: function update2(ctx2, dirty) {
      if (!current || dirty[0] & /*isRefreshing*/
      1024) {
        prop_dev(
          button1,
          "disabled",
          /*isRefreshing*/
          ctx2[10]
        );
      }
      if (!current || dirty[0] & /*isRefreshing*/
      1024) {
        toggle_class(
          button1,
          "refreshing",
          /*isRefreshing*/
          ctx2[10]
        );
      }
      if (dirty[0] & /*filterText*/
      16 && input.value !== /*filterText*/
      ctx2[4]) {
        set_input_value(
          input,
          /*filterText*/
          ctx2[4]
        );
      }
      if (current_block_type === (current_block_type = select_block_type(ctx2, dirty)) && if_block0) {
        if_block0.p(ctx2, dirty);
      } else {
        if (if_block0)
          if_block0.d(1);
        if_block0 = current_block_type && current_block_type(ctx2);
        if (if_block0) {
          if_block0.c();
          if_block0.m(div2, null);
        }
      }
      if (current_block_type_1 === (current_block_type_1 = select_block_type_1(ctx2, dirty)) && if_block1) {
        if_block1.p(ctx2, dirty);
      } else {
        if_block1.d(1);
        if_block1 = current_block_type_1(ctx2);
        if (if_block1) {
          if_block1.c();
          if_block1.m(div4, null);
        }
      }
      const reviewheatmap_changes = {};
      if (dirty[0] & /*getReviewCounts*/
      1)
        reviewheatmap_changes.getReviewCounts = /*getReviewCounts*/
        ctx2[0];
      reviewheatmap.$set(reviewheatmap_changes);
      if (
        /*studyStats*/
        ctx2[12].todayCards > 0
      ) {
        if (if_block2) {
          if_block2.p(ctx2, dirty);
        } else {
          if_block2 = create_if_block3(ctx2);
          if_block2.c();
          if_block2.m(div16, t8);
        }
      } else if (if_block2) {
        if_block2.d(1);
        if_block2 = null;
      }
      if ((!current || dirty[0] & /*studyStats*/
      4096) && t11_value !== (t11_value = formatHours(
        /*studyStats*/
        ctx2[12].totalHours
      ) + ""))
        set_data_dev(t11, t11_value);
      if ((!current || dirty[0] & /*studyStats*/
      4096) && t15_value !== (t15_value = formatHours(
        /*studyStats*/
        ctx2[12].pastMonthHours
      ) + ""))
        set_data_dev(t15, t15_value);
      if ((!current || dirty[0] & /*studyStats*/
      4096) && t19_value !== (t19_value = formatHours(
        /*studyStats*/
        ctx2[12].pastWeekHours
      ) + ""))
        set_data_dev(t19, t19_value);
    },
    i: function intro(local) {
      if (current)
        return;
      transition_in(reviewheatmap.$$.fragment, local);
      current = true;
    },
    o: function outro(local) {
      transition_out(reviewheatmap.$$.fragment, local);
      current = false;
    },
    d: function destroy(detaching) {
      if (detaching)
        detach_dev(div17);
      if (if_block0) {
        if_block0.d();
      }
      if_block1.d();
      ctx[51](null);
      destroy_component(reviewheatmap);
      if (if_block2)
        if_block2.d();
      mounted = false;
      run_all(dispose);
    }
  };
  dispatch_dev("SvelteRegisterBlock", {
    block,
    id: create_fragment6.name,
    type: "component",
    source: "",
    ctx
  });
  return block;
}
function formatDeckName(deck) {
  return deck.name;
}
function formatHours(hours) {
  return hours.toFixed(2) + " hrs";
}
function formatPace2(seconds) {
  return seconds.toFixed(2) + "s/card";
}
function instance6($$self, $$props, $$invalidate) {
  let { $$slots: slots = {}, $$scope } = $$props;
  validate_slots("DeckListPanel", slots, []);
  let decks = [];
  let allDecks = [];
  let stats = /* @__PURE__ */ new Map();
  let filterText = "";
  let heatmapComponent;
  let showSuggestions = false;
  let availableTags = [];
  let filteredSuggestions = [];
  let inputFocused = false;
  let activeDropdown = null;
  let activeDropdownDeckId = null;
  let dropdownEventListeners = {};
  let { onDeckClick } = $$props;
  let { onRefresh } = $$props;
  let { onForceRefreshDeck } = $$props;
  let { getReviewCounts } = $$props;
  let { onOpenStatistics } = $$props;
  let { getStudyStats = null } = $$props;
  let { getDatabase } = $$props;
  let { getDeckSynchronizer } = $$props;
  let { plugin = null } = $$props;
  let isRefreshing = false;
  let isUpdatingStats = false;
  let studyStats = {
    totalHours: 0,
    pastMonthHours: 0,
    pastWeekHours: 0,
    todayCards: 0,
    todayHours: 0,
    todayPaceSeconds: 0
  };
  let lastEventTime = 0;
  let lastEventType = "";
  function getDeckStats(deckId) {
    var _a;
    return (_a = stats.get(deckId)) !== null && _a !== void 0 ? _a : {
      deckId,
      newCount: 0,
      dueCount: 0,
      totalCount: 0
    };
  }
  function handleRefresh() {
    return __awaiter(this, void 0, void 0, function* () {
      $$invalidate(10, isRefreshing = true);
      try {
        onRefresh();
        refreshHeatmap();
        yield loadStudyStats();
      } catch (error) {
        console.error("Error during refresh:", error);
      } finally {
        $$invalidate(10, isRefreshing = false);
      }
    });
  }
  function handleForceRefreshDeck(deck) {
    return __awaiter(this, void 0, void 0, function* () {
      $$invalidate(10, isRefreshing = true);
      try {
        yield onForceRefreshDeck(deck.id);
        refreshHeatmap();
        yield loadStudyStats();
      } catch (error) {
        console.error("Error during deck force refresh:", error);
      } finally {
        $$invalidate(10, isRefreshing = false);
      }
    });
  }
  function updateStatsById(deckId, newStats) {
    $$invalidate(11, isUpdatingStats = true);
    stats.set(deckId, newStats);
    $$invalidate(2, decks);
    loadStudyStats().catch(console.error);
    $$invalidate(11, isUpdatingStats = false);
  }
  function updateStats(newStats) {
    $$invalidate(11, isUpdatingStats = true);
    $$invalidate(13, stats = newStats);
    $$invalidate(2, decks);
    $$invalidate(11, isUpdatingStats = false);
  }
  function updateDecks(newDecks) {
    $$invalidate(3, allDecks = newDecks);
    $$invalidate(7, availableTags = [...new Set(newDecks.map((deck) => deck.tag))].filter((tag) => tag));
    applyFilter();
  }
  function applyFilter() {
    if (!filterText.trim()) {
      $$invalidate(2, decks = allDecks);
    } else {
      const filter = filterText.toLowerCase();
      $$invalidate(2, decks = allDecks.filter((deck) => deck.name.toLowerCase().includes(filter) || deck.tag.toLowerCase().includes(filter)));
    }
  }
  function handleFilterInput(event) {
    const target = event.target;
    $$invalidate(4, filterText = target.value);
    updateSuggestions();
    applyFilter();
  }
  function updateSuggestions() {
    if (!filterText.trim()) {
      $$invalidate(6, showSuggestions = false);
      return;
    }
    const filter = filterText.toLowerCase();
    $$invalidate(8, filteredSuggestions = availableTags.filter((tag) => tag.toLowerCase().includes(filter) && tag.toLowerCase() !== filter));
    $$invalidate(6, showSuggestions = filteredSuggestions.length > 0);
  }
  function selectSuggestion(tag) {
    $$invalidate(4, filterText = tag);
    $$invalidate(6, showSuggestions = false);
    applyFilter();
  }
  function handleFilterFocus() {
    $$invalidate(9, inputFocused = true);
    if (filterText.trim()) {
      updateSuggestions();
    } else if (availableTags.length > 0) {
      $$invalidate(6, showSuggestions = true);
    }
  }
  function handleFilterBlur() {
    $$invalidate(9, inputFocused = false);
    setTimeout(
      () => {
        $$invalidate(6, showSuggestions = false);
      },
      200
    );
  }
  function handleDeckClick(deck) {
    onDeckClick(deck);
  }
  function refreshHeatmap() {
    if (heatmapComponent) {
      heatmapComponent.refresh();
    }
  }
  function loadStudyStats() {
    return __awaiter(this, void 0, void 0, function* () {
      if (getStudyStats) {
        $$invalidate(12, studyStats = yield getStudyStats());
      }
    });
  }
  function updateAll(newDecks, newStats, singleDeckId, singleDeckStats) {
    return __awaiter(this, void 0, void 0, function* () {
      if (newDecks) {
        updateDecks(newDecks);
      }
      if (newStats) {
        updateStats(newStats);
      }
      if (singleDeckId && singleDeckStats) {
        updateStatsById(singleDeckId, singleDeckStats);
      }
      refreshHeatmap();
      yield loadStudyStats();
    });
  }
  onMount(() => {
    loadStudyStats();
  });
  function handleConfigClick(deck, event) {
    event.stopPropagation();
    if (activeDropdown && activeDropdownDeckId === deck.id) {
      closeActiveDropdown();
      return;
    }
    closeActiveDropdown();
    const dropdown = document.createElement("div");
    dropdown.className = "decks-deck-config-dropdown";
    const configOption = document.createElement("div");
    configOption.className = "decks-dropdown-option";
    configOption.textContent = "Configure deck";
    configOption.onclick = () => {
      closeActiveDropdown();
      openDeckConfig(deck);
    };
    const forceRefreshOption = document.createElement("div");
    forceRefreshOption.className = "decks-dropdown-option";
    forceRefreshOption.textContent = "Force refresh";
    forceRefreshOption.onclick = () => {
      closeActiveDropdown();
      handleForceRefreshDeck(deck);
    };
    const exportOption = document.createElement("div");
    exportOption.className = "decks-dropdown-option";
    exportOption.textContent = "Export to Anki";
    exportOption.onclick = () => {
      closeActiveDropdown();
      openAnkiExport(deck);
    };
    dropdown.appendChild(configOption);
    dropdown.appendChild(forceRefreshOption);
    dropdown.appendChild(exportOption);
    const button = event.target;
    const rect = button.getBoundingClientRect();
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;
    dropdown.style.position = "fixed";
    dropdown.style.zIndex = "1000";
    dropdown.style.visibility = "hidden";
    document.body.appendChild(dropdown);
    const dropdownRect = dropdown.getBoundingClientRect();
    let top = rect.bottom + 5;
    let left = rect.left;
    if (top + dropdownRect.height > viewportHeight - 10) {
      top = rect.top - dropdownRect.height - 5;
    }
    if (left + dropdownRect.width > viewportWidth - 10) {
      left = viewportWidth - dropdownRect.width - 10;
    }
    top = Math.max(10, top);
    left = Math.max(10, left);
    dropdown.style.top = `${top}px`;
    dropdown.style.left = `${left}px`;
    dropdown.style.visibility = "visible";
    activeDropdown = dropdown;
    activeDropdownDeckId = deck.id;
    dropdownEventListeners.click = (e) => {
      if (!dropdown.contains(e.target)) {
        closeActiveDropdown();
      }
    };
    dropdownEventListeners.scroll = closeActiveDropdown;
    dropdownEventListeners.resize = closeActiveDropdown;
    setTimeout(
      () => {
        if (dropdownEventListeners.click) {
          document.addEventListener("click", dropdownEventListeners.click);
        }
        if (dropdownEventListeners.scroll) {
          window.addEventListener("scroll", dropdownEventListeners.scroll, true);
        }
        if (dropdownEventListeners.resize) {
          window.addEventListener("resize", dropdownEventListeners.resize);
        }
      },
      0
    );
  }
  function closeActiveDropdown() {
    if (activeDropdown) {
      activeDropdown.remove();
      activeDropdown = null;
      activeDropdownDeckId = null;
      if (dropdownEventListeners.click) {
        document.removeEventListener("click", dropdownEventListeners.click);
      }
      if (dropdownEventListeners.scroll) {
        window.removeEventListener("scroll", dropdownEventListeners.scroll, true);
      }
      if (dropdownEventListeners.resize) {
        window.removeEventListener("resize", dropdownEventListeners.resize);
      }
      dropdownEventListeners = {};
    }
  }
  onDestroy(() => {
    closeActiveDropdown();
  });
  function openDeckConfig(deck) {
    const modal = new DeckConfigModal(
      plugin.app,
      deck,
      getDatabase(),
      getDeckSynchronizer(),
      (deckId) => __awaiter(this, void 0, void 0, function* () {
        yield onForceRefreshDeck(deckId);
        const updatedDecks = yield getDatabase().getAllDecks();
        const updatedDeck = updatedDecks.find((d) => d.id === deckId);
        if (updatedDeck) {
          const deckIndex = allDecks.findIndex((d) => d.id === deckId);
          if (deckIndex !== -1) {
            $$invalidate(3, allDecks[deckIndex] = updatedDeck, allDecks);
            $$invalidate(3, allDecks = [...allDecks]);
          }
        }
      })
    );
    modal.open();
  }
  function openAnkiExport(deck) {
    if (!plugin) {
      console.warn("Plugin not available for Anki export");
      return;
    }
    const modal = new AnkiExportModal(plugin.app, deck, getDatabase());
    modal.open();
  }
  function handleTouchClick(callback, event) {
    const now = Date.now();
    const eventType = event.type;
    if (now - lastEventTime < 100 && lastEventType !== eventType) {
      return;
    }
    lastEventTime = now;
    lastEventType = eventType;
    callback();
  }
  onMount(() => {
  });
  $$self.$$.on_mount.push(function() {
    if (onDeckClick === void 0 && !("onDeckClick" in $$props || $$self.$$.bound[$$self.$$.props["onDeckClick"]])) {
      console_14.warn("<DeckListPanel> was created without expected prop 'onDeckClick'");
    }
    if (onRefresh === void 0 && !("onRefresh" in $$props || $$self.$$.bound[$$self.$$.props["onRefresh"]])) {
      console_14.warn("<DeckListPanel> was created without expected prop 'onRefresh'");
    }
    if (onForceRefreshDeck === void 0 && !("onForceRefreshDeck" in $$props || $$self.$$.bound[$$self.$$.props["onForceRefreshDeck"]])) {
      console_14.warn("<DeckListPanel> was created without expected prop 'onForceRefreshDeck'");
    }
    if (getReviewCounts === void 0 && !("getReviewCounts" in $$props || $$self.$$.bound[$$self.$$.props["getReviewCounts"]])) {
      console_14.warn("<DeckListPanel> was created without expected prop 'getReviewCounts'");
    }
    if (onOpenStatistics === void 0 && !("onOpenStatistics" in $$props || $$self.$$.bound[$$self.$$.props["onOpenStatistics"]])) {
      console_14.warn("<DeckListPanel> was created without expected prop 'onOpenStatistics'");
    }
    if (getDatabase === void 0 && !("getDatabase" in $$props || $$self.$$.bound[$$self.$$.props["getDatabase"]])) {
      console_14.warn("<DeckListPanel> was created without expected prop 'getDatabase'");
    }
    if (getDeckSynchronizer === void 0 && !("getDeckSynchronizer" in $$props || $$self.$$.bound[$$self.$$.props["getDeckSynchronizer"]])) {
      console_14.warn("<DeckListPanel> was created without expected prop 'getDeckSynchronizer'");
    }
  });
  const writable_props = [
    "onDeckClick",
    "onRefresh",
    "onForceRefreshDeck",
    "getReviewCounts",
    "onOpenStatistics",
    "getStudyStats",
    "getDatabase",
    "getDeckSynchronizer",
    "plugin"
  ];
  Object.keys($$props).forEach((key) => {
    if (!~writable_props.indexOf(key) && key.slice(0, 2) !== "$$" && key !== "slot")
      console_14.warn(`<DeckListPanel> was created with unknown prop '${key}'`);
  });
  const click_handler = (e) => handleTouchClick(onOpenStatistics, e);
  const touchend_handler = (e) => handleTouchClick(onOpenStatistics, e);
  const click_handler_1 = (e) => handleTouchClick(handleRefresh, e);
  const touchend_handler_1 = (e) => handleTouchClick(handleRefresh, e);
  function input_input_handler() {
    filterText = this.value;
    $$invalidate(4, filterText);
  }
  const mousedown_handler = (tag) => selectSuggestion(tag);
  const click_handler_2 = (tag, e) => handleTouchClick(() => selectSuggestion(tag), e);
  const touchend_handler_2 = (tag, e) => handleTouchClick(() => selectSuggestion(tag), e);
  const mousedown_handler_1 = (tag) => selectSuggestion(tag);
  const click_handler_3 = (tag, e) => handleTouchClick(() => selectSuggestion(tag), e);
  const touchend_handler_3 = (tag, e) => handleTouchClick(() => selectSuggestion(tag), e);
  const click_handler_4 = (deck, e) => handleTouchClick(() => handleDeckClick(deck), e);
  const touchend_handler_4 = (deck, e) => handleTouchClick(() => handleDeckClick(deck), e);
  const keydown_handler = (deck, e) => e.key === "Enter" && handleDeckClick(deck);
  const click_handler_5 = (deck, e) => handleTouchClick(() => handleConfigClick(deck, e), e);
  const touchend_handler_5 = (deck, e) => handleTouchClick(() => handleConfigClick(deck, e), e);
  function reviewheatmap_binding($$value) {
    binding_callbacks[$$value ? "unshift" : "push"](() => {
      heatmapComponent = $$value;
      $$invalidate(5, heatmapComponent);
    });
  }
  $$self.$$set = ($$props2) => {
    if ("onDeckClick" in $$props2)
      $$invalidate(23, onDeckClick = $$props2.onDeckClick);
    if ("onRefresh" in $$props2)
      $$invalidate(24, onRefresh = $$props2.onRefresh);
    if ("onForceRefreshDeck" in $$props2)
      $$invalidate(25, onForceRefreshDeck = $$props2.onForceRefreshDeck);
    if ("getReviewCounts" in $$props2)
      $$invalidate(0, getReviewCounts = $$props2.getReviewCounts);
    if ("onOpenStatistics" in $$props2)
      $$invalidate(1, onOpenStatistics = $$props2.onOpenStatistics);
    if ("getStudyStats" in $$props2)
      $$invalidate(26, getStudyStats = $$props2.getStudyStats);
    if ("getDatabase" in $$props2)
      $$invalidate(27, getDatabase = $$props2.getDatabase);
    if ("getDeckSynchronizer" in $$props2)
      $$invalidate(28, getDeckSynchronizer = $$props2.getDeckSynchronizer);
    if ("plugin" in $$props2)
      $$invalidate(29, plugin = $$props2.plugin);
  };
  $$self.$capture_state = () => ({
    __awaiter,
    onMount,
    onDestroy,
    ReviewHeatmap: ReviewHeatmap_default,
    DeckConfigModal,
    AnkiExportModal,
    decks,
    allDecks,
    stats,
    filterText,
    heatmapComponent,
    showSuggestions,
    availableTags,
    filteredSuggestions,
    inputFocused,
    activeDropdown,
    activeDropdownDeckId,
    dropdownEventListeners,
    onDeckClick,
    onRefresh,
    onForceRefreshDeck,
    getReviewCounts,
    onOpenStatistics,
    getStudyStats,
    getDatabase,
    getDeckSynchronizer,
    plugin,
    isRefreshing,
    isUpdatingStats,
    studyStats,
    lastEventTime,
    lastEventType,
    getDeckStats,
    formatDeckName,
    handleRefresh,
    handleForceRefreshDeck,
    updateStatsById,
    updateStats,
    updateDecks,
    applyFilter,
    handleFilterInput,
    updateSuggestions,
    selectSuggestion,
    handleFilterFocus,
    handleFilterBlur,
    handleDeckClick,
    refreshHeatmap,
    loadStudyStats,
    formatHours,
    formatPace: formatPace2,
    updateAll,
    handleConfigClick,
    closeActiveDropdown,
    openDeckConfig,
    openAnkiExport,
    handleTouchClick
  });
  $$self.$inject_state = ($$props2) => {
    if ("decks" in $$props2)
      $$invalidate(2, decks = $$props2.decks);
    if ("allDecks" in $$props2)
      $$invalidate(3, allDecks = $$props2.allDecks);
    if ("stats" in $$props2)
      $$invalidate(13, stats = $$props2.stats);
    if ("filterText" in $$props2)
      $$invalidate(4, filterText = $$props2.filterText);
    if ("heatmapComponent" in $$props2)
      $$invalidate(5, heatmapComponent = $$props2.heatmapComponent);
    if ("showSuggestions" in $$props2)
      $$invalidate(6, showSuggestions = $$props2.showSuggestions);
    if ("availableTags" in $$props2)
      $$invalidate(7, availableTags = $$props2.availableTags);
    if ("filteredSuggestions" in $$props2)
      $$invalidate(8, filteredSuggestions = $$props2.filteredSuggestions);
    if ("inputFocused" in $$props2)
      $$invalidate(9, inputFocused = $$props2.inputFocused);
    if ("activeDropdown" in $$props2)
      activeDropdown = $$props2.activeDropdown;
    if ("activeDropdownDeckId" in $$props2)
      activeDropdownDeckId = $$props2.activeDropdownDeckId;
    if ("dropdownEventListeners" in $$props2)
      dropdownEventListeners = $$props2.dropdownEventListeners;
    if ("onDeckClick" in $$props2)
      $$invalidate(23, onDeckClick = $$props2.onDeckClick);
    if ("onRefresh" in $$props2)
      $$invalidate(24, onRefresh = $$props2.onRefresh);
    if ("onForceRefreshDeck" in $$props2)
      $$invalidate(25, onForceRefreshDeck = $$props2.onForceRefreshDeck);
    if ("getReviewCounts" in $$props2)
      $$invalidate(0, getReviewCounts = $$props2.getReviewCounts);
    if ("onOpenStatistics" in $$props2)
      $$invalidate(1, onOpenStatistics = $$props2.onOpenStatistics);
    if ("getStudyStats" in $$props2)
      $$invalidate(26, getStudyStats = $$props2.getStudyStats);
    if ("getDatabase" in $$props2)
      $$invalidate(27, getDatabase = $$props2.getDatabase);
    if ("getDeckSynchronizer" in $$props2)
      $$invalidate(28, getDeckSynchronizer = $$props2.getDeckSynchronizer);
    if ("plugin" in $$props2)
      $$invalidate(29, plugin = $$props2.plugin);
    if ("isRefreshing" in $$props2)
      $$invalidate(10, isRefreshing = $$props2.isRefreshing);
    if ("isUpdatingStats" in $$props2)
      $$invalidate(11, isUpdatingStats = $$props2.isUpdatingStats);
    if ("studyStats" in $$props2)
      $$invalidate(12, studyStats = $$props2.studyStats);
    if ("lastEventTime" in $$props2)
      lastEventTime = $$props2.lastEventTime;
    if ("lastEventType" in $$props2)
      lastEventType = $$props2.lastEventType;
  };
  if ($$props && "$$inject" in $$props) {
    $$self.$inject_state($$props.$$inject);
  }
  return [
    getReviewCounts,
    onOpenStatistics,
    decks,
    allDecks,
    filterText,
    heatmapComponent,
    showSuggestions,
    availableTags,
    filteredSuggestions,
    inputFocused,
    isRefreshing,
    isUpdatingStats,
    studyStats,
    stats,
    getDeckStats,
    handleRefresh,
    handleFilterInput,
    selectSuggestion,
    handleFilterFocus,
    handleFilterBlur,
    handleDeckClick,
    handleConfigClick,
    handleTouchClick,
    onDeckClick,
    onRefresh,
    onForceRefreshDeck,
    getStudyStats,
    getDatabase,
    getDeckSynchronizer,
    plugin,
    updateStatsById,
    updateStats,
    updateDecks,
    refreshHeatmap,
    updateAll,
    click_handler,
    touchend_handler,
    click_handler_1,
    touchend_handler_1,
    input_input_handler,
    mousedown_handler,
    click_handler_2,
    touchend_handler_2,
    mousedown_handler_1,
    click_handler_3,
    touchend_handler_3,
    click_handler_4,
    touchend_handler_4,
    keydown_handler,
    click_handler_5,
    touchend_handler_5,
    reviewheatmap_binding
  ];
}
var DeckListPanel = class extends SvelteComponentDev {
  constructor(options) {
    super(options);
    init(
      this,
      options,
      instance6,
      create_fragment6,
      safe_not_equal,
      {
        onDeckClick: 23,
        onRefresh: 24,
        onForceRefreshDeck: 25,
        getReviewCounts: 0,
        onOpenStatistics: 1,
        getStudyStats: 26,
        getDatabase: 27,
        getDeckSynchronizer: 28,
        plugin: 29,
        updateStatsById: 30,
        updateStats: 31,
        updateDecks: 32,
        refreshHeatmap: 33,
        updateAll: 34
      },
      null,
      [-1, -1, -1]
    );
    dispatch_dev("SvelteRegisterComponent", {
      component: this,
      tagName: "DeckListPanel",
      options,
      id: create_fragment6.name
    });
  }
  get onDeckClick() {
    throw new Error("<DeckListPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set onDeckClick(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get onRefresh() {
    throw new Error("<DeckListPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set onRefresh(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get onForceRefreshDeck() {
    throw new Error("<DeckListPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set onForceRefreshDeck(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get getReviewCounts() {
    throw new Error("<DeckListPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set getReviewCounts(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get onOpenStatistics() {
    throw new Error("<DeckListPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set onOpenStatistics(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get getStudyStats() {
    throw new Error("<DeckListPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set getStudyStats(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get getDatabase() {
    throw new Error("<DeckListPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set getDatabase(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get getDeckSynchronizer() {
    throw new Error("<DeckListPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set getDeckSynchronizer(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get plugin() {
    throw new Error("<DeckListPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  set plugin(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get updateStatsById() {
    return this.$$.ctx[30];
  }
  set updateStatsById(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get updateStats() {
    return this.$$.ctx[31];
  }
  set updateStats(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get updateDecks() {
    return this.$$.ctx[32];
  }
  set updateDecks(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get refreshHeatmap() {
    return this.$$.ctx[33];
  }
  set refreshHeatmap(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
  get updateAll() {
    return this.$$.ctx[34];
  }
  set updateAll(value) {
    throw new Error("<DeckListPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
  }
};
var DeckListPanel_default = DeckListPanel;

// src/components/DecksView.ts
var DecksView = class extends import_obsidian11.ItemView {
  constructor(leaf, database, deckSynchronizer, scheduler, settings, progressTracker, logger, setViewReference) {
    super(leaf);
    this.hasShownInitialProgress = false;
    this.component = null;
    this.markdownComponents = [];
    this.statsRefreshTimeout = null;
    this.backgroundRefreshInterval = null;
    this.db = database;
    this.deckSynchronizer = deckSynchronizer;
    this.scheduler = scheduler;
    this.settings = settings;
    this.logger = logger;
    this.progressTracker = progressTracker;
    this.setViewReference = setViewReference;
    this.setViewReference(this);
  }
  getViewType() {
    return VIEW_TYPE_DECKS;
  }
  getDisplayText() {
    return "Decks";
  }
  getIcon() {
    return "brain";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("decks-view");
    this.component = new DeckListPanel_default({
      target: container,
      props: {
        onDeckClick: (deck) => this.startReview(deck),
        onRefresh: async () => {
          this.logger.debug("onRefresh callback invoked");
          await this.refresh(false);
        },
        onForceRefreshDeck: async (deckId) => {
          this.logger.debug(
            "onForceRefreshDeck callback invoked for deck:",
            deckId
          );
          const deck = await this.db.getDeckById(deckId);
          const deckDisplayName = deck ? deck.name : deckId;
          this.progressTracker.show(
            `\u{1F504} Force refreshing deck: ${deckDisplayName}...`
          );
          try {
            await this.deckSynchronizer.syncDeck(deckId, true, (progress) => {
              this.progressTracker.update(
                progress.message,
                progress.percentage
              );
              if (progress.percentage === 100) {
                setTimeout(() => this.progressTracker.hide(), 2e3);
              }
            });
            await this.refreshStats();
          } catch (error) {
            this.progressTracker.update(
              "\u274C Deck refresh failed - check console for details",
              0
            );
            setTimeout(() => this.progressTracker.hide(), 3e3);
            throw error;
          }
        },
        getReviewCounts: async (days) => {
          return await this.db.getReviewCountsByDate(days);
        },
        getStudyStats: async () => {
          return await this.db.getStudyStats();
        },
        onOpenStatistics: () => {
          this.openStatisticsModal();
        },
        getDatabase: () => {
          return this.db;
        },
        getDeckSynchronizer: () => {
          return this.deckSynchronizer;
        },
        plugin: { app: this.app }
      }
    });
    if (this.settings.ui.enableBackgroundRefresh) {
      this.startBackgroundRefresh();
    }
  }
  async onClose() {
    if (this.component) {
      this.component.$destroy();
      this.component = null;
    }
    if (this.statsRefreshTimeout) {
      clearTimeout(this.statsRefreshTimeout);
      this.statsRefreshTimeout = null;
    }
    this.stopBackgroundRefresh();
    this.markdownComponents.forEach((comp) => comp.unload());
    this.markdownComponents = [];
    this.setViewReference(null);
  }
  async update(updatedDecks, deckStats) {
    var _a;
    await ((_a = this.component) == null ? void 0 : _a.updateAll(updatedDecks, deckStats));
  }
  async getAllDeckStatsMap() {
    const stats = await this.db.getAllDeckStats();
    const statsMap = /* @__PURE__ */ new Map();
    for (const stat of stats) {
      statsMap.set(stat.deckId, stat);
    }
    return statsMap;
  }
  async performSync(forceSync = false) {
    const result = await this.deckSynchronizer.performSync({
      forceSync,
      showProgress: true,
      onProgress: (progress) => {
        this.logger.debug(
          `Progress: ${progress.percentage}% - ${progress.message}`
        );
        if (!this.hasShownInitialProgress) {
          const message = forceSync ? "\u{1F504} Force refreshing flashcards..." : "\u{1F504} Syncing flashcards...";
          this.logger.debug(`Showing initial progress notice: ${message}`);
          this.progressTracker.show(message);
          this.hasShownInitialProgress = true;
        }
        this.progressTracker.update(progress.message, progress.percentage);
        if (progress.percentage === 100) {
          this.logger.debug("Sync complete, hiding progress notice");
          this.hasShownInitialProgress = false;
          setTimeout(() => this.progressTracker.hide(), 3e3);
        }
      }
    });
    if (!result.success && result.error) {
      this.progressTracker.update(
        "\u274C Sync failed - check console for details",
        0
      );
      this.hasShownInitialProgress = false;
      setTimeout(() => this.progressTracker.hide(), 5e3);
      throw result.error;
    }
  }
  openStatisticsModal(deckFilter) {
    new StatisticsModal(this.app, this.db, deckFilter).open();
  }
  async refresh(force = false) {
    var _a, _b;
    this.logger.debug("DecksView.refresh() called");
    try {
      await this.performSync(force);
      const updatedDecks = await this.db.getAllDecks();
      const deckStats = await this.getAllDeckStatsMap();
      this.update(updatedDecks, deckStats);
      this.logger.debug("Refresh complete");
    } catch (error) {
      console.error("Error refreshing decks:", error);
      if (((_b = (_a = this.settings) == null ? void 0 : _a.ui) == null ? void 0 : _b.enableNotices) !== false) {
        new import_obsidian11.Notice("Error refreshing decks. Check console for details.");
      }
    }
  }
  async refreshStats() {
    this.logger.debug("DecksView.refreshStats() executing");
    try {
      const deckStats = await this.getAllDeckStatsMap();
      this.logger.debug("Updated deck stats:", deckStats);
      if (this.component) {
        await this.component.updateAll(void 0, deckStats);
      }
    } catch (error) {
      console.error("Error refreshing stats:", error);
    }
  }
  async refreshStatsById(deckId) {
    this.logger.debug(
      `DecksView.refreshStatsById() executing for deck: ${deckId}`
    );
    try {
      const deckStats = await this.db.getDeckStats(deckId);
      this.logger.debug("Updated deck stats for:", deckId);
      if (this.component && deckStats) {
        await this.component.updateAll(void 0, void 0, deckId, deckStats);
      }
    } catch (error) {
      console.error("Error refreshing stats by ID:", error);
    }
  }
  startBackgroundRefresh() {
    if (!this.settings.ui.enableBackgroundRefresh) {
      return;
    }
    this.stopBackgroundRefresh();
    this.logger.debug(
      `Starting background refresh job (every ${this.settings.ui.backgroundRefreshInterval} seconds)`
    );
    this.backgroundRefreshInterval = setInterval(async () => {
      this.logger.debug("Background refresh tick");
      this.refresh();
    }, this.settings.ui.backgroundRefreshInterval * 1e3);
  }
  stopBackgroundRefresh() {
    if (this.backgroundRefreshInterval) {
      this.logger.debug("Stopping background refresh job");
      clearInterval(this.backgroundRefreshInterval);
      this.backgroundRefreshInterval = null;
    }
  }
  restartBackgroundRefresh() {
    this.stopBackgroundRefresh();
    if (this.settings.ui.enableBackgroundRefresh) {
      this.startBackgroundRefresh();
    }
  }
  async refreshHeatmap() {
    var _a;
    await ((_a = this.component) == null ? void 0 : _a.updateAll());
  }
  // Test method to check if background job is running
  checkBackgroundJobStatus() {
    this.logger.debug("Background job status:", {
      isRunning: !!this.backgroundRefreshInterval,
      intervalId: this.backgroundRefreshInterval,
      componentExists: !!this.component,
      refreshInterval: this.settings.ui.backgroundRefreshInterval
    });
  }
  async startReview(deck) {
    var _a, _b, _c, _d, _e, _f;
    try {
      this.logger.debug(`Syncing cards for deck before review: ${deck.name}`);
      await this.deckSynchronizer.syncDeck(deck.id);
      await yieldToUI();
      const dailyCounts = await this.db.getDailyReviewCounts(deck.id);
      const config = deck.config;
      const remainingNew = hasNewCardsLimit(config) ? config.newCardsPerDay === 0 ? "none" : Math.max(0, config.newCardsPerDay - dailyCounts.newCount) : "unlimited";
      const remainingReview = hasReviewCardsLimit(config) ? config.reviewCardsPerDay === 0 ? "none" : Math.max(0, config.reviewCardsPerDay - dailyCounts.reviewCount) : "unlimited";
      const nextCard = await this.scheduler.getNext(/* @__PURE__ */ new Date(), deck.id, {
        allowNew: true
      });
      if (!nextCard) {
        let message = `No cards due for review in ${deck.name}`;
        const newLimitReached = hasNewCardsLimit(config) && (remainingNew === 0 || remainingNew === "none");
        const reviewLimitReached = hasReviewCardsLimit(config) && (remainingReview === 0 || remainingReview === "none");
        if (newLimitReached && reviewLimitReached) {
          message += `

Daily limits reached:`;
          message += `
New cards: ${config.newCardsPerDay}/${config.newCardsPerDay}`;
          message += `
Review cards: ${config.reviewCardsPerDay}/${config.reviewCardsPerDay}`;
        } else if (newLimitReached) {
          message += `

Daily new cards limit reached: ${config.newCardsPerDay}/${config.newCardsPerDay}`;
        } else if (reviewLimitReached) {
          message += `

Daily review cards limit reached: ${config.reviewCardsPerDay}/${config.reviewCardsPerDay}`;
        }
        if (((_b = (_a = this.settings) == null ? void 0 : _a.ui) == null ? void 0 : _b.enableNotices) !== false) {
          new import_obsidian11.Notice(message);
        }
        return;
      }
      if (hasNewCardsLimit(config) || hasReviewCardsLimit(config)) {
        let limitInfo = `Daily progress for ${deck.name}:
`;
        if (hasNewCardsLimit(config)) {
          if (config.newCardsPerDay === 0) {
            limitInfo += `New cards: DISABLED (0 allowed per day)
`;
          } else if (dailyCounts.newCount >= config.newCardsPerDay) {
            limitInfo += `New cards: ${dailyCounts.newCount}/${config.newCardsPerDay} (LIMIT EXCEEDED)
`;
          } else {
            limitInfo += `New cards: ${dailyCounts.newCount}/${config.newCardsPerDay} (${remainingNew} remaining)
`;
          }
        }
        if (hasReviewCardsLimit(config)) {
          if (config.reviewCardsPerDay === 0) {
            limitInfo += `Review cards: DISABLED (0 allowed per day)
`;
          } else if (dailyCounts.reviewCount >= config.reviewCardsPerDay) {
            limitInfo += `Review cards: ${dailyCounts.reviewCount}/${config.reviewCardsPerDay} (LIMIT EXCEEDED)
`;
          } else {
            limitInfo += `Review cards: ${dailyCounts.reviewCount}/${config.reviewCardsPerDay} (${remainingReview} remaining)
`;
          }
        }
        const newLimitExceeded = hasNewCardsLimit(config) && (config.newCardsPerDay === 0 || dailyCounts.newCount >= config.newCardsPerDay);
        const reviewLimitExceeded = hasReviewCardsLimit(config) && (config.reviewCardsPerDay === 0 || dailyCounts.reviewCount >= config.reviewCardsPerDay);
        if (newLimitExceeded || reviewLimitExceeded) {
          limitInfo += `

Note: Only learning cards will be shown (limits exceeded)`;
        }
        if (((_d = (_c = this.settings) == null ? void 0 : _c.ui) == null ? void 0 : _d.enableNotices) !== false) {
          new import_obsidian11.Notice(limitInfo, 5e3);
        }
      }
      new FlashcardReviewModalWrapper(
        this.app,
        deck,
        [nextCard],
        this.scheduler,
        this.settings,
        this.db,
        this.refresh.bind(this),
        this.refreshStatsById.bind(this)
      ).open();
    } catch (error) {
      console.error("Error starting review:", error);
      if (((_f = (_e = this.settings) == null ? void 0 : _e.ui) == null ? void 0 : _f.enableNotices) !== false) {
        new import_obsidian11.Notice("Error starting review. Check console for details.");
      }
    }
  }
};

// src/main.ts
var VIEW_TYPE_DECKS = "decks-view";
function deepMergeIgnoreNull(target, source) {
  if (source === null || source === void 0) {
    return target;
  }
  if (typeof source !== "object" || Array.isArray(source)) {
    return source;
  }
  const result = { ...target };
  for (const key in source) {
    if (source.hasOwnProperty(key)) {
      const sourceValue = source[key];
      if (sourceValue === null || sourceValue === void 0) {
        continue;
      }
      if (typeof sourceValue === "object" && !Array.isArray(sourceValue) && target[key]) {
        result[key] = deepMergeIgnoreNull(target[key], sourceValue);
      } else {
        result[key] = sourceValue;
      }
    }
  }
  return result;
}
var DecksPlugin = class extends import_obsidian12.Plugin {
  constructor() {
    super(...arguments);
    this.view = null;
    this.hasShownInitialProgress = false;
  }
  async onload() {
    var _a, _b;
    await this.loadSettings();
    this.logger = new Logger(
      this.settings,
      this.app.vault.adapter,
      this.app.vault.configDir
    );
    this.progressTracker = new ProgressTracker(this.settings);
    this.logger.debug("Loading Decks plugin");
    try {
      const adapter = this.app.vault.adapter;
      const pluginDir = `${this.app.vault.configDir}/plugins/decks`;
      if (!await adapter.exists(pluginDir)) {
        await adapter.mkdir(pluginDir);
      }
      const databasePath = `${this.app.vault.configDir}/plugins/decks/flashcards.db`;
      this.db = new DatabaseService(
        databasePath,
        adapter,
        this.logger.debug.bind(this)
      );
      await this.db.initialize();
      this.deckManager = new DeckManager(
        this.app.vault,
        this.app.metadataCache,
        this.db,
        this,
        this.settings.parsing.folderSearchPath
      );
      this.deckSynchronizer = new DeckSynchronizer(
        this.db,
        this.deckManager,
        this.settings,
        this.app.vault.adapter,
        this.app.vault.configDir
      );
      this.backupService = new BackupService(
        this.app.vault.adapter,
        this.app.vault.configDir,
        this.logger.debug.bind(this)
      );
      this.scheduler = new Scheduler(
        this.db,
        this.settings,
        this.app.vault.adapter,
        this.app.vault.configDir,
        this.backupService
      );
      this.registerView(
        VIEW_TYPE_DECKS,
        (leaf) => new DecksView(
          leaf,
          this.db,
          this.deckSynchronizer,
          this.scheduler,
          this.settings,
          this.progressTracker,
          this.logger,
          (view) => {
            this.view = view;
          }
        )
      );
      this.app.workspace.onLayoutReady(() => {
        setTimeout(() => {
          this.performInitialSync();
        }, 2e3);
      });
      this.addRibbonIcon("brain", "Flashcards", () => {
        this.activateView();
      });
      this.addCommand({
        id: "show-flashcards-panel",
        name: "Show Flashcards Panel",
        callback: () => {
          this.activateView();
        }
      });
      this.registerEvent(
        this.app.vault.on("modify", async (file7) => {
          if (file7 instanceof import_obsidian12.TFile && file7.extension === "md") {
            await this.handleFileChange(file7);
          }
        })
      );
      this.registerEvent(
        this.app.vault.on("delete", async (file7) => {
          if (file7 instanceof import_obsidian12.TFile && file7.extension === "md") {
            await this.handleFileDelete(file7);
          }
        })
      );
      this.registerEvent(
        this.app.vault.on("rename", async (file7, oldPath) => {
          if (file7 instanceof import_obsidian12.TFile && file7.extension === "md") {
            await this.handleFileRename(file7, oldPath);
          }
        })
      );
      this.addSettingTab(
        new DecksSettingTab(
          this.app,
          this,
          this.settings,
          this.db,
          this.saveSettings.bind(this),
          this.logger,
          () => {
            var _a2;
            return ((_a2 = this.view) == null ? void 0 : _a2.performSync(false)) || Promise.resolve();
          },
          async () => {
            if (this.view) {
              await this.view.refreshStats();
            }
          },
          () => {
            if (this.view) {
              this.view.restartBackgroundRefresh();
            }
          },
          () => {
            if (this.view) {
              this.view.startBackgroundRefresh();
            }
          },
          () => {
            if (this.view) {
              this.view.stopBackgroundRefresh();
            }
          },
          this.db.purgeDatabase.bind(this.db),
          this.backupService
        )
      );
      this.logger.debug("Decks plugin loaded successfully");
    } catch (error) {
      console.error("Error loading Decks plugin:", error);
      if (((_b = (_a = this.settings) == null ? void 0 : _a.ui) == null ? void 0 : _b.enableNotices) !== false) {
        new import_obsidian12.Notice("Failed to load Decks plugin. Check console for details.");
      }
    }
  }
  async onunload() {
    this.logger.debug("Unloading Decks plugin");
    if (this.db) {
      await this.db.close();
    }
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = deepMergeIgnoreNull(DEFAULT_SETTINGS, loadedData);
  }
  async saveSettings() {
    await this.saveData(this.settings);
    if (this.deckManager) {
      this.deckManager.updateFolderSearchPath(
        this.settings.parsing.folderSearchPath
      );
    }
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_DECKS);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      if (leaf) {
        await leaf.setViewState({
          type: VIEW_TYPE_DECKS,
          active: true
        });
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async handleFileChange(file7) {
    const metadata = this.app.metadataCache.getFileCache(file7);
    this.logger.debug(`File changed: ${file7.path}, metadata:`, metadata);
    if (!metadata)
      return;
    const allTags = [];
    if (metadata.tags) {
      allTags.push(...metadata.tags.map((t) => t.tag));
    }
    if (metadata.frontmatter && metadata.frontmatter.tags) {
      const frontmatterTags = Array.isArray(metadata.frontmatter.tags) ? metadata.frontmatter.tags : [metadata.frontmatter.tags];
      allTags.push(
        ...frontmatterTags.map(
          (tag) => tag.startsWith("#") ? tag : `#${tag}`
        )
      );
    }
    const hasFlashcardsTag = allTags.some(
      (tag) => tag.startsWith("#flashcards")
    );
    this.logger.debug(
      `File ${file7.path} has flashcards tag:`,
      hasFlashcardsTag
    );
    if (hasFlashcardsTag) {
      const existingDeck = await this.db.getDeckByFilepath(file7.path);
      if (existingDeck) {
        const newTag = allTags.find((tag) => tag.startsWith("#flashcards")) || "#flashcards";
        if (existingDeck.tag !== newTag) {
          this.logger.debug(
            `Updating deck tag from ${existingDeck.tag} to ${newTag}`
          );
          await this.db.updateDeck(existingDeck.id, { tag: newTag });
        }
        await yieldToUI();
        await this.deckSynchronizer.syncDeck(existingDeck.id);
        if (this.view) {
          await this.view.refreshStatsById(existingDeck.id);
        }
      } else {
        const newTag = allTags.find((tag) => tag.startsWith("#flashcards")) || "#flashcards";
        await this.deckSynchronizer.createDeckForFile(file7.path, newTag);
        await yieldToUI();
        const newDeck = await this.db.getDeckByFilepath(file7.path);
        if (newDeck) {
          await this.deckSynchronizer.syncDeck(newDeck.id);
        }
        if (this.view) {
          await this.view.refreshStats();
        }
      }
    }
  }
  async performInitialSync() {
    try {
      const startTime = performance.now();
      this.logger.debug("Performing initial background sync...");
      await yieldToUI();
      if (this.view) {
        await this.view.performSync(false);
        await this.view.refresh(false);
      }
      await yieldToUI();
      const totalTime = performance.now() - startTime;
      this.logger.performance(
        `Initial sync completed successfully in ${formatTime(totalTime)}`
      );
    } catch (error) {
      console.error("Error during initial sync:", error);
    }
  }
  async handleFileDelete(file7) {
    await this.db.deleteDeckByFilepath(file7.path);
    if (this.view) {
      await this.view.refreshStats();
    }
  }
  async handleFileRename(file7, oldPath) {
    if (file7 instanceof import_obsidian12.TFile && file7.extension === "md") {
      const oldDeck = await this.db.getDeckByFilepath(oldPath);
      if (oldDeck) {
        const oldDeckId = oldDeck.id;
        const newDeckId = this.deckManager.generateDeckId(file7.path);
        this.logger.debug(`File renamed from ${oldPath} to ${file7.path}`);
        this.logger.debug(`Updating deck ID from ${oldDeckId} to ${newDeckId}`);
        await this.db.renameDeck(
          oldDeckId,
          newDeckId,
          file7.basename,
          file7.path
        );
        await this.deckSynchronizer.updateFlashcardDeckIds(
          oldDeckId,
          newDeckId
        );
        await yieldToUI();
        await this.db.save();
        if (this.view) {
          await this.view.refreshStats();
        }
      }
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3NxbC5qcy9kaXN0L3NxbC13YXNtLmpzIiwgIi4uLy4uLy4uLy4uL3NyYy9tYWluLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9kYXRhYmFzZS9EYXRhYmFzZVNlcnZpY2UudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2FsZ29yaXRobS9mc3JzLXdlaWdodHMudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2RhdGFiYXNlL3R5cGVzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9kYXRhYmFzZS9zY2hlbWFzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9kYXRhYmFzZS9taWdyYXRpb25zLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy91dGlscy91aS50cyIsICIuLi8uLi8uLi8uLi9zcmMvc2VydmljZXMvRGVja01hbmFnZXIudHMiLCAiLi4vLi4vLi4vLi4vc3JjL3V0aWxzL2xvZ2dpbmcudHMiLCAiLi4vLi4vLi4vLi4vc3JjL3V0aWxzL2ZpbGVGaWx0ZXIudHMiLCAiLi4vLi4vLi4vLi4vc3JjL3NlcnZpY2VzL0RlY2tTeW5jaHJvbml6ZXIudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2FsZ29yaXRobS9mc3JzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9TY2hlZHVsZXIudHMiLCAiLi4vLi4vLi4vLi4vc3JjL3NlcnZpY2VzL0JhY2t1cFNlcnZpY2UudHMiLCAiLi4vLi4vLi4vLi4vc3JjL3V0aWxzL3Byb2dyZXNzLnRzIiwgIi4uLy4uLy4uLy4uL3NyYy9zZXR0aW5ncy50cyIsICIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9TZXR0aW5nc1RhYi50cyIsICIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9EZWNrc1ZpZXcudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvRmxhc2hjYXJkUmV2aWV3TW9kYWxXcmFwcGVyLnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdmVsdGUvaW50ZXJuYWwvaW5kZXgubWpzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYubWpzIiwgIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0ZsYXNoY2FyZFJldmlld01vZGFsLnN2ZWx0ZSIsICIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9TdGF0aXN0aWNzTW9kYWwudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvUmV2aWV3SGVhdG1hcC5zdmVsdGUiLCAiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvU3RhdGlzdGljc1VJLnN2ZWx0ZSIsICIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9EZWNrQ29uZmlnTW9kYWwudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvRGVja0NvbmZpZ1VJLnN2ZWx0ZSIsICIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9BbmtpRXhwb3J0TW9kYWwudHMiLCAiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvQW5raUV4cG9ydFVJLnN2ZWx0ZSIsICIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9EZWNrTGlzdFBhbmVsLnN2ZWx0ZSJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXG4vLyBXZSBhcmUgbW9kdWxhcml6aW5nIHRoaXMgbWFudWFsbHkgYmVjYXVzZSB0aGUgY3VycmVudCBtb2R1bGFyaXplIHNldHRpbmcgaW4gRW1zY3JpcHRlbiBoYXMgc29tZSBpc3N1ZXM6XG4vLyBodHRwczovL2dpdGh1Yi5jb20va3JpcGtlbi9lbXNjcmlwdGVuL2lzc3Vlcy81ODIwXG4vLyBJbiBhZGRpdGlvbiwgV2hlbiB5b3UgdXNlIGVtY2MncyBtb2R1bGFyaXphdGlvbiwgaXQgc3RpbGwgZXhwZWN0cyB0byBleHBvcnQgYSBnbG9iYWwgb2JqZWN0IGNhbGxlZCBgTW9kdWxlYCxcbi8vIHdoaWNoIGlzIGFibGUgdG8gYmUgdXNlZC9jYWxsZWQgYmVmb3JlIHRoZSBXQVNNIGlzIGxvYWRlZC5cbi8vIFRoZSBtb2R1bGFyaXphdGlvbiBiZWxvdyBleHBvcnRzIGEgcHJvbWlzZSB0aGF0IGxvYWRzIGFuZCByZXNvbHZlcyB0byB0aGUgYWN0dWFsIHNxbC5qcyBtb2R1bGUuXG4vLyBUaGF0IHdheSwgdGhpcyBtb2R1bGUgY2FuJ3QgYmUgdXNlZCBiZWZvcmUgdGhlIFdBU00gaXMgZmluaXNoZWQgbG9hZGluZy5cblxuLy8gV2UgYXJlIGdvaW5nIHRvIGRlZmluZSBhIGZ1bmN0aW9uIHRoYXQgYSB1c2VyIHdpbGwgY2FsbCB0byBzdGFydCBsb2FkaW5nIGluaXRpYWxpemluZyBvdXIgU3FsLmpzIGxpYnJhcnlcbi8vIEhvd2V2ZXIsIHRoYXQgZnVuY3Rpb24gbWlnaHQgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzLCBhbmQgb24gc3Vic2VxdWVudCBjYWxscywgd2UgZG9uJ3QgYWN0dWFsbHkgd2FudCBpdCB0byBpbnN0YW50aWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgTW9kdWxlXG4vLyBJbnN0ZWFkLCB3ZSB3YW50IHRvIHJldHVybiB0aGUgcHJldmlvdXNseSBsb2FkZWQgbW9kdWxlXG5cbi8vIFRPRE86IE1ha2UgdGhpcyBub3QgZGVjbGFyZSBhIGdsb2JhbCBpZiB1c2VkIGluIHRoZSBicm93c2VyXG52YXIgaW5pdFNxbEpzUHJvbWlzZSA9IHVuZGVmaW5lZDtcblxudmFyIGluaXRTcWxKcyA9IGZ1bmN0aW9uIChtb2R1bGVDb25maWcpIHtcblxuICAgIGlmIChpbml0U3FsSnNQcm9taXNlKXtcbiAgICAgIHJldHVybiBpbml0U3FsSnNQcm9taXNlO1xuICAgIH1cbiAgICAvLyBJZiB3ZSdyZSBoZXJlLCB3ZSd2ZSBuZXZlciBjYWxsZWQgdGhpcyBmdW5jdGlvbiBiZWZvcmVcbiAgICBpbml0U3FsSnNQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmVNb2R1bGUsIHJlamVjdCkge1xuXG4gICAgICAgIC8vIFdlIGFyZSBtb2R1bGFyaXppbmcgdGhpcyBtYW51YWxseSBiZWNhdXNlIHRoZSBjdXJyZW50IG1vZHVsYXJpemUgc2V0dGluZyBpbiBFbXNjcmlwdGVuIGhhcyBzb21lIGlzc3VlczpcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2tyaXBrZW4vZW1zY3JpcHRlbi9pc3N1ZXMvNTgyMFxuXG4gICAgICAgIC8vIFRoZSB3YXkgdG8gYWZmZWN0IHRoZSBsb2FkaW5nIG9mIGVtY2MgY29tcGlsZWQgbW9kdWxlcyBpcyB0byBjcmVhdGUgYSB2YXJpYWJsZSBjYWxsZWQgYE1vZHVsZWAgYW5kIGFkZFxuICAgICAgICAvLyBwcm9wZXJ0aWVzIHRvIGl0LCBsaWtlIGBwcmVSdW5gLCBgcG9zdFJ1bmAsIGV0Y1xuICAgICAgICAvLyBXZSBhcmUgdXNpbmcgdGhhdCB0byBnZXQgbm90aWZpZWQgd2hlbiB0aGUgV0FTTSBoYXMgZmluaXNoZWQgbG9hZGluZy5cbiAgICAgICAgLy8gT25seSB0aGVuIHdpbGwgd2UgcmV0dXJuIG91ciBwcm9taXNlXG5cbiAgICAgICAgLy8gSWYgdGhleSBwYXNzZWQgaW4gYSBtb2R1bGVDb25maWcgb2JqZWN0LCB1c2UgdGhhdFxuICAgICAgICAvLyBPdGhlcndpc2UsIGluaXRpYWxpemUgTW9kdWxlIHRvIHRoZSBlbXB0eSBvYmplY3RcbiAgICAgICAgdmFyIE1vZHVsZSA9IHR5cGVvZiBtb2R1bGVDb25maWcgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlQ29uZmlnIDoge307XG5cbiAgICAgICAgLy8gRU1DQyBvbmx5IGFsbG93cyBmb3IgYSBzaW5nbGUgb25BYm9ydCBmdW5jdGlvbiAobm90IGFuIGFycmF5IG9mIGZ1bmN0aW9ucylcbiAgICAgICAgLy8gU28gaWYgdGhlIHVzZXIgZGVmaW5lZCB0aGVpciBvd24gb25BYm9ydCBmdW5jdGlvbiwgd2UgcmVtZW1iZXIgaXQgYW5kIGNhbGwgaXRcbiAgICAgICAgdmFyIG9yaWdpbmFsT25BYm9ydEZ1bmN0aW9uID0gTW9kdWxlWydvbkFib3J0J107XG4gICAgICAgIE1vZHVsZVsnb25BYm9ydCddID0gZnVuY3Rpb24gKGVycm9yVGhhdENhdXNlZEFib3J0KSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGVycm9yVGhhdENhdXNlZEFib3J0KSk7XG4gICAgICAgICAgICBpZiAob3JpZ2luYWxPbkFib3J0RnVuY3Rpb24pe1xuICAgICAgICAgICAgICBvcmlnaW5hbE9uQWJvcnRGdW5jdGlvbihlcnJvclRoYXRDYXVzZWRBYm9ydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgTW9kdWxlWydwb3N0UnVuJ10gPSBNb2R1bGVbJ3Bvc3RSdW4nXSB8fCBbXTtcbiAgICAgICAgTW9kdWxlWydwb3N0UnVuJ10ucHVzaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBXaGVuIEVtc2NyaXB0ZWQgY2FsbHMgcG9zdFJ1biwgdGhpcyBwcm9taXNlIHJlc29sdmVzIHdpdGggdGhlIGJ1aWx0IE1vZHVsZVxuICAgICAgICAgICAgcmVzb2x2ZU1vZHVsZShNb2R1bGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUaGVyZSBpcyBhIHNlY3Rpb24gb2YgY29kZSBpbiB0aGUgZW1jYy1nZW5lcmF0ZWQgY29kZSBiZWxvdyB0aGF0IGxvb2tzIGxpa2UgdGhpczpcbiAgICAgICAgLy8gKE5vdGUgdGhhdCB0aGlzIGlzIGxvd2VyY2FzZSBgbW9kdWxlYClcbiAgICAgICAgLy8gaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vICAgICBtb2R1bGVbJ2V4cG9ydHMnXSA9IE1vZHVsZTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBXaGVuIHRoYXQgcnVucywgaXQncyBnb2luZyB0byBvdmVyd3JpdGUgb3VyIG93biBtb2R1bGFyaXphdGlvbiBleHBvcnQgZWZmb3J0cyBpbiBzaGVsbC1wb3N0LmpzIVxuICAgICAgICAvLyBUaGUgb25seSB3YXkgdG8gdGVsbCBlbWNjIG5vdCB0byBlbWl0IGl0IGlzIHRvIHBhc3MgdGhlIE1PRFVMQVJJWkU9MSBvciBNT0RVTEFSSVpFX0lOU1RBTkNFPTEgZmxhZ3MsXG4gICAgICAgIC8vIGJ1dCB0aGF0IGNhcnJpZXMgd2l0aCBpdCBhZGRpdGlvbmFsIHVubmVjZXNzYXJ5IGJhZ2dhZ2UvYnVncyB3ZSBkb24ndCB3YW50IGVpdGhlci5cbiAgICAgICAgLy8gU28sIHdlIGhhdmUgdGhyZWUgb3B0aW9uczpcbiAgICAgICAgLy8gMSkgV2UgdW5kZWZpbmUgYG1vZHVsZWBcbiAgICAgICAgLy8gMikgV2UgcmVtZW1iZXIgd2hhdCBgbW9kdWxlWydleHBvcnRzJ11gIHdhcyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoaXMgZnVuY3Rpb24gYW5kIHdlIHJlc3RvcmUgaXQgbGF0ZXJcbiAgICAgICAgLy8gMykgV2Ugd3JpdGUgYSBzY3JpcHQgdG8gcmVtb3ZlIHRob3NlIGxpbmVzIG9mIGNvZGUgYXMgcGFydCBvZiB0aGUgTWFrZSBwcm9jZXNzLlxuICAgICAgICAvL1xuICAgICAgICAvLyBTaW5jZSB0aG9zZSBhcmUgdGhlIG9ubHkgbGluZXMgb2YgY29kZSB0aGF0IGNhcmUgYWJvdXQgbW9kdWxlLCB3ZSB3aWxsIHVuZGVmaW5lIGl0LiBJdCdzIHRoZSBtb3N0IHN0cmFpZ2h0Zm9yd2FyZFxuICAgICAgICAvLyBvZiB0aGUgb3B0aW9ucywgYW5kIGhhcyB0aGUgc2lkZSBlZmZlY3Qgb2YgcmVkdWNpbmcgZW1jYydzIGVmZm9ydHMgdG8gbW9kaWZ5IHRoZSBtb2R1bGUgaWYgaXRzIG91dHB1dCB3ZXJlIHRvIGNoYW5nZSBpbiB0aGUgZnV0dXJlLlxuICAgICAgICAvLyBUaGF0J3MgYSBuaWNlIHNpZGUgZWZmZWN0IHNpbmNlIHdlJ3JlIGhhbmRsaW5nIHRoZSBtb2R1bGFyaXphdGlvbiBlZmZvcnRzIG91cnNlbHZlc1xuICAgICAgICBtb2R1bGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgLy8gVGhlIGVtY2MtZ2VuZXJhdGVkIGNvZGUgYW5kIHNoZWxsLXBvc3QuanMgY29kZSBnb2VzIGJlbG93LFxuICAgICAgICAvLyBtZWFuaW5nIHRoYXQgYWxsIG9mIGl0IHJ1bnMgaW5zaWRlIG9mIHRoaXMgcHJvbWlzZS4gSWYgYW55dGhpbmcgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgb3VyIHByb21pc2Ugd2lsbCBhYm9ydFxudmFyIGY7Znx8PXR5cGVvZiBNb2R1bGUgIT0gJ3VuZGVmaW5lZCcgPyBNb2R1bGUgOiB7fTt2YXIgYWE9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyxiYT1cInVuZGVmaW5lZFwiIT10eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUsY2E9XCJvYmplY3RcIj09dHlwZW9mIHByb2Nlc3MmJlwib2JqZWN0XCI9PXR5cGVvZiBwcm9jZXNzLnZlcnNpb25zJiZcInN0cmluZ1wiPT10eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlJiZcInJlbmRlcmVyXCIhPXByb2Nlc3MudHlwZTtcInVzZSBzdHJpY3RcIjtcbmYub25SdW50aW1lSW5pdGlhbGl6ZWQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGcsbCl7c3dpdGNoKHR5cGVvZiBsKXtjYXNlIFwiYm9vbGVhblwiOmRjKGcsbD8xOjApO2JyZWFrO2Nhc2UgXCJudW1iZXJcIjplYyhnLGwpO2JyZWFrO2Nhc2UgXCJzdHJpbmdcIjpmYyhnLGwsLTEsLTEpO2JyZWFrO2Nhc2UgXCJvYmplY3RcIjppZihudWxsPT09bClsYihnKTtlbHNlIGlmKG51bGwhPWwubGVuZ3RoKXt2YXIgbj1kYShsLGVhKTtnYyhnLG4sbC5sZW5ndGgsLTEpO2ZhKG4pfWVsc2UgdmEoZyxcIldyb25nIEFQSSB1c2UgOiB0cmllZCB0byByZXR1cm4gYSB2YWx1ZSBvZiBhbiB1bmtub3duIHR5cGUgKFwiK2wrXCIpLlwiLC0xKTticmVhaztkZWZhdWx0OmxiKGcpfX1mdW5jdGlvbiBiKGcsbCl7Zm9yKHZhciBuPVtdLHI9MDtyPGc7cis9MSl7dmFyIHQ9bShsKzQqcixcImkzMlwiKSx5PWhjKHQpO2lmKDE9PT15fHwyPT09eSl0PWljKHQpO2Vsc2UgaWYoMz09PXkpdD1qYyh0KTtlbHNlIGlmKDQ9PT15KXt5PXQ7XG50PWtjKHkpO3k9bGMoeSk7Zm9yKHZhciBMPW5ldyBVaW50OEFycmF5KHQpLEo9MDtKPHQ7Sis9MSlMW0pdPXBbeStKXTt0PUx9ZWxzZSB0PW51bGw7bi5wdXNoKHQpfXJldHVybiBufWZ1bmN0aW9uIGMoZyxsKXt0aGlzLlFhPWc7dGhpcy5kYj1sO3RoaXMuT2E9MTt0aGlzLmxiPVtdfWZ1bmN0aW9uIGQoZyxsKXt0aGlzLmRiPWw7bD1oYShnKSsxO3RoaXMuZWI9aWEobCk7aWYobnVsbD09PXRoaXMuZWIpdGhyb3cgRXJyb3IoXCJVbmFibGUgdG8gYWxsb2NhdGUgbWVtb3J5IGZvciB0aGUgU1FMIHN0cmluZ1wiKTt1KGcseCx0aGlzLmViLGwpO3RoaXMua2I9dGhpcy5lYjt0aGlzLlphPXRoaXMucGI9bnVsbH1mdW5jdGlvbiBlKGcpe3RoaXMuZmlsZW5hbWU9XCJkYmZpbGVfXCIrKDQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKT4+PjApO2lmKG51bGwhPWcpe3ZhciBsPXRoaXMuZmlsZW5hbWUsbj1cIi9cIixyPWw7biYmKG49XCJzdHJpbmdcIj09dHlwZW9mIG4/bjpqYShuKSxyPWw/a2EobitcIi9cIitsKTpcbm4pO2w9bGEoITAsITApO3I9bWEocixsKTtpZihnKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZyl7bj1BcnJheShnLmxlbmd0aCk7Zm9yKHZhciB0PTAseT1nLmxlbmd0aDt0PHk7Kyt0KW5bdF09Zy5jaGFyQ29kZUF0KHQpO2c9bn1uYShyLGx8MTQ2KTtuPW9hKHIsNTc3KTtwYShuLGcsMCxnLmxlbmd0aCwwKTtxYShuKTtuYShyLGwpfX10aGlzLmhhbmRsZUVycm9yKHEodGhpcy5maWxlbmFtZSxoKSk7dGhpcy5kYj1tKGgsXCJpMzJcIik7b2IodGhpcy5kYik7dGhpcy5mYj17fTt0aGlzLlNhPXt9fXZhciBoPXooNCksaz1mLmN3cmFwLHE9ayhcInNxbGl0ZTNfb3BlblwiLFwibnVtYmVyXCIsW1wic3RyaW5nXCIsXCJudW1iZXJcIl0pLHc9ayhcInNxbGl0ZTNfY2xvc2VfdjJcIixcIm51bWJlclwiLFtcIm51bWJlclwiXSksdj1rKFwic3FsaXRlM19leGVjXCIsXCJudW1iZXJcIixbXCJudW1iZXJcIixcInN0cmluZ1wiLFwibnVtYmVyXCIsXCJudW1iZXJcIixcIm51bWJlclwiXSksQz1rKFwic3FsaXRlM19jaGFuZ2VzXCIsXCJudW1iZXJcIixbXCJudW1iZXJcIl0pLFxuRz1rKFwic3FsaXRlM19wcmVwYXJlX3YyXCIsXCJudW1iZXJcIixbXCJudW1iZXJcIixcInN0cmluZ1wiLFwibnVtYmVyXCIsXCJudW1iZXJcIixcIm51bWJlclwiXSkscGI9ayhcInNxbGl0ZTNfc3FsXCIsXCJzdHJpbmdcIixbXCJudW1iZXJcIl0pLG5jPWsoXCJzcWxpdGUzX25vcm1hbGl6ZWRfc3FsXCIsXCJzdHJpbmdcIixbXCJudW1iZXJcIl0pLHFiPWsoXCJzcWxpdGUzX3ByZXBhcmVfdjJcIixcIm51bWJlclwiLFtcIm51bWJlclwiLFwibnVtYmVyXCIsXCJudW1iZXJcIixcIm51bWJlclwiLFwibnVtYmVyXCJdKSxvYz1rKFwic3FsaXRlM19iaW5kX3RleHRcIixcIm51bWJlclwiLFtcIm51bWJlclwiLFwibnVtYmVyXCIsXCJudW1iZXJcIixcIm51bWJlclwiLFwibnVtYmVyXCJdKSxyYj1rKFwic3FsaXRlM19iaW5kX2Jsb2JcIixcIm51bWJlclwiLFtcIm51bWJlclwiLFwibnVtYmVyXCIsXCJudW1iZXJcIixcIm51bWJlclwiLFwibnVtYmVyXCJdKSxwYz1rKFwic3FsaXRlM19iaW5kX2RvdWJsZVwiLFwibnVtYmVyXCIsW1wibnVtYmVyXCIsXCJudW1iZXJcIixcIm51bWJlclwiXSkscWM9ayhcInNxbGl0ZTNfYmluZF9pbnRcIixcblwibnVtYmVyXCIsW1wibnVtYmVyXCIsXCJudW1iZXJcIixcIm51bWJlclwiXSkscmM9ayhcInNxbGl0ZTNfYmluZF9wYXJhbWV0ZXJfaW5kZXhcIixcIm51bWJlclwiLFtcIm51bWJlclwiLFwic3RyaW5nXCJdKSxzYz1rKFwic3FsaXRlM19zdGVwXCIsXCJudW1iZXJcIixbXCJudW1iZXJcIl0pLHRjPWsoXCJzcWxpdGUzX2Vycm1zZ1wiLFwic3RyaW5nXCIsW1wibnVtYmVyXCJdKSx1Yz1rKFwic3FsaXRlM19jb2x1bW5fY291bnRcIixcIm51bWJlclwiLFtcIm51bWJlclwiXSksdmM9ayhcInNxbGl0ZTNfZGF0YV9jb3VudFwiLFwibnVtYmVyXCIsW1wibnVtYmVyXCJdKSx3Yz1rKFwic3FsaXRlM19jb2x1bW5fZG91YmxlXCIsXCJudW1iZXJcIixbXCJudW1iZXJcIixcIm51bWJlclwiXSksc2I9ayhcInNxbGl0ZTNfY29sdW1uX3RleHRcIixcInN0cmluZ1wiLFtcIm51bWJlclwiLFwibnVtYmVyXCJdKSx4Yz1rKFwic3FsaXRlM19jb2x1bW5fYmxvYlwiLFwibnVtYmVyXCIsW1wibnVtYmVyXCIsXCJudW1iZXJcIl0pLHljPWsoXCJzcWxpdGUzX2NvbHVtbl9ieXRlc1wiLFwibnVtYmVyXCIsW1wibnVtYmVyXCIsXG5cIm51bWJlclwiXSksemM9ayhcInNxbGl0ZTNfY29sdW1uX3R5cGVcIixcIm51bWJlclwiLFtcIm51bWJlclwiLFwibnVtYmVyXCJdKSxBYz1rKFwic3FsaXRlM19jb2x1bW5fbmFtZVwiLFwic3RyaW5nXCIsW1wibnVtYmVyXCIsXCJudW1iZXJcIl0pLEJjPWsoXCJzcWxpdGUzX3Jlc2V0XCIsXCJudW1iZXJcIixbXCJudW1iZXJcIl0pLENjPWsoXCJzcWxpdGUzX2NsZWFyX2JpbmRpbmdzXCIsXCJudW1iZXJcIixbXCJudW1iZXJcIl0pLERjPWsoXCJzcWxpdGUzX2ZpbmFsaXplXCIsXCJudW1iZXJcIixbXCJudW1iZXJcIl0pLHRiPWsoXCJzcWxpdGUzX2NyZWF0ZV9mdW5jdGlvbl92MlwiLFwibnVtYmVyXCIsXCJudW1iZXIgc3RyaW5nIG51bWJlciBudW1iZXIgbnVtYmVyIG51bWJlciBudW1iZXIgbnVtYmVyIG51bWJlclwiLnNwbGl0KFwiIFwiKSksaGM9ayhcInNxbGl0ZTNfdmFsdWVfdHlwZVwiLFwibnVtYmVyXCIsW1wibnVtYmVyXCJdKSxrYz1rKFwic3FsaXRlM192YWx1ZV9ieXRlc1wiLFwibnVtYmVyXCIsW1wibnVtYmVyXCJdKSxqYz1rKFwic3FsaXRlM192YWx1ZV90ZXh0XCIsXG5cInN0cmluZ1wiLFtcIm51bWJlclwiXSksbGM9ayhcInNxbGl0ZTNfdmFsdWVfYmxvYlwiLFwibnVtYmVyXCIsW1wibnVtYmVyXCJdKSxpYz1rKFwic3FsaXRlM192YWx1ZV9kb3VibGVcIixcIm51bWJlclwiLFtcIm51bWJlclwiXSksZWM9ayhcInNxbGl0ZTNfcmVzdWx0X2RvdWJsZVwiLFwiXCIsW1wibnVtYmVyXCIsXCJudW1iZXJcIl0pLGxiPWsoXCJzcWxpdGUzX3Jlc3VsdF9udWxsXCIsXCJcIixbXCJudW1iZXJcIl0pLGZjPWsoXCJzcWxpdGUzX3Jlc3VsdF90ZXh0XCIsXCJcIixbXCJudW1iZXJcIixcInN0cmluZ1wiLFwibnVtYmVyXCIsXCJudW1iZXJcIl0pLGdjPWsoXCJzcWxpdGUzX3Jlc3VsdF9ibG9iXCIsXCJcIixbXCJudW1iZXJcIixcIm51bWJlclwiLFwibnVtYmVyXCIsXCJudW1iZXJcIl0pLGRjPWsoXCJzcWxpdGUzX3Jlc3VsdF9pbnRcIixcIlwiLFtcIm51bWJlclwiLFwibnVtYmVyXCJdKSx2YT1rKFwic3FsaXRlM19yZXN1bHRfZXJyb3JcIixcIlwiLFtcIm51bWJlclwiLFwic3RyaW5nXCIsXCJudW1iZXJcIl0pLHViPWsoXCJzcWxpdGUzX2FnZ3JlZ2F0ZV9jb250ZXh0XCIsXCJudW1iZXJcIixcbltcIm51bWJlclwiLFwibnVtYmVyXCJdKSxvYj1rKFwiUmVnaXN0ZXJFeHRlbnNpb25GdW5jdGlvbnNcIixcIm51bWJlclwiLFtcIm51bWJlclwiXSksdmI9ayhcInNxbGl0ZTNfdXBkYXRlX2hvb2tcIixcIm51bWJlclwiLFtcIm51bWJlclwiLFwibnVtYmVyXCIsXCJudW1iZXJcIl0pO2MucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oZyl7aWYoIXRoaXMuUWEpdGhyb3dcIlN0YXRlbWVudCBjbG9zZWRcIjt0aGlzLnJlc2V0KCk7cmV0dXJuIEFycmF5LmlzQXJyYXkoZyk/dGhpcy5DYihnKTpudWxsIT1nJiZcIm9iamVjdFwiPT09dHlwZW9mIGc/dGhpcy5EYihnKTohMH07Yy5wcm90b3R5cGUuc3RlcD1mdW5jdGlvbigpe2lmKCF0aGlzLlFhKXRocm93XCJTdGF0ZW1lbnQgY2xvc2VkXCI7dGhpcy5PYT0xO3ZhciBnPXNjKHRoaXMuUWEpO3N3aXRjaChnKXtjYXNlIDEwMDpyZXR1cm4hMDtjYXNlIDEwMTpyZXR1cm4hMTtkZWZhdWx0OnRocm93IHRoaXMuZGIuaGFuZGxlRXJyb3IoZyk7fX07Yy5wcm90b3R5cGUud2I9ZnVuY3Rpb24oZyl7bnVsbD09XG5nJiYoZz10aGlzLk9hLHRoaXMuT2ErPTEpO3JldHVybiB3Yyh0aGlzLlFhLGcpfTtjLnByb3RvdHlwZS5HYj1mdW5jdGlvbihnKXtudWxsPT1nJiYoZz10aGlzLk9hLHRoaXMuT2ErPTEpO2c9c2IodGhpcy5RYSxnKTtpZihcImZ1bmN0aW9uXCIhPT10eXBlb2YgQmlnSW50KXRocm93IEVycm9yKFwiQmlnSW50IGlzIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuIEJpZ0ludChnKX07Yy5wcm90b3R5cGUuSGI9ZnVuY3Rpb24oZyl7bnVsbD09ZyYmKGc9dGhpcy5PYSx0aGlzLk9hKz0xKTtyZXR1cm4gc2IodGhpcy5RYSxnKX07Yy5wcm90b3R5cGUuZ2V0QmxvYj1mdW5jdGlvbihnKXtudWxsPT1nJiYoZz10aGlzLk9hLHRoaXMuT2ErPTEpO3ZhciBsPXljKHRoaXMuUWEsZyk7Zz14Yyh0aGlzLlFhLGcpO2Zvcih2YXIgbj1uZXcgVWludDhBcnJheShsKSxyPTA7cjxsO3IrPTEpbltyXT1wW2crcl07cmV0dXJuIG59O2MucHJvdG90eXBlLmdldD1mdW5jdGlvbihnLGwpe2w9bHx8e307bnVsbCE9ZyYmXG50aGlzLmJpbmQoZykmJnRoaXMuc3RlcCgpO2c9W107Zm9yKHZhciBuPXZjKHRoaXMuUWEpLHI9MDtyPG47cis9MSlzd2l0Y2goemModGhpcy5RYSxyKSl7Y2FzZSAxOnZhciB0PWwudXNlQmlnSW50P3RoaXMuR2Iocik6dGhpcy53YihyKTtnLnB1c2godCk7YnJlYWs7Y2FzZSAyOmcucHVzaCh0aGlzLndiKHIpKTticmVhaztjYXNlIDM6Zy5wdXNoKHRoaXMuSGIocikpO2JyZWFrO2Nhc2UgNDpnLnB1c2godGhpcy5nZXRCbG9iKHIpKTticmVhaztkZWZhdWx0OmcucHVzaChudWxsKX1yZXR1cm4gZ307Yy5wcm90b3R5cGUuZ2V0Q29sdW1uTmFtZXM9ZnVuY3Rpb24oKXtmb3IodmFyIGc9W10sbD11Yyh0aGlzLlFhKSxuPTA7bjxsO24rPTEpZy5wdXNoKEFjKHRoaXMuUWEsbikpO3JldHVybiBnfTtjLnByb3RvdHlwZS5nZXRBc09iamVjdD1mdW5jdGlvbihnLGwpe2c9dGhpcy5nZXQoZyxsKTtsPXRoaXMuZ2V0Q29sdW1uTmFtZXMoKTtmb3IodmFyIG49e30scj0wO3I8bC5sZW5ndGg7cis9XG4xKW5bbFtyXV09Z1tyXTtyZXR1cm4gbn07Yy5wcm90b3R5cGUuZ2V0U1FMPWZ1bmN0aW9uKCl7cmV0dXJuIHBiKHRoaXMuUWEpfTtjLnByb3RvdHlwZS5nZXROb3JtYWxpemVkU1FMPWZ1bmN0aW9uKCl7cmV0dXJuIG5jKHRoaXMuUWEpfTtjLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oZyl7bnVsbCE9ZyYmdGhpcy5iaW5kKGcpO3RoaXMuc3RlcCgpO3JldHVybiB0aGlzLnJlc2V0KCl9O2MucHJvdG90eXBlLnNiPWZ1bmN0aW9uKGcsbCl7bnVsbD09bCYmKGw9dGhpcy5PYSx0aGlzLk9hKz0xKTtnPXJhKGcpO3ZhciBuPWRhKGcsZWEpO3RoaXMubGIucHVzaChuKTt0aGlzLmRiLmhhbmRsZUVycm9yKG9jKHRoaXMuUWEsbCxuLGcubGVuZ3RoLTEsMCkpfTtjLnByb3RvdHlwZS5CYj1mdW5jdGlvbihnLGwpe251bGw9PWwmJihsPXRoaXMuT2EsdGhpcy5PYSs9MSk7dmFyIG49ZGEoZyxlYSk7dGhpcy5sYi5wdXNoKG4pO3RoaXMuZGIuaGFuZGxlRXJyb3IocmIodGhpcy5RYSxsLG4sZy5sZW5ndGgsXG4wKSl9O2MucHJvdG90eXBlLnJiPWZ1bmN0aW9uKGcsbCl7bnVsbD09bCYmKGw9dGhpcy5PYSx0aGlzLk9hKz0xKTt0aGlzLmRiLmhhbmRsZUVycm9yKChnPT09KGd8MCk/cWM6cGMpKHRoaXMuUWEsbCxnKSl9O2MucHJvdG90eXBlLkViPWZ1bmN0aW9uKGcpe251bGw9PWcmJihnPXRoaXMuT2EsdGhpcy5PYSs9MSk7cmIodGhpcy5RYSxnLDAsMCwwKX07Yy5wcm90b3R5cGUudGI9ZnVuY3Rpb24oZyxsKXtudWxsPT1sJiYobD10aGlzLk9hLHRoaXMuT2ErPTEpO3N3aXRjaCh0eXBlb2YgZyl7Y2FzZSBcInN0cmluZ1wiOnRoaXMuc2IoZyxsKTtyZXR1cm47Y2FzZSBcIm51bWJlclwiOnRoaXMucmIoZyxsKTtyZXR1cm47Y2FzZSBcImJpZ2ludFwiOnRoaXMuc2IoZy50b1N0cmluZygpLGwpO3JldHVybjtjYXNlIFwiYm9vbGVhblwiOnRoaXMucmIoZyswLGwpO3JldHVybjtjYXNlIFwib2JqZWN0XCI6aWYobnVsbD09PWcpe3RoaXMuRWIobCk7cmV0dXJufWlmKG51bGwhPWcubGVuZ3RoKXt0aGlzLkJiKGcsXG5sKTtyZXR1cm59fXRocm93XCJXcm9uZyBBUEkgdXNlIDogdHJpZWQgdG8gYmluZCBhIHZhbHVlIG9mIGFuIHVua25vd24gdHlwZSAoXCIrZytcIikuXCI7fTtjLnByb3RvdHlwZS5EYj1mdW5jdGlvbihnKXt2YXIgbD10aGlzO09iamVjdC5rZXlzKGcpLmZvckVhY2goZnVuY3Rpb24obil7dmFyIHI9cmMobC5RYSxuKTswIT09ciYmbC50YihnW25dLHIpfSk7cmV0dXJuITB9O2MucHJvdG90eXBlLkNiPWZ1bmN0aW9uKGcpe2Zvcih2YXIgbD0wO2w8Zy5sZW5ndGg7bCs9MSl0aGlzLnRiKGdbbF0sbCsxKTtyZXR1cm4hMH07Yy5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmZyZWVtZW0oKTtyZXR1cm4gMD09PUNjKHRoaXMuUWEpJiYwPT09QmModGhpcy5RYSl9O2MucHJvdG90eXBlLmZyZWVtZW09ZnVuY3Rpb24oKXtmb3IodmFyIGc7dm9pZCAwIT09KGc9dGhpcy5sYi5wb3AoKSk7KWZhKGcpfTtjLnByb3RvdHlwZS5mcmVlPWZ1bmN0aW9uKCl7dGhpcy5mcmVlbWVtKCk7dmFyIGc9XG4wPT09RGModGhpcy5RYSk7ZGVsZXRlIHRoaXMuZGIuZmJbdGhpcy5RYV07dGhpcy5RYT0wO3JldHVybiBnfTtkLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuZWIpcmV0dXJue2RvbmU6ITB9O251bGwhPT10aGlzLlphJiYodGhpcy5aYS5mcmVlKCksdGhpcy5aYT1udWxsKTtpZighdGhpcy5kYi5kYil0aHJvdyB0aGlzLm1iKCksRXJyb3IoXCJEYXRhYmFzZSBjbG9zZWRcIik7dmFyIGc9c2EoKSxsPXooNCk7dGEoaCk7dGEobCk7dHJ5e3RoaXMuZGIuaGFuZGxlRXJyb3IocWIodGhpcy5kYi5kYix0aGlzLmtiLC0xLGgsbCkpO3RoaXMua2I9bShsLFwiaTMyXCIpO3ZhciBuPW0oaCxcImkzMlwiKTtpZigwPT09bilyZXR1cm4gdGhpcy5tYigpLHtkb25lOiEwfTt0aGlzLlphPW5ldyBjKG4sdGhpcy5kYik7dGhpcy5kYi5mYltuXT10aGlzLlphO3JldHVybnt2YWx1ZTp0aGlzLlphLGRvbmU6ITF9fWNhdGNoKHIpe3Rocm93IHRoaXMucGI9dWEodGhpcy5rYiksdGhpcy5tYigpLFxucjt9ZmluYWxseXt3YShnKX19O2QucHJvdG90eXBlLm1iPWZ1bmN0aW9uKCl7ZmEodGhpcy5lYik7dGhpcy5lYj1udWxsfTtkLnByb3RvdHlwZS5nZXRSZW1haW5pbmdTUUw9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMucGI/dGhpcy5wYjp1YSh0aGlzLmtiKX07XCJmdW5jdGlvblwiPT09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3ImJihkLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KTtlLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oZyxsKXtpZighdGhpcy5kYil0aHJvd1wiRGF0YWJhc2UgY2xvc2VkXCI7aWYobCl7Zz10aGlzLnByZXBhcmUoZyxsKTt0cnl7Zy5zdGVwKCl9ZmluYWxseXtnLmZyZWUoKX19ZWxzZSB0aGlzLmhhbmRsZUVycm9yKHYodGhpcy5kYixnLDAsMCxoKSk7cmV0dXJuIHRoaXN9O2UucHJvdG90eXBlLmV4ZWM9ZnVuY3Rpb24oZyxsLG4pe2lmKCF0aGlzLmRiKXRocm93XCJEYXRhYmFzZSBjbG9zZWRcIjtcbnZhciByPXNhKCksdD1udWxsO3RyeXt2YXIgeT14YShnKSxMPXooNCk7Zm9yKGc9W107MCE9PW0oeSxcImk4XCIpOyl7dGEoaCk7dGEoTCk7dGhpcy5oYW5kbGVFcnJvcihxYih0aGlzLmRiLHksLTEsaCxMKSk7dmFyIEo9bShoLFwiaTMyXCIpO3k9bShMLFwiaTMyXCIpO2lmKDAhPT1KKXt2YXIgST1udWxsO3Q9bmV3IGMoSix0aGlzKTtmb3IobnVsbCE9bCYmdC5iaW5kKGwpO3Quc3RlcCgpOyludWxsPT09SSYmKEk9e2NvbHVtbnM6dC5nZXRDb2x1bW5OYW1lcygpLHZhbHVlczpbXX0sZy5wdXNoKEkpKSxJLnZhbHVlcy5wdXNoKHQuZ2V0KG51bGwsbikpO3QuZnJlZSgpfX1yZXR1cm4gZ31jYXRjaChNKXt0aHJvdyB0JiZ0LmZyZWUoKSxNO31maW5hbGx5e3dhKHIpfX07ZS5wcm90b3R5cGUuZWFjaD1mdW5jdGlvbihnLGwsbixyLHQpe1wiZnVuY3Rpb25cIj09PXR5cGVvZiBsJiYocj1uLG49bCxsPXZvaWQgMCk7Zz10aGlzLnByZXBhcmUoZyxsKTt0cnl7Zm9yKDtnLnN0ZXAoKTspbihnLmdldEFzT2JqZWN0KG51bGwsXG50KSl9ZmluYWxseXtnLmZyZWUoKX1pZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgcilyZXR1cm4gcigpfTtlLnByb3RvdHlwZS5wcmVwYXJlPWZ1bmN0aW9uKGcsbCl7dGEoaCk7dGhpcy5oYW5kbGVFcnJvcihHKHRoaXMuZGIsZywtMSxoLDApKTtnPW0oaCxcImkzMlwiKTtpZigwPT09Zyl0aHJvd1wiTm90aGluZyB0byBwcmVwYXJlXCI7dmFyIG49bmV3IGMoZyx0aGlzKTtudWxsIT1sJiZuLmJpbmQobCk7cmV0dXJuIHRoaXMuZmJbZ109bn07ZS5wcm90b3R5cGUuaXRlcmF0ZVN0YXRlbWVudHM9ZnVuY3Rpb24oZyl7cmV0dXJuIG5ldyBkKGcsdGhpcyl9O2UucHJvdG90eXBlW1wiZXhwb3J0XCJdPWZ1bmN0aW9uKCl7T2JqZWN0LnZhbHVlcyh0aGlzLmZiKS5mb3JFYWNoKGZ1bmN0aW9uKGwpe2wuZnJlZSgpfSk7T2JqZWN0LnZhbHVlcyh0aGlzLlNhKS5mb3JFYWNoKEEpO3RoaXMuU2E9e307dGhpcy5oYW5kbGVFcnJvcih3KHRoaXMuZGIpKTt2YXIgZz15YSh0aGlzLmZpbGVuYW1lKTt0aGlzLmhhbmRsZUVycm9yKHEodGhpcy5maWxlbmFtZSxcbmgpKTt0aGlzLmRiPW0oaCxcImkzMlwiKTtvYih0aGlzLmRiKTtyZXR1cm4gZ307ZS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtudWxsIT09dGhpcy5kYiYmKE9iamVjdC52YWx1ZXModGhpcy5mYikuZm9yRWFjaChmdW5jdGlvbihnKXtnLmZyZWUoKX0pLE9iamVjdC52YWx1ZXModGhpcy5TYSkuZm9yRWFjaChBKSx0aGlzLlNhPXt9LHRoaXMuWWEmJihBKHRoaXMuWWEpLHRoaXMuWWE9dm9pZCAwKSx0aGlzLmhhbmRsZUVycm9yKHcodGhpcy5kYikpLHphKFwiL1wiK3RoaXMuZmlsZW5hbWUpLHRoaXMuZGI9bnVsbCl9O2UucHJvdG90eXBlLmhhbmRsZUVycm9yPWZ1bmN0aW9uKGcpe2lmKDA9PT1nKXJldHVybiBudWxsO2c9dGModGhpcy5kYik7dGhyb3cgRXJyb3IoZyk7fTtlLnByb3RvdHlwZS5nZXRSb3dzTW9kaWZpZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gQyh0aGlzLmRiKX07ZS5wcm90b3R5cGUuY3JlYXRlX2Z1bmN0aW9uPWZ1bmN0aW9uKGcsbCl7T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuU2EsXG5nKSYmKEEodGhpcy5TYVtnXSksZGVsZXRlIHRoaXMuU2FbZ10pO3ZhciBuPUFhKGZ1bmN0aW9uKHIsdCx5KXt0PWIodCx5KTt0cnl7dmFyIEw9bC5hcHBseShudWxsLHQpfWNhdGNoKEope3ZhKHIsSiwtMSk7cmV0dXJufWEocixMKX0sXCJ2aWlpXCIpO3RoaXMuU2FbZ109bjt0aGlzLmhhbmRsZUVycm9yKHRiKHRoaXMuZGIsZyxsLmxlbmd0aCwxLDAsbiwwLDAsMCkpO3JldHVybiB0aGlzfTtlLnByb3RvdHlwZS5jcmVhdGVfYWdncmVnYXRlPWZ1bmN0aW9uKGcsbCl7dmFyIG49bC5pbml0fHxmdW5jdGlvbigpe3JldHVybiBudWxsfSxyPWwuZmluYWxpemV8fGZ1bmN0aW9uKEkpe3JldHVybiBJfSx0PWwuc3RlcDtpZighdCl0aHJvd1wiQW4gYWdncmVnYXRlIGZ1bmN0aW9uIG11c3QgaGF2ZSBhIHN0ZXAgZnVuY3Rpb24gaW4gXCIrZzt2YXIgeT17fTtPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLlNhLGcpJiYoQSh0aGlzLlNhW2ddKSxkZWxldGUgdGhpcy5TYVtnXSk7bD1nK1wiX19maW5hbGl6ZVwiO1xuT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5TYSxsKSYmKEEodGhpcy5TYVtsXSksZGVsZXRlIHRoaXMuU2FbbF0pO3ZhciBMPUFhKGZ1bmN0aW9uKEksTSxSYSl7dmFyIFg9dWIoSSwxKTtPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh5LFgpfHwoeVtYXT1uKCkpO009YihNLFJhKTtNPVt5W1hdXS5jb25jYXQoTSk7dHJ5e3lbWF09dC5hcHBseShudWxsLE0pfWNhdGNoKEZjKXtkZWxldGUgeVtYXSx2YShJLEZjLC0xKX19LFwidmlpaVwiKSxKPUFhKGZ1bmN0aW9uKEkpe3ZhciBNPXViKEksMSk7dHJ5e3ZhciBSYT1yKHlbTV0pfWNhdGNoKFgpe2RlbGV0ZSB5W01dO3ZhKEksWCwtMSk7cmV0dXJufWEoSSxSYSk7ZGVsZXRlIHlbTV19LFwidmlcIik7dGhpcy5TYVtnXT1MO3RoaXMuU2FbbF09Sjt0aGlzLmhhbmRsZUVycm9yKHRiKHRoaXMuZGIsZyx0Lmxlbmd0aC0xLDEsMCwwLEwsSiwwKSk7cmV0dXJuIHRoaXN9O2UucHJvdG90eXBlLnVwZGF0ZUhvb2s9ZnVuY3Rpb24oZyl7dGhpcy5ZYSYmXG4odmIodGhpcy5kYiwwLDApLEEodGhpcy5ZYSksdGhpcy5ZYT12b2lkIDApO2cmJih0aGlzLllhPUFhKGZ1bmN0aW9uKGwsbixyLHQseSl7c3dpdGNoKG4pe2Nhc2UgMTg6bD1cImluc2VydFwiO2JyZWFrO2Nhc2UgMjM6bD1cInVwZGF0ZVwiO2JyZWFrO2Nhc2UgOTpsPVwiZGVsZXRlXCI7YnJlYWs7ZGVmYXVsdDp0aHJvd1widW5rbm93biBvcGVyYXRpb25Db2RlIGluIHVwZGF0ZUhvb2sgY2FsbGJhY2s6IFwiK247fXI9cj9CKHgscik6XCJcIjt0PXQ/Qih4LHQpOlwiXCI7aWYoeT5OdW1iZXIuTUFYX1NBRkVfSU5URUdFUil0aHJvd1wicm93SWQgdG9vIGJpZyB0byBmaXQgaW5zaWRlIGEgTnVtYmVyXCI7ZyhsLHIsdCxOdW1iZXIoeSkpfSxcInZpaWlpalwiKSx2Yih0aGlzLmRiLHRoaXMuWWEsMCkpfTtmLkRhdGFiYXNlPWV9O3ZhciBCYT17Li4uZn0sQ2E9XCIuL3RoaXMucHJvZ3JhbVwiLERhPShhLGIpPT57dGhyb3cgYjt9LEQ9XCJcIixFYSxGYTtcbmlmKGNhKXt2YXIgZnM9cmVxdWlyZShcImZzXCIpO3JlcXVpcmUoXCJwYXRoXCIpO0Q9X19kaXJuYW1lK1wiL1wiO0ZhPWE9PnthPUdhKGEpP25ldyBVUkwoYSk6YTtyZXR1cm4gZnMucmVhZEZpbGVTeW5jKGEpfTtFYT1hc3luYyBhPT57YT1HYShhKT9uZXcgVVJMKGEpOmE7cmV0dXJuIGZzLnJlYWRGaWxlU3luYyhhLHZvaWQgMCl9OyFmLnRoaXNQcm9ncmFtJiYxPHByb2Nlc3MuYXJndi5sZW5ndGgmJihDYT1wcm9jZXNzLmFyZ3ZbMV0ucmVwbGFjZSgvXFxcXC9nLFwiL1wiKSk7cHJvY2Vzcy5hcmd2LnNsaWNlKDIpO1widW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJihtb2R1bGUuZXhwb3J0cz1mKTtEYT0oYSxiKT0+e3Byb2Nlc3MuZXhpdENvZGU9YTt0aHJvdyBiO319ZWxzZSBpZihhYXx8YmEpYmE/RD1zZWxmLmxvY2F0aW9uLmhyZWY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50JiZkb2N1bWVudC5jdXJyZW50U2NyaXB0JiYoRD1kb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYyksRD1ELnN0YXJ0c1dpdGgoXCJibG9iOlwiKT9cblwiXCI6RC5zbGljZSgwLEQucmVwbGFjZSgvWz8jXS4qLyxcIlwiKS5sYXN0SW5kZXhPZihcIi9cIikrMSksYmEmJihGYT1hPT57dmFyIGI9bmV3IFhNTEh0dHBSZXF1ZXN0O2Iub3BlbihcIkdFVFwiLGEsITEpO2IucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIjtiLnNlbmQobnVsbCk7cmV0dXJuIG5ldyBVaW50OEFycmF5KGIucmVzcG9uc2UpfSksRWE9YXN5bmMgYT0+e2lmKEdhKGEpKXJldHVybiBuZXcgUHJvbWlzZSgoYyxkKT0+e3ZhciBlPW5ldyBYTUxIdHRwUmVxdWVzdDtlLm9wZW4oXCJHRVRcIixhLCEwKTtlLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCI7ZS5vbmxvYWQ9KCk9PnsyMDA9PWUuc3RhdHVzfHwwPT1lLnN0YXR1cyYmZS5yZXNwb25zZT9jKGUucmVzcG9uc2UpOmQoZS5zdGF0dXMpfTtlLm9uZXJyb3I9ZDtlLnNlbmQobnVsbCl9KTt2YXIgYj1hd2FpdCBmZXRjaChhLHtjcmVkZW50aWFsczpcInNhbWUtb3JpZ2luXCJ9KTtpZihiLm9rKXJldHVybiBiLmFycmF5QnVmZmVyKCk7dGhyb3cgRXJyb3IoYi5zdGF0dXMrXG5cIiA6IFwiK2IudXJsKTt9O3ZhciBIYT1mLnByaW50fHxjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpLElhPWYucHJpbnRFcnJ8fGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKTtPYmplY3QuYXNzaWduKGYsQmEpO0JhPW51bGw7Zi50aGlzUHJvZ3JhbSYmKENhPWYudGhpc1Byb2dyYW0pO3ZhciBKYT1mLndhc21CaW5hcnksS2EsTGE9ITEsTWEscCx4LE5hLEUsRixPYSxILFBhLEdhPWE9PmEuc3RhcnRzV2l0aChcImZpbGU6Ly9cIik7XG5mdW5jdGlvbiBRYSgpe3ZhciBhPUthLmJ1ZmZlcjtmLkhFQVA4PXA9bmV3IEludDhBcnJheShhKTtmLkhFQVAxNj1OYT1uZXcgSW50MTZBcnJheShhKTtmLkhFQVBVOD14PW5ldyBVaW50OEFycmF5KGEpO2YuSEVBUFUxNj1uZXcgVWludDE2QXJyYXkoYSk7Zi5IRUFQMzI9RT1uZXcgSW50MzJBcnJheShhKTtmLkhFQVBVMzI9Rj1uZXcgVWludDMyQXJyYXkoYSk7Zi5IRUFQRjMyPU9hPW5ldyBGbG9hdDMyQXJyYXkoYSk7Zi5IRUFQRjY0PVBhPW5ldyBGbG9hdDY0QXJyYXkoYSk7Zi5IRUFQNjQ9SD1uZXcgQmlnSW50NjRBcnJheShhKTtmLkhFQVBVNjQ9bmV3IEJpZ1VpbnQ2NEFycmF5KGEpfXZhciBLPTAsU2E9bnVsbDtmdW5jdGlvbiBUYShhKXtmLm9uQWJvcnQ/LihhKTthPVwiQWJvcnRlZChcIithK1wiKVwiO0lhKGEpO0xhPSEwO3Rocm93IG5ldyBXZWJBc3NlbWJseS5SdW50aW1lRXJyb3IoYStcIi4gQnVpbGQgd2l0aCAtc0FTU0VSVElPTlMgZm9yIG1vcmUgaW5mby5cIik7fXZhciBVYTtcbmFzeW5jIGZ1bmN0aW9uIFZhKGEpe2lmKCFKYSl0cnl7dmFyIGI9YXdhaXQgRWEoYSk7cmV0dXJuIG5ldyBVaW50OEFycmF5KGIpfWNhdGNoe31pZihhPT1VYSYmSmEpYT1uZXcgVWludDhBcnJheShKYSk7ZWxzZSBpZihGYSlhPUZhKGEpO2Vsc2UgdGhyb3dcImJvdGggYXN5bmMgYW5kIHN5bmMgZmV0Y2hpbmcgb2YgdGhlIHdhc20gZmFpbGVkXCI7cmV0dXJuIGF9YXN5bmMgZnVuY3Rpb24gV2EoYSxiKXt0cnl7dmFyIGM9YXdhaXQgVmEoYSk7cmV0dXJuIGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGMsYil9Y2F0Y2goZCl7SWEoYGZhaWxlZCB0byBhc3luY2hyb25vdXNseSBwcmVwYXJlIHdhc206ICR7ZH1gKSxUYShkKX19XG5hc3luYyBmdW5jdGlvbiBYYShhKXt2YXIgYj1VYTtpZighSmEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nJiYhR2EoYikmJiFjYSl0cnl7dmFyIGM9ZmV0Y2goYix7Y3JlZGVudGlhbHM6XCJzYW1lLW9yaWdpblwifSk7cmV0dXJuIGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKGMsYSl9Y2F0Y2goZCl7SWEoYHdhc20gc3RyZWFtaW5nIGNvbXBpbGUgZmFpbGVkOiAke2R9YCksSWEoXCJmYWxsaW5nIGJhY2sgdG8gQXJyYXlCdWZmZXIgaW5zdGFudGlhdGlvblwiKX1yZXR1cm4gV2EoYixhKX1jbGFzcyBZYXtuYW1lPVwiRXhpdFN0YXR1c1wiO2NvbnN0cnVjdG9yKGEpe3RoaXMubWVzc2FnZT1gUHJvZ3JhbSB0ZXJtaW5hdGVkIHdpdGggZXhpdCgke2F9KWA7dGhpcy5zdGF0dXM9YX19XG52YXIgWmE9YT0+e2Zvcig7MDxhLmxlbmd0aDspYS5zaGlmdCgpKGYpfSwkYT1bXSxhYj1bXSxiYj0oKT0+e3ZhciBhPWYucHJlUnVuLnNoaWZ0KCk7YWIudW5zaGlmdChhKX07ZnVuY3Rpb24gbShhLGI9XCJpOFwiKXtiLmVuZHNXaXRoKFwiKlwiKSYmKGI9XCIqXCIpO3N3aXRjaChiKXtjYXNlIFwiaTFcIjpyZXR1cm4gcFthXTtjYXNlIFwiaThcIjpyZXR1cm4gcFthXTtjYXNlIFwiaTE2XCI6cmV0dXJuIE5hW2E+PjFdO2Nhc2UgXCJpMzJcIjpyZXR1cm4gRVthPj4yXTtjYXNlIFwiaTY0XCI6cmV0dXJuIEhbYT4+M107Y2FzZSBcImZsb2F0XCI6cmV0dXJuIE9hW2E+PjJdO2Nhc2UgXCJkb3VibGVcIjpyZXR1cm4gUGFbYT4+M107Y2FzZSBcIipcIjpyZXR1cm4gRlthPj4yXTtkZWZhdWx0OlRhKGBpbnZhbGlkIHR5cGUgZm9yIGdldFZhbHVlOiAke2J9YCl9fXZhciBjYj1mLm5vRXhpdFJ1bnRpbWV8fCEwO1xuZnVuY3Rpb24gdGEoYSl7dmFyIGI9XCJpMzJcIjtiLmVuZHNXaXRoKFwiKlwiKSYmKGI9XCIqXCIpO3N3aXRjaChiKXtjYXNlIFwiaTFcIjpwW2FdPTA7YnJlYWs7Y2FzZSBcImk4XCI6cFthXT0wO2JyZWFrO2Nhc2UgXCJpMTZcIjpOYVthPj4xXT0wO2JyZWFrO2Nhc2UgXCJpMzJcIjpFW2E+PjJdPTA7YnJlYWs7Y2FzZSBcImk2NFwiOkhbYT4+M109QmlnSW50KDApO2JyZWFrO2Nhc2UgXCJmbG9hdFwiOk9hW2E+PjJdPTA7YnJlYWs7Y2FzZSBcImRvdWJsZVwiOlBhW2E+PjNdPTA7YnJlYWs7Y2FzZSBcIipcIjpGW2E+PjJdPTA7YnJlYWs7ZGVmYXVsdDpUYShgaW52YWxpZCB0eXBlIGZvciBzZXRWYWx1ZTogJHtifWApfX1cbnZhciBkYj1cInVuZGVmaW5lZFwiIT10eXBlb2YgVGV4dERlY29kZXI/bmV3IFRleHREZWNvZGVyOnZvaWQgMCxCPShhLGI9MCxjPU5hTik9Pnt2YXIgZD1iK2M7Zm9yKGM9YjthW2NdJiYhKGM+PWQpOykrK2M7aWYoMTY8Yy1iJiZhLmJ1ZmZlciYmZGIpcmV0dXJuIGRiLmRlY29kZShhLnN1YmFycmF5KGIsYykpO2ZvcihkPVwiXCI7YjxjOyl7dmFyIGU9YVtiKytdO2lmKGUmMTI4KXt2YXIgaD1hW2IrK10mNjM7aWYoMTkyPT0oZSYyMjQpKWQrPVN0cmluZy5mcm9tQ2hhckNvZGUoKGUmMzEpPDw2fGgpO2Vsc2V7dmFyIGs9YVtiKytdJjYzO2U9MjI0PT0oZSYyNDApPyhlJjE1KTw8MTJ8aDw8NnxrOihlJjcpPDwxOHxoPDwxMnxrPDw2fGFbYisrXSY2Mzs2NTUzNj5lP2QrPVN0cmluZy5mcm9tQ2hhckNvZGUoZSk6KGUtPTY1NTM2LGQrPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8ZT4+MTAsNTYzMjB8ZSYxMDIzKSl9fWVsc2UgZCs9U3RyaW5nLmZyb21DaGFyQ29kZShlKX1yZXR1cm4gZH0sXG51YT0oYSxiKT0+YT9CKHgsYSxiKTpcIlwiLGViPShhLGIpPT57Zm9yKHZhciBjPTAsZD1hLmxlbmd0aC0xOzA8PWQ7ZC0tKXt2YXIgZT1hW2RdO1wiLlwiPT09ZT9hLnNwbGljZShkLDEpOlwiLi5cIj09PWU/KGEuc3BsaWNlKGQsMSksYysrKTpjJiYoYS5zcGxpY2UoZCwxKSxjLS0pfWlmKGIpZm9yKDtjO2MtLSlhLnVuc2hpZnQoXCIuLlwiKTtyZXR1cm4gYX0sa2E9YT0+e3ZhciBiPVwiL1wiPT09YS5jaGFyQXQoMCksYz1cIi9cIj09PWEuc2xpY2UoLTEpOyhhPWViKGEuc3BsaXQoXCIvXCIpLmZpbHRlcihkPT4hIWQpLCFiKS5qb2luKFwiL1wiKSl8fGJ8fChhPVwiLlwiKTthJiZjJiYoYSs9XCIvXCIpO3JldHVybihiP1wiL1wiOlwiXCIpK2F9LGZiPWE9Pnt2YXIgYj0vXihcXC8/fCkoW1xcc1xcU10qPykoKD86XFwuezEsMn18W15cXC9dKz98KShcXC5bXi5cXC9dKnwpKSg/OltcXC9dKikkLy5leGVjKGEpLnNsaWNlKDEpO2E9YlswXTtiPWJbMV07aWYoIWEmJiFiKXJldHVyblwiLlwiO2ImJj1iLnNsaWNlKDAsLTEpO3JldHVybiBhK2J9LFxuZ2I9YT0+YSYmYS5tYXRjaCgvKFteXFwvXSt8XFwvKVxcLyokLylbMV0saGI9KCk9PntpZihjYSl7dmFyIGE9cmVxdWlyZShcImNyeXB0b1wiKTtyZXR1cm4gYj0+YS5yYW5kb21GaWxsU3luYyhiKX1yZXR1cm4gYj0+Y3J5cHRvLmdldFJhbmRvbVZhbHVlcyhiKX0saWI9YT0+eyhpYj1oYigpKShhKX0samI9KC4uLmEpPT57Zm9yKHZhciBiPVwiXCIsYz0hMSxkPWEubGVuZ3RoLTE7LTE8PWQmJiFjO2QtLSl7Yz0wPD1kP2FbZF06XCIvXCI7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGMpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50cyB0byBwYXRoLnJlc29sdmUgbXVzdCBiZSBzdHJpbmdzXCIpO2lmKCFjKXJldHVyblwiXCI7Yj1jK1wiL1wiK2I7Yz1cIi9cIj09PWMuY2hhckF0KDApfWI9ZWIoYi5zcGxpdChcIi9cIikuZmlsdGVyKGU9PiEhZSksIWMpLmpvaW4oXCIvXCIpO3JldHVybihjP1wiL1wiOlwiXCIpK2J8fFwiLlwifSxrYj1bXSxoYT1hPT57Zm9yKHZhciBiPTAsYz0wO2M8YS5sZW5ndGg7KytjKXt2YXIgZD1hLmNoYXJDb2RlQXQoYyk7XG4xMjc+PWQ/YisrOjIwNDc+PWQ/Yis9Mjo1NTI5Njw9ZCYmNTczNDM+PWQ/KGIrPTQsKytjKTpiKz0zfXJldHVybiBifSx1PShhLGIsYyxkKT0+e2lmKCEoMDxkKSlyZXR1cm4gMDt2YXIgZT1jO2Q9YytkLTE7Zm9yKHZhciBoPTA7aDxhLmxlbmd0aDsrK2gpe3ZhciBrPWEuY2hhckNvZGVBdChoKTtpZig1NTI5Njw9ayYmNTczNDM+PWspe3ZhciBxPWEuY2hhckNvZGVBdCgrK2gpO2s9NjU1MzYrKChrJjEwMjMpPDwxMCl8cSYxMDIzfWlmKDEyNz49ayl7aWYoYz49ZClicmVhaztiW2MrK109a31lbHNle2lmKDIwNDc+PWspe2lmKGMrMT49ZClicmVhaztiW2MrK109MTkyfGs+PjZ9ZWxzZXtpZig2NTUzNT49ayl7aWYoYysyPj1kKWJyZWFrO2JbYysrXT0yMjR8az4+MTJ9ZWxzZXtpZihjKzM+PWQpYnJlYWs7YltjKytdPTI0MHxrPj4xODtiW2MrK109MTI4fGs+PjEyJjYzfWJbYysrXT0xMjh8az4+NiY2M31iW2MrK109MTI4fGsmNjN9fWJbY109MDtyZXR1cm4gYy1lfSxyYT0oYSxiKT0+XG57dmFyIGM9QXJyYXkoaGEoYSkrMSk7YT11KGEsYywwLGMubGVuZ3RoKTtiJiYoYy5sZW5ndGg9YSk7cmV0dXJuIGN9LG1iPVtdO2Z1bmN0aW9uIG5iKGEsYil7bWJbYV09e2lucHV0OltdLG91dHB1dDpbXSxjYjpifTt3YihhLHhiKX1cbnZhciB4Yj17b3BlbihhKXt2YXIgYj1tYlthLm5vZGUucmRldl07aWYoIWIpdGhyb3cgbmV3IE4oNDMpO2EudHR5PWI7YS5zZWVrYWJsZT0hMX0sY2xvc2UoYSl7YS50dHkuY2IuZnN5bmMoYS50dHkpfSxmc3luYyhhKXthLnR0eS5jYi5mc3luYyhhLnR0eSl9LHJlYWQoYSxiLGMsZCl7aWYoIWEudHR5fHwhYS50dHkuY2IueGIpdGhyb3cgbmV3IE4oNjApO2Zvcih2YXIgZT0wLGg9MDtoPGQ7aCsrKXt0cnl7dmFyIGs9YS50dHkuY2IueGIoYS50dHkpfWNhdGNoKHEpe3Rocm93IG5ldyBOKDI5KTt9aWYodm9pZCAwPT09ayYmMD09PWUpdGhyb3cgbmV3IE4oNik7aWYobnVsbD09PWt8fHZvaWQgMD09PWspYnJlYWs7ZSsrO2JbYytoXT1rfWUmJihhLm5vZGUuYXRpbWU9RGF0ZS5ub3coKSk7cmV0dXJuIGV9LHdyaXRlKGEsYixjLGQpe2lmKCFhLnR0eXx8IWEudHR5LmNiLnFiKXRocm93IG5ldyBOKDYwKTt0cnl7Zm9yKHZhciBlPTA7ZTxkO2UrKylhLnR0eS5jYi5xYihhLnR0eSxiW2MrZV0pfWNhdGNoKGgpe3Rocm93IG5ldyBOKDI5KTtcbn1kJiYoYS5ub2RlLm10aW1lPWEubm9kZS5jdGltZT1EYXRlLm5vdygpKTtyZXR1cm4gZX19LHliPXt4Yigpe2E6e2lmKCFrYi5sZW5ndGgpe3ZhciBhPW51bGw7aWYoY2Epe3ZhciBiPUJ1ZmZlci5hbGxvYygyNTYpLGM9MCxkPXByb2Nlc3Muc3RkaW4uZmQ7dHJ5e2M9ZnMucmVhZFN5bmMoZCxiLDAsMjU2KX1jYXRjaChlKXtpZihlLnRvU3RyaW5nKCkuaW5jbHVkZXMoXCJFT0ZcIikpYz0wO2Vsc2UgdGhyb3cgZTt9MDxjJiYoYT1iLnNsaWNlKDAsYykudG9TdHJpbmcoXCJ1dGYtOFwiKSl9ZWxzZVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHdpbmRvdy5wcm9tcHQmJihhPXdpbmRvdy5wcm9tcHQoXCJJbnB1dDogXCIpLG51bGwhPT1hJiYoYSs9XCJcXG5cIikpO2lmKCFhKXthPW51bGw7YnJlYWsgYX1rYj1yYShhLCEwKX1hPWtiLnNoaWZ0KCl9cmV0dXJuIGF9LHFiKGEsYil7bnVsbD09PWJ8fDEwPT09Yj8oSGEoQihhLm91dHB1dCkpLGEub3V0cHV0PVtdKTpcbjAhPWImJmEub3V0cHV0LnB1c2goYil9LGZzeW5jKGEpezA8YS5vdXRwdXQ/Lmxlbmd0aCYmKEhhKEIoYS5vdXRwdXQpKSxhLm91dHB1dD1bXSl9LFRiKCl7cmV0dXJue09iOjI1ODU2LFFiOjUsTmI6MTkxLFBiOjM1Mzg3LE1iOlszLDI4LDEyNywyMSw0LDAsMSwwLDE3LDE5LDI2LDAsMTgsMTUsMjMsMjIsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMF19fSxVYigpe3JldHVybiAwfSxWYigpe3JldHVyblsyNCw4MF19fSx6Yj17cWIoYSxiKXtudWxsPT09Ynx8MTA9PT1iPyhJYShCKGEub3V0cHV0KSksYS5vdXRwdXQ9W10pOjAhPWImJmEub3V0cHV0LnB1c2goYil9LGZzeW5jKGEpezA8YS5vdXRwdXQ/Lmxlbmd0aCYmKElhKEIoYS5vdXRwdXQpKSxhLm91dHB1dD1bXSl9fSxPPXtXYTpudWxsLFhhKCl7cmV0dXJuIE8uY3JlYXRlTm9kZShudWxsLFwiL1wiLDE2ODk1LDApfSxjcmVhdGVOb2RlKGEsYixjLGQpe2lmKDI0NTc2PT09KGMmNjE0NDApfHw0MDk2PT09KGMmNjE0NDApKXRocm93IG5ldyBOKDYzKTtcbk8uV2F8fChPLldhPXtkaXI6e25vZGU6e1RhOk8uTGEuVGEsVWE6Ty5MYS5VYSxsb29rdXA6Ty5MYS5sb29rdXAsaGI6Ty5MYS5oYixyZW5hbWU6Ty5MYS5yZW5hbWUsdW5saW5rOk8uTGEudW5saW5rLHJtZGlyOk8uTGEucm1kaXIscmVhZGRpcjpPLkxhLnJlYWRkaXIsc3ltbGluazpPLkxhLnN5bWxpbmt9LHN0cmVhbTp7VmE6Ty5NYS5WYX19LGZpbGU6e25vZGU6e1RhOk8uTGEuVGEsVWE6Ty5MYS5VYX0sc3RyZWFtOntWYTpPLk1hLlZhLHJlYWQ6Ty5NYS5yZWFkLHdyaXRlOk8uTWEud3JpdGUsaWI6Ty5NYS5pYixqYjpPLk1hLmpifX0sbGluazp7bm9kZTp7VGE6Ty5MYS5UYSxVYTpPLkxhLlVhLHJlYWRsaW5rOk8uTGEucmVhZGxpbmt9LHN0cmVhbTp7fX0sdWI6e25vZGU6e1RhOk8uTGEuVGEsVWE6Ty5MYS5VYX0sc3RyZWFtOkFifX0pO2M9QmIoYSxiLGMsZCk7UChjLm1vZGUpPyhjLkxhPU8uV2EuZGlyLm5vZGUsYy5NYT1PLldhLmRpci5zdHJlYW0sYy5OYT17fSk6MzI3Njg9PT1cbihjLm1vZGUmNjE0NDApPyhjLkxhPU8uV2EuZmlsZS5ub2RlLGMuTWE9Ty5XYS5maWxlLnN0cmVhbSxjLlJhPTAsYy5OYT1udWxsKTo0MDk2MD09PShjLm1vZGUmNjE0NDApPyhjLkxhPU8uV2EubGluay5ub2RlLGMuTWE9Ty5XYS5saW5rLnN0cmVhbSk6ODE5Mj09PShjLm1vZGUmNjE0NDApJiYoYy5MYT1PLldhLnViLm5vZGUsYy5NYT1PLldhLnViLnN0cmVhbSk7Yy5hdGltZT1jLm10aW1lPWMuY3RpbWU9RGF0ZS5ub3coKTthJiYoYS5OYVtiXT1jLGEuYXRpbWU9YS5tdGltZT1hLmN0aW1lPWMuYXRpbWUpO3JldHVybiBjfSxTYihhKXtyZXR1cm4gYS5OYT9hLk5hLnN1YmFycmF5P2EuTmEuc3ViYXJyYXkoMCxhLlJhKTpuZXcgVWludDhBcnJheShhLk5hKTpuZXcgVWludDhBcnJheSgwKX0sTGE6e1RhKGEpe3ZhciBiPXt9O2IuZGV2PTgxOTI9PT0oYS5tb2RlJjYxNDQwKT9hLmlkOjE7Yi5pbm89YS5pZDtiLm1vZGU9YS5tb2RlO2Iubmxpbms9MTtiLnVpZD0wO2IuZ2lkPTA7Yi5yZGV2PVxuYS5yZGV2O1AoYS5tb2RlKT9iLnNpemU9NDA5NjozMjc2OD09PShhLm1vZGUmNjE0NDApP2Iuc2l6ZT1hLlJhOjQwOTYwPT09KGEubW9kZSY2MTQ0MCk/Yi5zaXplPWEubGluay5sZW5ndGg6Yi5zaXplPTA7Yi5hdGltZT1uZXcgRGF0ZShhLmF0aW1lKTtiLm10aW1lPW5ldyBEYXRlKGEubXRpbWUpO2IuY3RpbWU9bmV3IERhdGUoYS5jdGltZSk7Yi5ibGtzaXplPTQwOTY7Yi5ibG9ja3M9TWF0aC5jZWlsKGIuc2l6ZS9iLmJsa3NpemUpO3JldHVybiBifSxVYShhLGIpe2Zvcih2YXIgYyBvZltcIm1vZGVcIixcImF0aW1lXCIsXCJtdGltZVwiLFwiY3RpbWVcIl0pbnVsbCE9YltjXSYmKGFbY109YltjXSk7dm9pZCAwIT09Yi5zaXplJiYoYj1iLnNpemUsYS5SYSE9YiYmKDA9PWI/KGEuTmE9bnVsbCxhLlJhPTApOihjPWEuTmEsYS5OYT1uZXcgVWludDhBcnJheShiKSxjJiZhLk5hLnNldChjLnN1YmFycmF5KDAsTWF0aC5taW4oYixhLlJhKSkpLGEuUmE9YikpKX0sbG9va3VwKCl7dGhyb3cgTy52Yjtcbn0saGIoYSxiLGMsZCl7cmV0dXJuIE8uY3JlYXRlTm9kZShhLGIsYyxkKX0scmVuYW1lKGEsYixjKXt0cnl7dmFyIGQ9UShiLGMpfWNhdGNoKGgpe31pZihkKXtpZihQKGEubW9kZSkpZm9yKHZhciBlIGluIGQuTmEpdGhyb3cgbmV3IE4oNTUpO0NiKGQpfWRlbGV0ZSBhLnBhcmVudC5OYVthLm5hbWVdO2IuTmFbY109YTthLm5hbWU9YztiLmN0aW1lPWIubXRpbWU9YS5wYXJlbnQuY3RpbWU9YS5wYXJlbnQubXRpbWU9RGF0ZS5ub3coKX0sdW5saW5rKGEsYil7ZGVsZXRlIGEuTmFbYl07YS5jdGltZT1hLm10aW1lPURhdGUubm93KCl9LHJtZGlyKGEsYil7dmFyIGM9UShhLGIpLGQ7Zm9yKGQgaW4gYy5OYSl0aHJvdyBuZXcgTig1NSk7ZGVsZXRlIGEuTmFbYl07YS5jdGltZT1hLm10aW1lPURhdGUubm93KCl9LHJlYWRkaXIoYSl7cmV0dXJuW1wiLlwiLFwiLi5cIiwuLi5PYmplY3Qua2V5cyhhLk5hKV19LHN5bWxpbmsoYSxiLGMpe2E9Ty5jcmVhdGVOb2RlKGEsYiw0MTQ3MSwwKTthLmxpbms9XG5jO3JldHVybiBhfSxyZWFkbGluayhhKXtpZig0MDk2MCE9PShhLm1vZGUmNjE0NDApKXRocm93IG5ldyBOKDI4KTtyZXR1cm4gYS5saW5rfX0sTWE6e3JlYWQoYSxiLGMsZCxlKXt2YXIgaD1hLm5vZGUuTmE7aWYoZT49YS5ub2RlLlJhKXJldHVybiAwO2E9TWF0aC5taW4oYS5ub2RlLlJhLWUsZCk7aWYoODxhJiZoLnN1YmFycmF5KWIuc2V0KGguc3ViYXJyYXkoZSxlK2EpLGMpO2Vsc2UgZm9yKGQ9MDtkPGE7ZCsrKWJbYytkXT1oW2UrZF07cmV0dXJuIGF9LHdyaXRlKGEsYixjLGQsZSxoKXtiLmJ1ZmZlcj09PXAuYnVmZmVyJiYoaD0hMSk7aWYoIWQpcmV0dXJuIDA7YT1hLm5vZGU7YS5tdGltZT1hLmN0aW1lPURhdGUubm93KCk7aWYoYi5zdWJhcnJheSYmKCFhLk5hfHxhLk5hLnN1YmFycmF5KSl7aWYoaClyZXR1cm4gYS5OYT1iLnN1YmFycmF5KGMsYytkKSxhLlJhPWQ7aWYoMD09PWEuUmEmJjA9PT1lKXJldHVybiBhLk5hPWIuc2xpY2UoYyxjK2QpLGEuUmE9ZDtpZihlK2Q8PWEuUmEpcmV0dXJuIGEuTmEuc2V0KGIuc3ViYXJyYXkoYyxcbmMrZCksZSksZH1oPWUrZDt2YXIgaz1hLk5hP2EuTmEubGVuZ3RoOjA7az49aHx8KGg9TWF0aC5tYXgoaCxrKigxMDQ4NTc2Pms/MjoxLjEyNSk+Pj4wKSwwIT1rJiYoaD1NYXRoLm1heChoLDI1NikpLGs9YS5OYSxhLk5hPW5ldyBVaW50OEFycmF5KGgpLDA8YS5SYSYmYS5OYS5zZXQoay5zdWJhcnJheSgwLGEuUmEpLDApKTtpZihhLk5hLnN1YmFycmF5JiZiLnN1YmFycmF5KWEuTmEuc2V0KGIuc3ViYXJyYXkoYyxjK2QpLGUpO2Vsc2UgZm9yKGg9MDtoPGQ7aCsrKWEuTmFbZStoXT1iW2MraF07YS5SYT1NYXRoLm1heChhLlJhLGUrZCk7cmV0dXJuIGR9LFZhKGEsYixjKXsxPT09Yz9iKz1hLnBvc2l0aW9uOjI9PT1jJiYzMjc2OD09PShhLm5vZGUubW9kZSY2MTQ0MCkmJihiKz1hLm5vZGUuUmEpO2lmKDA+Yil0aHJvdyBuZXcgTigyOCk7cmV0dXJuIGJ9LGliKGEsYixjLGQsZSl7aWYoMzI3NjghPT0oYS5ub2RlLm1vZGUmNjE0NDApKXRocm93IG5ldyBOKDQzKTthPWEubm9kZS5OYTtcbmlmKGUmMnx8IWF8fGEuYnVmZmVyIT09cC5idWZmZXIpe2U9ITA7ZD02NTUzNipNYXRoLmNlaWwoYi82NTUzNik7dmFyIGg9RGIoNjU1MzYsZCk7aCYmeC5maWxsKDAsaCxoK2QpO2Q9aDtpZighZCl0aHJvdyBuZXcgTig0OCk7aWYoYSl7aWYoMDxjfHxjK2I8YS5sZW5ndGgpYS5zdWJhcnJheT9hPWEuc3ViYXJyYXkoYyxjK2IpOmE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSxjLGMrYik7cC5zZXQoYSxkKX19ZWxzZSBlPSExLGQ9YS5ieXRlT2Zmc2V0O3JldHVybntLYjpkLEFiOmV9fSxqYihhLGIsYyxkKXtPLk1hLndyaXRlKGEsYiwwLGQsYywhMSk7cmV0dXJuIDB9fX0sbGE9KGEsYik9Pnt2YXIgYz0wO2EmJihjfD0zNjUpO2ImJihjfD0xNDYpO3JldHVybiBjfSxFYj1udWxsLEZiPXt9LEdiPVtdLEhiPTEsUj1udWxsLEliPSExLEpiPSEwLEtiPXt9LE49Y2xhc3N7bmFtZT1cIkVycm5vRXJyb3JcIjtjb25zdHJ1Y3RvcihhKXt0aGlzLlBhPWF9fSxMYj1jbGFzc3tnYj17fTtub2RlPW51bGw7Z2V0IGZsYWdzKCl7cmV0dXJuIHRoaXMuZ2IuZmxhZ3N9c2V0IGZsYWdzKGEpe3RoaXMuZ2IuZmxhZ3M9XG5hfWdldCBwb3NpdGlvbigpe3JldHVybiB0aGlzLmdiLnBvc2l0aW9ufXNldCBwb3NpdGlvbihhKXt0aGlzLmdiLnBvc2l0aW9uPWF9fSxNYj1jbGFzc3tMYT17fTtNYT17fTthYj1udWxsO2NvbnN0cnVjdG9yKGEsYixjLGQpe2F8fD10aGlzO3RoaXMucGFyZW50PWE7dGhpcy5YYT1hLlhhO3RoaXMuaWQ9SGIrKzt0aGlzLm5hbWU9Yjt0aGlzLm1vZGU9Yzt0aGlzLnJkZXY9ZDt0aGlzLmF0aW1lPXRoaXMubXRpbWU9dGhpcy5jdGltZT1EYXRlLm5vdygpfWdldCByZWFkKCl7cmV0dXJuIDM2NT09PSh0aGlzLm1vZGUmMzY1KX1zZXQgcmVhZChhKXthP3RoaXMubW9kZXw9MzY1OnRoaXMubW9kZSY9LTM2Nn1nZXQgd3JpdGUoKXtyZXR1cm4gMTQ2PT09KHRoaXMubW9kZSYxNDYpfXNldCB3cml0ZShhKXthP3RoaXMubW9kZXw9MTQ2OnRoaXMubW9kZSY9LTE0N319O1xuZnVuY3Rpb24gUyhhLGI9e30pe2lmKCFhKXRocm93IG5ldyBOKDQ0KTtiLm5iPz8oYi5uYj0hMCk7XCIvXCI9PT1hLmNoYXJBdCgwKXx8KGE9XCIvL1wiK2EpO3ZhciBjPTA7YTpmb3IoOzQwPmM7YysrKXthPWEuc3BsaXQoXCIvXCIpLmZpbHRlcihxPT4hIXEpO2Zvcih2YXIgZD1FYixlPVwiL1wiLGg9MDtoPGEubGVuZ3RoO2grKyl7dmFyIGs9aD09PWEubGVuZ3RoLTE7aWYoayYmYi5wYXJlbnQpYnJlYWs7aWYoXCIuXCIhPT1hW2hdKWlmKFwiLi5cIj09PWFbaF0pZT1mYihlKSxkPWQucGFyZW50O2Vsc2V7ZT1rYShlK1wiL1wiK2FbaF0pO3RyeXtkPVEoZCxhW2hdKX1jYXRjaChxKXtpZig0ND09PXE/LlBhJiZrJiZiLkpiKXJldHVybntwYXRoOmV9O3Rocm93IHE7fSFkLmFifHxrJiYhYi5uYnx8KGQ9ZC5hYi5yb290KTtpZig0MDk2MD09PShkLm1vZGUmNjE0NDApJiYoIWt8fGIuJGEpKXtpZighZC5MYS5yZWFkbGluayl0aHJvdyBuZXcgTig1Mik7ZD1kLkxhLnJlYWRsaW5rKGQpO1wiL1wiPT09ZC5jaGFyQXQoMCl8fFxuKGQ9ZmIoZSkrXCIvXCIrZCk7YT1kK1wiL1wiK2Euc2xpY2UoaCsxKS5qb2luKFwiL1wiKTtjb250aW51ZSBhfX19cmV0dXJue3BhdGg6ZSxub2RlOmR9fXRocm93IG5ldyBOKDMyKTt9ZnVuY3Rpb24gamEoYSl7Zm9yKHZhciBiOzspe2lmKGE9PT1hLnBhcmVudClyZXR1cm4gYT1hLlhhLnpiLGI/XCIvXCIhPT1hW2EubGVuZ3RoLTFdP2Ake2F9LyR7Yn1gOmErYjphO2I9Yj9gJHthLm5hbWV9LyR7Yn1gOmEubmFtZTthPWEucGFyZW50fX1mdW5jdGlvbiBOYihhLGIpe2Zvcih2YXIgYz0wLGQ9MDtkPGIubGVuZ3RoO2QrKyljPShjPDw1KS1jK2IuY2hhckNvZGVBdChkKXwwO3JldHVybihhK2M+Pj4wKSVSLmxlbmd0aH1mdW5jdGlvbiBDYihhKXt2YXIgYj1OYihhLnBhcmVudC5pZCxhLm5hbWUpO2lmKFJbYl09PT1hKVJbYl09YS5iYjtlbHNlIGZvcihiPVJbYl07Yjspe2lmKGIuYmI9PT1hKXtiLmJiPWEuYmI7YnJlYWt9Yj1iLmJifX1cbmZ1bmN0aW9uIFEoYSxiKXt2YXIgYz1QKGEubW9kZSk/KGM9T2IoYSxcInhcIikpP2M6YS5MYS5sb29rdXA/MDoyOjU0O2lmKGMpdGhyb3cgbmV3IE4oYyk7Zm9yKGM9UltOYihhLmlkLGIpXTtjO2M9Yy5iYil7dmFyIGQ9Yy5uYW1lO2lmKGMucGFyZW50LmlkPT09YS5pZCYmZD09PWIpcmV0dXJuIGN9cmV0dXJuIGEuTGEubG9va3VwKGEsYil9ZnVuY3Rpb24gQmIoYSxiLGMsZCl7YT1uZXcgTWIoYSxiLGMsZCk7Yj1OYihhLnBhcmVudC5pZCxhLm5hbWUpO2EuYmI9UltiXTtyZXR1cm4gUltiXT1hfWZ1bmN0aW9uIFAoYSl7cmV0dXJuIDE2Mzg0PT09KGEmNjE0NDApfWZ1bmN0aW9uIFBiKGEpe3ZhciBiPVtcInJcIixcIndcIixcInJ3XCJdW2EmM107YSY1MTImJihiKz1cIndcIik7cmV0dXJuIGJ9XG5mdW5jdGlvbiBPYihhLGIpe2lmKEpiKXJldHVybiAwO2lmKCFiLmluY2x1ZGVzKFwiclwiKXx8YS5tb2RlJjI5Mil7aWYoYi5pbmNsdWRlcyhcIndcIikmJiEoYS5tb2RlJjE0Nil8fGIuaW5jbHVkZXMoXCJ4XCIpJiYhKGEubW9kZSY3MykpcmV0dXJuIDJ9ZWxzZSByZXR1cm4gMjtyZXR1cm4gMH1mdW5jdGlvbiBRYihhLGIpe2lmKCFQKGEubW9kZSkpcmV0dXJuIDU0O3RyeXtyZXR1cm4gUShhLGIpLDIwfWNhdGNoKGMpe31yZXR1cm4gT2IoYSxcInd4XCIpfWZ1bmN0aW9uIFJiKGEsYixjKXt0cnl7dmFyIGQ9UShhLGIpfWNhdGNoKGUpe3JldHVybiBlLlBhfWlmKGE9T2IoYSxcInd4XCIpKXJldHVybiBhO2lmKGMpe2lmKCFQKGQubW9kZSkpcmV0dXJuIDU0O2lmKGQ9PT1kLnBhcmVudHx8XCIvXCI9PT1qYShkKSlyZXR1cm4gMTB9ZWxzZSBpZihQKGQubW9kZSkpcmV0dXJuIDMxO3JldHVybiAwfWZ1bmN0aW9uIFNiKGEpe2lmKCFhKXRocm93IG5ldyBOKDYzKTtyZXR1cm4gYX1cbmZ1bmN0aW9uIFQoYSl7YT1HYlthXTtpZighYSl0aHJvdyBuZXcgTig4KTtyZXR1cm4gYX1mdW5jdGlvbiBUYihhLGI9LTEpe2E9T2JqZWN0LmFzc2lnbihuZXcgTGIsYSk7aWYoLTE9PWIpYTp7Zm9yKGI9MDs0MDk2Pj1iO2IrKylpZighR2JbYl0pYnJlYWsgYTt0aHJvdyBuZXcgTigzMyk7fWEuZmQ9YjtyZXR1cm4gR2JbYl09YX1mdW5jdGlvbiBVYihhLGI9LTEpe2E9VGIoYSxiKTthLk1hPy5SYj8uKGEpO3JldHVybiBhfWZ1bmN0aW9uIFZiKGEsYixjKXt2YXIgZD1hPy5NYS5VYTthPWQ/YTpiO2Q/Pz1iLkxhLlVhO1NiKGQpO2QoYSxjKX12YXIgQWI9e29wZW4oYSl7YS5NYT1GYlthLm5vZGUucmRldl0uTWE7YS5NYS5vcGVuPy4oYSl9LFZhKCl7dGhyb3cgbmV3IE4oNzApO319O2Z1bmN0aW9uIHdiKGEsYil7RmJbYV09e01hOmJ9fVxuZnVuY3Rpb24gV2IoYSxiKXt2YXIgYz1cIi9cIj09PWI7aWYoYyYmRWIpdGhyb3cgbmV3IE4oMTApO2lmKCFjJiZiKXt2YXIgZD1TKGIse25iOiExfSk7Yj1kLnBhdGg7ZD1kLm5vZGU7aWYoZC5hYil0aHJvdyBuZXcgTigxMCk7aWYoIVAoZC5tb2RlKSl0aHJvdyBuZXcgTig1NCk7fWI9e3R5cGU6YSxXYjp7fSx6YjpiLEliOltdfTthPWEuWGEoYik7YS5YYT1iO2Iucm9vdD1hO2M/RWI9YTpkJiYoZC5hYj1iLGQuWGEmJmQuWGEuSWIucHVzaChiKSl9ZnVuY3Rpb24gWGIoYSxiLGMpe3ZhciBkPVMoYSx7cGFyZW50OiEwfSkubm9kZTthPWdiKGEpO2lmKCFhKXRocm93IG5ldyBOKDI4KTtpZihcIi5cIj09PWF8fFwiLi5cIj09PWEpdGhyb3cgbmV3IE4oMjApO3ZhciBlPVFiKGQsYSk7aWYoZSl0aHJvdyBuZXcgTihlKTtpZighZC5MYS5oYil0aHJvdyBuZXcgTig2Myk7cmV0dXJuIGQuTGEuaGIoZCxhLGIsYyl9XG5mdW5jdGlvbiBtYShhLGI9NDM4KXtyZXR1cm4gWGIoYSxiJjQwOTV8MzI3NjgsMCl9ZnVuY3Rpb24gVShhLGI9NTExKXtyZXR1cm4gWGIoYSxiJjEwMjN8MTYzODQsMCl9ZnVuY3Rpb24gWWIoYSxiLGMpe1widW5kZWZpbmVkXCI9PXR5cGVvZiBjJiYoYz1iLGI9NDM4KTtYYihhLGJ8ODE5MixjKX1mdW5jdGlvbiBaYihhLGIpe2lmKCFqYihhKSl0aHJvdyBuZXcgTig0NCk7dmFyIGM9UyhiLHtwYXJlbnQ6ITB9KS5ub2RlO2lmKCFjKXRocm93IG5ldyBOKDQ0KTtiPWdiKGIpO3ZhciBkPVFiKGMsYik7aWYoZCl0aHJvdyBuZXcgTihkKTtpZighYy5MYS5zeW1saW5rKXRocm93IG5ldyBOKDYzKTtjLkxhLnN5bWxpbmsoYyxiLGEpfVxuZnVuY3Rpb24gJGIoYSl7dmFyIGI9UyhhLHtwYXJlbnQ6ITB9KS5ub2RlO2E9Z2IoYSk7dmFyIGM9UShiLGEpLGQ9UmIoYixhLCEwKTtpZihkKXRocm93IG5ldyBOKGQpO2lmKCFiLkxhLnJtZGlyKXRocm93IG5ldyBOKDYzKTtpZihjLmFiKXRocm93IG5ldyBOKDEwKTtiLkxhLnJtZGlyKGIsYSk7Q2IoYyl9ZnVuY3Rpb24gemEoYSl7dmFyIGI9UyhhLHtwYXJlbnQ6ITB9KS5ub2RlO2lmKCFiKXRocm93IG5ldyBOKDQ0KTthPWdiKGEpO3ZhciBjPVEoYixhKSxkPVJiKGIsYSwhMSk7aWYoZCl0aHJvdyBuZXcgTihkKTtpZighYi5MYS51bmxpbmspdGhyb3cgbmV3IE4oNjMpO2lmKGMuYWIpdGhyb3cgbmV3IE4oMTApO2IuTGEudW5saW5rKGIsYSk7Q2IoYyl9ZnVuY3Rpb24gYWMoYSxiKXthPVMoYSx7JGE6IWJ9KS5ub2RlO3JldHVybiBTYihhLkxhLlRhKShhKX1cbmZ1bmN0aW9uIGJjKGEsYixjLGQpe1ZiKGEsYix7bW9kZTpjJjQwOTV8Yi5tb2RlJi00MDk2LGN0aW1lOkRhdGUubm93KCksRmI6ZH0pfWZ1bmN0aW9uIG5hKGEsYil7YT1cInN0cmluZ1wiPT10eXBlb2YgYT9TKGEseyRhOiEwfSkubm9kZTphO2JjKG51bGwsYSxiKX1mdW5jdGlvbiBjYyhhLGIsYyl7aWYoUChiLm1vZGUpKXRocm93IG5ldyBOKDMxKTtpZigzMjc2OCE9PShiLm1vZGUmNjE0NDApKXRocm93IG5ldyBOKDI4KTt2YXIgZD1PYihiLFwid1wiKTtpZihkKXRocm93IG5ldyBOKGQpO1ZiKGEsYix7c2l6ZTpjLHRpbWVzdGFtcDpEYXRlLm5vdygpfSl9XG5mdW5jdGlvbiBvYShhLGIsYz00Mzgpe2lmKFwiXCI9PT1hKXRocm93IG5ldyBOKDQ0KTtpZihcInN0cmluZ1wiPT10eXBlb2YgYil7dmFyIGQ9e3I6MCxcInIrXCI6Mix3OjU3NyxcIncrXCI6NTc4LGE6MTA4OSxcImErXCI6MTA5MH1bYl07aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGQpdGhyb3cgRXJyb3IoYFVua25vd24gZmlsZSBvcGVuIG1vZGU6ICR7Yn1gKTtiPWR9Yz1iJjY0P2MmNDA5NXwzMjc2ODowO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKWQ9YTtlbHNle3ZhciBlPWEuZW5kc1dpdGgoXCIvXCIpO2E9UyhhLHskYTohKGImMTMxMDcyKSxKYjohMH0pO2Q9YS5ub2RlO2E9YS5wYXRofXZhciBoPSExO2lmKGImNjQpaWYoZCl7aWYoYiYxMjgpdGhyb3cgbmV3IE4oMjApO31lbHNle2lmKGUpdGhyb3cgbmV3IE4oMzEpO2Q9WGIoYSxjfDUxMSwwKTtoPSEwfWlmKCFkKXRocm93IG5ldyBOKDQ0KTs4MTkyPT09KGQubW9kZSY2MTQ0MCkmJihiJj0tNTEzKTtpZihiJjY1NTM2JiYhUChkLm1vZGUpKXRocm93IG5ldyBOKDU0KTtcbmlmKCFoJiYoZT1kPzQwOTYwPT09KGQubW9kZSY2MTQ0MCk/MzI6UChkLm1vZGUpJiYoXCJyXCIhPT1QYihiKXx8YiY1NzYpPzMxOk9iKGQsUGIoYikpOjQ0KSl0aHJvdyBuZXcgTihlKTtiJjUxMiYmIWgmJihlPWQsZT1cInN0cmluZ1wiPT10eXBlb2YgZT9TKGUseyRhOiEwfSkubm9kZTplLGNjKG51bGwsZSwwKSk7YiY9LTEzMTcxMztlPVRiKHtub2RlOmQscGF0aDpqYShkKSxmbGFnczpiLHNlZWthYmxlOiEwLHBvc2l0aW9uOjAsTWE6ZC5NYSxMYjpbXSxlcnJvcjohMX0pO2UuTWEub3BlbiYmZS5NYS5vcGVuKGUpO2gmJm5hKGQsYyY1MTEpOyFmLmxvZ1JlYWRGaWxlc3x8YiYxfHxhIGluIEtifHwoS2JbYV09MSk7cmV0dXJuIGV9ZnVuY3Rpb24gcWEoYSl7aWYobnVsbD09PWEuZmQpdGhyb3cgbmV3IE4oOCk7YS5vYiYmKGEub2I9bnVsbCk7dHJ5e2EuTWEuY2xvc2UmJmEuTWEuY2xvc2UoYSl9Y2F0Y2goYil7dGhyb3cgYjt9ZmluYWxseXtHYlthLmZkXT1udWxsfWEuZmQ9bnVsbH1cbmZ1bmN0aW9uIG1jKGEsYixjKXtpZihudWxsPT09YS5mZCl0aHJvdyBuZXcgTig4KTtpZighYS5zZWVrYWJsZXx8IWEuTWEuVmEpdGhyb3cgbmV3IE4oNzApO2lmKDAhPWMmJjEhPWMmJjIhPWMpdGhyb3cgbmV3IE4oMjgpO2EucG9zaXRpb249YS5NYS5WYShhLGIsYyk7YS5MYj1bXX1mdW5jdGlvbiBFYyhhLGIsYyxkLGUpe2lmKDA+ZHx8MD5lKXRocm93IG5ldyBOKDI4KTtpZihudWxsPT09YS5mZCl0aHJvdyBuZXcgTig4KTtpZigxPT09KGEuZmxhZ3MmMjA5NzE1NSkpdGhyb3cgbmV3IE4oOCk7aWYoUChhLm5vZGUubW9kZSkpdGhyb3cgbmV3IE4oMzEpO2lmKCFhLk1hLnJlYWQpdGhyb3cgbmV3IE4oMjgpO3ZhciBoPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBlO2lmKCFoKWU9YS5wb3NpdGlvbjtlbHNlIGlmKCFhLnNlZWthYmxlKXRocm93IG5ldyBOKDcwKTtiPWEuTWEucmVhZChhLGIsYyxkLGUpO2h8fChhLnBvc2l0aW9uKz1iKTtyZXR1cm4gYn1cbmZ1bmN0aW9uIHBhKGEsYixjLGQsZSl7aWYoMD5kfHwwPmUpdGhyb3cgbmV3IE4oMjgpO2lmKG51bGw9PT1hLmZkKXRocm93IG5ldyBOKDgpO2lmKDA9PT0oYS5mbGFncyYyMDk3MTU1KSl0aHJvdyBuZXcgTig4KTtpZihQKGEubm9kZS5tb2RlKSl0aHJvdyBuZXcgTigzMSk7aWYoIWEuTWEud3JpdGUpdGhyb3cgbmV3IE4oMjgpO2Euc2Vla2FibGUmJmEuZmxhZ3MmMTAyNCYmbWMoYSwwLDIpO3ZhciBoPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBlO2lmKCFoKWU9YS5wb3NpdGlvbjtlbHNlIGlmKCFhLnNlZWthYmxlKXRocm93IG5ldyBOKDcwKTtiPWEuTWEud3JpdGUoYSxiLGMsZCxlLHZvaWQgMCk7aHx8KGEucG9zaXRpb24rPWIpO3JldHVybiBifVxuZnVuY3Rpb24geWEoYSl7dmFyIGI9XCJiaW5hcnlcIjtpZihcInV0ZjhcIiE9PWImJlwiYmluYXJ5XCIhPT1iKXRocm93IEVycm9yKGBJbnZhbGlkIGVuY29kaW5nIHR5cGUgXCIke2J9XCJgKTt2YXIgYzt2YXIgZD1vYShhLGR8fDApO2E9YWMoYSkuc2l6ZTt2YXIgZT1uZXcgVWludDhBcnJheShhKTtFYyhkLGUsMCxhLDApO1widXRmOFwiPT09Yj9jPUIoZSk6XCJiaW5hcnlcIj09PWImJihjPWUpO3FhKGQpO3JldHVybiBjfVxuZnVuY3Rpb24gVihhLGIsYyl7YT1rYShcIi9kZXYvXCIrYSk7dmFyIGQ9bGEoISFiLCEhYyk7Vi55Yj8/KFYueWI9NjQpO3ZhciBlPVYueWIrKzw8OHwwO3diKGUse29wZW4oaCl7aC5zZWVrYWJsZT0hMX0sY2xvc2UoKXtjPy5idWZmZXI/Lmxlbmd0aCYmYygxMCl9LHJlYWQoaCxrLHEsdyl7Zm9yKHZhciB2PTAsQz0wO0M8dztDKyspe3RyeXt2YXIgRz1iKCl9Y2F0Y2gocGIpe3Rocm93IG5ldyBOKDI5KTt9aWYodm9pZCAwPT09RyYmMD09PXYpdGhyb3cgbmV3IE4oNik7aWYobnVsbD09PUd8fHZvaWQgMD09PUcpYnJlYWs7disrO2tbcStDXT1HfXYmJihoLm5vZGUuYXRpbWU9RGF0ZS5ub3coKSk7cmV0dXJuIHZ9LHdyaXRlKGgsayxxLHcpe2Zvcih2YXIgdj0wO3Y8dzt2KyspdHJ5e2Moa1txK3ZdKX1jYXRjaChDKXt0aHJvdyBuZXcgTigyOSk7fXcmJihoLm5vZGUubXRpbWU9aC5ub2RlLmN0aW1lPURhdGUubm93KCkpO3JldHVybiB2fX0pO1liKGEsZCxlKX12YXIgVz17fTtcbmZ1bmN0aW9uIEdjKGEsYixjKXtpZihcIi9cIj09PWIuY2hhckF0KDApKXJldHVybiBiO2E9LTEwMD09PWE/XCIvXCI6VChhKS5wYXRoO2lmKDA9PWIubGVuZ3RoKXtpZighYyl0aHJvdyBuZXcgTig0NCk7cmV0dXJuIGF9cmV0dXJuIGErXCIvXCIrYn1cbmZ1bmN0aW9uIEhjKGEsYil7RVthPj4yXT1iLmRldjtFW2ErND4+Ml09Yi5tb2RlO0ZbYSs4Pj4yXT1iLm5saW5rO0VbYSsxMj4+Ml09Yi51aWQ7RVthKzE2Pj4yXT1iLmdpZDtFW2ErMjA+PjJdPWIucmRldjtIW2ErMjQ+PjNdPUJpZ0ludChiLnNpemUpO0VbYSszMj4+Ml09NDA5NjtFW2ErMzY+PjJdPWIuYmxvY2tzO3ZhciBjPWIuYXRpbWUuZ2V0VGltZSgpLGQ9Yi5tdGltZS5nZXRUaW1lKCksZT1iLmN0aW1lLmdldFRpbWUoKTtIW2ErNDA+PjNdPUJpZ0ludChNYXRoLmZsb29yKGMvMUUzKSk7RlthKzQ4Pj4yXT1jJTFFMyoxRTY7SFthKzU2Pj4zXT1CaWdJbnQoTWF0aC5mbG9vcihkLzFFMykpO0ZbYSs2ND4+Ml09ZCUxRTMqMUU2O0hbYSs3Mj4+M109QmlnSW50KE1hdGguZmxvb3IoZS8xRTMpKTtGW2ErODA+PjJdPWUlMUUzKjFFNjtIW2ErODg+PjNdPUJpZ0ludChiLmlubyk7cmV0dXJuIDB9XG52YXIgSWM9dm9pZCAwLEpjPSgpPT57dmFyIGE9RVsrSWM+PjJdO0ljKz00O3JldHVybiBhfSxLYz0wLExjPVswLDMxLDYwLDkxLDEyMSwxNTIsMTgyLDIxMywyNDQsMjc0LDMwNSwzMzVdLE1jPVswLDMxLDU5LDkwLDEyMCwxNTEsMTgxLDIxMiwyNDMsMjczLDMwNCwzMzRdLE5jPXt9LE9jPWE9PntNYT1hO2NifHwwPEtjfHwoZi5vbkV4aXQ/LihhKSxMYT0hMCk7RGEoYSxuZXcgWWEoYSkpfSxQYz1hPT57aWYoIUxhKXRyeXtpZihhKCksIShjYnx8MDxLYykpdHJ5e01hPWE9TWEsT2MoYSl9Y2F0Y2goYil7YiBpbnN0YW5jZW9mIFlhfHxcInVud2luZFwiPT1ifHxEYSgxLGIpfX1jYXRjaChiKXtiIGluc3RhbmNlb2YgWWF8fFwidW53aW5kXCI9PWJ8fERhKDEsYil9fSxRYz17fSxTYz0oKT0+e2lmKCFSYyl7dmFyIGE9e1VTRVI6XCJ3ZWJfdXNlclwiLExPR05BTUU6XCJ3ZWJfdXNlclwiLFBBVEg6XCIvXCIsUFdEOlwiL1wiLEhPTUU6XCIvaG9tZS93ZWJfdXNlclwiLExBTkc6KFwib2JqZWN0XCI9PXR5cGVvZiBuYXZpZ2F0b3ImJlxubmF2aWdhdG9yLmxhbmd1YWdlcyYmbmF2aWdhdG9yLmxhbmd1YWdlc1swXXx8XCJDXCIpLnJlcGxhY2UoXCItXCIsXCJfXCIpK1wiLlVURi04XCIsXzpDYXx8XCIuL3RoaXMucHJvZ3JhbVwifSxiO2ZvcihiIGluIFFjKXZvaWQgMD09PVFjW2JdP2RlbGV0ZSBhW2JdOmFbYl09UWNbYl07dmFyIGM9W107Zm9yKGIgaW4gYSljLnB1c2goYCR7Yn09JHthW2JdfWApO1JjPWN9cmV0dXJuIFJjfSxSYyx4YT1hPT57dmFyIGI9aGEoYSkrMSxjPXooYik7dShhLHgsYyxiKTtyZXR1cm4gY30sVGM9KGEsYixjLGQpPT57dmFyIGU9e3N0cmluZzp2PT57dmFyIEM9MDtudWxsIT09diYmdm9pZCAwIT09diYmMCE9PXYmJihDPXhhKHYpKTtyZXR1cm4gQ30sYXJyYXk6dj0+e3ZhciBDPXoodi5sZW5ndGgpO3Auc2V0KHYsQyk7cmV0dXJuIEN9fTthPWZbXCJfXCIrYV07dmFyIGg9W10saz0wO2lmKGQpZm9yKHZhciBxPTA7cTxkLmxlbmd0aDtxKyspe3ZhciB3PWVbY1txXV07dz8oMD09PWsmJihrPXNhKCkpLGhbcV09dyhkW3FdKSk6XG5oW3FdPWRbcV19Yz1hKC4uLmgpO3JldHVybiBjPWZ1bmN0aW9uKHYpezAhPT1rJiZ3YShrKTtyZXR1cm5cInN0cmluZ1wiPT09Yj92P0IoeCx2KTpcIlwiOlwiYm9vbGVhblwiPT09Yj8hIXY6dn0oYyl9LGVhPTAsZGE9KGEsYik9PntiPTE9PWI/eihhLmxlbmd0aCk6aWEoYS5sZW5ndGgpO2Euc3ViYXJyYXl8fGEuc2xpY2V8fChhPW5ldyBVaW50OEFycmF5KGEpKTt4LnNldChhLGIpO3JldHVybiBifSxVYyxWYz1bXSxZLEE9YT0+e1VjLmRlbGV0ZShZLmdldChhKSk7WS5zZXQoYSxudWxsKTtWYy5wdXNoKGEpfSxBYT0oYSxiKT0+e2lmKCFVYyl7VWM9bmV3IFdlYWtNYXA7dmFyIGM9WS5sZW5ndGg7aWYoVWMpZm9yKHZhciBkPTA7ZDwwK2M7ZCsrKXt2YXIgZT1ZLmdldChkKTtlJiZVYy5zZXQoZSxkKX19aWYoYz1VYy5nZXQoYSl8fDApcmV0dXJuIGM7aWYoVmMubGVuZ3RoKWM9VmMucG9wKCk7ZWxzZXt0cnl7WS5ncm93KDEpfWNhdGNoKHcpe2lmKCEodyBpbnN0YW5jZW9mIFJhbmdlRXJyb3IpKXRocm93IHc7XG50aHJvd1wiVW5hYmxlIHRvIGdyb3cgd2FzbSB0YWJsZS4gU2V0IEFMTE9XX1RBQkxFX0dST1dUSC5cIjt9Yz1ZLmxlbmd0aC0xfXRyeXtZLnNldChjLGEpfWNhdGNoKHcpe2lmKCEodyBpbnN0YW5jZW9mIFR5cGVFcnJvcikpdGhyb3cgdztpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBXZWJBc3NlbWJseS5GdW5jdGlvbil7dmFyIGg9V2ViQXNzZW1ibHkuRnVuY3Rpb247ZD17aTpcImkzMlwiLGo6XCJpNjRcIixmOlwiZjMyXCIsZDpcImY2NFwiLGU6XCJleHRlcm5yZWZcIixwOlwiaTMyXCJ9O2U9e3BhcmFtZXRlcnM6W10scmVzdWx0czpcInZcIj09YlswXT9bXTpbZFtiWzBdXV19O2Zvcih2YXIgaz0xO2s8Yi5sZW5ndGg7KytrKWUucGFyYW1ldGVycy5wdXNoKGRbYltrXV0pO2I9bmV3IGgoZSxhKX1lbHNle2Q9WzFdO2U9Yi5zbGljZSgwLDEpO2I9Yi5zbGljZSgxKTtrPXtpOjEyNyxwOjEyNyxqOjEyNixmOjEyNSxkOjEyNCxlOjExMX07ZC5wdXNoKDk2KTt2YXIgcT1iLmxlbmd0aDsxMjg+cT9kLnB1c2gocSk6ZC5wdXNoKHElXG4xMjh8MTI4LHE+PjcpO2ZvcihoIG9mIGIpZC5wdXNoKGtbaF0pO1widlwiPT1lP2QucHVzaCgwKTpkLnB1c2goMSxrW2VdKTtiPVswLDk3LDExNSwxMDksMSwwLDAsMCwxXTtoPWQubGVuZ3RoOzEyOD5oP2IucHVzaChoKTpiLnB1c2goaCUxMjh8MTI4LGg+PjcpO2IucHVzaCguLi5kKTtiLnB1c2goMiw3LDEsMSwxMDEsMSwxMDIsMCwwLDcsNSwxLDEsMTAyLDAsMCk7Yj1uZXcgV2ViQXNzZW1ibHkuTW9kdWxlKG5ldyBVaW50OEFycmF5KGIpKTtiPShuZXcgV2ViQXNzZW1ibHkuSW5zdGFuY2UoYix7ZTp7ZjphfX0pKS5leHBvcnRzLmZ9WS5zZXQoYyxiKX1VYy5zZXQoYSxjKTtyZXR1cm4gY307Uj1BcnJheSg0MDk2KTtXYihPLFwiL1wiKTtVKFwiL3RtcFwiKTtVKFwiL2hvbWVcIik7VShcIi9ob21lL3dlYl91c2VyXCIpO1xuKGZ1bmN0aW9uKCl7VShcIi9kZXZcIik7d2IoMjU5LHtyZWFkOigpPT4wLHdyaXRlOihkLGUsaCxrKT0+ayxWYTooKT0+MH0pO1liKFwiL2Rldi9udWxsXCIsMjU5KTtuYigxMjgwLHliKTtuYigxNTM2LHpiKTtZYihcIi9kZXYvdHR5XCIsMTI4MCk7WWIoXCIvZGV2L3R0eTFcIiwxNTM2KTt2YXIgYT1uZXcgVWludDhBcnJheSgxMDI0KSxiPTAsYz0oKT0+ezA9PT1iJiYoaWIoYSksYj1hLmJ5dGVMZW5ndGgpO3JldHVybiBhWy0tYl19O1YoXCJyYW5kb21cIixjKTtWKFwidXJhbmRvbVwiLGMpO1UoXCIvZGV2L3NobVwiKTtVKFwiL2Rldi9zaG0vdG1wXCIpfSkoKTtcbihmdW5jdGlvbigpe1UoXCIvcHJvY1wiKTt2YXIgYT1VKFwiL3Byb2Mvc2VsZlwiKTtVKFwiL3Byb2Mvc2VsZi9mZFwiKTtXYih7WGEoKXt2YXIgYj1CYihhLFwiZmRcIiwxNjg5NSw3Myk7Yi5NYT17VmE6Ty5NYS5WYX07Yi5MYT17bG9va3VwKGMsZCl7Yz0rZDt2YXIgZT1UKGMpO2M9e3BhcmVudDpudWxsLFhhOnt6YjpcImZha2VcIn0sTGE6e3JlYWRsaW5rOigpPT5lLnBhdGh9LGlkOmMrMX07cmV0dXJuIGMucGFyZW50PWN9LHJlYWRkaXIoKXtyZXR1cm4gQXJyYXkuZnJvbShHYi5lbnRyaWVzKCkpLmZpbHRlcigoWyxjXSk9PmMpLm1hcCgoW2NdKT0+Yy50b1N0cmluZygpKX19O3JldHVybiBifX0sXCIvcHJvYy9zZWxmL2ZkXCIpfSkoKTtPLnZiPW5ldyBOKDQ0KTtPLnZiLnN0YWNrPVwiPGdlbmVyaWMgZXJyb3IsIG5vIHN0YWNrPlwiO1xudmFyIFhjPXthOihhLGIsYyxkKT0+VGEoYEFzc2VydGlvbiBmYWlsZWQ6ICR7YT9CKHgsYSk6XCJcIn0sIGF0OiBgK1tiP2I/Qih4LGIpOlwiXCI6XCJ1bmtub3duIGZpbGVuYW1lXCIsYyxkP2Q/Qih4LGQpOlwiXCI6XCJ1bmtub3duIGZ1bmN0aW9uXCJdKSxpOmZ1bmN0aW9uKGEsYil7dHJ5e3JldHVybiBhPWE/Qih4LGEpOlwiXCIsbmEoYSxiKSwwfWNhdGNoKGMpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBXfHxcIkVycm5vRXJyb3JcIiE9PWMubmFtZSl0aHJvdyBjO3JldHVybi1jLlBhfX0sTDpmdW5jdGlvbihhLGIsYyl7dHJ5e2I9Yj9CKHgsYik6XCJcIjtiPUdjKGEsYik7aWYoYyYtOClyZXR1cm4tMjg7dmFyIGQ9UyhiLHskYTohMH0pLm5vZGU7aWYoIWQpcmV0dXJuLTQ0O2E9XCJcIjtjJjQmJihhKz1cInJcIik7YyYyJiYoYSs9XCJ3XCIpO2MmMSYmKGErPVwieFwiKTtyZXR1cm4gYSYmT2IoZCxhKT8tMjowfWNhdGNoKGUpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBXfHxcIkVycm5vRXJyb3JcIiE9PWUubmFtZSl0aHJvdyBlO1xucmV0dXJuLWUuUGF9fSxqOmZ1bmN0aW9uKGEsYil7dHJ5e3ZhciBjPVQoYSk7YmMoYyxjLm5vZGUsYiwhMSk7cmV0dXJuIDB9Y2F0Y2goZCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFd8fFwiRXJybm9FcnJvclwiIT09ZC5uYW1lKXRocm93IGQ7cmV0dXJuLWQuUGF9fSxoOmZ1bmN0aW9uKGEpe3RyeXt2YXIgYj1UKGEpO1ZiKGIsYi5ub2RlLHt0aW1lc3RhbXA6RGF0ZS5ub3coKSxGYjohMX0pO3JldHVybiAwfWNhdGNoKGMpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBXfHxcIkVycm5vRXJyb3JcIiE9PWMubmFtZSl0aHJvdyBjO3JldHVybi1jLlBhfX0sYjpmdW5jdGlvbihhLGIsYyl7SWM9Yzt0cnl7dmFyIGQ9VChhKTtzd2l0Y2goYil7Y2FzZSAwOnZhciBlPUpjKCk7aWYoMD5lKWJyZWFrO2Zvcig7R2JbZV07KWUrKztyZXR1cm4gVWIoZCxlKS5mZDtjYXNlIDE6Y2FzZSAyOnJldHVybiAwO2Nhc2UgMzpyZXR1cm4gZC5mbGFncztjYXNlIDQ6cmV0dXJuIGU9SmMoKSxkLmZsYWdzfD1lLDA7XG5jYXNlIDEyOnJldHVybiBlPUpjKCksTmFbZSswPj4xXT0yLDA7Y2FzZSAxMzpjYXNlIDE0OnJldHVybiAwfXJldHVybi0yOH1jYXRjaChoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgV3x8XCJFcnJub0Vycm9yXCIhPT1oLm5hbWUpdGhyb3cgaDtyZXR1cm4taC5QYX19LGc6ZnVuY3Rpb24oYSxiKXt0cnl7dmFyIGM9VChhKSxkPWMubm9kZSxlPWMuTWEuVGE7YT1lP2M6ZDtlPz89ZC5MYS5UYTtTYihlKTt2YXIgaD1lKGEpO3JldHVybiBIYyhiLGgpfWNhdGNoKGspe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBXfHxcIkVycm5vRXJyb3JcIiE9PWsubmFtZSl0aHJvdyBrO3JldHVybi1rLlBhfX0sSDpmdW5jdGlvbihhLGIpe2I9LTkwMDcxOTkyNTQ3NDA5OTI+Ynx8OTAwNzE5OTI1NDc0MDk5MjxiP05hTjpOdW1iZXIoYik7dHJ5e2lmKGlzTmFOKGIpKXJldHVybiA2MTt2YXIgYz1UKGEpO2lmKDA+Ynx8MD09PShjLmZsYWdzJjIwOTcxNTUpKXRocm93IG5ldyBOKDI4KTtjYyhjLGMubm9kZSxiKTtcbnJldHVybiAwfWNhdGNoKGQpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBXfHxcIkVycm5vRXJyb3JcIiE9PWQubmFtZSl0aHJvdyBkO3JldHVybi1kLlBhfX0sRzpmdW5jdGlvbihhLGIpe3RyeXtpZigwPT09YilyZXR1cm4tMjg7dmFyIGM9aGEoXCIvXCIpKzE7aWYoYjxjKXJldHVybi02ODt1KFwiL1wiLHgsYSxiKTtyZXR1cm4gY31jYXRjaChkKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgV3x8XCJFcnJub0Vycm9yXCIhPT1kLm5hbWUpdGhyb3cgZDtyZXR1cm4tZC5QYX19LEs6ZnVuY3Rpb24oYSxiKXt0cnl7cmV0dXJuIGE9YT9CKHgsYSk6XCJcIixIYyhiLGFjKGEsITApKX1jYXRjaChjKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgV3x8XCJFcnJub0Vycm9yXCIhPT1jLm5hbWUpdGhyb3cgYztyZXR1cm4tYy5QYX19LEM6ZnVuY3Rpb24oYSxiLGMpe3RyeXtyZXR1cm4gYj1iP0IoeCxiKTpcIlwiLGI9R2MoYSxiKSxVKGIsYyksMH1jYXRjaChkKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgV3x8XCJFcnJub0Vycm9yXCIhPT1cbmQubmFtZSl0aHJvdyBkO3JldHVybi1kLlBhfX0sSjpmdW5jdGlvbihhLGIsYyxkKXt0cnl7Yj1iP0IoeCxiKTpcIlwiO3ZhciBlPWQmMjU2O2I9R2MoYSxiLGQmNDA5Nik7cmV0dXJuIEhjKGMsZT9hYyhiLCEwKTphYyhiKSl9Y2F0Y2goaCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFd8fFwiRXJybm9FcnJvclwiIT09aC5uYW1lKXRocm93IGg7cmV0dXJuLWguUGF9fSx4OmZ1bmN0aW9uKGEsYixjLGQpe0ljPWQ7dHJ5e2I9Yj9CKHgsYik6XCJcIjtiPUdjKGEsYik7dmFyIGU9ZD9KYygpOjA7cmV0dXJuIG9hKGIsYyxlKS5mZH1jYXRjaChoKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgV3x8XCJFcnJub0Vycm9yXCIhPT1oLm5hbWUpdGhyb3cgaDtyZXR1cm4taC5QYX19LHY6ZnVuY3Rpb24oYSxiLGMsZCl7dHJ5e2I9Yj9CKHgsYik6XCJcIjtiPUdjKGEsYik7aWYoMD49ZClyZXR1cm4tMjg7dmFyIGU9UyhiKS5ub2RlO2lmKCFlKXRocm93IG5ldyBOKDQ0KTtpZighZS5MYS5yZWFkbGluayl0aHJvdyBuZXcgTigyOCk7XG52YXIgaD1lLkxhLnJlYWRsaW5rKGUpO3ZhciBrPU1hdGgubWluKGQsaGEoaCkpLHE9cFtjK2tdO3UoaCx4LGMsZCsxKTtwW2Mra109cTtyZXR1cm4ga31jYXRjaCh3KXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgV3x8XCJFcnJub0Vycm9yXCIhPT13Lm5hbWUpdGhyb3cgdztyZXR1cm4tdy5QYX19LHU6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBhPWE/Qih4LGEpOlwiXCIsJGIoYSksMH1jYXRjaChiKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgV3x8XCJFcnJub0Vycm9yXCIhPT1iLm5hbWUpdGhyb3cgYjtyZXR1cm4tYi5QYX19LGY6ZnVuY3Rpb24oYSxiKXt0cnl7cmV0dXJuIGE9YT9CKHgsYSk6XCJcIixIYyhiLGFjKGEpKX1jYXRjaChjKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgV3x8XCJFcnJub0Vycm9yXCIhPT1jLm5hbWUpdGhyb3cgYztyZXR1cm4tYy5QYX19LHI6ZnVuY3Rpb24oYSxiLGMpe3RyeXtyZXR1cm4gYj1iP0IoeCxiKTpcIlwiLGI9R2MoYSxiKSwwPT09Yz96YShiKTo1MTI9PT1jPyRiKGIpOlxuVGEoXCJJbnZhbGlkIGZsYWdzIHBhc3NlZCB0byB1bmxpbmthdFwiKSwwfWNhdGNoKGQpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBXfHxcIkVycm5vRXJyb3JcIiE9PWQubmFtZSl0aHJvdyBkO3JldHVybi1kLlBhfX0scTpmdW5jdGlvbihhLGIsYyl7dHJ5e2I9Yj9CKHgsYik6XCJcIjtiPUdjKGEsYiwhMCk7dmFyIGQ9RGF0ZS5ub3coKSxlLGg7aWYoYyl7dmFyIGs9RltjPj4yXSs0Mjk0OTY3Mjk2KkVbYys0Pj4yXSxxPUVbYys4Pj4yXTsxMDczNzQxODIzPT1xP2U9ZDoxMDczNzQxODIyPT1xP2U9bnVsbDplPTFFMyprK3EvMUU2O2MrPTE2O2s9RltjPj4yXSs0Mjk0OTY3Mjk2KkVbYys0Pj4yXTtxPUVbYys4Pj4yXTsxMDczNzQxODIzPT1xP2g9ZDoxMDczNzQxODIyPT1xP2g9bnVsbDpoPTFFMyprK3EvMUU2fWVsc2UgaD1lPWQ7aWYobnVsbCE9PShoPz9lKSl7YT1lO3ZhciB3PVMoYix7JGE6ITB9KS5ub2RlO1NiKHcuTGEuVWEpKHcse2F0aW1lOmEsbXRpbWU6aH0pfXJldHVybiAwfWNhdGNoKHYpe2lmKFwidW5kZWZpbmVkXCI9PVxudHlwZW9mIFd8fFwiRXJybm9FcnJvclwiIT09di5uYW1lKXRocm93IHY7cmV0dXJuLXYuUGF9fSxtOigpPT5UYShcIlwiKSxsOigpPT57Y2I9ITE7S2M9MH0sQTpmdW5jdGlvbihhLGIpe2E9LTkwMDcxOTkyNTQ3NDA5OTI+YXx8OTAwNzE5OTI1NDc0MDk5MjxhP05hTjpOdW1iZXIoYSk7YT1uZXcgRGF0ZSgxRTMqYSk7RVtiPj4yXT1hLmdldFNlY29uZHMoKTtFW2IrND4+Ml09YS5nZXRNaW51dGVzKCk7RVtiKzg+PjJdPWEuZ2V0SG91cnMoKTtFW2IrMTI+PjJdPWEuZ2V0RGF0ZSgpO0VbYisxNj4+Ml09YS5nZXRNb250aCgpO0VbYisyMD4+Ml09YS5nZXRGdWxsWWVhcigpLTE5MDA7RVtiKzI0Pj4yXT1hLmdldERheSgpO3ZhciBjPWEuZ2V0RnVsbFllYXIoKTtFW2IrMjg+PjJdPSgwIT09YyU0fHwwPT09YyUxMDAmJjAhPT1jJTQwMD9NYzpMYylbYS5nZXRNb250aCgpXSthLmdldERhdGUoKS0xfDA7RVtiKzM2Pj4yXT0tKDYwKmEuZ2V0VGltZXpvbmVPZmZzZXQoKSk7Yz0obmV3IERhdGUoYS5nZXRGdWxsWWVhcigpLFxuNiwxKSkuZ2V0VGltZXpvbmVPZmZzZXQoKTt2YXIgZD0obmV3IERhdGUoYS5nZXRGdWxsWWVhcigpLDAsMSkpLmdldFRpbWV6b25lT2Zmc2V0KCk7RVtiKzMyPj4yXT0oYyE9ZCYmYS5nZXRUaW1lem9uZU9mZnNldCgpPT1NYXRoLm1pbihkLGMpKXwwfSx5OmZ1bmN0aW9uKGEsYixjLGQsZSxoLGspe2U9LTkwMDcxOTkyNTQ3NDA5OTI+ZXx8OTAwNzE5OTI1NDc0MDk5MjxlP05hTjpOdW1iZXIoZSk7dHJ5e2lmKGlzTmFOKGUpKXJldHVybiA2MTt2YXIgcT1UKGQpO2lmKDAhPT0oYiYyKSYmMD09PShjJjIpJiYyIT09KHEuZmxhZ3MmMjA5NzE1NSkpdGhyb3cgbmV3IE4oMik7aWYoMT09PShxLmZsYWdzJjIwOTcxNTUpKXRocm93IG5ldyBOKDIpO2lmKCFxLk1hLmliKXRocm93IG5ldyBOKDQzKTtpZighYSl0aHJvdyBuZXcgTigyOCk7dmFyIHc9cS5NYS5pYihxLGEsZSxiLGMpO3ZhciB2PXcuS2I7RVtoPj4yXT13LkFiO0Zbaz4+Ml09djtyZXR1cm4gMH1jYXRjaChDKXtpZihcInVuZGVmaW5lZFwiPT1cbnR5cGVvZiBXfHxcIkVycm5vRXJyb3JcIiE9PUMubmFtZSl0aHJvdyBDO3JldHVybi1DLlBhfX0sejpmdW5jdGlvbihhLGIsYyxkLGUsaCl7aD0tOTAwNzE5OTI1NDc0MDk5Mj5ofHw5MDA3MTk5MjU0NzQwOTkyPGg/TmFOOk51bWJlcihoKTt0cnl7dmFyIGs9VChlKTtpZihjJjIpe2M9aDtpZigzMjc2OCE9PShrLm5vZGUubW9kZSY2MTQ0MCkpdGhyb3cgbmV3IE4oNDMpO2lmKCEoZCYyKSl7dmFyIHE9eC5zbGljZShhLGErYik7ay5NYS5qYiYmay5NYS5qYihrLHEsYyxiLGQpfX19Y2F0Y2godyl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFd8fFwiRXJybm9FcnJvclwiIT09dy5uYW1lKXRocm93IHc7cmV0dXJuLXcuUGF9fSxuOihhLGIpPT57TmNbYV0mJihjbGVhclRpbWVvdXQoTmNbYV0uaWQpLGRlbGV0ZSBOY1thXSk7aWYoIWIpcmV0dXJuIDA7dmFyIGM9c2V0VGltZW91dCgoKT0+e2RlbGV0ZSBOY1thXTtQYygoKT0+V2MoYSxwZXJmb3JtYW5jZS5ub3coKSkpfSxiKTtOY1thXT17aWQ6YyxcblhiOmJ9O3JldHVybiAwfSxCOihhLGIsYyxkKT0+e3ZhciBlPShuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSxoPShuZXcgRGF0ZShlLDAsMSkpLmdldFRpbWV6b25lT2Zmc2V0KCk7ZT0obmV3IERhdGUoZSw2LDEpKS5nZXRUaW1lem9uZU9mZnNldCgpO0ZbYT4+Ml09NjAqTWF0aC5tYXgoaCxlKTtFW2I+PjJdPU51bWJlcihoIT1lKTtiPWs9Pnt2YXIgcT1NYXRoLmFicyhrKTtyZXR1cm5gVVRDJHswPD1rP1wiLVwiOlwiK1wifSR7U3RyaW5nKE1hdGguZmxvb3IocS82MCkpLnBhZFN0YXJ0KDIsXCIwXCIpfSR7U3RyaW5nKHElNjApLnBhZFN0YXJ0KDIsXCIwXCIpfWB9O2E9YihoKTtiPWIoZSk7ZTxoPyh1KGEseCxjLDE3KSx1KGIseCxkLDE3KSk6KHUoYSx4LGQsMTcpLHUoYix4LGMsMTcpKX0sZDooKT0+RGF0ZS5ub3coKSxzOigpPT4yMTQ3NDgzNjQ4LGM6KCk9PnBlcmZvcm1hbmNlLm5vdygpLG86YT0+e3ZhciBiPXgubGVuZ3RoO2E+Pj49MDtpZigyMTQ3NDgzNjQ4PGEpcmV0dXJuITE7Zm9yKHZhciBjPVxuMTs0Pj1jO2MqPTIpe3ZhciBkPWIqKDErLjIvYyk7ZD1NYXRoLm1pbihkLGErMTAwNjYzMjk2KTthOntkPShNYXRoLm1pbigyMTQ3NDgzNjQ4LDY1NTM2Kk1hdGguY2VpbChNYXRoLm1heChhLGQpLzY1NTM2KSktS2EuYnVmZmVyLmJ5dGVMZW5ndGgrNjU1MzUpLzY1NTM2fDA7dHJ5e0thLmdyb3coZCk7UWEoKTt2YXIgZT0xO2JyZWFrIGF9Y2F0Y2goaCl7fWU9dm9pZCAwfWlmKGUpcmV0dXJuITB9cmV0dXJuITF9LEU6KGEsYik9Pnt2YXIgYz0wO1NjKCkuZm9yRWFjaCgoZCxlKT0+e3ZhciBoPWIrYztlPUZbYSs0KmU+PjJdPWg7Zm9yKGg9MDtoPGQubGVuZ3RoOysraClwW2UrK109ZC5jaGFyQ29kZUF0KGgpO3BbZV09MDtjKz1kLmxlbmd0aCsxfSk7cmV0dXJuIDB9LEY6KGEsYik9Pnt2YXIgYz1TYygpO0ZbYT4+Ml09Yy5sZW5ndGg7dmFyIGQ9MDtjLmZvckVhY2goZT0+ZCs9ZS5sZW5ndGgrMSk7RltiPj4yXT1kO3JldHVybiAwfSxlOmZ1bmN0aW9uKGEpe3RyeXt2YXIgYj1UKGEpO1xucWEoYik7cmV0dXJuIDB9Y2F0Y2goYyl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFd8fFwiRXJybm9FcnJvclwiIT09Yy5uYW1lKXRocm93IGM7cmV0dXJuIGMuUGF9fSxwOmZ1bmN0aW9uKGEsYil7dHJ5e3ZhciBjPVQoYSk7cFtiXT1jLnR0eT8yOlAoYy5tb2RlKT8zOjQwOTYwPT09KGMubW9kZSY2MTQ0MCk/Nzo0O05hW2IrMj4+MV09MDtIW2IrOD4+M109QmlnSW50KDApO0hbYisxNj4+M109QmlnSW50KDApO3JldHVybiAwfWNhdGNoKGQpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBXfHxcIkVycm5vRXJyb3JcIiE9PWQubmFtZSl0aHJvdyBkO3JldHVybiBkLlBhfX0sdzpmdW5jdGlvbihhLGIsYyxkKXt0cnl7YTp7dmFyIGU9VChhKTthPWI7Zm9yKHZhciBoLGs9Yj0wO2s8YztrKyspe3ZhciBxPUZbYT4+Ml0sdz1GW2ErND4+Ml07YSs9ODt2YXIgdj1FYyhlLHAscSx3LGgpO2lmKDA+dil7dmFyIEM9LTE7YnJlYWsgYX1iKz12O2lmKHY8dylicmVhaztcInVuZGVmaW5lZFwiIT10eXBlb2YgaCYmXG4oaCs9dil9Qz1ifUZbZD4+Ml09QztyZXR1cm4gMH1jYXRjaChHKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgV3x8XCJFcnJub0Vycm9yXCIhPT1HLm5hbWUpdGhyb3cgRztyZXR1cm4gRy5QYX19LEQ6ZnVuY3Rpb24oYSxiLGMsZCl7Yj0tOTAwNzE5OTI1NDc0MDk5Mj5ifHw5MDA3MTk5MjU0NzQwOTkyPGI/TmFOOk51bWJlcihiKTt0cnl7aWYoaXNOYU4oYikpcmV0dXJuIDYxO3ZhciBlPVQoYSk7bWMoZSxiLGMpO0hbZD4+M109QmlnSW50KGUucG9zaXRpb24pO2Uub2ImJjA9PT1iJiYwPT09YyYmKGUub2I9bnVsbCk7cmV0dXJuIDB9Y2F0Y2goaCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFd8fFwiRXJybm9FcnJvclwiIT09aC5uYW1lKXRocm93IGg7cmV0dXJuIGguUGF9fSxJOmZ1bmN0aW9uKGEpe3RyeXt2YXIgYj1UKGEpO3JldHVybiBiLk1hPy5mc3luYz9iLk1hLmZzeW5jKGIpOjB9Y2F0Y2goYyl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFd8fFwiRXJybm9FcnJvclwiIT09Yy5uYW1lKXRocm93IGM7XG5yZXR1cm4gYy5QYX19LHQ6ZnVuY3Rpb24oYSxiLGMsZCl7dHJ5e2E6e3ZhciBlPVQoYSk7YT1iO2Zvcih2YXIgaCxrPWI9MDtrPGM7aysrKXt2YXIgcT1GW2E+PjJdLHc9RlthKzQ+PjJdO2ErPTg7dmFyIHY9cGEoZSxwLHEsdyxoKTtpZigwPnYpe3ZhciBDPS0xO2JyZWFrIGF9Yis9djtpZih2PHcpYnJlYWs7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGgmJihoKz12KX1DPWJ9RltkPj4yXT1DO3JldHVybiAwfWNhdGNoKEcpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBXfHxcIkVycm5vRXJyb3JcIiE9PUcubmFtZSl0aHJvdyBHO3JldHVybiBHLlBhfX0sazpPY30sWjtcbihhc3luYyBmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYyl7Wj1jLmV4cG9ydHM7S2E9Wi5NO1FhKCk7WT1aLk87Sy0tO2YubW9uaXRvclJ1bkRlcGVuZGVuY2llcz8uKEspOzA9PUsmJlNhJiYoYz1TYSxTYT1udWxsLGMoKSk7cmV0dXJuIFp9SysrO2YubW9uaXRvclJ1bkRlcGVuZGVuY2llcz8uKEspO3ZhciBiPXthOlhjfTtpZihmLmluc3RhbnRpYXRlV2FzbSlyZXR1cm4gbmV3IFByb21pc2UoYz0+e2YuaW5zdGFudGlhdGVXYXNtKGIsKGQsZSk9PnthKGQsZSk7YyhkLmV4cG9ydHMpfSl9KTtVYT8/PWYubG9jYXRlRmlsZT9mLmxvY2F0ZUZpbGUoXCJzcWwtd2FzbS53YXNtXCIsRCk6RCtcInNxbC13YXNtLndhc21cIjtyZXR1cm4gYSgoYXdhaXQgWGEoYikpLmluc3RhbmNlKX0pKCk7Zi5fc3FsaXRlM19mcmVlPWE9PihmLl9zcWxpdGUzX2ZyZWU9Wi5QKShhKTtmLl9zcWxpdGUzX3ZhbHVlX3RleHQ9YT0+KGYuX3NxbGl0ZTNfdmFsdWVfdGV4dD1aLlEpKGEpO1xuZi5fc3FsaXRlM19wcmVwYXJlX3YyPShhLGIsYyxkLGUpPT4oZi5fc3FsaXRlM19wcmVwYXJlX3YyPVouUikoYSxiLGMsZCxlKTtmLl9zcWxpdGUzX3N0ZXA9YT0+KGYuX3NxbGl0ZTNfc3RlcD1aLlMpKGEpO2YuX3NxbGl0ZTNfcmVzZXQ9YT0+KGYuX3NxbGl0ZTNfcmVzZXQ9Wi5UKShhKTtmLl9zcWxpdGUzX2V4ZWM9KGEsYixjLGQsZSk9PihmLl9zcWxpdGUzX2V4ZWM9Wi5VKShhLGIsYyxkLGUpO2YuX3NxbGl0ZTNfZmluYWxpemU9YT0+KGYuX3NxbGl0ZTNfZmluYWxpemU9Wi5WKShhKTtmLl9zcWxpdGUzX2NvbHVtbl9uYW1lPShhLGIpPT4oZi5fc3FsaXRlM19jb2x1bW5fbmFtZT1aLlcpKGEsYik7Zi5fc3FsaXRlM19jb2x1bW5fdGV4dD0oYSxiKT0+KGYuX3NxbGl0ZTNfY29sdW1uX3RleHQ9Wi5YKShhLGIpO2YuX3NxbGl0ZTNfY29sdW1uX3R5cGU9KGEsYik9PihmLl9zcWxpdGUzX2NvbHVtbl90eXBlPVouWSkoYSxiKTtcbmYuX3NxbGl0ZTNfZXJybXNnPWE9PihmLl9zcWxpdGUzX2Vycm1zZz1aLlopKGEpO2YuX3NxbGl0ZTNfY2xlYXJfYmluZGluZ3M9YT0+KGYuX3NxbGl0ZTNfY2xlYXJfYmluZGluZ3M9Wi5fKShhKTtmLl9zcWxpdGUzX3ZhbHVlX2Jsb2I9YT0+KGYuX3NxbGl0ZTNfdmFsdWVfYmxvYj1aLiQpKGEpO2YuX3NxbGl0ZTNfdmFsdWVfYnl0ZXM9YT0+KGYuX3NxbGl0ZTNfdmFsdWVfYnl0ZXM9Wi5hYSkoYSk7Zi5fc3FsaXRlM192YWx1ZV9kb3VibGU9YT0+KGYuX3NxbGl0ZTNfdmFsdWVfZG91YmxlPVouYmEpKGEpO2YuX3NxbGl0ZTNfdmFsdWVfaW50PWE9PihmLl9zcWxpdGUzX3ZhbHVlX2ludD1aLmNhKShhKTtmLl9zcWxpdGUzX3ZhbHVlX3R5cGU9YT0+KGYuX3NxbGl0ZTNfdmFsdWVfdHlwZT1aLmRhKShhKTtmLl9zcWxpdGUzX3Jlc3VsdF9ibG9iPShhLGIsYyxkKT0+KGYuX3NxbGl0ZTNfcmVzdWx0X2Jsb2I9Wi5lYSkoYSxiLGMsZCk7XG5mLl9zcWxpdGUzX3Jlc3VsdF9kb3VibGU9KGEsYik9PihmLl9zcWxpdGUzX3Jlc3VsdF9kb3VibGU9Wi5mYSkoYSxiKTtmLl9zcWxpdGUzX3Jlc3VsdF9lcnJvcj0oYSxiLGMpPT4oZi5fc3FsaXRlM19yZXN1bHRfZXJyb3I9Wi5nYSkoYSxiLGMpO2YuX3NxbGl0ZTNfcmVzdWx0X2ludD0oYSxiKT0+KGYuX3NxbGl0ZTNfcmVzdWx0X2ludD1aLmhhKShhLGIpO2YuX3NxbGl0ZTNfcmVzdWx0X2ludDY0PShhLGIpPT4oZi5fc3FsaXRlM19yZXN1bHRfaW50NjQ9Wi5pYSkoYSxiKTtmLl9zcWxpdGUzX3Jlc3VsdF9udWxsPWE9PihmLl9zcWxpdGUzX3Jlc3VsdF9udWxsPVouamEpKGEpO2YuX3NxbGl0ZTNfcmVzdWx0X3RleHQ9KGEsYixjLGQpPT4oZi5fc3FsaXRlM19yZXN1bHRfdGV4dD1aLmthKShhLGIsYyxkKTtmLl9zcWxpdGUzX2FnZ3JlZ2F0ZV9jb250ZXh0PShhLGIpPT4oZi5fc3FsaXRlM19hZ2dyZWdhdGVfY29udGV4dD1aLmxhKShhLGIpO1xuZi5fc3FsaXRlM19jb2x1bW5fY291bnQ9YT0+KGYuX3NxbGl0ZTNfY29sdW1uX2NvdW50PVoubWEpKGEpO2YuX3NxbGl0ZTNfZGF0YV9jb3VudD1hPT4oZi5fc3FsaXRlM19kYXRhX2NvdW50PVoubmEpKGEpO2YuX3NxbGl0ZTNfY29sdW1uX2Jsb2I9KGEsYik9PihmLl9zcWxpdGUzX2NvbHVtbl9ibG9iPVoub2EpKGEsYik7Zi5fc3FsaXRlM19jb2x1bW5fYnl0ZXM9KGEsYik9PihmLl9zcWxpdGUzX2NvbHVtbl9ieXRlcz1aLnBhKShhLGIpO2YuX3NxbGl0ZTNfY29sdW1uX2RvdWJsZT0oYSxiKT0+KGYuX3NxbGl0ZTNfY29sdW1uX2RvdWJsZT1aLnFhKShhLGIpO2YuX3NxbGl0ZTNfYmluZF9ibG9iPShhLGIsYyxkLGUpPT4oZi5fc3FsaXRlM19iaW5kX2Jsb2I9Wi5yYSkoYSxiLGMsZCxlKTtmLl9zcWxpdGUzX2JpbmRfZG91YmxlPShhLGIsYyk9PihmLl9zcWxpdGUzX2JpbmRfZG91YmxlPVouc2EpKGEsYixjKTtcbmYuX3NxbGl0ZTNfYmluZF9pbnQ9KGEsYixjKT0+KGYuX3NxbGl0ZTNfYmluZF9pbnQ9Wi50YSkoYSxiLGMpO2YuX3NxbGl0ZTNfYmluZF90ZXh0PShhLGIsYyxkLGUpPT4oZi5fc3FsaXRlM19iaW5kX3RleHQ9Wi51YSkoYSxiLGMsZCxlKTtmLl9zcWxpdGUzX2JpbmRfcGFyYW1ldGVyX2luZGV4PShhLGIpPT4oZi5fc3FsaXRlM19iaW5kX3BhcmFtZXRlcl9pbmRleD1aLnZhKShhLGIpO2YuX3NxbGl0ZTNfc3FsPWE9PihmLl9zcWxpdGUzX3NxbD1aLndhKShhKTtmLl9zcWxpdGUzX25vcm1hbGl6ZWRfc3FsPWE9PihmLl9zcWxpdGUzX25vcm1hbGl6ZWRfc3FsPVoueGEpKGEpO2YuX3NxbGl0ZTNfY2hhbmdlcz1hPT4oZi5fc3FsaXRlM19jaGFuZ2VzPVoueWEpKGEpO2YuX3NxbGl0ZTNfY2xvc2VfdjI9YT0+KGYuX3NxbGl0ZTNfY2xvc2VfdjI9Wi56YSkoYSk7XG5mLl9zcWxpdGUzX2NyZWF0ZV9mdW5jdGlvbl92Mj0oYSxiLGMsZCxlLGgsayxxLHcpPT4oZi5fc3FsaXRlM19jcmVhdGVfZnVuY3Rpb25fdjI9Wi5BYSkoYSxiLGMsZCxlLGgsayxxLHcpO2YuX3NxbGl0ZTNfdXBkYXRlX2hvb2s9KGEsYixjKT0+KGYuX3NxbGl0ZTNfdXBkYXRlX2hvb2s9Wi5CYSkoYSxiLGMpO2YuX3NxbGl0ZTNfb3Blbj0oYSxiKT0+KGYuX3NxbGl0ZTNfb3Blbj1aLkNhKShhLGIpO3ZhciBpYT1mLl9tYWxsb2M9YT0+KGlhPWYuX21hbGxvYz1aLkRhKShhKSxmYT1mLl9mcmVlPWE9PihmYT1mLl9mcmVlPVouRWEpKGEpO2YuX1JlZ2lzdGVyRXh0ZW5zaW9uRnVuY3Rpb25zPWE9PihmLl9SZWdpc3RlckV4dGVuc2lvbkZ1bmN0aW9ucz1aLkZhKShhKTt2YXIgRGI9KGEsYik9PihEYj1aLkdhKShhLGIpLFdjPShhLGIpPT4oV2M9Wi5IYSkoYSxiKSx3YT1hPT4od2E9Wi5JYSkoYSksej1hPT4oej1aLkphKShhKSxzYT0oKT0+KHNhPVouS2EpKCk7XG5mLnN0YWNrU2F2ZT0oKT0+c2EoKTtmLnN0YWNrUmVzdG9yZT1hPT53YShhKTtmLnN0YWNrQWxsb2M9YT0+eihhKTtmLmN3cmFwPShhLGIsYyxkKT0+e3ZhciBlPSFjfHxjLmV2ZXJ5KGg9PlwibnVtYmVyXCI9PT1ofHxcImJvb2xlYW5cIj09PWgpO3JldHVyblwic3RyaW5nXCIhPT1iJiZlJiYhZD9mW1wiX1wiK2FdOiguLi5oKT0+VGMoYSxiLGMsaCl9O2YuYWRkRnVuY3Rpb249QWE7Zi5yZW1vdmVGdW5jdGlvbj1BO2YuVVRGOFRvU3RyaW5nPXVhO2YuQUxMT0NfTk9STUFMPWVhO2YuYWxsb2NhdGU9ZGE7Zi5hbGxvY2F0ZVVURjhPblN0YWNrPXhhO1xuZnVuY3Rpb24gWWMoKXtmdW5jdGlvbiBhKCl7Zi5jYWxsZWRSdW49ITA7aWYoIUxhKXtpZighZi5ub0ZTSW5pdCYmIUliKXt2YXIgYixjO0liPSEwO2Q/Pz1mLnN0ZGluO2I/Pz1mLnN0ZG91dDtjPz89Zi5zdGRlcnI7ZD9WKFwic3RkaW5cIixkKTpaYihcIi9kZXYvdHR5XCIsXCIvZGV2L3N0ZGluXCIpO2I/VihcInN0ZG91dFwiLG51bGwsYik6WmIoXCIvZGV2L3R0eVwiLFwiL2Rldi9zdGRvdXRcIik7Yz9WKFwic3RkZXJyXCIsbnVsbCxjKTpaYihcIi9kZXYvdHR5MVwiLFwiL2Rldi9zdGRlcnJcIik7b2EoXCIvZGV2L3N0ZGluXCIsMCk7b2EoXCIvZGV2L3N0ZG91dFwiLDEpO29hKFwiL2Rldi9zdGRlcnJcIiwxKX1aLk4oKTtKYj0hMTtmLm9uUnVudGltZUluaXRpYWxpemVkPy4oKTtpZihmLnBvc3RSdW4pZm9yKFwiZnVuY3Rpb25cIj09dHlwZW9mIGYucG9zdFJ1biYmKGYucG9zdFJ1bj1bZi5wb3N0UnVuXSk7Zi5wb3N0UnVuLmxlbmd0aDspe3ZhciBkPWYucG9zdFJ1bi5zaGlmdCgpOyRhLnVuc2hpZnQoZCl9WmEoJGEpfX1cbmlmKDA8SylTYT1ZYztlbHNle2lmKGYucHJlUnVuKWZvcihcImZ1bmN0aW9uXCI9PXR5cGVvZiBmLnByZVJ1biYmKGYucHJlUnVuPVtmLnByZVJ1bl0pO2YucHJlUnVuLmxlbmd0aDspYmIoKTtaYShhYik7MDxLP1NhPVljOmYuc2V0U3RhdHVzPyhmLnNldFN0YXR1cyhcIlJ1bm5pbmcuLi5cIiksc2V0VGltZW91dCgoKT0+e3NldFRpbWVvdXQoKCk9PmYuc2V0U3RhdHVzKFwiXCIpLDEpO2EoKX0sMSkpOmEoKX19aWYoZi5wcmVJbml0KWZvcihcImZ1bmN0aW9uXCI9PXR5cGVvZiBmLnByZUluaXQmJihmLnByZUluaXQ9W2YucHJlSW5pdF0pOzA8Zi5wcmVJbml0Lmxlbmd0aDspZi5wcmVJbml0LnBvcCgpKCk7WWMoKTtcblxuXG4gICAgICAgIC8vIFRoZSBzaGVsbC1wcmUuanMgYW5kIGVtY2MtZ2VuZXJhdGVkIGNvZGUgZ29lcyBhYm92ZVxuICAgICAgICByZXR1cm4gTW9kdWxlO1xuICAgIH0pOyAvLyBUaGUgZW5kIG9mIHRoZSBwcm9taXNlIGJlaW5nIHJldHVybmVkXG5cbiAgcmV0dXJuIGluaXRTcWxKc1Byb21pc2U7XG59IC8vIFRoZSBlbmQgb2Ygb3VyIGluaXRTcWxKcyBmdW5jdGlvblxuXG4vLyBUaGlzIGJpdCBiZWxvdyBpcyBjb3BpZWQgYWxtb3N0IGV4YWN0bHkgZnJvbSB3aGF0IHlvdSBnZXQgd2hlbiB5b3UgdXNlIHRoZSBNT0RVTEFSSVpFPTEgZmxhZyB3aXRoIGVtY2Ncbi8vIEhvd2V2ZXIsIHdlIGRvbid0IHdhbnQgdG8gdXNlIHRoZSBlbWNjIG1vZHVsYXJpemF0aW9uLiBTZWUgc2hlbGwtcHJlLmpzXG5pZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKXtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGluaXRTcWxKcztcbiAgICAvLyBUaGlzIHdpbGwgYWxsb3cgdGhlIG1vZHVsZSB0byBiZSB1c2VkIGluIEVTNiBvciBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBpbml0U3FsSnM7XG59XG5lbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZVsnYW1kJ10pIHtcbiAgICBkZWZpbmUoW10sIGZ1bmN0aW9uKCkgeyByZXR1cm4gaW5pdFNxbEpzOyB9KTtcbn1cbmVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jyl7XG4gICAgZXhwb3J0c1tcIk1vZHVsZVwiXSA9IGluaXRTcWxKcztcbn1cbiIsICJpbXBvcnQgeyBQbHVnaW4sIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuaW1wb3J0IHsgRGF0YWJhc2VTZXJ2aWNlIH0gZnJvbSBcIi4vZGF0YWJhc2UvRGF0YWJhc2VTZXJ2aWNlXCI7XG5pbXBvcnQgeyBEZWNrTWFuYWdlciB9IGZyb20gXCIuL3NlcnZpY2VzL0RlY2tNYW5hZ2VyXCI7XG5pbXBvcnQgeyBEZWNrU3luY2hyb25pemVyIH0gZnJvbSBcIi4vc2VydmljZXMvRGVja1N5bmNocm9uaXplclwiO1xuaW1wb3J0IHsgU2NoZWR1bGVyIH0gZnJvbSBcIi4vc2VydmljZXMvU2NoZWR1bGVyXCI7XG5pbXBvcnQgeyBCYWNrdXBTZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZXMvQmFja3VwU2VydmljZVwiO1xuaW1wb3J0IHsgeWllbGRUb1VJIH0gZnJvbSBcIi4vdXRpbHMvdWlcIjtcbmltcG9ydCB7IExvZ2dlciwgZm9ybWF0VGltZSB9IGZyb20gXCIuL3V0aWxzL2xvZ2dpbmdcIjtcbmltcG9ydCB7IFByb2dyZXNzVHJhY2tlciB9IGZyb20gXCIuL3V0aWxzL3Byb2dyZXNzXCI7XG5pbXBvcnQgeyBEZWNrU3RhdHMgfSBmcm9tIFwiLi9kYXRhYmFzZS90eXBlc1wiO1xuaW1wb3J0IHsgRmxhc2hjYXJkc1NldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IERlY2tzU2V0dGluZ1RhYiB9IGZyb20gXCIuL2NvbXBvbmVudHMvU2V0dGluZ3NUYWJcIjtcblxuaW1wb3J0IHsgRGVja3NWaWV3IH0gZnJvbSBcIi4vY29tcG9uZW50cy9EZWNrc1ZpZXdcIjtcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9ERUNLUyA9IFwiZGVja3Mtdmlld1wiO1xuXG4vKipcbiAqIERlZXAgbWVyZ2UgdXRpbGl0eSB0aGF0IGlnbm9yZXMgbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlc1xuICogVGhpcyBwcmV2ZW50cyBudWxsIHZhbHVlcyBpbiBsb2FkZWQgZGF0YSBmcm9tIG92ZXJyaWRpbmcgdmFsaWQgZGVmYXVsdHNcbiAqL1xuZnVuY3Rpb24gZGVlcE1lcmdlSWdub3JlTnVsbCh0YXJnZXQ6IGFueSwgc291cmNlOiBhbnkpOiBhbnkge1xuICBpZiAoc291cmNlID09PSBudWxsIHx8IHNvdXJjZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygc291cmNlICE9PSBcIm9iamVjdFwiIHx8IEFycmF5LmlzQXJyYXkoc291cmNlKSkge1xuICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICBjb25zdCByZXN1bHQgPSB7IC4uLnRhcmdldCB9O1xuXG4gIGZvciAoY29uc3Qga2V5IGluIHNvdXJjZSkge1xuICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgY29uc3Qgc291cmNlVmFsdWUgPSBzb3VyY2Vba2V5XTtcblxuICAgICAgaWYgKHNvdXJjZVZhbHVlID09PSBudWxsIHx8IHNvdXJjZVZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gS2VlcCB0aGUgdGFyZ2V0IHZhbHVlLCBkb24ndCBvdmVycmlkZSB3aXRoIG51bGwvdW5kZWZpbmVkXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBzb3VyY2VWYWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAhQXJyYXkuaXNBcnJheShzb3VyY2VWYWx1ZSkgJiZcbiAgICAgICAgdGFyZ2V0W2tleV1cbiAgICAgICkge1xuICAgICAgICAvLyBSZWN1cnNpdmVseSBtZXJnZSBvYmplY3RzXG4gICAgICAgIHJlc3VsdFtrZXldID0gZGVlcE1lcmdlSWdub3JlTnVsbCh0YXJnZXRba2V5XSwgc291cmNlVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXNlIHNvdXJjZSB2YWx1ZSBmb3IgcHJpbWl0aXZlcyBhbmQgYXJyYXlzXG4gICAgICAgIHJlc3VsdFtrZXldID0gc291cmNlVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVja3NQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBwcml2YXRlIGRiOiBEYXRhYmFzZVNlcnZpY2U7XG4gIHB1YmxpYyBkZWNrTWFuYWdlcjogRGVja01hbmFnZXI7XG4gIHByaXZhdGUgZGVja1N5bmNocm9uaXplcjogRGVja1N5bmNocm9uaXplcjtcbiAgcHJpdmF0ZSBzY2hlZHVsZXI6IFNjaGVkdWxlcjtcbiAgcHJpdmF0ZSBiYWNrdXBTZXJ2aWNlOiBCYWNrdXBTZXJ2aWNlO1xuICBwdWJsaWMgdmlldzogRGVja3NWaWV3IHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBzZXR0aW5nczogRmxhc2hjYXJkc1NldHRpbmdzO1xuICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuICBwcml2YXRlIHByb2dyZXNzVHJhY2tlcjogUHJvZ3Jlc3NUcmFja2VyO1xuICBwcml2YXRlIGhhc1Nob3duSW5pdGlhbFByb2dyZXNzID0gZmFsc2U7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIC8vIExvYWQgc2V0dGluZ3MgZmlyc3RcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB1dGlsaXRpZXNcbiAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIoXG4gICAgICB0aGlzLnNldHRpbmdzLFxuICAgICAgdGhpcy5hcHAudmF1bHQuYWRhcHRlcixcbiAgICAgIHRoaXMuYXBwLnZhdWx0LmNvbmZpZ0RpcixcbiAgICApO1xuICAgIHRoaXMucHJvZ3Jlc3NUcmFja2VyID0gbmV3IFByb2dyZXNzVHJhY2tlcih0aGlzLnNldHRpbmdzKTtcblxuICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiTG9hZGluZyBEZWNrcyBwbHVnaW5cIik7XG5cbiAgICB0cnkge1xuICAgICAgLy8gRW5zdXJlIHBsdWdpbiBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcbiAgICAgIGNvbnN0IHBsdWdpbkRpciA9IGAke3RoaXMuYXBwLnZhdWx0LmNvbmZpZ0Rpcn0vcGx1Z2lucy9kZWNrc2A7XG4gICAgICBpZiAoIShhd2FpdCBhZGFwdGVyLmV4aXN0cyhwbHVnaW5EaXIpKSkge1xuICAgICAgICBhd2FpdCBhZGFwdGVyLm1rZGlyKHBsdWdpbkRpcik7XG4gICAgICB9XG5cbiAgICAgIC8vIEZTUlMgaW5zdGFuY2VzIGFyZSBub3cgY3JlYXRlZCBwZXItZGVjayBhcyBuZWVkZWRcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZVxuICAgICAgY29uc3QgZGF0YWJhc2VQYXRoID0gYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL2RlY2tzL2ZsYXNoY2FyZHMuZGJgO1xuICAgICAgdGhpcy5kYiA9IG5ldyBEYXRhYmFzZVNlcnZpY2UoXG4gICAgICAgIGRhdGFiYXNlUGF0aCxcbiAgICAgICAgYWRhcHRlcixcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcuYmluZCh0aGlzKSxcbiAgICAgICk7XG4gICAgICBhd2FpdCB0aGlzLmRiLmluaXRpYWxpemUoKTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBkZWNrIG1hbmFnZXIgd2l0aCBvcHRpbWl6ZWQgbWFpbi10aHJlYWQgYXBwcm9hY2hcbiAgICAgIHRoaXMuZGVja01hbmFnZXIgPSBuZXcgRGVja01hbmFnZXIoXG4gICAgICAgIHRoaXMuYXBwLnZhdWx0LFxuICAgICAgICB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLFxuICAgICAgICB0aGlzLmRiLFxuICAgICAgICB0aGlzLFxuICAgICAgICB0aGlzLnNldHRpbmdzLnBhcnNpbmcuZm9sZGVyU2VhcmNoUGF0aCxcbiAgICAgICk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgZGVjayBzeW5jaHJvbml6ZXJcbiAgICAgIHRoaXMuZGVja1N5bmNocm9uaXplciA9IG5ldyBEZWNrU3luY2hyb25pemVyKFxuICAgICAgICB0aGlzLmRiLFxuICAgICAgICB0aGlzLmRlY2tNYW5hZ2VyLFxuICAgICAgICB0aGlzLnNldHRpbmdzLFxuICAgICAgICB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLFxuICAgICAgICB0aGlzLmFwcC52YXVsdC5jb25maWdEaXIsXG4gICAgICApO1xuXG4gICAgICAvLyBJbml0aWFsaXplIGJhY2t1cCBzZXJ2aWNlXG4gICAgICB0aGlzLmJhY2t1cFNlcnZpY2UgPSBuZXcgQmFja3VwU2VydmljZShcbiAgICAgICAgdGhpcy5hcHAudmF1bHQuYWRhcHRlcixcbiAgICAgICAgdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyLFxuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1Zy5iaW5kKHRoaXMpLFxuICAgICAgKTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBzY2hlZHVsZXJcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gbmV3IFNjaGVkdWxlcihcbiAgICAgICAgdGhpcy5kYixcbiAgICAgICAgdGhpcy5zZXR0aW5ncyxcbiAgICAgICAgdGhpcy5hcHAudmF1bHQuYWRhcHRlcixcbiAgICAgICAgdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyLFxuICAgICAgICB0aGlzLmJhY2t1cFNlcnZpY2UsXG4gICAgICApO1xuXG4gICAgICAvLyBSZWdpc3RlciB0aGUgc2lkZSBwYW5lbCB2aWV3XG4gICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgICAgVklFV19UWVBFX0RFQ0tTLFxuICAgICAgICAobGVhZikgPT5cbiAgICAgICAgICBuZXcgRGVja3NWaWV3KFxuICAgICAgICAgICAgbGVhZixcbiAgICAgICAgICAgIHRoaXMuZGIsXG4gICAgICAgICAgICB0aGlzLmRlY2tTeW5jaHJvbml6ZXIsXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlcixcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MsXG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzVHJhY2tlcixcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLFxuICAgICAgICAgICAgKHZpZXc6IERlY2tzVmlldyB8IG51bGwpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgKSxcbiAgICAgICk7XG5cbiAgICAgIC8vIFNjaGVkdWxlIGluaXRpYWwgc3luYyBhZnRlciB3b3Jrc3BhY2UgaXMgcmVhZHlcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcbiAgICAgICAgLy8gQWRkaXRpb25hbCBkZWxheSB0byBlbnN1cmUgbWV0YWRhdGEgY2FjaGUgaXMgZnVsbHkgcG9wdWxhdGVkIGFuZCBhcHAgaXMgcmVzcG9uc2l2ZVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnBlcmZvcm1Jbml0aWFsU3luYygpO1xuICAgICAgICB9LCAyMDAwKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBZGQgcmliYm9uIGljb25cbiAgICAgIHRoaXMuYWRkUmliYm9uSWNvbihcImJyYWluXCIsIFwiRmxhc2hjYXJkc1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIGNvbW1hbmQgdG8gc2hvdyBmbGFzaGNhcmRzIHBhbmVsXG4gICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJzaG93LWZsYXNoY2FyZHMtcGFuZWxcIixcbiAgICAgICAgbmFtZTogXCJTaG93IEZsYXNoY2FyZHMgUGFuZWxcIixcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIExpc3RlbiBmb3IgZmlsZSBjaGFuZ2VzIHRvIHVwZGF0ZSBkZWNrc1xuICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICB0aGlzLmFwcC52YXVsdC5vbihcIm1vZGlmeVwiLCBhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09IFwibWRcIikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVGaWxlQ2hhbmdlKGZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICApO1xuXG4gICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwiZGVsZXRlXCIsIGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZUZpbGVEZWxldGUoZmlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICk7XG5cbiAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgdGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgYXN5bmMgKGZpbGUsIG9sZFBhdGgpID0+IHtcbiAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlRmlsZVJlbmFtZShmaWxlLCBvbGRQYXRoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgKTtcblxuICAgICAgLy8gQWRkIHNldHRpbmdzIHRhYlxuICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKFxuICAgICAgICBuZXcgRGVja3NTZXR0aW5nVGFiKFxuICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgdGhpcy5zZXR0aW5ncyxcbiAgICAgICAgICB0aGlzLmRiLFxuICAgICAgICAgIHRoaXMuc2F2ZVNldHRpbmdzLmJpbmQodGhpcyksXG4gICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgKCkgPT4gdGhpcy52aWV3Py5wZXJmb3JtU3luYyhmYWxzZSkgfHwgUHJvbWlzZS5yZXNvbHZlKCksXG4gICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMudmlldykge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcucmVmcmVzaFN0YXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy52aWV3KSB7XG4gICAgICAgICAgICAgIHRoaXMudmlldy5yZXN0YXJ0QmFja2dyb3VuZFJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXcpIHtcbiAgICAgICAgICAgICAgdGhpcy52aWV3LnN0YXJ0QmFja2dyb3VuZFJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXcpIHtcbiAgICAgICAgICAgICAgdGhpcy52aWV3LnN0b3BCYWNrZ3JvdW5kUmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGhpcy5kYi5wdXJnZURhdGFiYXNlLmJpbmQodGhpcy5kYiksXG4gICAgICAgICAgdGhpcy5iYWNrdXBTZXJ2aWNlLFxuICAgICAgICApLFxuICAgICAgKTtcblxuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJEZWNrcyBwbHVnaW4gbG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgRGVja3MgcGx1Z2luOlwiLCBlcnJvcik7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncz8udWk/LmVuYWJsZU5vdGljZXMgIT09IGZhbHNlKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gbG9hZCBEZWNrcyBwbHVnaW4uIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG9udW5sb2FkKCkge1xuICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiVW5sb2FkaW5nIERlY2tzIHBsdWdpblwiKTtcblxuICAgIC8vIENsb3NlIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiAgICBpZiAodGhpcy5kYikge1xuICAgICAgYXdhaXQgdGhpcy5kYi5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICBjb25zdCBsb2FkZWREYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICAgIHRoaXMuc2V0dGluZ3MgPSBkZWVwTWVyZ2VJZ25vcmVOdWxsKERFRkFVTFRfU0VUVElOR1MsIGxvYWRlZERhdGEpO1xuXG4gICAgLy8gRGVlcCBtZXJnZSBlbnN1cmVzIGFsbCBwcm9wZXJ0aWVzIGhhdmUgdmFsaWQgZGVmYXVsdHNcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIC8vIEZTUlMgaW5zdGFuY2VzIGFyZSBub3cgZGVjay1zcGVjaWZpYywgbm8gZ2xvYmFsIGluc3RhbmNlIHRvIHVwZGF0ZVxuXG4gICAgLy8gVXBkYXRlIERlY2tNYW5hZ2VyIGZvbGRlciBzZWFyY2ggcGF0aCBpZiBpdCBleGlzdHNcbiAgICBpZiAodGhpcy5kZWNrTWFuYWdlcikge1xuICAgICAgdGhpcy5kZWNrTWFuYWdlci51cGRhdGVGb2xkZXJTZWFyY2hQYXRoKFxuICAgICAgICB0aGlzLnNldHRpbmdzLnBhcnNpbmcuZm9sZGVyU2VhcmNoUGF0aCxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcblxuICAgIGxldCBsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCA9IG51bGw7XG4gICAgY29uc3QgbGVhdmVzID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfREVDS1MpO1xuXG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBWaWV3IGFscmVhZHkgb3BlblxuICAgICAgbGVhZiA9IGxlYXZlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT3BlbiBpbiByaWdodCBzaWRlYmFyXG4gICAgICBsZWFmID0gd29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICBpZiAobGVhZikge1xuICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgdHlwZTogVklFV19UWVBFX0RFQ0tTLFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxlYWYpIHtcbiAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGhhbmRsZUZpbGVDaGFuZ2UoZmlsZTogVEZpbGUpIHtcbiAgICAvLyBDaGVjayBpZiBmaWxlIGhhcyBmbGFzaGNhcmRzIHRhZ1xuICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoYEZpbGUgY2hhbmdlZDogJHtmaWxlLnBhdGh9LCBtZXRhZGF0YTpgLCBtZXRhZGF0YSk7XG5cbiAgICBpZiAoIW1ldGFkYXRhKSByZXR1cm47XG5cbiAgICAvLyBDaGVjayBib3RoIGlubGluZSB0YWdzIGFuZCBmcm9udG1hdHRlciB0YWdzXG4gICAgY29uc3QgYWxsVGFnczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAobWV0YWRhdGEudGFncykge1xuICAgICAgYWxsVGFncy5wdXNoKC4uLm1ldGFkYXRhLnRhZ3MubWFwKCh0KSA9PiB0LnRhZykpO1xuICAgIH1cbiAgICBpZiAobWV0YWRhdGEuZnJvbnRtYXR0ZXIgJiYgbWV0YWRhdGEuZnJvbnRtYXR0ZXIudGFncykge1xuICAgICAgY29uc3QgZnJvbnRtYXR0ZXJUYWdzID0gQXJyYXkuaXNBcnJheShtZXRhZGF0YS5mcm9udG1hdHRlci50YWdzKVxuICAgICAgICA/IG1ldGFkYXRhLmZyb250bWF0dGVyLnRhZ3NcbiAgICAgICAgOiBbbWV0YWRhdGEuZnJvbnRtYXR0ZXIudGFnc107XG4gICAgICBhbGxUYWdzLnB1c2goXG4gICAgICAgIC4uLmZyb250bWF0dGVyVGFncy5tYXAoKHRhZykgPT5cbiAgICAgICAgICB0YWcuc3RhcnRzV2l0aChcIiNcIikgPyB0YWcgOiBgIyR7dGFnfWAsXG4gICAgICAgICksXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGhhc0ZsYXNoY2FyZHNUYWcgPSBhbGxUYWdzLnNvbWUoKHRhZykgPT5cbiAgICAgIHRhZy5zdGFydHNXaXRoKFwiI2ZsYXNoY2FyZHNcIiksXG4gICAgKTtcblxuICAgIHRoaXMubG9nZ2VyLmRlYnVnKFxuICAgICAgYEZpbGUgJHtmaWxlLnBhdGh9IGhhcyBmbGFzaGNhcmRzIHRhZzpgLFxuICAgICAgaGFzRmxhc2hjYXJkc1RhZyxcbiAgICApO1xuXG4gICAgaWYgKGhhc0ZsYXNoY2FyZHNUYWcpIHtcbiAgICAgIC8vIENoZWNrIGlmIGRlY2sgZXhpc3RzIGZvciB0aGlzIGZpbGVcbiAgICAgIGNvbnN0IGV4aXN0aW5nRGVjayA9IGF3YWl0IHRoaXMuZGIuZ2V0RGVja0J5RmlsZXBhdGgoZmlsZS5wYXRoKTtcbiAgICAgIGlmIChleGlzdGluZ0RlY2spIHtcbiAgICAgICAgLy8gVXBkYXRlIGRlY2sgdGFnIGlmIGl0IGNoYW5nZWRcbiAgICAgICAgY29uc3QgbmV3VGFnID1cbiAgICAgICAgICBhbGxUYWdzLmZpbmQoKHRhZykgPT4gdGFnLnN0YXJ0c1dpdGgoXCIjZmxhc2hjYXJkc1wiKSkgfHwgXCIjZmxhc2hjYXJkc1wiO1xuICAgICAgICBpZiAoZXhpc3RpbmdEZWNrLnRhZyAhPT0gbmV3VGFnKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXG4gICAgICAgICAgICBgVXBkYXRpbmcgZGVjayB0YWcgZnJvbSAke2V4aXN0aW5nRGVjay50YWd9IHRvICR7bmV3VGFnfWAsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRiLnVwZGF0ZURlY2soZXhpc3RpbmdEZWNrLmlkLCB7IHRhZzogbmV3VGFnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3luYyBmbGFzaGNhcmRzIGZvciB0aGlzIHNwZWNpZmljIGRlY2sgb25seVxuICAgICAgICBhd2FpdCB5aWVsZFRvVUkoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWNrU3luY2hyb25pemVyLnN5bmNEZWNrKGV4aXN0aW5nRGVjay5pZCk7XG5cbiAgICAgICAgLy8gUmVmcmVzaCBvbmx5IHRoaXMgc3BlY2lmaWMgZGVjaydzIHN0YXRzIChmYXN0ZXN0IG9wdGlvbilcbiAgICAgICAgaWYgKHRoaXMudmlldykge1xuICAgICAgICAgIGF3YWl0IHRoaXMudmlldy5yZWZyZXNoU3RhdHNCeUlkKGV4aXN0aW5nRGVjay5pZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5ldyBmaWxlIHdpdGggZmxhc2hjYXJkcyB0YWcgLSBjcmVhdGUgZGVjayBmb3IgdGhpcyBmaWxlIG9ubHlcbiAgICAgICAgY29uc3QgbmV3VGFnID1cbiAgICAgICAgICBhbGxUYWdzLmZpbmQoKHRhZykgPT4gdGFnLnN0YXJ0c1dpdGgoXCIjZmxhc2hjYXJkc1wiKSkgfHwgXCIjZmxhc2hjYXJkc1wiO1xuICAgICAgICBhd2FpdCB0aGlzLmRlY2tTeW5jaHJvbml6ZXIuY3JlYXRlRGVja0ZvckZpbGUoZmlsZS5wYXRoLCBuZXdUYWcpO1xuICAgICAgICBhd2FpdCB5aWVsZFRvVUkoKTtcblxuICAgICAgICAvLyBHZXQgdGhlIG5ld2x5IGNyZWF0ZWQgZGVjayBhbmQgc3luYyBpdFxuICAgICAgICBjb25zdCBuZXdEZWNrID0gYXdhaXQgdGhpcy5kYi5nZXREZWNrQnlGaWxlcGF0aChmaWxlLnBhdGgpO1xuICAgICAgICBpZiAobmV3RGVjaykge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGVja1N5bmNocm9uaXplci5zeW5jRGVjayhuZXdEZWNrLmlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvciBuZXcgZGVja3MsIHJlZnJlc2ggYWxsIHN0YXRzIHRvIHNob3cgdGhlIG5ldyBkZWNrXG4gICAgICAgIGlmICh0aGlzLnZpZXcpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcucmVmcmVzaFN0YXRzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBwZXJmb3JtSW5pdGlhbFN5bmMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJQZXJmb3JtaW5nIGluaXRpYWwgYmFja2dyb3VuZCBzeW5jLi4uXCIpO1xuXG4gICAgICAvLyBVc2UgcmVxdWVzdElkbGVDYWxsYmFjayBvciBzZXRUaW1lb3V0IHRvIGVuc3VyZSBub24tYmxvY2tpbmcgZXhlY3V0aW9uXG4gICAgICBhd2FpdCB5aWVsZFRvVUkoKTtcblxuICAgICAgLy8gRGVsZWdhdGUgdG8gdmlldyBmb3IgZG9tYWluIGxvZ2ljXG4gICAgICBpZiAodGhpcy52aWV3KSB7XG4gICAgICAgIGF3YWl0IHRoaXMudmlldy5wZXJmb3JtU3luYyhmYWxzZSk7XG4gICAgICAgIGF3YWl0IHRoaXMudmlldy5yZWZyZXNoKGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgeWllbGRUb1VJKCk7XG5cbiAgICAgIGNvbnN0IHRvdGFsVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgdGhpcy5sb2dnZXIucGVyZm9ybWFuY2UoXG4gICAgICAgIGBJbml0aWFsIHN5bmMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBpbiAke2Zvcm1hdFRpbWUodG90YWxUaW1lKX1gLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyBpbml0aWFsIHN5bmM6XCIsIGVycm9yKTtcbiAgICAgIC8vIERvbid0IHRocm93IC0gbGV0IHRoZSBhcHAgY29udGludWUgd29ya2luZyBldmVuIGlmIGluaXRpYWwgc3luYyBmYWlsc1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGhhbmRsZUZpbGVEZWxldGUoZmlsZTogVEZpbGUpIHtcbiAgICAvLyBSZW1vdmUgdGhlIGRlY2sgYW5kIGFsbCBhc3NvY2lhdGVkIGZsYXNoY2FyZHMvcmV2aWV3IGxvZ3NcbiAgICBhd2FpdCB0aGlzLmRiLmRlbGV0ZURlY2tCeUZpbGVwYXRoKGZpbGUucGF0aCk7XG5cbiAgICBpZiAodGhpcy52aWV3KSB7XG4gICAgICAvLyBKdXN0IHJlZnJlc2ggc3RhdHMgdG8gcmVtb3ZlIGRlbGV0ZWQgZGVjayBmcm9tIFVJIChtdWNoIGZhc3RlciB0aGFuIGZ1bGwgc3luYylcbiAgICAgIGF3YWl0IHRoaXMudmlldy5yZWZyZXNoU3RhdHMoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGVGaWxlUmVuYW1lKGZpbGU6IFRBYnN0cmFjdEZpbGUsIG9sZFBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09IFwibWRcIikge1xuICAgICAgLy8gSGFuZGxlIGRlY2sgSUQgcmVnZW5lcmF0aW9uIGZvciByZW5hbWVkIGZpbGVzXG4gICAgICBjb25zdCBvbGREZWNrID0gYXdhaXQgdGhpcy5kYi5nZXREZWNrQnlGaWxlcGF0aChvbGRQYXRoKTtcbiAgICAgIGlmIChvbGREZWNrKSB7XG4gICAgICAgIGNvbnN0IG9sZERlY2tJZCA9IG9sZERlY2suaWQ7XG4gICAgICAgIGNvbnN0IG5ld0RlY2tJZCA9IHRoaXMuZGVja01hbmFnZXIuZ2VuZXJhdGVEZWNrSWQoZmlsZS5wYXRoKTtcblxuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgRmlsZSByZW5hbWVkIGZyb20gJHtvbGRQYXRofSB0byAke2ZpbGUucGF0aH1gKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFVwZGF0aW5nIGRlY2sgSUQgZnJvbSAke29sZERlY2tJZH0gdG8gJHtuZXdEZWNrSWR9YCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGRlY2sgd2l0aCBuZXcgSUQsIG5hbWUsIGFuZCBmaWxlcGF0aFxuICAgICAgICBhd2FpdCB0aGlzLmRiLnJlbmFtZURlY2soXG4gICAgICAgICAgb2xkRGVja0lkLFxuICAgICAgICAgIG5ld0RlY2tJZCxcbiAgICAgICAgICBmaWxlLmJhc2VuYW1lLFxuICAgICAgICAgIGZpbGUucGF0aCxcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBVcGRhdGUgYWxsIGZsYXNoY2FyZCBkZWNrIElEc1xuICAgICAgICBhd2FpdCB0aGlzLmRlY2tTeW5jaHJvbml6ZXIudXBkYXRlRmxhc2hjYXJkRGVja0lkcyhcbiAgICAgICAgICBvbGREZWNrSWQsXG4gICAgICAgICAgbmV3RGVja0lkLFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHlpZWxkVG9VSSgpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuZGIuc2F2ZSgpO1xuICAgICAgICAvLyBSZWZyZXNoIHZpZXcgaWYgYXZhaWxhYmxlXG4gICAgICAgIGlmICh0aGlzLnZpZXcpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnZpZXcucmVmcmVzaFN0YXRzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgaW5pdFNxbEpzLCB7IERhdGFiYXNlLCBTcWxKc1N0YXRpYyB9IGZyb20gXCJzcWwuanNcIjtcbmltcG9ydCB7IERhdGFBZGFwdGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1xuICBEZWNrLFxuICBEZWNrQ29uZmlnLFxuICBSZXZpZXdPcmRlcixcbiAgRmxhc2hjYXJkLFxuICBSZXZpZXdMb2csXG4gIFJldmlld1Nlc3Npb24sXG4gIERlY2tTdGF0cyxcbiAgU3RhdGlzdGljcyxcbiAgREVGQVVMVF9ERUNLX0NPTkZJRyxcbn0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IFNRTF9RVUVSSUVTIH0gZnJvbSBcIi4vc2NoZW1hc1wiO1xuaW1wb3J0IHsgY3JlYXRlVGFibGVzLCBtaWdyYXRlLCBuZWVkc01pZ3JhdGlvbiB9IGZyb20gXCIuL21pZ3JhdGlvbnNcIjtcbmltcG9ydCB7IHlpZWxkVG9VSSB9IGZyb20gXCJAL3V0aWxzL3VpXCI7XG5cbmV4cG9ydCBjbGFzcyBEYXRhYmFzZVNlcnZpY2Uge1xuICBwcml2YXRlIGRiOiBEYXRhYmFzZSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIFNRTDogU3FsSnNTdGF0aWMgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBkYlBhdGg6IHN0cmluZztcbiAgcHJpdmF0ZSBhZGFwdGVyOiBEYXRhQWRhcHRlcjtcbiAgcHJpdmF0ZSBkZWJ1Z0xvZzogKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgZGJQYXRoOiBzdHJpbmcsXG4gICAgYWRhcHRlcjogRGF0YUFkYXB0ZXIsXG4gICAgZGVidWdMb2c6IChtZXNzYWdlOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkLFxuICApIHtcbiAgICB0aGlzLmRiUGF0aCA9IGRiUGF0aDtcbiAgICB0aGlzLmFkYXB0ZXIgPSBhZGFwdGVyO1xuICAgIHRoaXMuZGVidWdMb2cgPSBkZWJ1Z0xvZztcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEluaXRpYWxpemUgc3FsLmpzXG4gICAgICB0aGlzLlNRTCA9IGF3YWl0IGluaXRTcWxKcyh7XG4gICAgICAgIGxvY2F0ZUZpbGU6IChmaWxlKSA9PiBgaHR0cHM6Ly9zcWwuanMub3JnL2Rpc3QvJHtmaWxlfWAsXG4gICAgICB9KTtcblxuICAgICAgLy8gVHJ5IHRvIGxvYWQgZXhpc3RpbmcgZGF0YWJhc2Ugb3IgY3JlYXRlIG5ldyBvbmVcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHRoaXMubG9hZERhdGFiYXNlRmlsZSgpO1xuICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICAvLyBFeGlzdGluZyBkYXRhYmFzZSBmaWxlIC0gbG9hZCBhbmQgY2hlY2sgZm9yIG1pZ3JhdGlvblxuICAgICAgICB0aGlzLmRiID0gbmV3IHRoaXMuU1FMLkRhdGFiYXNlKG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO1xuICAgICAgICBhd2FpdCB0aGlzLm1pZ3JhdGVTY2hlbWFJZk5lZWRlZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm8gZGF0YWJhc2UgZmlsZSBleGlzdHMgLSBjcmVhdGUgZnJlc2ggZGF0YWJhc2VcbiAgICAgICAgdGhpcy5kYiA9IG5ldyB0aGlzLlNRTC5EYXRhYmFzZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUZyZXNoRGF0YWJhc2UoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBpbml0aWFsaXplIGRhdGFiYXNlOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWREYXRhYmFzZUZpbGUoKTogUHJvbWlzZTxBcnJheUJ1ZmZlciB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKGF3YWl0IHRoaXMuYWRhcHRlci5leGlzdHModGhpcy5kYlBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmFkYXB0ZXIucmVhZEJpbmFyeSh0aGlzLmRiUGF0aCk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZGVidWdMb2coXCJEYXRhYmFzZSBmaWxlIGRvZXNuJ3QgZXhpc3QgeWV0LCB3aWxsIGNyZWF0ZSBuZXcgb25lXCIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2F2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5kYi5leHBvcnQoKTtcblxuICAgICAgLy8gRW5zdXJlIGRpcmVjdG9yeSBleGlzdHNcbiAgICAgIGNvbnN0IGRpciA9IHRoaXMuZGJQYXRoLnN1YnN0cmluZygwLCB0aGlzLmRiUGF0aC5sYXN0SW5kZXhPZihcIi9cIikpO1xuICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hZGFwdGVyLmV4aXN0cyhkaXIpKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFkYXB0ZXIubWtkaXIoZGlyKTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5hZGFwdGVyLndyaXRlQmluYXJ5KHRoaXMuZGJQYXRoLCBkYXRhKTtcbiAgICAgIHRoaXMuZGVidWdMb2coXCJEYXRhYmFzZSBzYXZlZCBzdWNjZXNzZnVsbHkhXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNhdmUgZGF0YWJhc2U6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyaWMgQ1JVRCBoZWxwZXIgbWV0aG9kc1xuICBwcml2YXRlIGV4ZWN1dGVTdGF0ZW1lbnQoc3FsOiBzdHJpbmcsIHBhcmFtczogYW55W10gPSBbXSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoc3FsKTtcbiAgICB0cnkge1xuICAgICAgc3RtdC5ydW4ocGFyYW1zKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc3RtdC5mcmVlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlU3RhdGVtZW50V2l0aENhbGxiYWNrKFxuICAgIHNxbDogc3RyaW5nLFxuICAgIHBhcmFtczogYW55W10sXG4gICAgY2FsbGJhY2s/OiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcbiAgICBsZXQgc3RtdDtcbiAgICB0cnkge1xuICAgICAgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShzcWwpO1xuICAgICAgc3RtdC5ydW4ocGFyYW1zKTtcbiAgICAgIHN0bXQuZnJlZSgpO1xuICAgICAgc3RtdCA9IG51bGw7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgYXdhaXQgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHN0bXQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzdG10LmZyZWUoKTtcbiAgICAgICAgfSBjYXRjaCAoZnJlZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGZyZWUgc3RhdGVtZW50OmAsIGZyZWVFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcXVlcnlBbGw8VD4oXG4gICAgc3FsOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBhbnlbXSA9IFtdLFxuICAgIHBhcnNlcjogKHJvdzogYW55KSA9PiBULFxuICApOiBUW10ge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoc3FsKTtcbiAgICBjb25zdCByZXN1bHRzOiBUW10gPSBbXTtcbiAgICB0cnkge1xuICAgICAgaWYgKHBhcmFtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHN0bXQuYmluZChwYXJhbXMpO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHN0bXQuc3RlcCgpKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChwYXJzZXIoc3RtdC5nZXQoKSkpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzdG10LmZyZWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICBwcml2YXRlIHF1ZXJ5T25lPFQ+KFxuICAgIHNxbDogc3RyaW5nLFxuICAgIHBhcmFtczogYW55W10gPSBbXSxcbiAgICBwYXJzZXI6IChyb3c6IGFueSkgPT4gVCxcbiAgKTogVCB8IG51bGwge1xuICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnF1ZXJ5QWxsKHNxbCwgcGFyYW1zLCBwYXJzZXIpO1xuICAgIHJldHVybiByZXN1bHRzLmxlbmd0aCA+IDAgPyByZXN1bHRzWzBdIDogbnVsbDtcbiAgfVxuXG4gIC8vIFRyYW5zYWN0aW9uIG1ldGhvZHNcbiAgYmVnaW5UcmFuc2FjdGlvbigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcbiAgICB0aGlzLmRiLnJ1bihcIkJFR0lOIFRSQU5TQUNUSU9OO1wiKTtcbiAgfVxuXG4gIGNvbW1pdFRyYW5zYWN0aW9uKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuICAgIHRoaXMuZGIucnVuKFwiQ09NTUlUO1wiKTtcbiAgfVxuXG4gIHJvbGxiYWNrVHJhbnNhY3Rpb24oKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG4gICAgdGhpcy5kYi5ydW4oXCJST0xMQkFDSztcIik7XG4gIH1cblxuICAvLyBCYXRjaCBvcGVyYXRpb25zIHVzaW5nIHNpbmdsZSBwcmVwYXJlZCBzdGF0ZW1lbnRzXG4gIGJhdGNoQ3JlYXRlRmxhc2hjYXJkcyhcbiAgICBmbGFzaGNhcmRzOiBBcnJheTxPbWl0PEZsYXNoY2FyZCwgXCJjcmVhdGVkXCIgfCBcIm1vZGlmaWVkXCI+PixcbiAgKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG4gICAgaWYgKGZsYXNoY2FyZHMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKFNRTF9RVUVSSUVTLklOU0VSVF9GTEFTSENBUkQpO1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGZsYXNoY2FyZCBvZiBmbGFzaGNhcmRzKSB7XG4gICAgICAgIHN0bXQucnVuKFtcbiAgICAgICAgICBmbGFzaGNhcmQuaWQsXG4gICAgICAgICAgZmxhc2hjYXJkLmRlY2tJZCxcbiAgICAgICAgICBmbGFzaGNhcmQuZnJvbnQsXG4gICAgICAgICAgZmxhc2hjYXJkLmJhY2ssXG4gICAgICAgICAgZmxhc2hjYXJkLnR5cGUsXG4gICAgICAgICAgZmxhc2hjYXJkLnNvdXJjZUZpbGUsXG4gICAgICAgICAgZmxhc2hjYXJkLmNvbnRlbnRIYXNoLFxuICAgICAgICAgIGZsYXNoY2FyZC5zdGF0ZSxcbiAgICAgICAgICBmbGFzaGNhcmQuZHVlRGF0ZSxcbiAgICAgICAgICBmbGFzaGNhcmQuaW50ZXJ2YWwsXG4gICAgICAgICAgZmxhc2hjYXJkLnJlcGV0aXRpb25zLFxuICAgICAgICAgIGZsYXNoY2FyZC5kaWZmaWN1bHR5LFxuICAgICAgICAgIGZsYXNoY2FyZC5zdGFiaWxpdHksXG4gICAgICAgICAgZmxhc2hjYXJkLmxhcHNlcyxcbiAgICAgICAgICBmbGFzaGNhcmQubGFzdFJldmlld2VkLFxuICAgICAgICAgIG5vdywgLy8gY3JlYXRlZFxuICAgICAgICAgIG5vdywgLy8gbW9kaWZpZWRcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHN0bXQuZnJlZSgpO1xuICAgIH1cbiAgfVxuXG4gIGJhdGNoVXBkYXRlRmxhc2hjYXJkcyhcbiAgICB1cGRhdGVzOiBBcnJheTx7XG4gICAgICBpZDogc3RyaW5nO1xuICAgICAgdXBkYXRlczogUGFydGlhbDxcbiAgICAgICAgUGljazxcbiAgICAgICAgICBGbGFzaGNhcmQsXG4gICAgICAgICAgfCBcImZyb250XCJcbiAgICAgICAgICB8IFwiYmFja1wiXG4gICAgICAgICAgfCBcInR5cGVcIlxuICAgICAgICAgIHwgXCJjb250ZW50SGFzaFwiXG4gICAgICAgICAgfCBcInN0YXRlXCJcbiAgICAgICAgICB8IFwiZHVlRGF0ZVwiXG4gICAgICAgICAgfCBcImludGVydmFsXCJcbiAgICAgICAgICB8IFwicmVwZXRpdGlvbnNcIlxuICAgICAgICAgIHwgXCJkaWZmaWN1bHR5XCJcbiAgICAgICAgICB8IFwic3RhYmlsaXR5XCJcbiAgICAgICAgICB8IFwibGFwc2VzXCJcbiAgICAgICAgICB8IFwibGFzdFJldmlld2VkXCJcbiAgICAgICAgPlxuICAgICAgPjtcbiAgICB9PixcbiAgKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG4gICAgaWYgKHVwZGF0ZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAvLyBHcm91cCB1cGRhdGVzIGJ5IGZpZWxkcyB0byBtaW5pbWl6ZSBwcmVwYXJlZCBzdGF0ZW1lbnRzXG4gICAgY29uc3QgdXBkYXRlR3JvdXBzID0gbmV3IE1hcDxcbiAgICAgIHN0cmluZyxcbiAgICAgIEFycmF5PHsgaWQ6IHN0cmluZzsgdmFsdWVzOiBhbnlbXSB9PlxuICAgID4oKTtcblxuICAgIGZvciAoY29uc3QgeyBpZCwgdXBkYXRlczogdXBkYXRlRGF0YSB9IG9mIHVwZGF0ZXMpIHtcbiAgICAgIGNvbnN0IGZpZWxkcyA9IFtdO1xuICAgICAgY29uc3QgdmFsdWVzID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHVwZGF0ZURhdGEpKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3QgZGJGaWVsZCA9XG4gICAgICAgICAgICBrZXkgPT09IFwiZHVlRGF0ZVwiXG4gICAgICAgICAgICAgID8gXCJkdWVfZGF0ZVwiXG4gICAgICAgICAgICAgIDoga2V5ID09PSBcImxhc3RSZXZpZXdlZFwiXG4gICAgICAgICAgICAgICAgPyBcImxhc3RfcmV2aWV3ZWRcIlxuICAgICAgICAgICAgICAgIDoga2V5ID09PSBcImNvbnRlbnRIYXNoXCJcbiAgICAgICAgICAgICAgICAgID8gXCJjb250ZW50X2hhc2hcIlxuICAgICAgICAgICAgICAgICAgOiBrZXk7XG4gICAgICAgICAgZmllbGRzLnB1c2goYCR7ZGJGaWVsZH0gPSA/YCk7XG4gICAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWVsZHMubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgZmllbGRzLnB1c2goXCJtb2RpZmllZCA9ID9cIik7XG4gICAgICB2YWx1ZXMucHVzaChub3csIGlkKTtcblxuICAgICAgY29uc3QgZmllbGRTaWduYXR1cmUgPSBmaWVsZHMuc2xpY2UoMCwgLTEpLmpvaW4oXCIsXCIpOyAvLyBFeGNsdWRlIG1vZGlmaWVkIGZpZWxkIGZvciBncm91cGluZ1xuICAgICAgaWYgKCF1cGRhdGVHcm91cHMuaGFzKGZpZWxkU2lnbmF0dXJlKSkge1xuICAgICAgICB1cGRhdGVHcm91cHMuc2V0KGZpZWxkU2lnbmF0dXJlLCBbXSk7XG4gICAgICB9XG4gICAgICB1cGRhdGVHcm91cHMuZ2V0KGZpZWxkU2lnbmF0dXJlKSEucHVzaCh7IGlkLCB2YWx1ZXMgfSk7XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSBncm91cGVkIHVwZGF0ZXNcbiAgICBmb3IgKGNvbnN0IFtmaWVsZFNpZ25hdHVyZSwgZ3JvdXBVcGRhdGVzXSBvZiB1cGRhdGVHcm91cHMpIHtcbiAgICAgIGNvbnN0IGZpZWxkcyA9IGZpZWxkU2lnbmF0dXJlLnNwbGl0KFwiLFwiKS5tYXAoKGYpID0+IGYudHJpbSgpKTtcbiAgICAgIGZpZWxkcy5wdXNoKFwibW9kaWZpZWQgPSA/XCIpO1xuICAgICAgY29uc3Qgc3FsID0gYFVQREFURSBmbGFzaGNhcmRzIFNFVCAke2ZpZWxkcy5qb2luKFwiLCBcIil9IFdIRVJFIGlkID0gP2A7XG4gICAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKHNxbCk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgeyB2YWx1ZXMgfSBvZiBncm91cFVwZGF0ZXMpIHtcbiAgICAgICAgICBzdG10LnJ1bih2YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzdG10LmZyZWUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBiYXRjaERlbGV0ZUZsYXNoY2FyZHMoZmxhc2hjYXJkSWRzOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuICAgIGlmIChmbGFzaGNhcmRJZHMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKFNRTF9RVUVSSUVTLkRFTEVURV9GTEFTSENBUkQpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAoY29uc3QgaWQgb2YgZmxhc2hjYXJkSWRzKSB7XG4gICAgICAgIHN0bXQucnVuKFtpZF0pO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzdG10LmZyZWUoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZUZyZXNoRGF0YWJhc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhcIkNyZWF0aW5nIGZyZXNoIGRhdGFiYXNlIHNjaGVtYS4uLlwiKTtcbiAgICAgIGNyZWF0ZVRhYmxlcyh0aGlzLmRiLCB0aGlzLmRlYnVnTG9nLmJpbmQodGhpcykpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlKCk7XG4gICAgICB0aGlzLmRlYnVnTG9nKFwiRnJlc2ggZGF0YWJhc2UgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZGVidWdMb2coYEZyZXNoIGRhdGFiYXNlIGNyZWF0aW9uIGZhaWxlZDogJHtlcnJvcn1gKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRnJlc2ggZGF0YWJhc2UgY3JlYXRpb24gZmFpbGVkOiAke2Vycm9yfWApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2QgdG8gcGFyc2UgZGVjayByb3dzXG4gIHByaXZhdGUgcGFyc2VEZWNrUm93KHJvdzogYW55W10pOiBEZWNrIHtcbiAgICBsZXQgY29uZmlnID0gREVGQVVMVF9ERUNLX0NPTkZJRztcblxuICAgIGlmIChyb3dbNV0pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbmZpZyA9IEpTT04ucGFyc2Uocm93WzVdIGFzIHN0cmluZyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgICAgIGBGYWlsZWQgdG8gcGFyc2UgZGVjayBjb25maWcgSlNPTjogJHtyb3dbNV19LCB1c2luZyBkZWZhdWx0IGNvbmZpZy4gRXJyb3I6ICR7ZXJyb3J9YCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uZmlnID0gREVGQVVMVF9ERUNLX0NPTkZJRztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNaWdyYXRpb246IEFkZCBGU1JTIHNldHRpbmdzIGlmIG1pc3NpbmdcbiAgICBpZiAoIWNvbmZpZy5mc3JzKSB7XG4gICAgICBjb25maWcgPSB7XG4gICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgZnNyczogREVGQVVMVF9ERUNLX0NPTkZJRy5mc3JzLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNaWdyYXRpb246IEFkZCBuZXcgYm9vbGVhbiBsaW1pdCBmaWVsZHMgaWYgbWlzc2luZ1xuICAgIGlmIChjb25maWcuaGFzTmV3Q2FyZHNMaW1pdEVuYWJsZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQ29udmVydCBmcm9tIG9sZCAtMS8wL3Bvc2l0aXZlIG51bWJlciBzeXN0ZW0gdG8gbmV3IGJvb2xlYW4gc3lzdGVtXG4gICAgICBjb25maWcgPSB7XG4gICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgaGFzTmV3Q2FyZHNMaW1pdEVuYWJsZWQ6IGNvbmZpZy5uZXdDYXJkc1BlckRheSA+PSAwLFxuICAgICAgICBoYXNSZXZpZXdDYXJkc0xpbWl0RW5hYmxlZDogY29uZmlnLnJldmlld0NhcmRzUGVyRGF5ID49IDAsXG4gICAgICAgIG5ld0NhcmRzUGVyRGF5OlxuICAgICAgICAgIGNvbmZpZy5uZXdDYXJkc1BlckRheSA+PSAwID8gY29uZmlnLm5ld0NhcmRzUGVyRGF5IHx8IDIwIDogMjAsXG4gICAgICAgIHJldmlld0NhcmRzUGVyRGF5OlxuICAgICAgICAgIGNvbmZpZy5yZXZpZXdDYXJkc1BlckRheSA+PSAwID8gY29uZmlnLnJldmlld0NhcmRzUGVyRGF5IHx8IDEwMCA6IDEwMCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gTWlncmF0aW9uOiBBZGQgbmV3IHByb3BlcnR5IG5hbWVzIGlmIG1pc3NpbmcgKHZlcnkgb2xkIGZvcm1hdClcbiAgICAvLyBIYW5kbGUgbGVnYWN5IGNvbmZpZyBmb3JtYXQgbWlncmF0aW9uXG4gICAgaW50ZXJmYWNlIExlZ2FjeURlY2tDb25maWcge1xuICAgICAgbmV3Q2FyZHNMaW1pdD86IG51bWJlcjtcbiAgICAgIGVuYWJsZU5ld0NhcmRzTGltaXQ/OiBib29sZWFuO1xuICAgICAgcmV2aWV3Q2FyZHNMaW1pdD86IG51bWJlcjtcbiAgICAgIGVuYWJsZVJldmlld0NhcmRzTGltaXQ/OiBib29sZWFuO1xuICAgIH1cblxuICAgIGNvbnN0IGxlZ2FjeUNvbmZpZyA9IGNvbmZpZyBhcyBEZWNrQ29uZmlnICYgTGVnYWN5RGVja0NvbmZpZztcblxuICAgIGlmIChcbiAgICAgIGNvbmZpZy5uZXdDYXJkc1BlckRheSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICBsZWdhY3lDb25maWcubmV3Q2FyZHNMaW1pdCAhPT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICBjb25maWcgPSB7XG4gICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgaGFzTmV3Q2FyZHNMaW1pdEVuYWJsZWQ6IGxlZ2FjeUNvbmZpZy5lbmFibGVOZXdDYXJkc0xpbWl0IHx8IGZhbHNlLFxuICAgICAgICBuZXdDYXJkc1BlckRheTogbGVnYWN5Q29uZmlnLm5ld0NhcmRzTGltaXQgfHwgMjAsXG4gICAgICAgIGhhc1Jldmlld0NhcmRzTGltaXRFbmFibGVkOlxuICAgICAgICAgIGxlZ2FjeUNvbmZpZy5lbmFibGVSZXZpZXdDYXJkc0xpbWl0IHx8IGZhbHNlLFxuICAgICAgICByZXZpZXdDYXJkc1BlckRheTogbGVnYWN5Q29uZmlnLnJldmlld0NhcmRzTGltaXQgfHwgMTAwLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNaWdyYXRpb246IEFkZCBoZWFkZXJMZXZlbCBpZiBtaXNzaW5nXG4gICAgaWYgKGNvbmZpZy5oZWFkZXJMZXZlbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25maWcgPSB7XG4gICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgaGVhZGVyTGV2ZWw6IERFRkFVTFRfREVDS19DT05GSUcuaGVhZGVyTGV2ZWwsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpZDogcm93WzBdIGFzIHN0cmluZyxcbiAgICAgIG5hbWU6IHJvd1sxXSBhcyBzdHJpbmcsXG4gICAgICBmaWxlcGF0aDogcm93WzJdIGFzIHN0cmluZyxcbiAgICAgIHRhZzogcm93WzNdIGFzIHN0cmluZyxcbiAgICAgIGxhc3RSZXZpZXdlZDogcm93WzRdIGFzIHN0cmluZyB8IG51bGwsXG4gICAgICBjb25maWcsXG4gICAgICBjcmVhdGVkOiByb3dbNl0gYXMgc3RyaW5nLFxuICAgICAgbW9kaWZpZWQ6IHJvd1s3XSBhcyBzdHJpbmcsXG4gICAgfTtcbiAgfVxuXG4gIC8vIERlY2sgb3BlcmF0aW9uc1xuICBhc3luYyBjcmVhdGVEZWNrKGRlY2s6IE9taXQ8RGVjaywgXCJjcmVhdGVkXCIgfCBcIm1vZGlmaWVkXCI+KTogUHJvbWlzZTxEZWNrPiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgZnVsbERlY2s6IERlY2sgPSB7XG4gICAgICAuLi5kZWNrLFxuICAgICAgY3JlYXRlZDogbm93LFxuICAgICAgbW9kaWZpZWQ6IG5vdyxcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoU1FMX1FVRVJJRVMuSU5TRVJUX0RFQ0spO1xuXG4gICAgICBzdG10LnJ1bihbXG4gICAgICAgIGZ1bGxEZWNrLmlkLFxuICAgICAgICBmdWxsRGVjay5uYW1lLFxuICAgICAgICBmdWxsRGVjay5maWxlcGF0aCxcbiAgICAgICAgZnVsbERlY2sudGFnLFxuICAgICAgICBmdWxsRGVjay5sYXN0UmV2aWV3ZWQsXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGZ1bGxEZWNrLmNvbmZpZyksXG4gICAgICAgIGZ1bGxEZWNrLmNyZWF0ZWQsXG4gICAgICAgIGZ1bGxEZWNrLm1vZGlmaWVkLFxuICAgICAgXSk7XG4gICAgICBzdG10LmZyZWUoKTtcblxuICAgICAgcmV0dXJuIGZ1bGxEZWNrO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXREZWNrQnlUYWcodGFnOiBzdHJpbmcpOiBQcm9taXNlPERlY2sgfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlPbmUoXG4gICAgICBTUUxfUVVFUklFUy5HRVRfREVDS19CWV9UQUcsXG4gICAgICBbdGFnXSxcbiAgICAgIHRoaXMucGFyc2VEZWNrUm93LmJpbmQodGhpcyksXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGdldERlY2tCeUZpbGVwYXRoKGZpbGVwYXRoOiBzdHJpbmcpOiBQcm9taXNlPERlY2sgfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlPbmUoXG4gICAgICBTUUxfUVVFUklFUy5HRVRfREVDS19CWV9GSUxFUEFUSCxcbiAgICAgIFtmaWxlcGF0aF0sXG4gICAgICB0aGlzLnBhcnNlRGVja1Jvdy5iaW5kKHRoaXMpLFxuICAgICk7XG4gIH1cblxuICBhc3luYyBnZXREZWNrQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxEZWNrIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5T25lKFxuICAgICAgU1FMX1FVRVJJRVMuR0VUX0RFQ0tfQllfSUQsXG4gICAgICBbaWRdLFxuICAgICAgdGhpcy5wYXJzZURlY2tSb3cuYmluZCh0aGlzKSxcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlRGVjayhcbiAgICBkZWNrSWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPFBpY2s8RGVjaywgXCJuYW1lXCIgfCBcInRhZ1wiIHwgXCJsYXN0UmV2aWV3ZWRcIiB8IFwiY29uZmlnXCI+PixcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAvLyBIYW5kbGUgZW1wdHkgdXBkYXRlcyBvYmplY3QgLSBubyBkYXRhYmFzZSBjaGFuZ2VzIG5lZWRlZFxuICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVzKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1cGRhdGVGaWVsZHMgPSBPYmplY3Qua2V5cyh1cGRhdGVzKVxuICAgICAgLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IGRiRmllbGQgPSBrZXkgPT09IFwibGFzdFJldmlld2VkXCIgPyBcImxhc3RfcmV2aWV3ZWRcIiA6IGtleTtcbiAgICAgICAgcmV0dXJuIGAke2RiRmllbGR9ID0gP2A7XG4gICAgICB9KVxuICAgICAgLmpvaW4oXCIsIFwiKTtcblxuICAgIGNvbnN0IHNxbCA9IGBVUERBVEUgZGVja3MgU0VUICR7dXBkYXRlRmllbGRzfSwgbW9kaWZpZWQgPSA/IFdIRVJFIGlkID0gP2A7XG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShzcWwpO1xuXG4gICAgY29uc3QgdmFsdWVzOiAoc3RyaW5nIHwgbnVsbClbXSA9IE9iamVjdC52YWx1ZXModXBkYXRlcykubWFwKFxuICAgICAgKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyh1cGRhdGVzKVtpbmRleF07XG4gICAgICAgIHJldHVybiBrZXkgPT09IFwiY29uZmlnXCJcbiAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KHZhbHVlKVxuICAgICAgICAgIDogKHZhbHVlIGFzIHN0cmluZyB8IG51bGwpO1xuICAgICAgfSxcbiAgICApO1xuICAgIHZhbHVlcy5wdXNoKG5vdywgZGVja0lkKTtcbiAgICBzdG10LnJ1bih2YWx1ZXMpO1xuICAgIHN0bXQuZnJlZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVEZWNrVGltZXN0YW1wQ29yZShkZWNrSWQ6IHN0cmluZywgdGltZXN0YW1wOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmV4ZWN1dGVTdGF0ZW1lbnQoU1FMX1FVRVJJRVMuVVBEQVRFX0RFQ0tfVElNRVNUQU1QLCBbXG4gICAgICB0aW1lc3RhbXAsXG4gICAgICBkZWNrSWQsXG4gICAgXSk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVEZWNrVGltZXN0YW1wKGRlY2tJZDogc3RyaW5nLCB0aW1lc3RhbXA6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMudXBkYXRlRGVja1RpbWVzdGFtcENvcmUoZGVja0lkLCB0aW1lc3RhbXApO1xuICB9XG5cbiAgLy8gVmVyc2lvbiB3aXRob3V0IHNhdmUgZm9yIHVzZSBpbiB0cmFuc2FjdGlvbnNcbiAgYXN5bmMgdXBkYXRlRGVja1RpbWVzdGFtcFdpdGhvdXRTYXZlKFxuICAgIGRlY2tJZDogc3RyaW5nLFxuICAgIHRpbWVzdGFtcDogc3RyaW5nLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnVwZGF0ZURlY2tUaW1lc3RhbXBDb3JlKGRlY2tJZCwgdGltZXN0YW1wKTtcbiAgfVxuXG4gIGFzeW5jIGdldEFsbERlY2tzKCk6IFByb21pc2U8RGVja1tdPiB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlBbGwoXG4gICAgICBTUUxfUVVFUklFUy5HRVRfQUxMX0RFQ0tTLFxuICAgICAgW10sXG4gICAgICB0aGlzLnBhcnNlRGVja1Jvdy5iaW5kKHRoaXMpLFxuICAgICk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVEZWNrTGFzdFJldmlld2VkKGRlY2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIHRoaXMuZXhlY3V0ZVN0YXRlbWVudChTUUxfUVVFUklFUy5VUERBVEVfREVDS19MQVNUX1JFVklFV0VELCBbXG4gICAgICBub3csXG4gICAgICBub3csXG4gICAgICBkZWNrSWQsXG4gICAgXSk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVEZWNrSGVhZGVyTGV2ZWwoXG4gICAgZGVja0lkOiBzdHJpbmcsXG4gICAgaGVhZGVyTGV2ZWw6IG51bWJlcixcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIGhlYWRlcl9sZXZlbCBjb2x1bW4gZGlyZWN0bHlcbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgIFVQREFURSBkZWNrc1xuICAgICAgU0VUIGhlYWRlcl9sZXZlbCA9ID8sIG1vZGlmaWVkID0gP1xuICAgICAgV0hFUkUgaWQgPSA/XG4gICAgYCk7XG5cbiAgICBzdG10LnJ1bihbaGVhZGVyTGV2ZWwsIG5vdywgZGVja0lkXSk7XG4gICAgc3RtdC5mcmVlKCk7XG4gIH1cblxuICBhc3luYyByZW5hbWVEZWNrKFxuICAgIG9sZERlY2tJZDogc3RyaW5nLFxuICAgIG5ld0RlY2tJZDogc3RyaW5nLFxuICAgIG5ld05hbWU6IHN0cmluZyxcbiAgICBuZXdGaWxlcGF0aDogc3RyaW5nLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgdGhpcy5leGVjdXRlU3RhdGVtZW50KFNRTF9RVUVSSUVTLlJFTkFNRV9ERUNLLCBbXG4gICAgICBuZXdEZWNrSWQsXG4gICAgICBuZXdOYW1lLFxuICAgICAgbmV3RmlsZXBhdGgsXG4gICAgICBub3csXG4gICAgICBvbGREZWNrSWQsXG4gICAgXSk7XG4gIH1cblxuICBhc3luYyBkZWxldGVEZWNrQnlGaWxlcGF0aChmaWxlcGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICAvLyBGaXJzdCBnZXQgdGhlIGRlY2sgdG8gZmluZCBpdHMgSURcbiAgICBjb25zdCBkZWNrID0gYXdhaXQgdGhpcy5nZXREZWNrQnlGaWxlcGF0aChmaWxlcGF0aCk7XG4gICAgaWYgKCFkZWNrKSByZXR1cm47IC8vIERlY2sgZG9lc24ndCBleGlzdFxuXG4gICAgLy8gRG9uJ3QgZGVsZXRlIGZsYXNoY2FyZHMgdG8gcHJlc2VydmUgcHJvZ3Jlc3MgLSB0aGV5IHdpbGwgYmUgb3JwaGFuZWQgYnV0IGNhbiBiZSByZWFzc2lnbmVkIGxhdGVyXG4gICAgLy8gT25seSByZXZpZXcgbG9ncyBhcmUgcHJlc2VydmVkIGZvciBoaXN0b3JpY2FsIGRhdGFcblxuICAgIC8vIEZpbmFsbHkgZGVsZXRlIHRoZSBkZWNrXG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShTUUxfUVVFUklFUy5ERUxFVEVfREVDS19CWV9GSUxFUEFUSCk7XG4gICAgc3RtdC5ydW4oW2ZpbGVwYXRoXSk7XG4gICAgc3RtdC5mcmVlKCk7XG4gIH1cblxuICBhc3luYyBkZWxldGVEZWNrKGRlY2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICAvLyBEb24ndCBkZWxldGUgZmxhc2hjYXJkcyB0byBwcmVzZXJ2ZSBwcm9ncmVzcyAtIHRoZXkgd2lsbCBiZSBvcnBoYW5lZCBidXQgY2FuIGJlIHJlYXNzaWduZWQgbGF0ZXJcbiAgICAvLyBPbmx5IHJldmlldyBsb2dzIGFyZSBwcmVzZXJ2ZWQgZm9yIGhpc3RvcmljYWwgZGF0YVxuXG4gICAgLy8gRmluYWxseSBkZWxldGUgdGhlIGRlY2tcbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKFNRTF9RVUVSSUVTLkRFTEVURV9ERUNLKTtcbiAgICBzdG10LnJ1bihbZGVja0lkXSk7XG4gICAgc3RtdC5mcmVlKCk7XG4gIH1cblxuICAvLyBGbGFzaGNhcmQgb3BlcmF0aW9uc1xuICBwcml2YXRlIGNyZWF0ZUZsYXNoY2FyZENvcmUoXG4gICAgZmxhc2hjYXJkOiBPbWl0PEZsYXNoY2FyZCwgXCJjcmVhdGVkXCIgfCBcIm1vZGlmaWVkXCI+LFxuICApOiBGbGFzaGNhcmQge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IGZ1bGxGbGFzaGNhcmQ6IEZsYXNoY2FyZCA9IHtcbiAgICAgIC4uLmZsYXNoY2FyZCxcbiAgICAgIGNyZWF0ZWQ6IG5vdyxcbiAgICAgIG1vZGlmaWVkOiBub3csXG4gICAgfTtcblxuICAgIGxldCBzdG10O1xuICAgIHRyeSB7XG4gICAgICBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKFNRTF9RVUVSSUVTLklOU0VSVF9GTEFTSENBUkQpO1xuICAgICAgc3RtdC5ydW4oW1xuICAgICAgICBmdWxsRmxhc2hjYXJkLmlkLFxuICAgICAgICBmdWxsRmxhc2hjYXJkLmRlY2tJZCxcbiAgICAgICAgZnVsbEZsYXNoY2FyZC5mcm9udCxcbiAgICAgICAgZnVsbEZsYXNoY2FyZC5iYWNrLFxuICAgICAgICBmdWxsRmxhc2hjYXJkLnR5cGUsXG4gICAgICAgIGZ1bGxGbGFzaGNhcmQuc291cmNlRmlsZSxcbiAgICAgICAgZnVsbEZsYXNoY2FyZC5jb250ZW50SGFzaCxcbiAgICAgICAgZnVsbEZsYXNoY2FyZC5zdGF0ZSxcbiAgICAgICAgZnVsbEZsYXNoY2FyZC5kdWVEYXRlLFxuICAgICAgICBmbGFzaGNhcmQuaW50ZXJ2YWwsXG4gICAgICAgIGZsYXNoY2FyZC5yZXBldGl0aW9ucyxcbiAgICAgICAgZmxhc2hjYXJkLmRpZmZpY3VsdHksXG4gICAgICAgIGZsYXNoY2FyZC5zdGFiaWxpdHksXG4gICAgICAgIGZsYXNoY2FyZC5sYXBzZXMsXG4gICAgICAgIGZ1bGxGbGFzaGNhcmQubGFzdFJldmlld2VkLFxuICAgICAgICBmdWxsRmxhc2hjYXJkLmNyZWF0ZWQsXG4gICAgICAgIGZ1bGxGbGFzaGNhcmQubW9kaWZpZWQsXG4gICAgICBdKTtcbiAgICAgIHN0bXQuZnJlZSgpO1xuICAgICAgcmV0dXJuIGZ1bGxGbGFzaGNhcmQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmxhc2hjYXJkICR7ZnVsbEZsYXNoY2FyZC5pZH06YCwgZXJyb3IpO1xuICAgICAgaWYgKHN0bXQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzdG10LmZyZWUoKTtcbiAgICAgICAgfSBjYXRjaCAoZnJlZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGZyZWUgc3RhdGVtZW50OmAsIGZyZWVFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUZsYXNoY2FyZChcbiAgICBmbGFzaGNhcmQ6IE9taXQ8Rmxhc2hjYXJkLCBcImNyZWF0ZWRcIiB8IFwibW9kaWZpZWRcIj4sXG4gICk6IFByb21pc2U8Rmxhc2hjYXJkPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jcmVhdGVGbGFzaGNhcmRDb3JlKGZsYXNoY2FyZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIFZlcnNpb24gd2l0aG91dCBzYXZlIGZvciB1c2UgaW4gdHJhbnNhY3Rpb25zXG4gIGFzeW5jIGNyZWF0ZUZsYXNoY2FyZFdpdGhvdXRTYXZlKFxuICAgIGZsYXNoY2FyZDogT21pdDxGbGFzaGNhcmQsIFwiY3JlYXRlZFwiIHwgXCJtb2RpZmllZFwiPixcbiAgKTogUHJvbWlzZTxGbGFzaGNhcmQ+IHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVGbGFzaGNhcmRDb3JlKGZsYXNoY2FyZCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUZsYXNoY2FyZENvcmUoXG4gICAgZmxhc2hjYXJkSWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPFxuICAgICAgUGljazxcbiAgICAgICAgRmxhc2hjYXJkLFxuICAgICAgICB8IFwiZnJvbnRcIlxuICAgICAgICB8IFwiYmFja1wiXG4gICAgICAgIHwgXCJ0eXBlXCJcbiAgICAgICAgfCBcImNvbnRlbnRIYXNoXCJcbiAgICAgICAgfCBcInN0YXRlXCJcbiAgICAgICAgfCBcImR1ZURhdGVcIlxuICAgICAgICB8IFwiaW50ZXJ2YWxcIlxuICAgICAgICB8IFwicmVwZXRpdGlvbnNcIlxuICAgICAgICB8IFwiZGlmZmljdWx0eVwiXG4gICAgICAgIHwgXCJzdGFiaWxpdHlcIlxuICAgICAgICB8IFwibGFwc2VzXCJcbiAgICAgICAgfCBcImxhc3RSZXZpZXdlZFwiXG4gICAgICA+XG4gICAgPixcbiAgKTogdm9pZCB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IGZpZWxkcyA9IFtdO1xuICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModXBkYXRlcykpIHtcbiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGRiRmllbGQgPVxuICAgICAgICAgIGtleSA9PT0gXCJkdWVEYXRlXCJcbiAgICAgICAgICAgID8gXCJkdWVfZGF0ZVwiXG4gICAgICAgICAgICA6IGtleSA9PT0gXCJsYXN0UmV2aWV3ZWRcIlxuICAgICAgICAgICAgICA/IFwibGFzdF9yZXZpZXdlZFwiXG4gICAgICAgICAgICAgIDoga2V5ID09PSBcImNvbnRlbnRIYXNoXCJcbiAgICAgICAgICAgICAgICA/IFwiY29udGVudF9oYXNoXCJcbiAgICAgICAgICAgICAgICA6IGtleTtcbiAgICAgICAgZmllbGRzLnB1c2goYCR7ZGJGaWVsZH0gPSA/YCk7XG4gICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZmllbGRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgZmllbGRzLnB1c2goXCJtb2RpZmllZCA9ID9cIik7XG4gICAgdmFsdWVzLnB1c2gobm93LCBmbGFzaGNhcmRJZCk7XG5cbiAgICBjb25zdCBzcWwgPSBgVVBEQVRFIGZsYXNoY2FyZHMgU0VUICR7ZmllbGRzLmpvaW4oXCIsIFwiKX0gV0hFUkUgaWQgPSA/YDtcbiAgICB0aGlzLmV4ZWN1dGVTdGF0ZW1lbnQoc3FsLCB2YWx1ZXMpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlRmxhc2hjYXJkKFxuICAgIGZsYXNoY2FyZElkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxcbiAgICAgIFBpY2s8XG4gICAgICAgIEZsYXNoY2FyZCxcbiAgICAgICAgfCBcImZyb250XCJcbiAgICAgICAgfCBcImJhY2tcIlxuICAgICAgICB8IFwidHlwZVwiXG4gICAgICAgIHwgXCJjb250ZW50SGFzaFwiXG4gICAgICAgIHwgXCJzdGF0ZVwiXG4gICAgICAgIHwgXCJkdWVEYXRlXCJcbiAgICAgICAgfCBcImludGVydmFsXCJcbiAgICAgICAgfCBcInJlcGV0aXRpb25zXCJcbiAgICAgICAgfCBcImRpZmZpY3VsdHlcIlxuICAgICAgICB8IFwic3RhYmlsaXR5XCJcbiAgICAgICAgfCBcImxhcHNlc1wiXG4gICAgICAgIHwgXCJsYXN0UmV2aWV3ZWRcIlxuICAgICAgPlxuICAgID4sXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMudXBkYXRlRmxhc2hjYXJkQ29yZShmbGFzaGNhcmRJZCwgdXBkYXRlcyk7XG4gIH1cblxuICBwcml2YXRlIGRlbGV0ZUZsYXNoY2FyZENvcmUoZmxhc2hjYXJkSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuZXhlY3V0ZVN0YXRlbWVudChTUUxfUVVFUklFUy5ERUxFVEVfRkxBU0hDQVJELCBbZmxhc2hjYXJkSWRdKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUZsYXNoY2FyZChmbGFzaGNhcmRJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5kZWxldGVGbGFzaGNhcmRDb3JlKGZsYXNoY2FyZElkKTtcbiAgfVxuXG4gIC8vIFZlcnNpb24gd2l0aG91dCBzYXZlIGZvciB1c2UgaW4gdHJhbnNhY3Rpb25zXG4gIGFzeW5jIGRlbGV0ZUZsYXNoY2FyZFdpdGhvdXRTYXZlKGZsYXNoY2FyZElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmRlbGV0ZUZsYXNoY2FyZENvcmUoZmxhc2hjYXJkSWQpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlRmxhc2hjYXJkRGVja0lkcyhcbiAgICBvbGREZWNrSWQ6IHN0cmluZyxcbiAgICBuZXdEZWNrSWQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5leGVjdXRlU3RhdGVtZW50KFNRTF9RVUVSSUVTLlVQREFURV9GTEFTSENBUkRfREVDS19JRFMsIFtcbiAgICAgIG5ld0RlY2tJZCxcbiAgICAgIG9sZERlY2tJZCxcbiAgICBdKTtcbiAgfVxuXG4gIGFzeW5jIGdldEZsYXNoY2FyZHNCeURlY2soZGVja0lkOiBzdHJpbmcpOiBQcm9taXNlPEZsYXNoY2FyZFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlBbGwoXG4gICAgICBTUUxfUVVFUklFUy5HRVRfRkxBU0hDQVJEU19CWV9ERUNLLFxuICAgICAgW2RlY2tJZF0sXG4gICAgICB0aGlzLnJvd1RvRmxhc2hjYXJkLmJpbmQodGhpcyksXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIGdldER1ZUZsYXNoY2FyZHMoZGVja0lkOiBzdHJpbmcpOiBQcm9taXNlPEZsYXNoY2FyZFtdPiB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5QWxsKFxuICAgICAgU1FMX1FVRVJJRVMuR0VUX0RVRV9GTEFTSENBUkRTLFxuICAgICAgW2RlY2tJZCwgbm93XSxcbiAgICAgIHRoaXMucm93VG9GbGFzaGNhcmQuYmluZCh0aGlzKSxcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgZ2V0RGFpbHlSZXZpZXdDb3VudHMoXG4gICAgZGVja0lkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8eyBuZXdDb3VudDogbnVtYmVyOyByZXZpZXdDb3VudDogbnVtYmVyIH0+IHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF07IC8vIFlZWVktTU0tREQgZm9ybWF0XG4gICAgY29uc3QgdG9kYXlTdGFydCA9IGAke3RvZGF5fVQwMDowMDowMC4wMDBaYDtcbiAgICBjb25zdCB0b2RheUVuZCA9IGAke3RvZGF5fVQyMzo1OTo1OS45OTlaYDtcblxuICAgIC8vIENvdW50IG5ldyBjYXJkcyByZXZpZXdlZCB0b2RheSAocmV2aWV3cyB3aGVyZSBvbGRfcmVwZXRpdGlvbnMgd2FzIDApXG4gICAgY29uc3QgbmV3UmVzdWx0ID0gdGhpcy5xdWVyeU9uZShcbiAgICAgIFNRTF9RVUVSSUVTLkNPVU5UX05FV19DQVJEU19UT0RBWSxcbiAgICAgIFtkZWNrSWQsIHRvZGF5U3RhcnQsIHRvZGF5RW5kXSxcbiAgICAgIChyb3cpID0+IE51bWJlcihyb3dbMF0pLFxuICAgICk7XG4gICAgY29uc3QgbmV3Q291bnQgPSBuZXdSZXN1bHQgfHwgMDtcblxuICAgIC8vIENvdW50IHJldmlldyBjYXJkcyByZXZpZXdlZCB0b2RheSAocmV2aWV3cyB3aGVyZSBvbGRfaW50ZXJ2YWxfbWludXRlcyA+IDApXG4gICAgY29uc3QgcmV2aWV3UmVzdWx0ID0gdGhpcy5xdWVyeU9uZShcbiAgICAgIFNRTF9RVUVSSUVTLkNPVU5UX1JFVklFV19DQVJEU19UT0RBWSxcbiAgICAgIFtkZWNrSWQsIHRvZGF5U3RhcnQsIHRvZGF5RW5kXSxcbiAgICAgIChyb3cpID0+IE51bWJlcihyb3dbMF0pLFxuICAgICk7XG4gICAgY29uc3QgcmV2aWV3Q291bnQgPSByZXZpZXdSZXN1bHQgfHwgMDtcblxuICAgIHJldHVybiB7IG5ld0NvdW50LCByZXZpZXdDb3VudCB9O1xuICB9XG5cbiAgYXN5bmMgZ2V0UmV2aWV3YWJsZUZsYXNoY2FyZHMoZGVja0lkOiBzdHJpbmcpOiBQcm9taXNlPEZsYXNoY2FyZFtdPiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAvLyBHZXQgZGVjayBjb25maWcgdG8gY2hlY2sgbGltaXRzXG4gICAgY29uc3QgZGVjayA9IGF3YWl0IHRoaXMuZ2V0RGVja0J5SWQoZGVja0lkKTtcbiAgICBpZiAoIWRlY2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRGVjayBub3QgZm91bmQ6ICR7ZGVja0lkfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbmZpZyA9IGRlY2suY29uZmlnO1xuICAgIGNvbnN0IGZsYXNoY2FyZHM6IEZsYXNoY2FyZFtdID0gW107XG5cbiAgICAvLyBHZXQgdG9kYXkncyByZXZpZXcgY291bnRzIHRvIGNhbGN1bGF0ZSByZW1haW5pbmcgZGFpbHkgYWxsb3dhbmNlXG4gICAgY29uc3QgZGFpbHlDb3VudHMgPSBhd2FpdCB0aGlzLmdldERhaWx5UmV2aWV3Q291bnRzKGRlY2tJZCk7XG5cbiAgICAvLyAxLiBObyBsZWFybmluZyBjYXJkcyBpbiBwdXJlIEZTUlMgLSBza2lwIGxlYXJuaW5nIGNhcmQgcmV0cmlldmFsXG5cbiAgICAvLyAyLiBHZXQgbmV3IGNhcmRzIHdpdGggcmVtYWluaW5nIGRhaWx5IGxpbWl0XG4gICAgY29uc3QgbmV3Q2FyZHNMaW1pdCA9IGNvbmZpZy5uZXdDYXJkc1BlckRheTtcbiAgICBjb25zdCBuZXdDb3VudFRvZGF5ID0gTnVtYmVyKGRhaWx5Q291bnRzLm5ld0NvdW50KSB8fCAwO1xuICAgIGNvbnN0IHJlbWFpbmluZ05ld0NhcmRzID0gY29uZmlnLmhhc05ld0NhcmRzTGltaXRFbmFibGVkXG4gICAgICA/IE1hdGgubWF4KDAsIG5ld0NhcmRzTGltaXQgLSBuZXdDb3VudFRvZGF5KVxuICAgICAgOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcblxuICAgIGlmIChyZW1haW5pbmdOZXdDYXJkcyA+IDApIHtcbiAgICAgIGNvbnN0IHNxbCA9IGAke1NRTF9RVUVSSUVTLkdFVF9ORVdfQ0FSRFNfRk9SX1JFVklFV30ke2NvbmZpZy5oYXNOZXdDYXJkc0xpbWl0RW5hYmxlZCA/IGAgTElNSVQgJHtyZW1haW5pbmdOZXdDYXJkc31gIDogXCJcIn1gO1xuICAgICAgY29uc3QgbmV3Q2FyZHNTdG10ID0gdGhpcy5kYi5wcmVwYXJlKHNxbCk7XG4gICAgICBuZXdDYXJkc1N0bXQuYmluZChbZGVja0lkLCBub3ddKTtcbiAgICAgIHdoaWxlIChuZXdDYXJkc1N0bXQuc3RlcCgpKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IG5ld0NhcmRzU3RtdC5nZXQoKTtcbiAgICAgICAgZmxhc2hjYXJkcy5wdXNoKHRoaXMucm93VG9GbGFzaGNhcmQocm93KSk7XG4gICAgICB9XG4gICAgICBuZXdDYXJkc1N0bXQuZnJlZSgpO1xuICAgIH1cblxuICAgIC8vIDMuIEdldCByZXZpZXcgY2FyZHMgd2l0aCByZW1haW5pbmcgZGFpbHkgbGltaXRcbiAgICBjb25zdCByZXZpZXdDYXJkc0xpbWl0ID0gY29uZmlnLnJldmlld0NhcmRzUGVyRGF5O1xuICAgIGNvbnN0IHJldmlld0NvdW50VG9kYXkgPSBOdW1iZXIoZGFpbHlDb3VudHMucmV2aWV3Q291bnQpIHx8IDA7XG4gICAgLy8gQ2FsY3VsYXRlIHJlbWFpbmluZyByZXZpZXcgY2FyZHMgYmFzZWQgb24gZGFpbHkgbGltaXRcbiAgICBjb25zdCByZW1haW5pbmdSZXZpZXdDYXJkcyA9IGNvbmZpZy5oYXNSZXZpZXdDYXJkc0xpbWl0RW5hYmxlZFxuICAgICAgPyBNYXRoLm1heCgwLCByZXZpZXdDYXJkc0xpbWl0IC0gcmV2aWV3Q291bnRUb2RheSlcbiAgICAgIDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG5cbiAgICBpZiAocmVtYWluaW5nUmV2aWV3Q2FyZHMgPiAwKSB7XG4gICAgICBjb25zdCBzcWwgPSBgJHtTUUxfUVVFUklFUy5HRVRfUkVWSUVXX0NBUkRTX0ZPUl9SRVZJRVd9JHtjb25maWcuaGFzUmV2aWV3Q2FyZHNMaW1pdEVuYWJsZWQgPyBgIExJTUlUICR7cmVtYWluaW5nUmV2aWV3Q2FyZHN9YCA6IFwiXCJ9YDtcbiAgICAgIGNvbnN0IHJldmlld0NhcmRzU3RtdCA9IHRoaXMuZGIucHJlcGFyZShzcWwpO1xuICAgICAgcmV2aWV3Q2FyZHNTdG10LmJpbmQoW2RlY2tJZCwgbm93XSk7XG4gICAgICB3aGlsZSAocmV2aWV3Q2FyZHNTdG10LnN0ZXAoKSkge1xuICAgICAgICBjb25zdCByb3cgPSByZXZpZXdDYXJkc1N0bXQuZ2V0KCk7XG4gICAgICAgIGZsYXNoY2FyZHMucHVzaCh0aGlzLnJvd1RvRmxhc2hjYXJkKHJvdykpO1xuICAgICAgfVxuICAgICAgcmV2aWV3Q2FyZHNTdG10LmZyZWUoKTtcbiAgICB9XG5cbiAgICAvLyBTb3J0IGZpbmFsIHJlc3VsdDogcmV2aWV3IGZpcnN0LCB0aGVuIG5ld1xuICAgIGZsYXNoY2FyZHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3Qgc3RhdGVPcmRlciA9IHsgcmV2aWV3OiAxLCBuZXc6IDIgfTtcbiAgICAgIGNvbnN0IGFPcmRlciA9IHN0YXRlT3JkZXJbYS5zdGF0ZV07XG4gICAgICBjb25zdCBiT3JkZXIgPSBzdGF0ZU9yZGVyW2Iuc3RhdGVdO1xuXG4gICAgICBpZiAoYU9yZGVyICE9PSBiT3JkZXIpIHtcbiAgICAgICAgcmV0dXJuIGFPcmRlciAtIGJPcmRlcjtcbiAgICAgIH1cblxuICAgICAgLy8gV2l0aGluIHNhbWUgc3RhdGUsIGFwcGx5IHNwZWNpZmljIG9yZGVyaW5nIHJ1bGVzXG4gICAgICBpZiAoYS5zdGF0ZSA9PT0gXCJyZXZpZXdcIikge1xuICAgICAgICAvLyBSZXZpZXcgY2FyZHM6IGZvbGxvdyBkZWNrIGNvbmZpZyBwcmVmZXJlbmNlXG4gICAgICAgIGlmIChjb25maWcucmV2aWV3T3JkZXIgPT09IFwicmFuZG9tXCIpIHtcbiAgICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAtIDAuNTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBEZWZhdWx0OiBvbGRlc3QgZHVlIGZpcnN0XG4gICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEuZHVlRGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYi5kdWVEYXRlKS5nZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYS5zdGF0ZSA9PT0gXCJuZXdcIikge1xuICAgICAgICAvLyBOZXcgY2FyZHM6IGFsd2F5cyBieSBkdWUgZGF0ZSAoZWFybGllc3QgZmlyc3QpXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShhLmR1ZURhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGIuZHVlRGF0ZSkuZ2V0VGltZSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gMDtcbiAgICB9KTtcblxuICAgIHJldHVybiBmbGFzaGNhcmRzO1xuICB9XG5cbiAgYXN5bmMgZ2V0TGF0ZXN0UmV2aWV3TG9nRm9yRmxhc2hjYXJkKFxuICAgIGZsYXNoY2FyZElkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8UmV2aWV3TG9nIHwgbnVsbD4ge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuXG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShTUUxfUVVFUklFUy5HRVRfTEFURVNUX1JFVklFV19MT0cpO1xuXG4gICAgc3RtdC5iaW5kKFtmbGFzaGNhcmRJZF0pO1xuXG4gICAgaWYgKHN0bXQuc3RlcCgpKSB7XG4gICAgICBjb25zdCByb3cgPSBzdG10LmdldCgpO1xuICAgICAgc3RtdC5mcmVlKCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiByb3dbMF0gYXMgc3RyaW5nLFxuICAgICAgICBmbGFzaGNhcmRJZDogcm93WzFdIGFzIHN0cmluZyxcbiAgICAgICAgbGFzdFJldmlld2VkQXQ6IHJvd1syXSBhcyBzdHJpbmcsXG4gICAgICAgIHNob3duQXQ6IHJvd1szXSBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgIHJldmlld2VkQXQ6IHJvd1s0XSBhcyBzdHJpbmcsXG4gICAgICAgIHJhdGluZzogcm93WzVdIGFzIDEgfCAyIHwgMyB8IDQsXG4gICAgICAgIHJhdGluZ0xhYmVsOiByb3dbNl0gYXMgXCJhZ2FpblwiIHwgXCJoYXJkXCIgfCBcImdvb2RcIiB8IFwiZWFzeVwiLFxuICAgICAgICB0aW1lRWxhcHNlZE1zOiByb3dbN10gYXMgbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgICAgICBvbGRTdGF0ZTogcm93WzhdIGFzIFwibmV3XCIgfCBcInJldmlld1wiLFxuICAgICAgICBvbGRSZXBldGl0aW9uczogcm93WzldIGFzIG51bWJlcixcbiAgICAgICAgb2xkTGFwc2VzOiByb3dbMTBdIGFzIG51bWJlcixcbiAgICAgICAgb2xkU3RhYmlsaXR5OiByb3dbMTFdIGFzIG51bWJlcixcbiAgICAgICAgb2xkRGlmZmljdWx0eTogcm93WzEyXSBhcyBudW1iZXIsXG4gICAgICAgIG5ld1N0YXRlOiByb3dbMTNdIGFzIFwibmV3XCIgfCBcInJldmlld1wiLFxuICAgICAgICBuZXdSZXBldGl0aW9uczogcm93WzE0XSBhcyBudW1iZXIsXG4gICAgICAgIG5ld0xhcHNlczogcm93WzE1XSBhcyBudW1iZXIsXG4gICAgICAgIG5ld1N0YWJpbGl0eTogcm93WzE2XSBhcyBudW1iZXIsXG4gICAgICAgIG5ld0RpZmZpY3VsdHk6IHJvd1sxN10gYXMgbnVtYmVyLFxuICAgICAgICBvbGRJbnRlcnZhbE1pbnV0ZXM6IHJvd1sxOF0gYXMgbnVtYmVyLFxuICAgICAgICBuZXdJbnRlcnZhbE1pbnV0ZXM6IHJvd1sxOV0gYXMgbnVtYmVyLFxuICAgICAgICBvbGREdWVBdDogcm93WzIwXSBhcyBzdHJpbmcsXG4gICAgICAgIG5ld0R1ZUF0OiByb3dbMjFdIGFzIHN0cmluZyxcbiAgICAgICAgZWxhcHNlZERheXM6IHJvd1syMl0gYXMgbnVtYmVyLFxuICAgICAgICByZXRyaWV2YWJpbGl0eTogcm93WzIzXSBhcyBudW1iZXIsXG4gICAgICAgIHJlcXVlc3RSZXRlbnRpb246IHJvd1syNF0gYXMgbnVtYmVyLFxuICAgICAgICBwcm9maWxlOiAoKHJvd1syNV0gYXMgc3RyaW5nKSB8fCBcIlNUQU5EQVJEXCIpIGFzXG4gICAgICAgICAgfCBcIklOVEVOU0lWRVwiXG4gICAgICAgICAgfCBcIlNUQU5EQVJEXCIsXG4gICAgICAgIG1heGltdW1JbnRlcnZhbERheXM6IHJvd1syNl0gYXMgbnVtYmVyLFxuICAgICAgICBtaW5NaW51dGVzOiByb3dbMjddIGFzIG51bWJlcixcbiAgICAgICAgZnNyc1dlaWdodHNWZXJzaW9uOiByb3dbMjhdIGFzIHN0cmluZyxcbiAgICAgICAgc2NoZWR1bGVyVmVyc2lvbjogcm93WzI5XSBhcyBzdHJpbmcsXG4gICAgICAgIG5vdGVNb2RlbElkOiByb3dbMzBdIGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICAgICAgY2FyZFRlbXBsYXRlSWQ6IHJvd1szMV0gYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgICBjb250ZW50SGFzaDogcm93WzMyXSBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgIGNsaWVudDogcm93WzMzXSBhcyBcIndlYlwiIHwgXCJkZXNrdG9wXCIgfCBcIm1vYmlsZVwiIHwgdW5kZWZpbmVkLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBzdG10LmZyZWUoKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUZsYXNoY2FyZHNCeUZpbGUoc291cmNlRmlsZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5leGVjdXRlU3RhdGVtZW50KFNRTF9RVUVSSUVTLkRFTEVURV9GTEFTSENBUkRTX0JZX0ZJTEUsIFtzb3VyY2VGaWxlXSk7XG4gIH1cblxuICAvLyBSZXZpZXcgbG9nIG9wZXJhdGlvbnNcbiAgYXN5bmMgY3JlYXRlUmV2aWV3TG9nKGxvZzogT21pdDxSZXZpZXdMb2csIFwiaWRcIj4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcblxuICAgIGNvbnN0IGlkID0gYHJldmlld18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG5cbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKFNRTF9RVUVSSUVTLklOU0VSVF9SRVZJRVdfTE9HKTtcblxuICAgIHN0bXQucnVuKFtcbiAgICAgIGlkLFxuICAgICAgbG9nLmZsYXNoY2FyZElkLFxuICAgICAgbG9nLnNlc3Npb25JZCB8fCBudWxsLFxuICAgICAgbG9nLmxhc3RSZXZpZXdlZEF0LFxuICAgICAgbG9nLnNob3duQXQgfHwgbnVsbCxcbiAgICAgIGxvZy5yZXZpZXdlZEF0LFxuICAgICAgbG9nLnJhdGluZyxcbiAgICAgIGxvZy5yYXRpbmdMYWJlbCxcbiAgICAgIGxvZy50aW1lRWxhcHNlZE1zIHx8IG51bGwsXG4gICAgICBsb2cub2xkU3RhdGUsXG4gICAgICBsb2cub2xkUmVwZXRpdGlvbnMsXG4gICAgICBsb2cub2xkTGFwc2VzLFxuICAgICAgbG9nLm9sZFN0YWJpbGl0eSxcbiAgICAgIGxvZy5vbGREaWZmaWN1bHR5LFxuICAgICAgbG9nLm5ld1N0YXRlLFxuICAgICAgbG9nLm5ld1JlcGV0aXRpb25zLFxuICAgICAgbG9nLm5ld0xhcHNlcyxcbiAgICAgIGxvZy5uZXdTdGFiaWxpdHksXG4gICAgICBsb2cubmV3RGlmZmljdWx0eSxcbiAgICAgIGxvZy5vbGRJbnRlcnZhbE1pbnV0ZXMsXG4gICAgICBsb2cubmV3SW50ZXJ2YWxNaW51dGVzLFxuICAgICAgbG9nLm9sZER1ZUF0LFxuICAgICAgbG9nLm5ld0R1ZUF0LFxuICAgICAgbG9nLmVsYXBzZWREYXlzLFxuICAgICAgbG9nLnJldHJpZXZhYmlsaXR5LFxuICAgICAgbG9nLnJlcXVlc3RSZXRlbnRpb24sXG4gICAgICBsb2cucHJvZmlsZSxcbiAgICAgIGxvZy5tYXhpbXVtSW50ZXJ2YWxEYXlzLFxuICAgICAgbG9nLm1pbk1pbnV0ZXMsXG4gICAgICBsb2cuZnNyc1dlaWdodHNWZXJzaW9uLFxuICAgICAgbG9nLnNjaGVkdWxlclZlcnNpb24sXG4gICAgICBsb2cubm90ZU1vZGVsSWQgfHwgbnVsbCxcbiAgICAgIGxvZy5jYXJkVGVtcGxhdGVJZCB8fCBudWxsLFxuICAgICAgbG9nLmNvbnRlbnRIYXNoIHx8IG51bGwsXG4gICAgICBsb2cuY2xpZW50IHx8IG51bGwsXG4gICAgXSk7XG4gICAgc3RtdC5mcmVlKCk7XG4gIH1cblxuICAvLyBSZXZpZXcgc2Vzc2lvbiBvcGVyYXRpb25zXG4gIGFzeW5jIGNyZWF0ZVJldmlld1Nlc3Npb24oXG4gICAgc2Vzc2lvbjogT21pdDxSZXZpZXdTZXNzaW9uLCBcImlkXCI+LFxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuXG4gICAgY29uc3QgaWQgPSBgc2Vzc2lvbl8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG5cbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKFNRTF9RVUVSSUVTLklOU0VSVF9SRVZJRVdfU0VTU0lPTik7XG4gICAgc3RtdC5ydW4oW1xuICAgICAgaWQsXG4gICAgICBzZXNzaW9uLmRlY2tJZCxcbiAgICAgIHNlc3Npb24uc3RhcnRlZEF0LFxuICAgICAgc2Vzc2lvbi5lbmRlZEF0IHx8IG51bGwsXG4gICAgICBzZXNzaW9uLmdvYWxUb3RhbCxcbiAgICAgIHNlc3Npb24uZG9uZVVuaXF1ZSxcbiAgICBdKTtcbiAgICBzdG10LmZyZWUoKTtcblxuICAgIHJldHVybiBpZDtcbiAgfVxuXG4gIGFzeW5jIGdldFJldmlld1Nlc3Npb25CeUlkKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTxSZXZpZXdTZXNzaW9uIHwgbnVsbD4ge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuXG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShTUUxfUVVFUklFUy5HRVRfUkVWSUVXX1NFU1NJT05fQllfSUQpO1xuICAgIHN0bXQuYmluZChbc2Vzc2lvbklkXSk7XG5cbiAgICBpZiAoc3RtdC5zdGVwKCkpIHtcbiAgICAgIGNvbnN0IHJvdyA9IHN0bXQuZ2V0KCk7XG4gICAgICBzdG10LmZyZWUoKTtcbiAgICAgIHJldHVybiB0aGlzLnJvd1RvUmV2aWV3U2Vzc2lvbihyb3cpO1xuICAgIH1cblxuICAgIHN0bXQuZnJlZSgpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgYXN5bmMgZ2V0QWN0aXZlUmV2aWV3U2Vzc2lvbihkZWNrSWQ6IHN0cmluZyk6IFByb21pc2U8UmV2aWV3U2Vzc2lvbiB8IG51bGw+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcblxuICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoU1FMX1FVRVJJRVMuR0VUX0FDVElWRV9SRVZJRVdfU0VTU0lPTik7XG4gICAgc3RtdC5iaW5kKFtkZWNrSWRdKTtcblxuICAgIGlmIChzdG10LnN0ZXAoKSkge1xuICAgICAgY29uc3Qgcm93ID0gc3RtdC5nZXQoKTtcbiAgICAgIHN0bXQuZnJlZSgpO1xuICAgICAgcmV0dXJuIHRoaXMucm93VG9SZXZpZXdTZXNzaW9uKHJvdyk7XG4gICAgfVxuXG4gICAgc3RtdC5mcmVlKCk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyB1cGRhdGVSZXZpZXdTZXNzaW9uRG9uZVVuaXF1ZShcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICBkb25lVW5pcXVlOiBudW1iZXIsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuZXhlY3V0ZVN0YXRlbWVudChTUUxfUVVFUklFUy5VUERBVEVfUkVWSUVXX1NFU1NJT05fRE9ORV9VTklRVUUsIFtcbiAgICAgIGRvbmVVbmlxdWUsXG4gICAgICBzZXNzaW9uSWQsXG4gICAgXSk7XG4gIH1cblxuICBhc3luYyBlbmRSZXZpZXdTZXNzaW9uKHNlc3Npb25JZDogc3RyaW5nLCBlbmRlZEF0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmV4ZWN1dGVTdGF0ZW1lbnQoU1FMX1FVRVJJRVMuVVBEQVRFX1JFVklFV19TRVNTSU9OX0VORCwgW1xuICAgICAgZW5kZWRBdCxcbiAgICAgIHNlc3Npb25JZCxcbiAgICBdKTtcbiAgfVxuXG4gIGFzeW5jIGlzQ2FyZFJldmlld2VkSW5TZXNzaW9uKFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIGZsYXNoY2FyZElkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuXG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShTUUxfUVVFUklFUy5DSEVDS19DQVJEX1JFVklFV0VEX0lOX1NFU1NJT04pO1xuICAgIHN0bXQuYmluZChbc2Vzc2lvbklkLCBmbGFzaGNhcmRJZF0pO1xuXG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBpZiAoc3RtdC5zdGVwKCkpIHtcbiAgICAgIGNvbnN0IHJvdyA9IHN0bXQuZ2V0KCk7XG4gICAgICBjb3VudCA9IHJvd1swXSBhcyBudW1iZXI7XG4gICAgfVxuICAgIHN0bXQuZnJlZSgpO1xuXG4gICAgcmV0dXJuIGNvdW50ID4gMDtcbiAgfVxuXG4gIC8vIFN0YXRpc3RpY3Mgb3BlcmF0aW9uc1xuICBhc3luYyBnZXREZWNrU3RhdHMoZGVja0lkOiBzdHJpbmcpOiBQcm9taXNlPERlY2tTdGF0cz4ge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gICAgLy8gR2V0IGRlY2sgY29uZmlnIHRvIGNoZWNrIGxpbWl0c1xuICAgIGNvbnN0IGRlY2sgPSBhd2FpdCB0aGlzLmdldERlY2tCeUlkKGRlY2tJZCk7XG4gICAgaWYgKCFkZWNrKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERlY2sgbm90IGZvdW5kOiAke2RlY2tJZH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb25maWcgPSBkZWNrLmNvbmZpZztcblxuICAgIC8vIEdldCB0b2RheSdzIHJldmlldyBjb3VudHMgdG8gY2FsY3VsYXRlIHJlbWFpbmluZyBkYWlseSBhbGxvd2FuY2VcbiAgICBjb25zdCBkYWlseUNvdW50cyA9IGF3YWl0IHRoaXMuZ2V0RGFpbHlSZXZpZXdDb3VudHMoZGVja0lkKTtcblxuICAgIC8vIENvdW50IG5ldyBjYXJkcyAoc3RhdGUgPSAnbmV3JyBhbmQgZHVlIGZvciBmaXJzdCByZXZpZXcpXG4gICAgY29uc3QgbmV3U3RtdCA9IHRoaXMuZGIucHJlcGFyZShTUUxfUVVFUklFUy5DT1VOVF9ORVdfQ0FSRFMpO1xuICAgIG5ld1N0bXQuYmluZChbZGVja0lkLCBub3ddKTtcbiAgICBuZXdTdG10LnN0ZXAoKTtcbiAgICBjb25zdCB0b3RhbE5ld0NhcmRzID0gKG5ld1N0bXQuZ2V0KClbMF0gYXMgbnVtYmVyKSB8fCAwO1xuICAgIG5ld1N0bXQuZnJlZSgpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHJlbWFpbmluZyBuZXcgY2FyZHMgYmFzZWQgb24gZGFpbHkgbGltaXRcbiAgICBsZXQgbmV3Q291bnQgPSB0b3RhbE5ld0NhcmRzO1xuICAgIGNvbnN0IG5ld0NhcmRzTGltaXQgPSBjb25maWcubmV3Q2FyZHNQZXJEYXk7XG4gICAgY29uc3QgbmV3Q291bnRUb2RheSA9IE51bWJlcihkYWlseUNvdW50cy5uZXdDb3VudCkgfHwgMDtcbiAgICBpZiAoY29uZmlnLmhhc05ld0NhcmRzTGltaXRFbmFibGVkKSB7XG4gICAgICBjb25zdCByZW1haW5pbmdOZXcgPSBNYXRoLm1heCgwLCBuZXdDYXJkc0xpbWl0IC0gbmV3Q291bnRUb2RheSk7XG4gICAgICBuZXdDb3VudCA9IE1hdGgubWluKHRvdGFsTmV3Q2FyZHMsIHJlbWFpbmluZ05ldyk7XG4gICAgfVxuXG4gICAgLy8gTm8gbGVhcm5pbmcgY2FyZHMgaW4gcHVyZSBGU1JTXG4gICAgY29uc3QgbGVhcm5pbmdDb3VudCA9IDA7XG5cbiAgICAvLyBDb3VudCByZXZpZXcgY2FyZHMgKHN0YXRlID0gJ3JldmlldycgYW5kIGR1ZSlcbiAgICBjb25zdCBkdWVTdG10ID0gdGhpcy5kYi5wcmVwYXJlKFNRTF9RVUVSSUVTLkNPVU5UX0RVRV9DQVJEUyk7XG4gICAgZHVlU3RtdC5iaW5kKFtkZWNrSWQsIG5vd10pO1xuICAgIGR1ZVN0bXQuc3RlcCgpO1xuICAgIGNvbnN0IHRvdGFsRHVlQ2FyZHMgPSAoZHVlU3RtdC5nZXQoKVswXSBhcyBudW1iZXIpIHx8IDA7XG4gICAgZHVlU3RtdC5mcmVlKCk7XG5cbiAgICAvLyBDYWxjdWxhdGUgcmVtYWluaW5nIHJldmlldyBjYXJkcyBiYXNlZCBvbiBkYWlseSBsaW1pdFxuICAgIGxldCBkdWVDb3VudCA9IHRvdGFsRHVlQ2FyZHM7XG4gICAgY29uc3QgcmV2aWV3Q2FyZHNMaW1pdCA9IGNvbmZpZy5yZXZpZXdDYXJkc1BlckRheTtcbiAgICBjb25zdCByZXZpZXdDb3VudFRvZGF5ID0gTnVtYmVyKGRhaWx5Q291bnRzLnJldmlld0NvdW50KSB8fCAwO1xuICAgIGlmIChjb25maWcuaGFzUmV2aWV3Q2FyZHNMaW1pdEVuYWJsZWQpIHtcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1JldmlldyA9IE1hdGgubWF4KDAsIHJldmlld0NhcmRzTGltaXQgLSByZXZpZXdDb3VudFRvZGF5KTtcbiAgICAgIGR1ZUNvdW50ID0gTWF0aC5taW4odG90YWxEdWVDYXJkcywgcmVtYWluaW5nUmV2aWV3KTtcbiAgICB9XG5cbiAgICAvLyBUb3RhbCBjb3VudFxuICAgIGNvbnN0IHRvdGFsU3RtdCA9IHRoaXMuZGIucHJlcGFyZShTUUxfUVVFUklFUy5DT1VOVF9UT1RBTF9DQVJEUyk7XG4gICAgdG90YWxTdG10LmJpbmQoW2RlY2tJZF0pO1xuICAgIHRvdGFsU3RtdC5zdGVwKCk7XG4gICAgY29uc3QgdG90YWxDb3VudCA9ICh0b3RhbFN0bXQuZ2V0KClbMF0gYXMgbnVtYmVyKSB8fCAwO1xuICAgIHRvdGFsU3RtdC5mcmVlKCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGVja0lkLFxuICAgICAgbmV3Q291bnQsXG4gICAgICBkdWVDb3VudCxcbiAgICAgIHRvdGFsQ291bnQsXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGdldEFsbERlY2tTdGF0cygpOiBQcm9taXNlPERlY2tTdGF0c1tdPiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICBjb25zdCBkZWNrcyA9IGF3YWl0IHRoaXMuZ2V0QWxsRGVja3MoKTtcbiAgICBjb25zdCBzdGF0czogRGVja1N0YXRzW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZGVjayBvZiBkZWNrcykge1xuICAgICAgY29uc3QgZGVja1N0YXRzID0gYXdhaXQgdGhpcy5nZXREZWNrU3RhdHMoZGVjay5pZCk7XG4gICAgICBzdGF0cy5wdXNoKGRlY2tTdGF0cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG5cbiAgYXN5bmMgZ2V0UmV2aWV3Q291bnRzQnlEYXRlKFxuICAgIGRheXM6IG51bWJlciA9IDM2NSxcbiAgKTogUHJvbWlzZTxNYXA8c3RyaW5nLCBudW1iZXI+PiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHN0YXJ0RGF0ZS5zZXREYXRlKGVuZERhdGUuZ2V0RGF0ZSgpIC0gZGF5cyk7XG5cbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKFNRTF9RVUVSSUVTLkdFVF9SRVZJRVdfQ09VTlRTX0JZX0RBVEUpO1xuXG4gICAgc3RtdC5iaW5kKFtzdGFydERhdGUudG9JU09TdHJpbmcoKSwgZW5kRGF0ZS50b0lTT1N0cmluZygpXSk7XG4gICAgY29uc3QgcmV2aWV3Q291bnRzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcblxuICAgIHdoaWxlIChzdG10LnN0ZXAoKSkge1xuICAgICAgY29uc3Qgcm93ID0gc3RtdC5nZXQoKTtcbiAgICAgIGNvbnN0IGRhdGUgPSByb3dbMF0gYXMgc3RyaW5nO1xuICAgICAgY29uc3QgY291bnQgPSByb3dbMV0gYXMgbnVtYmVyO1xuICAgICAgcmV2aWV3Q291bnRzLnNldChkYXRlLCBjb3VudCk7XG4gICAgfVxuXG4gICAgc3RtdC5mcmVlKCk7XG4gICAgcmV0dXJuIHJldmlld0NvdW50cztcbiAgfVxuXG4gIGFzeW5jIGdldFN0dWR5U3RhdHMoKTogUHJvbWlzZTx7XG4gICAgdG90YWxIb3VyczogbnVtYmVyO1xuICAgIHBhc3RNb250aEhvdXJzOiBudW1iZXI7XG4gICAgcGFzdFdlZWtIb3VyczogbnVtYmVyO1xuICAgIHRvZGF5Q2FyZHM6IG51bWJlcjtcbiAgICB0b2RheUhvdXJzOiBudW1iZXI7XG4gICAgdG9kYXlQYWNlU2Vjb25kczogbnVtYmVyO1xuICB9PiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHRvZGF5U3RhcnQgPSBuZXcgRGF0ZShcbiAgICAgIG5vdy5nZXRGdWxsWWVhcigpLFxuICAgICAgbm93LmdldE1vbnRoKCksXG4gICAgICBub3cuZ2V0RGF0ZSgpLFxuICAgICk7XG4gICAgY29uc3QgdG9kYXlFbmQgPSBuZXcgRGF0ZSh0b2RheVN0YXJ0KTtcbiAgICB0b2RheUVuZC5zZXREYXRlKHRvZGF5RW5kLmdldERhdGUoKSArIDEpO1xuXG4gICAgY29uc3Qgd2Vla1N0YXJ0ID0gbmV3IERhdGUodG9kYXlTdGFydCk7XG4gICAgd2Vla1N0YXJ0LnNldERhdGUod2Vla1N0YXJ0LmdldERhdGUoKSAtIDcpO1xuXG4gICAgY29uc3QgbW9udGhTdGFydCA9IG5ldyBEYXRlKHRvZGF5U3RhcnQpO1xuICAgIG1vbnRoU3RhcnQuc2V0RGF0ZShtb250aFN0YXJ0LmdldERhdGUoKSAtIDMwKTtcblxuICAgIC8vIEdldCB0b3RhbCBob3Vyc1xuICAgIGNvbnN0IHRvdGFsU3RtdCA9IHRoaXMuZGIucHJlcGFyZShgXG4gICAgICBTRUxFQ1QgU1VNKHRpbWVfZWxhcHNlZF9tcyAvIDEwMDAuMCAvIDM2MDAuMCkgYXMgdG90YWxIb3Vyc1xuICAgICAgRlJPTSByZXZpZXdfbG9nc1xuICAgICAgV0hFUkUgdGltZV9lbGFwc2VkX21zIElTIE5PVCBOVUxMXG4gICAgYCk7XG4gICAgdG90YWxTdG10LnN0ZXAoKTtcbiAgICBjb25zdCB0b3RhbFJlc3VsdCA9IHRvdGFsU3RtdC5nZXQoKTtcbiAgICBjb25zdCB0b3RhbEhvdXJzID0gdG90YWxSZXN1bHRbMF0gfHwgMDtcbiAgICB0b3RhbFN0bXQuZnJlZSgpO1xuXG4gICAgYXdhaXQgeWllbGRUb1VJKCk7XG5cbiAgICAvLyBHZXQgcGFzdCBtb250aCBob3Vyc1xuICAgIGNvbnN0IG1vbnRoU3RtdCA9IHRoaXMuZGIucHJlcGFyZShgXG4gICAgICBTRUxFQ1QgU1VNKHRpbWVfZWxhcHNlZF9tcyAvIDEwMDAuMCAvIDM2MDAuMCkgYXMgbW9udGhIb3Vyc1xuICAgICAgRlJPTSByZXZpZXdfbG9nc1xuICAgICAgV0hFUkUgdGltZV9lbGFwc2VkX21zIElTIE5PVCBOVUxMXG4gICAgICAgIEFORCByZXZpZXdlZF9hdCA+PSA/XG4gICAgYCk7XG4gICAgbW9udGhTdG10LmJpbmQoW21vbnRoU3RhcnQudG9JU09TdHJpbmcoKV0pO1xuICAgIG1vbnRoU3RtdC5zdGVwKCk7XG4gICAgY29uc3QgbW9udGhSZXN1bHQgPSBtb250aFN0bXQuZ2V0KCk7XG4gICAgY29uc3QgcGFzdE1vbnRoSG91cnMgPSBtb250aFJlc3VsdFswXSB8fCAwO1xuICAgIG1vbnRoU3RtdC5mcmVlKCk7XG5cbiAgICBhd2FpdCB5aWVsZFRvVUkoKTtcblxuICAgIC8vIEdldCBwYXN0IHdlZWsgaG91cnNcbiAgICBjb25zdCB3ZWVrU3RtdCA9IHRoaXMuZGIucHJlcGFyZShgXG4gICAgICBTRUxFQ1QgU1VNKHRpbWVfZWxhcHNlZF9tcyAvIDEwMDAuMCAvIDM2MDAuMCkgYXMgd2Vla0hvdXJzXG4gICAgICBGUk9NIHJldmlld19sb2dzXG4gICAgICBXSEVSRSB0aW1lX2VsYXBzZWRfbXMgSVMgTk9UIE5VTExcbiAgICAgICAgQU5EIHJldmlld2VkX2F0ID49ID9cbiAgICBgKTtcbiAgICB3ZWVrU3RtdC5iaW5kKFt3ZWVrU3RhcnQudG9JU09TdHJpbmcoKV0pO1xuICAgIHdlZWtTdG10LnN0ZXAoKTtcbiAgICBjb25zdCB3ZWVrUmVzdWx0ID0gd2Vla1N0bXQuZ2V0KCk7XG4gICAgY29uc3QgcGFzdFdlZWtIb3VycyA9IHdlZWtSZXN1bHRbMF0gfHwgMDtcbiAgICB3ZWVrU3RtdC5mcmVlKCk7XG5cbiAgICBhd2FpdCB5aWVsZFRvVUkoKTtcblxuICAgIC8vIEdldCB0b2RheSdzIHN0YXRzXG4gICAgY29uc3QgdG9kYXlTdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgIFNFTEVDVFxuICAgICAgICBDT1VOVCgqKSBhcyBjYXJkcyxcbiAgICAgICAgU1VNKHRpbWVfZWxhcHNlZF9tcyAvIDEwMDAuMCAvIDM2MDAuMCkgYXMgaG91cnMsXG4gICAgICAgIEFWRyh0aW1lX2VsYXBzZWRfbXMgLyAxMDAwLjApIGFzIGF2Z1NlY29uZHNcbiAgICAgIEZST00gcmV2aWV3X2xvZ3NcbiAgICAgIFdIRVJFIHJldmlld2VkX2F0ID49ID8gQU5EIHJldmlld2VkX2F0IDwgP1xuICAgICAgICBBTkQgdGltZV9lbGFwc2VkX21zIElTIE5PVCBOVUxMXG4gICAgYCk7XG4gICAgdG9kYXlTdG10LmJpbmQoW3RvZGF5U3RhcnQudG9JU09TdHJpbmcoKSwgdG9kYXlFbmQudG9JU09TdHJpbmcoKV0pO1xuICAgIHRvZGF5U3RtdC5zdGVwKCk7XG4gICAgY29uc3QgdG9kYXlSZXN1bHQgPSB0b2RheVN0bXQuZ2V0KCk7XG4gICAgY29uc3QgdG9kYXlDYXJkcyA9IHRvZGF5UmVzdWx0WzBdIHx8IDA7XG4gICAgY29uc3QgdG9kYXlIb3VycyA9IHRvZGF5UmVzdWx0WzFdIHx8IDA7XG4gICAgY29uc3QgdG9kYXlQYWNlU2Vjb25kcyA9IHRvZGF5UmVzdWx0WzJdIHx8IDA7XG4gICAgdG9kYXlTdG10LmZyZWUoKTtcblxuICAgIGF3YWl0IHlpZWxkVG9VSSgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsSG91cnM6IE51bWJlcih0b3RhbEhvdXJzKSxcbiAgICAgIHBhc3RNb250aEhvdXJzOiBOdW1iZXIocGFzdE1vbnRoSG91cnMpLFxuICAgICAgcGFzdFdlZWtIb3VyczogTnVtYmVyKHBhc3RXZWVrSG91cnMpLFxuICAgICAgdG9kYXlDYXJkczogTnVtYmVyKHRvZGF5Q2FyZHMpLFxuICAgICAgdG9kYXlIb3VyczogTnVtYmVyKHRvZGF5SG91cnMpLFxuICAgICAgdG9kYXlQYWNlU2Vjb25kczogTnVtYmVyKHRvZGF5UGFjZVNlY29uZHMpLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1pZ3JhdGVTY2hlbWFJZk5lZWRlZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKFwiU3RhcnRpbmcgZGF0YWJhc2UgbWlncmF0aW9uIGNoZWNrLi4uXCIpO1xuXG4gICAgICBpZiAobmVlZHNNaWdyYXRpb24odGhpcy5kYikpIHtcbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhcIk1pZ3JhdGlvbiBuZWVkZWQsIGFwcGx5aW5nLi4uXCIpO1xuICAgICAgICBtaWdyYXRlKHRoaXMuZGIsIHRoaXMuZGVidWdMb2cuYmluZCh0aGlzKSk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZSgpO1xuICAgICAgICB0aGlzLmRlYnVnTG9nKFwiTWlncmF0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRlYnVnTG9nKFwiRGF0YWJhc2Ugc2NoZW1hIGlzIHVwIHRvIGRhdGVcIik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZGVidWdMb2coYE1pZ3JhdGlvbiBmYWlsZWQ6ICR7ZXJyb3J9YCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERhdGFiYXNlIG1pZ3JhdGlvbiBmYWlsZWQ6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICB9XG4gIC8vIEhlbHBlciBtZXRob2RzXG4gIHByaXZhdGUgcm93VG9GbGFzaGNhcmQocm93OiBhbnlbXSk6IEZsYXNoY2FyZCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiByb3dbMF0gYXMgc3RyaW5nLFxuICAgICAgZGVja0lkOiByb3dbMV0gYXMgc3RyaW5nLFxuICAgICAgZnJvbnQ6IHJvd1syXSBhcyBzdHJpbmcsXG4gICAgICBiYWNrOiByb3dbM10gYXMgc3RyaW5nLFxuICAgICAgdHlwZTogcm93WzRdIGFzIFwiaGVhZGVyLXBhcmFncmFwaFwiIHwgXCJ0YWJsZVwiLFxuICAgICAgc291cmNlRmlsZTogcm93WzVdIGFzIHN0cmluZyxcbiAgICAgIGNvbnRlbnRIYXNoOiByb3dbNl0gYXMgc3RyaW5nLFxuICAgICAgc3RhdGU6IHJvd1s3XSBhcyBcIm5ld1wiIHwgXCJyZXZpZXdcIixcbiAgICAgIGR1ZURhdGU6IHJvd1s4XSBhcyBzdHJpbmcsXG4gICAgICBpbnRlcnZhbDogcm93WzldIGFzIG51bWJlcixcbiAgICAgIHJlcGV0aXRpb25zOiByb3dbMTBdIGFzIG51bWJlcixcbiAgICAgIGRpZmZpY3VsdHk6IHJvd1sxMV0gYXMgbnVtYmVyLFxuICAgICAgc3RhYmlsaXR5OiByb3dbMTJdIGFzIG51bWJlcixcbiAgICAgIGxhcHNlczogcm93WzEzXSBhcyBudW1iZXIsXG4gICAgICBsYXN0UmV2aWV3ZWQ6IHJvd1sxNF0gYXMgc3RyaW5nIHwgbnVsbCxcbiAgICAgIGNyZWF0ZWQ6IHJvd1sxNV0gYXMgc3RyaW5nLFxuICAgICAgbW9kaWZpZWQ6IHJvd1sxNl0gYXMgc3RyaW5nLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHJvd1RvUmV2aWV3U2Vzc2lvbihyb3c6IGFueVtdKTogUmV2aWV3U2Vzc2lvbiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiByb3dbMF0gYXMgc3RyaW5nLFxuICAgICAgZGVja0lkOiByb3dbMV0gYXMgc3RyaW5nLFxuICAgICAgc3RhcnRlZEF0OiByb3dbMl0gYXMgc3RyaW5nLFxuICAgICAgZW5kZWRBdDogcm93WzNdIGFzIHN0cmluZyB8IG51bGwsXG4gICAgICBnb2FsVG90YWw6IHJvd1s0XSBhcyBudW1iZXIsXG4gICAgICBkb25lVW5pcXVlOiByb3dbNV0gYXMgbnVtYmVyLFxuICAgIH07XG4gIH1cblxuICBhc3luYyBnZXRPdmVyYWxsU3RhdGlzdGljcyhcbiAgICBkZWNrRmlsdGVyOiBzdHJpbmcgPSBcImFsbFwiLFxuICAgIHRpbWVmcmFtZTogc3RyaW5nID0gXCIxMm1vbnRoc1wiLFxuICApOiBQcm9taXNlPFN0YXRpc3RpY3M+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBEZXRlcm1pbmUgZGF0ZSByYW5nZSBiYXNlZCBvbiB0aW1lZnJhbWVcbiAgICAgIGNvbnN0IGN1dG9mZkRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgaWYgKHRpbWVmcmFtZSA9PT0gXCIxMm1vbnRoc1wiKSB7XG4gICAgICAgIGN1dG9mZkRhdGUuc2V0RnVsbFllYXIoY3V0b2ZmRGF0ZS5nZXRGdWxsWWVhcigpIC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3IgXCJhbGxcIiwgZ28gYmFjayAxMCB5ZWFycyAoZWZmZWN0aXZlbHkgYWxsIGRhdGEpXG4gICAgICAgIGN1dG9mZkRhdGUuc2V0RnVsbFllYXIoY3V0b2ZmRGF0ZS5nZXRGdWxsWWVhcigpIC0gMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBCdWlsZCBkZWNrIGZpbHRlciBjb25kaXRpb25zXG4gICAgICBsZXQgZGVja0ZpbHRlckNvbmRpdGlvbiA9IFwiXCI7XG4gICAgICBsZXQgZGVja0ZpbHRlclBhcmFtczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgaWYgKGRlY2tGaWx0ZXIuc3RhcnRzV2l0aChcImRlY2s6XCIpKSB7XG4gICAgICAgIGNvbnN0IGRlY2tJZCA9IGRlY2tGaWx0ZXIuc3Vic3RyaW5nKDUpO1xuICAgICAgICBkZWNrRmlsdGVyQ29uZGl0aW9uID0gXCJBTkQgZi5kZWNrX2lkID0gP1wiO1xuICAgICAgICBkZWNrRmlsdGVyUGFyYW1zLnB1c2goZGVja0lkKTtcbiAgICAgIH0gZWxzZSBpZiAoZGVja0ZpbHRlci5zdGFydHNXaXRoKFwidGFnOlwiKSkge1xuICAgICAgICBjb25zdCB0YWcgPSBkZWNrRmlsdGVyLnN1YnN0cmluZyg0KTtcbiAgICAgICAgZGVja0ZpbHRlckNvbmRpdGlvbiA9IFwiQU5EIGQudGFnID0gP1wiO1xuICAgICAgICBkZWNrRmlsdGVyUGFyYW1zLnB1c2godGFnKTtcbiAgICAgIH1cbiAgICAgIC8vIEZvciBcImFsbFwiLCBubyBhZGRpdGlvbmFsIGZpbHRlciBuZWVkZWRcblxuICAgICAgY29uc3QgZGFpbHlTdGF0c1N0bXQgPSB0aGlzLmRiLnByZXBhcmUoXG4gICAgICAgIGRlY2tGaWx0ZXJDb25kaXRpb25cbiAgICAgICAgICA/IFNRTF9RVUVSSUVTLkdFVF9EQUlMWV9TVEFUU19PVkVSQUxMLnJlcGxhY2UoXG4gICAgICAgICAgICAgIFwiRlJPTSByZXZpZXdfbG9ncyBybFwiLFxuICAgICAgICAgICAgICBcIkZST00gcmV2aWV3X2xvZ3MgcmxcIixcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgXCJKT0lOIGZsYXNoY2FyZHMgZiBPTiBybC5mbGFzaGNhcmRfaWQgPSBmLmlkXCIsXG4gICAgICAgICAgICAgICAgXCJKT0lOIGZsYXNoY2FyZHMgZiBPTiBybC5mbGFzaGNhcmRfaWQgPSBmLmlkIEpPSU4gZGVja3MgZCBPTiBmLmRlY2tfaWQgPSBkLmlkXCIsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgXCJXSEVSRSBEQVRFKHJldmlld2VkX2F0KSA+PSBEQVRFKD8pXCIsXG4gICAgICAgICAgICAgICAgYFdIRVJFIERBVEUocmV2aWV3ZWRfYXQpID49IERBVEUoPykgJHtkZWNrRmlsdGVyQ29uZGl0aW9ufWAsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICA6IFNRTF9RVUVSSUVTLkdFVF9EQUlMWV9TVEFUU19PVkVSQUxMLFxuICAgICAgKTtcblxuICAgICAgZGFpbHlTdGF0c1N0bXQuYmluZChbXG4gICAgICAgIGN1dG9mZkRhdGUudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF0sXG4gICAgICAgIC4uLmRlY2tGaWx0ZXJQYXJhbXMsXG4gICAgICBdKTtcbiAgICAgIGNvbnN0IGRhaWx5U3RhdHMgPSBbXTtcblxuICAgICAgd2hpbGUgKGRhaWx5U3RhdHNTdG10LnN0ZXAoKSkge1xuICAgICAgICBjb25zdCByb3cgPSBkYWlseVN0YXRzU3RtdC5nZXQoKTtcbiAgICAgICAgY29uc3QgcmV2aWV3cyA9IHJvd1sxXSBhcyBudW1iZXI7XG4gICAgICAgIGNvbnN0IGNvcnJlY3QgPSByb3dbMl0gYXMgbnVtYmVyO1xuICAgICAgICBkYWlseVN0YXRzLnB1c2goe1xuICAgICAgICAgIGRhdGU6IHJvd1swXSBhcyBzdHJpbmcsXG4gICAgICAgICAgcmV2aWV3czogcmV2aWV3cyxcbiAgICAgICAgICB0aW1lU3BlbnQ6IHJldmlld3MgKiAzMCwgLy8gRXN0aW1hdGUgMzAgc2Vjb25kcyBwZXIgcmV2aWV3XG4gICAgICAgICAgbmV3Q2FyZHM6IHJvd1szXSBhcyBudW1iZXIsXG4gICAgICAgICAgbGVhcm5pbmdDYXJkczogMCwgLy8gTm8gbGVhcm5pbmcgY2FyZHMgaW4gcHVyZSBGU1JTXG4gICAgICAgICAgcmV2aWV3Q2FyZHM6IHJvd1s0XSBhcyBudW1iZXIsXG4gICAgICAgICAgY29ycmVjdFJhdGU6IHJldmlld3MgPiAwID8gKGNvcnJlY3QgLyByZXZpZXdzKSAqIDEwMCA6IDAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZGFpbHlTdGF0c1N0bXQuZnJlZSgpO1xuXG4gICAgICAvLyBHZXQgY2FyZCBzdGF0cyBieSBzdGF0dXNcbiAgICAgIGNvbnN0IGNhcmRTdGF0c1N0bXQgPSB0aGlzLmRiLnByZXBhcmUoXG4gICAgICAgIGRlY2tGaWx0ZXJDb25kaXRpb25cbiAgICAgICAgICA/IFNRTF9RVUVSSUVTLkdFVF9DQVJEX1NUQVRTLnJlcGxhY2UoXG4gICAgICAgICAgICAgIFwiRlJPTSBmbGFzaGNhcmRzIGZcIixcbiAgICAgICAgICAgICAgXCJGUk9NIGZsYXNoY2FyZHMgZiBKT0lOIGRlY2tzIGQgT04gZi5kZWNrX2lkID0gZC5pZFwiLFxuICAgICAgICAgICAgKS5yZXBsYWNlKFxuICAgICAgICAgICAgICBcIkdST1VQIEJZIGYuc3RhdGVcIixcbiAgICAgICAgICAgICAgYFdIRVJFICR7ZGVja0ZpbHRlckNvbmRpdGlvbi5yZXBsYWNlKFwiZC5cIiwgXCJkLlwiKX0gR1JPVVAgQlkgZi5zdGF0ZWAsXG4gICAgICAgICAgICApXG4gICAgICAgICAgOiBTUUxfUVVFUklFUy5HRVRfQ0FSRF9TVEFUUyxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGNhcmRTdGF0cyA9IHtcbiAgICAgICAgbmV3OiAwLFxuICAgICAgICByZXZpZXc6IDAsXG4gICAgICAgIG1hdHVyZTogMCxcbiAgICAgIH07XG5cbiAgICAgIGlmIChkZWNrRmlsdGVyQ29uZGl0aW9uKSB7XG4gICAgICAgIGNhcmRTdGF0c1N0bXQuYmluZChkZWNrRmlsdGVyUGFyYW1zKTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKGNhcmRTdGF0c1N0bXQuc3RlcCgpKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IGNhcmRTdGF0c1N0bXQuZ2V0KCk7XG4gICAgICAgIGNvbnN0IGNhcmRUeXBlID0gcm93WzBdIGFzIHN0cmluZztcbiAgICAgICAgY29uc3QgY291bnQgPSByb3dbMV0gYXMgbnVtYmVyO1xuICAgICAgICBpZiAoY2FyZFR5cGUgPT09IFwibmV3XCIpIGNhcmRTdGF0cy5uZXcgPSBjb3VudDtcbiAgICAgICAgZWxzZSBpZiAoY2FyZFR5cGUgPT09IFwicmV2aWV3XCIpIGNhcmRTdGF0cy5yZXZpZXcgPSBjb3VudDtcbiAgICAgICAgZWxzZSBpZiAoY2FyZFR5cGUgPT09IFwibWF0dXJlXCIpIGNhcmRTdGF0cy5tYXR1cmUgPSBjb3VudDtcbiAgICAgIH1cbiAgICAgIGNhcmRTdGF0c1N0bXQuZnJlZSgpO1xuXG4gICAgICAvLyBHZXQgYW5zd2VyIGJ1dHRvbiBzdGF0c1xuICAgICAgY29uc3QgYW5zd2VyQnV0dG9uc1N0bXQgPSB0aGlzLmRiLnByZXBhcmUoXG4gICAgICAgIGRlY2tGaWx0ZXJDb25kaXRpb25cbiAgICAgICAgICA/IFNRTF9RVUVSSUVTLkdFVF9BTlNXRVJfQlVUVE9OX1NUQVRTLnJlcGxhY2UoXG4gICAgICAgICAgICAgIFwiRlJPTSByZXZpZXdfbG9ncyBybFwiLFxuICAgICAgICAgICAgICBcIkZST00gcmV2aWV3X2xvZ3MgcmwgSk9JTiBmbGFzaGNhcmRzIGYgT04gcmwuZmxhc2hjYXJkX2lkID0gZi5pZCBKT0lOIGRlY2tzIGQgT04gZi5kZWNrX2lkID0gZC5pZFwiLFxuICAgICAgICAgICAgKS5yZXBsYWNlKFxuICAgICAgICAgICAgICBcIldIRVJFIHJsLnJldmlld2VkX2F0ID49ID8gQU5EIHJsLnJldmlld2VkX2F0IDw9ID9cIixcbiAgICAgICAgICAgICAgYFdIRVJFIHJsLnJldmlld2VkX2F0ID49ID8gQU5EIHJsLnJldmlld2VkX2F0IDw9ID8gJHtkZWNrRmlsdGVyQ29uZGl0aW9ufWAsXG4gICAgICAgICAgICApXG4gICAgICAgICAgOiBTUUxfUVVFUklFUy5HRVRfQU5TV0VSX0JVVFRPTl9TVEFUUyxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGFuc3dlckJ1dHRvbnMgPSB7XG4gICAgICAgIGFnYWluOiAwLFxuICAgICAgICBoYXJkOiAwLFxuICAgICAgICBnb29kOiAwLFxuICAgICAgICBlYXN5OiAwLFxuICAgICAgfTtcblxuICAgICAgYW5zd2VyQnV0dG9uc1N0bXQuYmluZChbXG4gICAgICAgIGN1dG9mZkRhdGUudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF0sXG4gICAgICAgIC4uLmRlY2tGaWx0ZXJQYXJhbXMsXG4gICAgICBdKTtcblxuICAgICAgd2hpbGUgKGFuc3dlckJ1dHRvbnNTdG10LnN0ZXAoKSkge1xuICAgICAgICBjb25zdCByb3cgPSBhbnN3ZXJCdXR0b25zU3RtdC5nZXQoKTtcbiAgICAgICAgY29uc3QgcmF0aW5nTGFiZWwgPSByb3dbMF0gYXMgc3RyaW5nO1xuICAgICAgICBjb25zdCBjb3VudCA9IHJvd1sxXSBhcyBudW1iZXI7XG4gICAgICAgIGFuc3dlckJ1dHRvbnNbcmF0aW5nTGFiZWwgYXMga2V5b2YgdHlwZW9mIGFuc3dlckJ1dHRvbnNdID0gY291bnQ7XG4gICAgICB9XG4gICAgICBhbnN3ZXJCdXR0b25zU3RtdC5mcmVlKCk7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSByZXRlbnRpb24gcmF0ZVxuICAgICAgY29uc3QgdG90YWxSZXZpZXdzID0gT2JqZWN0LnZhbHVlcyhhbnN3ZXJCdXR0b25zKS5yZWR1Y2UoXG4gICAgICAgIChzdW0sIGNvdW50KSA9PiBzdW0gKyBjb3VudCxcbiAgICAgICAgMCxcbiAgICAgICk7XG4gICAgICBjb25zdCBjb3JyZWN0UmV2aWV3cyA9IHRvdGFsUmV2aWV3cyAtIGFuc3dlckJ1dHRvbnMuYWdhaW47XG4gICAgICBjb25zdCByZXRlbnRpb25SYXRlID1cbiAgICAgICAgdG90YWxSZXZpZXdzID4gMCA/IChjb3JyZWN0UmV2aWV3cyAvIHRvdGFsUmV2aWV3cykgKiAxMDAgOiAwO1xuXG4gICAgICAvLyBHZXQgaW50ZXJ2YWwgZGlzdHJpYnV0aW9uXG4gICAgICBjb25zdCBpbnRlcnZhbHNTdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgIFNFTEVDVFxuICAgICAgICBDQVNFXG4gICAgICAgICAgV0hFTiBmLmludGVydmFsIDwgMTQ0MCBUSEVOIENBU1QoZi5pbnRlcnZhbCAvIDYwIEFTIElOVEVHRVIpIHx8ICdoJ1xuICAgICAgICAgIFdIRU4gZi5pbnRlcnZhbCA8IDQzMjAwIFRIRU4gQ0FTVChmLmludGVydmFsIC8gMTQ0MCBBUyBJTlRFR0VSKSB8fCAnZCdcbiAgICAgICAgICBFTFNFIENBU1QoZi5pbnRlcnZhbCAvIDQzMjAwIEFTIElOVEVHRVIpIHx8ICdtJ1xuICAgICAgICBFTkQgYXMgaW50ZXJ2YWxfZ3JvdXAsXG4gICAgICAgIENPVU5UKCopIGFzIGNvdW50XG4gICAgICBGUk9NIGZsYXNoY2FyZHMgZlxuICAgICAgJHtkZWNrRmlsdGVyQ29uZGl0aW9uID8gXCJKT0lOIGRlY2tzIGQgT04gZi5kZWNrX2lkID0gZC5pZFwiIDogXCJcIn1cbiAgICAgIFdIRVJFIGYuc3RhdGUgIT0gJ25ldydcbiAgICAgICR7ZGVja0ZpbHRlckNvbmRpdGlvbn1cbiAgICAgIEdST1VQIEJZIGludGVydmFsX2dyb3VwXG4gICAgICBPUkRFUiBCWSBmLmludGVydmFsXG4gICAgYCk7XG5cbiAgICAgIGlmIChkZWNrRmlsdGVyQ29uZGl0aW9uKSB7XG4gICAgICAgIGludGVydmFsc1N0bXQuYmluZChkZWNrRmlsdGVyUGFyYW1zKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW50ZXJ2YWxzID0gW107XG4gICAgICB3aGlsZSAoaW50ZXJ2YWxzU3RtdC5zdGVwKCkpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gaW50ZXJ2YWxzU3RtdC5nZXQoKTtcbiAgICAgICAgaW50ZXJ2YWxzLnB1c2goe1xuICAgICAgICAgIGludGVydmFsOiByb3dbMF0gYXMgc3RyaW5nLFxuICAgICAgICAgIGNvdW50OiByb3dbMV0gYXMgbnVtYmVyLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGludGVydmFsc1N0bXQuZnJlZSgpO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBmb3JlY2FzdCBmb3IgbmV4dCA5MCBkYXlzXG4gICAgICBjb25zdCBmb3JlY2FzdCA9IFtdO1xuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDkwOyBpKyspIHtcbiAgICAgICAgY29uc3QgZm9yZWNhc3REYXRlID0gbmV3IERhdGUodG9kYXkpO1xuICAgICAgICBmb3JlY2FzdERhdGUuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyBpKTtcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGZvcmVjYXN0RGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcblxuICAgICAgICBjb25zdCBmb3JlY2FzdFN0bXQgPSB0aGlzLmRiLnByZXBhcmUoXG4gICAgICAgICAgZGVja0ZpbHRlckNvbmRpdGlvblxuICAgICAgICAgICAgPyBTUUxfUVVFUklFUy5HRVRfRk9SRUNBU1RfRFVFX0NPVU5ULnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgXCJGUk9NIGZsYXNoY2FyZHMgZlwiLFxuICAgICAgICAgICAgICAgIFwiRlJPTSBmbGFzaGNhcmRzIGYgSk9JTiBkZWNrcyBkIE9OIGYuZGVja19pZCA9IGQuaWRcIixcbiAgICAgICAgICAgICAgKS5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIFwiV0hFUkUgREFURShmLmR1ZV9kYXRlKSA9IERBVEUoPylcIixcbiAgICAgICAgICAgICAgICBgV0hFUkUgREFURShmLmR1ZV9kYXRlKSA9IERBVEUoPykgJHtkZWNrRmlsdGVyQ29uZGl0aW9ufWAsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogU1FMX1FVRVJJRVMuR0VUX0ZPUkVDQVNUX0RVRV9DT1VOVCxcbiAgICAgICAgKTtcblxuICAgICAgICBmb3JlY2FzdFN0bXQuYmluZChbZGF0ZVN0ciwgLi4uZGVja0ZpbHRlclBhcmFtc10pO1xuICAgICAgICBsZXQgZHVlQ291bnQgPSAwO1xuICAgICAgICBpZiAoZm9yZWNhc3RTdG10LnN0ZXAoKSkge1xuICAgICAgICAgIGNvbnN0IHJvdyA9IGZvcmVjYXN0U3RtdC5nZXQoKTtcbiAgICAgICAgICBkdWVDb3VudCA9IHJvd1swXSBhcyBudW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgZm9yZWNhc3RTdG10LmZyZWUoKTtcblxuICAgICAgICBmb3JlY2FzdC5wdXNoKHtcbiAgICAgICAgICBkYXRlOiBkYXRlU3RyLFxuICAgICAgICAgIGR1ZUNvdW50OiBkdWVDb3VudCxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBwYWNlIHN0YXRpc3RpY3MgZnJvbSB0aW1lX2VsYXBzZWRfbXMgZGF0YVxuICAgICAgY29uc3QgcGFjZVN0bXQgPSB0aGlzLmRiLnByZXBhcmUoXG4gICAgICAgIGRlY2tGaWx0ZXJDb25kaXRpb25cbiAgICAgICAgICA/IFNRTF9RVUVSSUVTLkdFVF9QQUNFX1NUQVRTLnJlcGxhY2UoXG4gICAgICAgICAgICAgIFwiRlJPTSByZXZpZXdfbG9ncyBybFwiLFxuICAgICAgICAgICAgICBcIkZST00gcmV2aWV3X2xvZ3MgcmwgSk9JTiBmbGFzaGNhcmRzIGYgT04gcmwuZmxhc2hjYXJkX2lkID0gZi5pZCBKT0lOIGRlY2tzIGQgT04gZi5kZWNrX2lkID0gZC5pZFwiLFxuICAgICAgICAgICAgKS5yZXBsYWNlKFxuICAgICAgICAgICAgICBcIldIRVJFIHJsLnJldmlld2VkX2F0ID49ID8gQU5EIHJsLnJldmlld2VkX2F0IDw9ID9cIixcbiAgICAgICAgICAgICAgYFdIRVJFIHJsLnJldmlld2VkX2F0ID49ID8gQU5EIHJsLnJldmlld2VkX2F0IDw9ID8gJHtkZWNrRmlsdGVyQ29uZGl0aW9ufWAsXG4gICAgICAgICAgICApXG4gICAgICAgICAgOiBTUUxfUVVFUklFUy5HRVRfUEFDRV9TVEFUUyxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBpZiAoZGVja0ZpbHRlckNvbmRpdGlvbikge1xuICAgICAgICBwYWNlU3RtdC5iaW5kKFtjdXRvZmZEYXRlLnRvSVNPU3RyaW5nKCksIGVuZERhdGUsIC4uLmRlY2tGaWx0ZXJQYXJhbXNdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhY2VTdG10LmJpbmQoW2N1dG9mZkRhdGUudG9JU09TdHJpbmcoKSwgZW5kRGF0ZV0pO1xuICAgICAgfVxuXG4gICAgICBsZXQgYXZlcmFnZVBhY2UgPSAwO1xuICAgICAgbGV0IHRvdGFsUmV2aWV3VGltZSA9IDA7XG4gICAgICBpZiAocGFjZVN0bXQuc3RlcCgpKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHBhY2VTdG10LmdldCgpO1xuICAgICAgICBhdmVyYWdlUGFjZSA9IChyb3dbMF0gYXMgbnVtYmVyKSB8fCAwO1xuICAgICAgICB0b3RhbFJldmlld1RpbWUgPSAocm93WzFdIGFzIG51bWJlcikgfHwgMDtcbiAgICAgIH1cbiAgICAgIHBhY2VTdG10LmZyZWUoKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGFpbHlTdGF0cyxcbiAgICAgICAgY2FyZFN0YXRzLFxuICAgICAgICBhbnN3ZXJCdXR0b25zLFxuICAgICAgICByZXRlbnRpb25SYXRlLFxuICAgICAgICBpbnRlcnZhbHMsXG4gICAgICAgIGZvcmVjYXN0LFxuICAgICAgICBhdmVyYWdlUGFjZSxcbiAgICAgICAgdG90YWxSZXZpZXdUaW1lLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGdldE92ZXJhbGxTdGF0aXN0aWNzOlwiLCBlcnJvcik7XG4gICAgICAvLyBSZXR1cm4gZW1wdHkgZGF0YSBzdHJ1Y3R1cmUgaW5zdGVhZCBvZiB0aHJvd2luZ1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGFpbHlTdGF0czogW10sXG4gICAgICAgIGNhcmRTdGF0czogeyBuZXc6IDAsIHJldmlldzogMCwgbWF0dXJlOiAwIH0sXG4gICAgICAgIGFuc3dlckJ1dHRvbnM6IHsgYWdhaW46IDAsIGhhcmQ6IDAsIGdvb2Q6IDAsIGVhc3k6IDAgfSxcbiAgICAgICAgcmV0ZW50aW9uUmF0ZTogMCxcbiAgICAgICAgaW50ZXJ2YWxzOiBbXSxcbiAgICAgICAgZm9yZWNhc3Q6IFtdLFxuICAgICAgICBhdmVyYWdlUGFjZTogMCxcbiAgICAgICAgdG90YWxSZXZpZXdUaW1lOiAwLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwdXJnZURhdGFiYXNlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuZGVidWdMb2coXCJQdXJnaW5nIGRhdGFiYXNlIC0gZGVsZXRpbmcgYWxsIGRhdGFcIik7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMuZGIpIHtcbiAgICAgICAgLy8gRHJvcCBhbGwgdGFibGVzIHRvIGNvbXBsZXRlbHkgcmVzZXQgdGhlIGRhdGFiYXNlXG4gICAgICAgIHRoaXMuZGIuZXhlYyhgXG4gICAgICAgICAgRFJPUCBUQUJMRSBJRiBFWElTVFMgcmV2aWV3X2xvZ3M7XG4gICAgICAgICAgRFJPUCBUQUJMRSBJRiBFWElTVFMgZmxhc2hjYXJkcztcbiAgICAgICAgICBEUk9QIFRBQkxFIElGIEVYSVNUUyBkZWNrcztcbiAgICAgICAgYCk7XG5cbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhcIkFsbCB0YWJsZXMgZHJvcHBlZCwgcmVjcmVhdGluZyBzY2hlbWFcIik7XG5cbiAgICAgICAgLy8gUmVjcmVhdGUgdGFibGVzIHdpdGggZnJlc2ggc2NoZW1hXG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRnJlc2hEYXRhYmFzZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmUoKTtcblxuICAgICAgICB0aGlzLmRlYnVnTG9nKFwiRGF0YWJhc2UgcHVyZ2VkIGFuZCByZWNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcHVyZ2luZyBkYXRhYmFzZTpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0Rmxhc2hjYXJkQnlJZChjYXJkSWQ6IHN0cmluZyk6IFByb21pc2U8Rmxhc2hjYXJkIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5T25lKFxuICAgICAgXCJTRUxFQ1QgKiBGUk9NIGZsYXNoY2FyZHMgV0hFUkUgaWQgPSA/XCIsXG4gICAgICBbY2FyZElkXSxcbiAgICAgIHRoaXMucm93VG9GbGFzaGNhcmQuYmluZCh0aGlzKSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgbXVsdGlwbGUgb3BlcmF0aW9ucyBpbiBhIGRhdGFiYXNlIHRyYW5zYWN0aW9uXG4gICAqIE5vdGU6IEZvciBzcWwuanMgY29tcGF0aWJpbGl0eSwgYXZvaWQgdXNpbmcgdGhpcyBmb3Igbm93XG4gICAqL1xuICBhc3luYyBydW5JblRyYW5zYWN0aW9uPFQ+KG9wZXJhdGlvbnM6ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLmRiLmV4ZWMoXCJCRUdJTiBUUkFOU0FDVElPTlwiKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZXJhdGlvbnMoKTtcbiAgICAgIHRoaXMuZGIuZXhlYyhcIkNPTU1JVFwiKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuZGIuZXhlYyhcIlJPTExCQUNLXCIpO1xuICAgICAgfSBjYXRjaCAocm9sbGJhY2tFcnJvcikge1xuICAgICAgICAvLyBJZ25vcmUgcm9sbGJhY2sgZXJyb3JzIC0gdHJhbnNhY3Rpb24gbWF5IGhhdmUgYWxyZWFkeSBiZWVuIHJvbGxlZCBiYWNrXG4gICAgICAgIGNvbnNvbGUud2FybihcIlRyYW5zYWN0aW9uIHJvbGxiYWNrIGZhaWxlZDpcIiwgcm9sbGJhY2tFcnJvcik7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIHJhdyBTUUwgcXVlcnkgYW5kIHJldHVybiByZXN1bHRzXG4gICAqL1xuICBhc3luYyBxdWVyeShzcWw6IHN0cmluZywgcGFyYW1zOiBhbnlbXSA9IFtdKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuXG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShzcWwpO1xuICAgIHN0bXQuYmluZChwYXJhbXMpO1xuXG4gICAgY29uc3QgcmVzdWx0czogYW55W10gPSBbXTtcbiAgICB3aGlsZSAoc3RtdC5zdGVwKCkpIHtcbiAgICAgIHJlc3VsdHMucHVzaChzdG10LmdldCgpKTtcbiAgICB9XG5cbiAgICBzdG10LmZyZWUoKTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIGFzeW5jIGNsb3NlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmRiKSB7XG4gICAgICB0aGlzLmRiLmNsb3NlKCk7XG4gICAgICB0aGlzLmRiID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvLyBCYWNrdXAgb3BlcmF0aW9uc1xuICBhc3luYyBnZXRBbGxSZXZpZXdMb2dzKCk6IFByb21pc2U8UmV2aWV3TG9nW10+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcblxuICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoYFxuICAgICAgU0VMRUNUIGlkLCBmbGFzaGNhcmRfaWQsIHNlc3Npb25faWQsIGxhc3RfcmV2aWV3ZWRfYXQsIHNob3duX2F0LCByZXZpZXdlZF9hdCxcbiAgICAgICAgICAgICByYXRpbmcsIHJhdGluZ19sYWJlbCwgdGltZV9lbGFwc2VkX21zLCBvbGRfc3RhdGUsIG9sZF9yZXBldGl0aW9ucyxcbiAgICAgICAgICAgICBvbGRfbGFwc2VzLCBvbGRfc3RhYmlsaXR5LCBvbGRfZGlmZmljdWx0eSwgbmV3X3N0YXRlLCBuZXdfcmVwZXRpdGlvbnMsXG4gICAgICAgICAgICAgbmV3X2xhcHNlcywgbmV3X3N0YWJpbGl0eSwgbmV3X2RpZmZpY3VsdHksIG9sZF9pbnRlcnZhbF9taW51dGVzLFxuICAgICAgICAgICAgIG5ld19pbnRlcnZhbF9taW51dGVzLCBvbGRfZHVlX2F0LCBuZXdfZHVlX2F0LCBlbGFwc2VkX2RheXMsXG4gICAgICAgICAgICAgcmV0cmlldmFiaWxpdHksIHJlcXVlc3RfcmV0ZW50aW9uLCBwcm9maWxlLCBtYXhpbXVtX2ludGVydmFsX2RheXMsXG4gICAgICAgICAgICAgbWluX21pbnV0ZXMsIGZzcnNfd2VpZ2h0c192ZXJzaW9uLCBzY2hlZHVsZXJfdmVyc2lvbiwgbm90ZV9tb2RlbF9pZCxcbiAgICAgICAgICAgICBjYXJkX3RlbXBsYXRlX2lkLCBjb250ZW50X2hhc2gsIGNsaWVudFxuICAgICAgRlJPTSByZXZpZXdfbG9nc1xuICAgICAgT1JERVIgQlkgcmV2aWV3ZWRfYXQgQVNDXG4gICAgYCk7XG5cbiAgICBjb25zdCByZXN1bHRzOiBSZXZpZXdMb2dbXSA9IFtdO1xuICAgIHdoaWxlIChzdG10LnN0ZXAoKSkge1xuICAgICAgY29uc3Qgcm93ID0gc3RtdC5nZXQoKTtcbiAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgIGlkOiByb3dbMF0gYXMgc3RyaW5nLFxuICAgICAgICBmbGFzaGNhcmRJZDogcm93WzFdIGFzIHN0cmluZyxcbiAgICAgICAgc2Vzc2lvbklkOiByb3dbMl0gYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgICBsYXN0UmV2aWV3ZWRBdDogcm93WzNdIGFzIHN0cmluZyxcbiAgICAgICAgc2hvd25BdDogcm93WzRdIGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICAgICAgcmV2aWV3ZWRBdDogcm93WzVdIGFzIHN0cmluZyxcbiAgICAgICAgcmF0aW5nOiByb3dbNl0gYXMgMSB8IDIgfCAzIHwgNCxcbiAgICAgICAgcmF0aW5nTGFiZWw6IHJvd1s3XSBhcyBcImFnYWluXCIgfCBcImhhcmRcIiB8IFwiZ29vZFwiIHwgXCJlYXN5XCIsXG4gICAgICAgIHRpbWVFbGFwc2VkTXM6IHJvd1s4XSBhcyBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgICAgIG9sZFN0YXRlOiByb3dbOV0gYXMgXCJuZXdcIiB8IFwicmV2aWV3XCIsXG4gICAgICAgIG9sZFJlcGV0aXRpb25zOiByb3dbMTBdIGFzIG51bWJlcixcbiAgICAgICAgb2xkTGFwc2VzOiByb3dbMTFdIGFzIG51bWJlcixcbiAgICAgICAgb2xkU3RhYmlsaXR5OiByb3dbMTJdIGFzIG51bWJlcixcbiAgICAgICAgb2xkRGlmZmljdWx0eTogcm93WzEzXSBhcyBudW1iZXIsXG4gICAgICAgIG5ld1N0YXRlOiByb3dbMTRdIGFzIFwibmV3XCIgfCBcInJldmlld1wiLFxuICAgICAgICBuZXdSZXBldGl0aW9uczogcm93WzE1XSBhcyBudW1iZXIsXG4gICAgICAgIG5ld0xhcHNlczogcm93WzE2XSBhcyBudW1iZXIsXG4gICAgICAgIG5ld1N0YWJpbGl0eTogcm93WzE3XSBhcyBudW1iZXIsXG4gICAgICAgIG5ld0RpZmZpY3VsdHk6IHJvd1sxOF0gYXMgbnVtYmVyLFxuICAgICAgICBvbGRJbnRlcnZhbE1pbnV0ZXM6IHJvd1sxOV0gYXMgbnVtYmVyLFxuICAgICAgICBuZXdJbnRlcnZhbE1pbnV0ZXM6IHJvd1syMF0gYXMgbnVtYmVyLFxuICAgICAgICBvbGREdWVBdDogcm93WzIxXSBhcyBzdHJpbmcsXG4gICAgICAgIG5ld0R1ZUF0OiByb3dbMjJdIGFzIHN0cmluZyxcbiAgICAgICAgZWxhcHNlZERheXM6IHJvd1syM10gYXMgbnVtYmVyLFxuICAgICAgICByZXRyaWV2YWJpbGl0eTogcm93WzI0XSBhcyBudW1iZXIsXG4gICAgICAgIHJlcXVlc3RSZXRlbnRpb246IHJvd1syNV0gYXMgbnVtYmVyLFxuICAgICAgICBwcm9maWxlOiByb3dbMjZdIGFzIFwiSU5URU5TSVZFXCIgfCBcIlNUQU5EQVJEXCIsXG4gICAgICAgIG1heGltdW1JbnRlcnZhbERheXM6IHJvd1syN10gYXMgbnVtYmVyLFxuICAgICAgICBtaW5NaW51dGVzOiByb3dbMjhdIGFzIG51bWJlcixcbiAgICAgICAgZnNyc1dlaWdodHNWZXJzaW9uOiByb3dbMjldIGFzIHN0cmluZyxcbiAgICAgICAgc2NoZWR1bGVyVmVyc2lvbjogcm93WzMwXSBhcyBzdHJpbmcsXG4gICAgICAgIG5vdGVNb2RlbElkOiByb3dbMzFdIGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICAgICAgY2FyZFRlbXBsYXRlSWQ6IHJvd1szMl0gYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgICBjb250ZW50SGFzaDogcm93WzMzXSBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgIGNsaWVudDogcm93WzM0XSBhcyBcIndlYlwiIHwgXCJkZXNrdG9wXCIgfCBcIm1vYmlsZVwiIHwgdW5kZWZpbmVkLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RtdC5mcmVlKCk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICBhc3luYyBnZXRBbGxSZXZpZXdTZXNzaW9ucygpOiBQcm9taXNlPFJldmlld1Nlc3Npb25bXT4ge1xuICAgIGlmICghdGhpcy5kYikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YWJhc2Ugbm90IGluaXRpYWxpemVkXCIpO1xuXG4gICAgY29uc3Qgc3RtdCA9IHRoaXMuZGIucHJlcGFyZShgXG4gICAgICBTRUxFQ1QgaWQsIGRlY2tfaWQsIHN0YXJ0ZWRfYXQsIGVuZGVkX2F0LCBnb2FsX3RvdGFsLCBkb25lX3VuaXF1ZVxuICAgICAgRlJPTSByZXZpZXdfc2Vzc2lvbnNcbiAgICAgIE9SREVSIEJZIHN0YXJ0ZWRfYXQgQVNDXG4gICAgYCk7XG5cbiAgICBjb25zdCByZXN1bHRzOiBSZXZpZXdTZXNzaW9uW10gPSBbXTtcbiAgICB3aGlsZSAoc3RtdC5zdGVwKCkpIHtcbiAgICAgIGNvbnN0IHJvdyA9IHN0bXQuZ2V0KCk7XG4gICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICBpZDogcm93WzBdIGFzIHN0cmluZyxcbiAgICAgICAgZGVja0lkOiByb3dbMV0gYXMgc3RyaW5nLFxuICAgICAgICBzdGFydGVkQXQ6IHJvd1syXSBhcyBzdHJpbmcsXG4gICAgICAgIGVuZGVkQXQ6IHJvd1szXSBhcyBzdHJpbmcgfCBudWxsLFxuICAgICAgICBnb2FsVG90YWw6IHJvd1s0XSBhcyBudW1iZXIsXG4gICAgICAgIGRvbmVVbmlxdWU6IHJvd1s1XSBhcyBudW1iZXIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBzdG10LmZyZWUoKTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIGFzeW5jIHJldmlld0xvZ0V4aXN0cyhpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCF0aGlzLmRiKSB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWRcIik7XG5cbiAgICBjb25zdCBzdG10ID0gdGhpcy5kYi5wcmVwYXJlKGBcbiAgICAgIFNFTEVDVCBDT1VOVCgqKSBGUk9NIHJldmlld19sb2dzIFdIRVJFIGlkID0gP1xuICAgIGApO1xuICAgIHN0bXQuYmluZChbaWRdKTtcblxuICAgIGxldCBleGlzdHMgPSBmYWxzZTtcbiAgICBpZiAoc3RtdC5zdGVwKCkpIHtcbiAgICAgIGNvbnN0IHJvdyA9IHN0bXQuZ2V0KCk7XG4gICAgICBleGlzdHMgPSAocm93WzBdIGFzIG51bWJlcikgPiAwO1xuICAgIH1cblxuICAgIHN0bXQuZnJlZSgpO1xuICAgIHJldHVybiBleGlzdHM7XG4gIH1cblxuICBhc3luYyByZXZpZXdTZXNzaW9uRXhpc3RzKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcblxuICAgIGNvbnN0IHN0bXQgPSB0aGlzLmRiLnByZXBhcmUoYFxuICAgICAgU0VMRUNUIENPVU5UKCopIEZST00gcmV2aWV3X3Nlc3Npb25zIFdIRVJFIGlkID0gP1xuICAgIGApO1xuICAgIHN0bXQuYmluZChbaWRdKTtcblxuICAgIGxldCBleGlzdHMgPSBmYWxzZTtcbiAgICBpZiAoc3RtdC5zdGVwKCkpIHtcbiAgICAgIGNvbnN0IHJvdyA9IHN0bXQuZ2V0KCk7XG4gICAgICBleGlzdHMgPSAocm93WzBdIGFzIG51bWJlcikgPiAwO1xuICAgIH1cblxuICAgIHN0bXQuZnJlZSgpO1xuICAgIHJldHVybiBleGlzdHM7XG4gIH1cblxuICBhc3luYyBpbnNlcnRSZXZpZXdMb2cobG9nOiBSZXZpZXdMb2cpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcblxuICAgIHRoaXMuZXhlY3V0ZVN0YXRlbWVudChcbiAgICAgIGBcbiAgICAgIElOU0VSVCBJTlRPIHJldmlld19sb2dzIChcbiAgICAgICAgaWQsIGZsYXNoY2FyZF9pZCwgc2Vzc2lvbl9pZCwgbGFzdF9yZXZpZXdlZF9hdCwgc2hvd25fYXQsIHJldmlld2VkX2F0LFxuICAgICAgICByYXRpbmcsIHJhdGluZ19sYWJlbCwgdGltZV9lbGFwc2VkX21zLCBvbGRfc3RhdGUsIG9sZF9yZXBldGl0aW9ucyxcbiAgICAgICAgb2xkX2xhcHNlcywgb2xkX3N0YWJpbGl0eSwgb2xkX2RpZmZpY3VsdHksIG5ld19zdGF0ZSwgbmV3X3JlcGV0aXRpb25zLFxuICAgICAgICBuZXdfbGFwc2VzLCBuZXdfc3RhYmlsaXR5LCBuZXdfZGlmZmljdWx0eSwgb2xkX2ludGVydmFsX21pbnV0ZXMsXG4gICAgICAgIG5ld19pbnRlcnZhbF9taW51dGVzLCBvbGRfZHVlX2F0LCBuZXdfZHVlX2F0LCBlbGFwc2VkX2RheXMsXG4gICAgICAgIHJldHJpZXZhYmlsaXR5LCByZXF1ZXN0X3JldGVudGlvbiwgcHJvZmlsZSwgbWF4aW11bV9pbnRlcnZhbF9kYXlzLFxuICAgICAgICBtaW5fbWludXRlcywgZnNyc193ZWlnaHRzX3ZlcnNpb24sIHNjaGVkdWxlcl92ZXJzaW9uLCBub3RlX21vZGVsX2lkLFxuICAgICAgICBjYXJkX3RlbXBsYXRlX2lkLCBjb250ZW50X2hhc2gsIGNsaWVudFxuICAgICAgKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pXG4gICAgYCxcbiAgICAgIFtcbiAgICAgICAgbG9nLmlkLFxuICAgICAgICBsb2cuZmxhc2hjYXJkSWQsXG4gICAgICAgIGxvZy5zZXNzaW9uSWQsXG4gICAgICAgIGxvZy5sYXN0UmV2aWV3ZWRBdCxcbiAgICAgICAgbG9nLnNob3duQXQsXG4gICAgICAgIGxvZy5yZXZpZXdlZEF0LFxuICAgICAgICBsb2cucmF0aW5nLFxuICAgICAgICBsb2cucmF0aW5nTGFiZWwsXG4gICAgICAgIGxvZy50aW1lRWxhcHNlZE1zLFxuICAgICAgICBsb2cub2xkU3RhdGUsXG4gICAgICAgIGxvZy5vbGRSZXBldGl0aW9ucyxcbiAgICAgICAgbG9nLm9sZExhcHNlcyxcbiAgICAgICAgbG9nLm9sZFN0YWJpbGl0eSxcbiAgICAgICAgbG9nLm9sZERpZmZpY3VsdHksXG4gICAgICAgIGxvZy5uZXdTdGF0ZSxcbiAgICAgICAgbG9nLm5ld1JlcGV0aXRpb25zLFxuICAgICAgICBsb2cubmV3TGFwc2VzLFxuICAgICAgICBsb2cubmV3U3RhYmlsaXR5LFxuICAgICAgICBsb2cubmV3RGlmZmljdWx0eSxcbiAgICAgICAgbG9nLm9sZEludGVydmFsTWludXRlcyxcbiAgICAgICAgbG9nLm5ld0ludGVydmFsTWludXRlcyxcbiAgICAgICAgbG9nLm9sZER1ZUF0LFxuICAgICAgICBsb2cubmV3RHVlQXQsXG4gICAgICAgIGxvZy5lbGFwc2VkRGF5cyxcbiAgICAgICAgbG9nLnJldHJpZXZhYmlsaXR5LFxuICAgICAgICBsb2cucmVxdWVzdFJldGVudGlvbixcbiAgICAgICAgbG9nLnByb2ZpbGUsXG4gICAgICAgIGxvZy5tYXhpbXVtSW50ZXJ2YWxEYXlzLFxuICAgICAgICBsb2cubWluTWludXRlcyxcbiAgICAgICAgbG9nLmZzcnNXZWlnaHRzVmVyc2lvbixcbiAgICAgICAgbG9nLnNjaGVkdWxlclZlcnNpb24sXG4gICAgICAgIGxvZy5ub3RlTW9kZWxJZCxcbiAgICAgICAgbG9nLmNhcmRUZW1wbGF0ZUlkLFxuICAgICAgICBsb2cuY29udGVudEhhc2gsXG4gICAgICAgIGxvZy5jbGllbnQsXG4gICAgICBdLFxuICAgICk7XG4gIH1cblxuICBhc3luYyBpbnNlcnRSZXZpZXdTZXNzaW9uKHNlc3Npb246IFJldmlld1Nlc3Npb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuZGIpIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBpbml0aWFsaXplZFwiKTtcblxuICAgIHRoaXMuZXhlY3V0ZVN0YXRlbWVudChcbiAgICAgIGBcbiAgICAgIElOU0VSVCBJTlRPIHJldmlld19zZXNzaW9ucyAoXG4gICAgICAgIGlkLCBkZWNrX2lkLCBzdGFydGVkX2F0LCBlbmRlZF9hdCwgZ29hbF90b3RhbCwgZG9uZV91bmlxdWVcbiAgICAgICkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/KVxuICAgIGAsXG4gICAgICBbXG4gICAgICAgIHNlc3Npb24uaWQsXG4gICAgICAgIHNlc3Npb24uZGVja0lkLFxuICAgICAgICBzZXNzaW9uLnN0YXJ0ZWRBdCxcbiAgICAgICAgc2Vzc2lvbi5lbmRlZEF0LFxuICAgICAgICBzZXNzaW9uLmdvYWxUb3RhbCxcbiAgICAgICAgc2Vzc2lvbi5kb25lVW5pcXVlLFxuICAgICAgXSxcbiAgICApO1xuICB9XG59XG4iLCAiLyoqXG4gKiBGU1JTIEFsZ29yaXRobSBXZWlnaHRzIENvbmZpZ3VyYXRpb25cbiAqXG4gKiBDZW50cmFsaXplZCBjb25maWd1cmF0aW9uIGZvciBGU1JTLTQuNSBhbGdvcml0aG0gd2VpZ2h0cyBvcHRpbWl6ZWQgZm9yIHN1Yi1kYXkgaW50ZXJ2YWxzLlxuICogVGhlc2Ugd2VpZ2h0cyBjb250cm9sIHRoZSBpbml0aWFsIHN0YWJpbGl0eSB2YWx1ZXMgZm9yIG5ldyBjYXJkIHJhdGluZ3MgYW5kIHZhcmlvdXNcbiAqIGFsZ29yaXRobSBwYXJhbWV0ZXJzIGZvciBkaWZmaWN1bHR5IHByb2dyZXNzaW9uIGFuZCBzdGFiaWxpdHkgdXBkYXRlcy5cbiAqL1xuXG4vKipcbiAqIEZTUlMtNC41IHN0YW5kYXJkIHdlaWdodHMgKGRheS1iYXNlZCBpbnRlcnZhbHMpXG4gKi9cbmV4cG9ydCBjb25zdCBGU1JTX1dFSUdIVFNfU1RBTkRBUkQ6IG51bWJlcltdID0gW1xuICAwLjQwNzIsIDEuMTgyOSwgMy4xMjYyLCAxNS40NzIyLCA3LjIxMDIsIDAuNTMxNiwgMS4wNjUxLCAwLjAyMzQsIDEuNjE2LFxuICAwLjE1NDQsIDEuMDgyNCwgMS45ODEzLCAwLjA5NTMsIDAuMjk3NSwgMi4yMDQyLCAwLjI0MDcsIDIuOTQ2Nixcbl07XG5cbi8qKlxuICogRlNSUyB3ZWlnaHRzIG9wdGltaXplZCBmb3IgaW50ZW5zaXZlIHN1Yi1kYXkgaW50ZXJ2YWxzXG4gKiB3WzAtM10gc2V0IHRvIG1hdGNoIGludGVuc2l2ZSB0YXJnZXRzIGluIGRheXM6IDFtLzVtLzEwbS8xZGF5XG4gKi9cbmV4cG9ydCBjb25zdCBGU1JTX1dFSUdIVFNfU1VCREFZOiBudW1iZXJbXSA9IGNyZWF0ZVN1YkRheVdlaWdodHMoKTtcblxuLyoqXG4gKiBEZWZhdWx0IEZTUlMgd2VpZ2h0c1xuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9GU1JTX1dFSUdIVFM6IG51bWJlcltdID0gRlNSU19XRUlHSFRTX1NUQU5EQVJEO1xuXG4vKipcbiAqIEZTUlMgcHJvZmlsZSBjb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCB0eXBlIEZTUlNQcm9maWxlID0gXCJJTlRFTlNJVkVcIiB8IFwiU1RBTkRBUkRcIjtcblxuLyoqXG4gKiBQcm9maWxlLXNwZWNpZmljIHBhcmFtZXRlcnMgKGhhcmRjb2RlZCwgbm90IHVzZXItZWRpdGFibGUpXG4gKi9cbmV4cG9ydCBjb25zdCBQUk9GSUxFX0NPTkZJRyA9IHtcbiAgSU5URU5TSVZFOiB7XG4gICAgd2VpZ2h0czogRlNSU19XRUlHSFRTX1NVQkRBWSxcbiAgICBtaW5NaW51dGVzOiAxLFxuICAgIG1heGltdW1JbnRlcnZhbERheXM6IDM2NTAwLFxuICB9LFxuICBTVEFOREFSRDoge1xuICAgIHdlaWdodHM6IEZTUlNfV0VJR0hUU19TVEFOREFSRCxcbiAgICBtaW5NaW51dGVzOiAxNDQwLCAvLyAxIGRheSBtaW5pbXVtXG4gICAgbWF4aW11bUludGVydmFsRGF5czogMzY1MDAsXG4gIH0sXG59IGFzIGNvbnN0O1xuXG4vKipcbiAqIERlZmF1bHQgRlNSUyBhbGdvcml0aG0gcGFyYW1ldGVycyAoYmFja3dhcmQgY29tcGF0aWJpbGl0eSlcbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfRlNSU19QQVJBTUVURVJTID0ge1xuICB3OiBERUZBVUxUX0ZTUlNfV0VJR0hUUyxcbiAgcmVxdWVzdFJldGVudGlvbjogMC45LFxuICBtYXhpbXVtSW50ZXJ2YWw6IDM2NTAwLFxuICBtaW5NaW51dGVzOiAxNDQwLFxufSBhcyBjb25zdDtcblxuLyoqXG4gKiBHZXQgd2VpZ2h0cyBmb3IgYSBzcGVjaWZpYyBwcm9maWxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXZWlnaHRzRm9yUHJvZmlsZShwcm9maWxlOiBGU1JTUHJvZmlsZSk6IG51bWJlcltdIHtcbiAgcmV0dXJuIFBST0ZJTEVfQ09ORklHW3Byb2ZpbGVdLndlaWdodHM7XG59XG5cbi8qKlxuICogR2V0IG1pbmltdW0gbWludXRlcyBmb3IgYSBzcGVjaWZpYyBwcm9maWxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaW5NaW51dGVzRm9yUHJvZmlsZShwcm9maWxlOiBGU1JTUHJvZmlsZSk6IG51bWJlciB7XG4gIHJldHVybiBQUk9GSUxFX0NPTkZJR1twcm9maWxlXS5taW5NaW51dGVzO1xufVxuXG4vKipcbiAqIEdldCBtYXhpbXVtIGludGVydmFsIGRheXMgZm9yIGEgc3BlY2lmaWMgcHJvZmlsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4SW50ZXJ2YWxEYXlzRm9yUHJvZmlsZShwcm9maWxlOiBGU1JTUHJvZmlsZSk6IG51bWJlciB7XG4gIHJldHVybiBQUk9GSUxFX0NPTkZJR1twcm9maWxlXS5tYXhpbXVtSW50ZXJ2YWxEYXlzO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyBGU1JTIHdlaWdodHMgYXJyYXlcbiAqIEBwYXJhbSB3ZWlnaHRzIC0gQXJyYXkgb2YgMTcgRlNSUyB3ZWlnaHRzIHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyB0cnVlIGlmIHZhbGlkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRlNSU1dlaWdodHMod2VpZ2h0czogbnVtYmVyW10pOiBib29sZWFuIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHdlaWdodHMpIHx8IHdlaWdodHMubGVuZ3RoICE9PSAxNykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB3ZWlnaHRzLmV2ZXJ5KCh3KSA9PiBpc0Zpbml0ZSh3KSk7XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIGZvciBVSS1vbmx5IGZvcm1hdHRpbmcgLSBuZXZlciB1c2UgaW4gY2FsY3VsYXRpb25zXG4gKiBQcmVzZXJ2ZXMgZnVsbCBwcmVjaXNpb24gaW4gYWxsIGludGVybmFsIGNhbGN1bGF0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcm91bmRGb3JEaXNwbGF5KHZhbHVlOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gdmFsdWUudG9GaXhlZChkZWNpbWFscyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBzdWItZGF5IG9wdGltaXplZCB3ZWlnaHRzIHdpdGggY3VzdG9tIGluaXRpYWwgaW50ZXJ2YWxzXG4gKiBAcGFyYW0gYWdhaW5NaW51dGVzIC0gVGFyZ2V0IGludGVydmFsIGZvciBBZ2FpbiByYXRpbmcgKGRlZmF1bHQ6IDEgbWludXRlKVxuICogQHBhcmFtIGhhcmRNaW51dGVzIC0gVGFyZ2V0IGludGVydmFsIGZvciBIYXJkIHJhdGluZyAoZGVmYXVsdDogNiBtaW51dGVzKVxuICogQHBhcmFtIGdvb2RNaW51dGVzIC0gVGFyZ2V0IGludGVydmFsIGZvciBHb29kIHJhdGluZyAoZGVmYXVsdDogMTAgbWludXRlcylcbiAqIEBwYXJhbSBlYXN5TWludXRlcyAtIFRhcmdldCBpbnRlcnZhbCBmb3IgRWFzeSByYXRpbmcgKGRlZmF1bHQ6IDE0NDAgbWludXRlcylcbiAqIEByZXR1cm5zIEZTUlMgd2VpZ2h0cyBhcnJheSBvcHRpbWl6ZWQgZm9yIHNwZWNpZmllZCBpbnRlcnZhbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN1YkRheVdlaWdodHMoXG4gIGFnYWluTWludXRlczogbnVtYmVyID0gMSxcbiAgaGFyZE1pbnV0ZXM6IG51bWJlciA9IDYsXG4gIGdvb2RNaW51dGVzOiBudW1iZXIgPSAxMCxcbiAgZWFzeU1pbnV0ZXM6IG51bWJlciA9IDE0NDAsXG4pOiBudW1iZXJbXSB7XG4gIHJldHVybiBbXG4gICAgYWdhaW5NaW51dGVzIC8gMTQ0MCwgLy8gd1swXSAtIEFnYWluIHN0YWJpbGl0eVxuICAgIGhhcmRNaW51dGVzIC8gMTQ0MCwgLy8gd1sxXSAtIEhhcmQgc3RhYmlsaXR5XG4gICAgZ29vZE1pbnV0ZXMgLyAxNDQwLCAvLyB3WzJdIC0gR29vZCBzdGFiaWxpdHlcbiAgICBlYXN5TWludXRlcyAvIDE0NDAsIC8vIHdbM10gLSBFYXN5IHN0YWJpbGl0eVxuICAgIC4uLkZTUlNfV0VJR0hUU19TVEFOREFSRC5zbGljZSg0KSwgLy8gS2VlcCByZW1haW5pbmcgd2VpZ2h0c1xuICBdO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIEZTUlMgcHJvZmlsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQcm9maWxlKHByb2ZpbGU6IHN0cmluZyk6IHByb2ZpbGUgaXMgRlNSU1Byb2ZpbGUge1xuICByZXR1cm4gcHJvZmlsZSA9PT0gXCJJTlRFTlNJVkVcIiB8fCBwcm9maWxlID09PSBcIlNUQU5EQVJEXCI7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgcmVxdWVzdCByZXRlbnRpb24gcmFuZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUmVxdWVzdFJldGVudGlvbihyZXRlbnRpb246IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gcmV0ZW50aW9uID4gMC41ICYmIHJldGVudGlvbiA8IDAuOTk1O1xufVxuXG4vKipcbiAqIFByZS1jb25maWd1cmVkIHdlaWdodCBzZXRzIGZvciBkaWZmZXJlbnQgdXNlIGNhc2VzIChkZXByZWNhdGVkKVxuICovXG5leHBvcnQgY29uc3QgV0VJR0hUX1BSRVNFVFMgPSB7XG4gIElOVEVOU0lWRTogRlNSU19XRUlHSFRTX1NVQkRBWSxcbiAgU1RBTkRBUkQ6IEZTUlNfV0VJR0hUU19TVEFOREFSRCxcbn0gYXMgY29uc3Q7XG4iLCAiaW1wb3J0IHsgREVGQVVMVF9GU1JTX1BBUkFNRVRFUlMgfSBmcm9tIFwiLi4vYWxnb3JpdGhtL2ZzcnMtd2VpZ2h0c1wiO1xuXG5leHBvcnQgdHlwZSBSZXZpZXdPcmRlciA9IFwiZHVlLWRhdGVcIiB8IFwicmFuZG9tXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVja0NvbmZpZyB7XG4gIC8vIERhaWx5IGxpbWl0c1xuICBoYXNOZXdDYXJkc0xpbWl0RW5hYmxlZDogYm9vbGVhbjsgLy8gZmFsc2UgPSB1bmxpbWl0ZWQgbmV3IGNhcmRzXG4gIG5ld0NhcmRzUGVyRGF5OiBudW1iZXI7IC8vIGRhaWx5IGxpbWl0IHdoZW4gaGFzTmV3Q2FyZHNMaW1pdEVuYWJsZWQgaXMgdHJ1ZVxuICBoYXNSZXZpZXdDYXJkc0xpbWl0RW5hYmxlZDogYm9vbGVhbjsgLy8gZmFsc2UgPSB1bmxpbWl0ZWQgcmV2aWV3IGNhcmRzXG4gIHJldmlld0NhcmRzUGVyRGF5OiBudW1iZXI7IC8vIGRhaWx5IGxpbWl0IHdoZW4gaGFzUmV2aWV3Q2FyZHNMaW1pdEVuYWJsZWQgaXMgdHJ1ZVxuXG4gIC8vIENvbnRlbnQgcGFyc2luZ1xuICBoZWFkZXJMZXZlbDogbnVtYmVyOyAvLyAxLTYsIHdoaWNoIGhlYWRlciBsZXZlbCB0byBwYXJzZSBmb3IgaGVhZGVyLXBhcmFncmFwaCBmbGFzaGNhcmRzXG5cbiAgLy8gUmV2aWV3IGJlaGF2aW9yXG4gIHJldmlld09yZGVyOiBSZXZpZXdPcmRlcjsgLy8gT3JkZXIgZm9yIHJldmlldyBjYXJkczogb2xkZXN0IGR1ZSBmaXJzdCBvciByYW5kb21cblxuICAvLyBGU1JTIGFsZ29yaXRobSBzZXR0aW5nc1xuICBmc3JzOiB7XG4gICAgcmVxdWVzdFJldGVudGlvbjogbnVtYmVyO1xuICAgIHByb2ZpbGU6IFwiSU5URU5TSVZFXCIgfCBcIlNUQU5EQVJEXCI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVjayB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZmlsZXBhdGg6IHN0cmluZztcbiAgdGFnOiBzdHJpbmc7XG4gIGxhc3RSZXZpZXdlZDogc3RyaW5nIHwgbnVsbDtcbiAgY29uZmlnOiBEZWNrQ29uZmlnO1xuICBjcmVhdGVkOiBzdHJpbmc7XG4gIG1vZGlmaWVkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIEZsYXNoY2FyZFN0YXRlID0gXCJuZXdcIiB8IFwicmV2aWV3XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxhc2hjYXJkIHtcbiAgaWQ6IHN0cmluZztcbiAgZGVja0lkOiBzdHJpbmc7XG4gIGZyb250OiBzdHJpbmc7XG4gIGJhY2s6IHN0cmluZztcbiAgdHlwZTogXCJoZWFkZXItcGFyYWdyYXBoXCIgfCBcInRhYmxlXCI7XG4gIHNvdXJjZUZpbGU6IHN0cmluZztcbiAgY29udGVudEhhc2g6IHN0cmluZzsgLy8gSGFzaCBvZiBiYWNrIGNvbnRlbnQgb25seSAoZnJvbnQgaXMgdXNlZCBmb3IgSUQpXG5cbiAgc3RhdGU6IEZsYXNoY2FyZFN0YXRlO1xuICBkdWVEYXRlOiBzdHJpbmc7XG4gIGludGVydmFsOiBudW1iZXI7IC8vIGluIG1pbnV0ZXNcbiAgcmVwZXRpdGlvbnM6IG51bWJlcjtcbiAgZGlmZmljdWx0eTogbnVtYmVyOyAvLyBGU1JTIGRpZmZpY3VsdHkgdmFsdWUgKDEtMTApXG4gIHN0YWJpbGl0eTogbnVtYmVyOyAvLyBGU1JTIHN0YWJpbGl0eSB2YWx1ZVxuICBsYXBzZXM6IG51bWJlcjsgLy8gTnVtYmVyIG9mIHRpbWVzIGNhcmQgd2FzIGZvcmdvdHRlblxuICBsYXN0UmV2aWV3ZWQ6IHN0cmluZyB8IG51bGw7IC8vIExhc3QgcmV2aWV3IGRhdGVcbiAgY3JlYXRlZDogc3RyaW5nO1xuICBtb2RpZmllZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld1Nlc3Npb24ge1xuICBpZDogc3RyaW5nO1xuICBkZWNrSWQ6IHN0cmluZztcbiAgc3RhcnRlZEF0OiBzdHJpbmc7IC8vIElTTyBkYXRldGltZVxuICBlbmRlZEF0OiBzdHJpbmcgfCBudWxsOyAvLyBJU08gZGF0ZXRpbWUgd2hlbiB1c2VyIGNsb3NlcyBzZXNzaW9uLCBjYW4gYmUgbnVsbFxuICBnb2FsVG90YWw6IG51bWJlcjsgLy8gQ09VTlQoZHVlQXQgPD0gbm93KSBhdCBzZXNzaW9uIHN0YXJ0OyBpZiBsaW1pdHMgZGVmaW5lZCB0YWtlIFRvcCBMaW1pdEFtb3VudFxuICBkb25lVW5pcXVlOiBudW1iZXI7IC8vIHVuaXF1ZSBudW1iZXIgb2YgY2FyZHMgc2VlblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld0xvZyB7XG4gIGlkOiBzdHJpbmc7XG4gIGZsYXNoY2FyZElkOiBzdHJpbmc7XG4gIHNlc3Npb25JZD86IHN0cmluZzsgLy8gUmVmZXJlbmNlIHRvIHJldmlldyBzZXNzaW9uIChubyBjYXNjYWRlIGRlbGV0ZSlcblxuICAvLyBUaW1lc3RhbXBzXG4gIGxhc3RSZXZpZXdlZEF0OiBzdHJpbmc7IC8vIGJlZm9yZSB0aGlzIHJldmlld1xuICBzaG93bkF0Pzogc3RyaW5nOyAvLyB3aGVuIGNhcmQgd2FzIHNob3duIChvcHRpb25hbClcbiAgcmV2aWV3ZWRBdDogc3RyaW5nOyAvLyB3aGVuIHJhdGluZyB3YXMgcmVjb3JkZWRcblxuICAvLyBSYXRpbmdcbiAgcmF0aW5nOiAxIHwgMiB8IDMgfCA0OyAvLyBBZ2Fpbj0xLCBIYXJkPTIsIEdvb2Q9MywgRWFzeT00XG4gIHJhdGluZ0xhYmVsOiBcImFnYWluXCIgfCBcImhhcmRcIiB8IFwiZ29vZFwiIHwgXCJlYXN5XCI7XG4gIHRpbWVFbGFwc2VkTXM/OiBudW1iZXI7IC8vIGlmIG5vdCBkZXJpdmluZyBmcm9tIHNob3duQXRcblxuICAvLyBQcmUtc3RhdGUgKGZvciBleGFjdCByZWNvbnN0cnVjdGlvbilcbiAgb2xkU3RhdGU6IFwibmV3XCIgfCBcInJldmlld1wiO1xuICBvbGRSZXBldGl0aW9uczogbnVtYmVyO1xuICBvbGRMYXBzZXM6IG51bWJlcjtcbiAgb2xkU3RhYmlsaXR5OiBudW1iZXI7XG4gIG9sZERpZmZpY3VsdHk6IG51bWJlcjtcblxuICAvLyBQb3N0LXN0YXRlXG4gIG5ld1N0YXRlOiBcIm5ld1wiIHwgXCJyZXZpZXdcIjsgLy8gd2lsbCBiZSBcInJldmlld1wiIGluIHB1cmUgRlNSU1xuICBuZXdSZXBldGl0aW9uczogbnVtYmVyO1xuICBuZXdMYXBzZXM6IG51bWJlcjtcbiAgbmV3U3RhYmlsaXR5OiBudW1iZXI7XG4gIG5ld0RpZmZpY3VsdHk6IG51bWJlcjtcblxuICAvLyBJbnRlcnZhbHMgJiBkdWUgdGltZXMgKGV4cGxpY2l0IHVuaXRzKVxuICBvbGRJbnRlcnZhbE1pbnV0ZXM6IG51bWJlcjtcbiAgbmV3SW50ZXJ2YWxNaW51dGVzOiBudW1iZXI7XG4gIG9sZER1ZUF0OiBzdHJpbmc7XG4gIG5ld0R1ZUF0OiBzdHJpbmc7XG5cbiAgLy8gRGVyaXZlZCBhdCByZXZpZXcgdGltZVxuICBlbGFwc2VkRGF5czogbnVtYmVyOyAvLyAocmV2aWV3ZWRBdCAtIGxhc3RSZXZpZXdlZEF0KSAvIDg2NDAwMDAwXG4gIHJldHJpZXZhYmlsaXR5OiBudW1iZXI7IC8vIFJcblxuICAvLyBDb25maWcgc25hcHNob3RcbiAgcmVxdWVzdFJldGVudGlvbjogbnVtYmVyO1xuICBwcm9maWxlOiBcIklOVEVOU0lWRVwiIHwgXCJTVEFOREFSRFwiO1xuICBtYXhpbXVtSW50ZXJ2YWxEYXlzOiBudW1iZXI7XG4gIG1pbk1pbnV0ZXM6IG51bWJlcjtcbiAgZnNyc1dlaWdodHNWZXJzaW9uOiBzdHJpbmc7IC8vIG9yIHdlaWdodHNIYXNoXG4gIHNjaGVkdWxlclZlcnNpb246IHN0cmluZztcblxuICAvLyBPcHRpb25hbCBjb250ZW50L2NvbnRleHRcbiAgbm90ZU1vZGVsSWQ/OiBzdHJpbmc7XG4gIGNhcmRUZW1wbGF0ZUlkPzogc3RyaW5nO1xuICBjb250ZW50SGFzaD86IHN0cmluZztcbiAgY2xpZW50PzogXCJ3ZWJcIiB8IFwiZGVza3RvcFwiIHwgXCJtb2JpbGVcIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZWNrU3RhdHMge1xuICBkZWNrSWQ6IHN0cmluZztcbiAgbmV3Q291bnQ6IG51bWJlcjtcbiAgZHVlQ291bnQ6IG51bWJlcjtcbiAgdG90YWxDb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFua2lFeHBvcnRDb25maWcge1xuICBhbmtpRGVja05hbWU6IHN0cmluZztcbiAgc2VwYXJhdG9yOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGF0YWJhc2VTY2hlbWEge1xuICBkZWNrczogRGVjaztcbiAgZmxhc2hjYXJkczogRmxhc2hjYXJkO1xuICByZXZpZXdfbG9nczogUmV2aWV3TG9nO1xuICByZXZpZXdfc2Vzc2lvbnM6IFJldmlld1Nlc3Npb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGFpbHlTdGF0cyB7XG4gIGRhdGU6IHN0cmluZztcbiAgcmV2aWV3czogbnVtYmVyO1xuICB0aW1lU3BlbnQ6IG51bWJlcjtcbiAgbmV3Q2FyZHM6IG51bWJlcjtcbiAgbGVhcm5pbmdDYXJkczogbnVtYmVyO1xuICByZXZpZXdDYXJkczogbnVtYmVyO1xuICBjb3JyZWN0UmF0ZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRTdGF0cyB7XG4gIG5ldzogbnVtYmVyO1xuICByZXZpZXc6IG51bWJlcjtcbiAgbWF0dXJlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5zd2VyQnV0dG9ucyB7XG4gIGFnYWluOiBudW1iZXI7XG4gIGhhcmQ6IG51bWJlcjtcbiAgZ29vZDogbnVtYmVyO1xuICBlYXN5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW50ZXJ2YWxEYXRhIHtcbiAgaW50ZXJ2YWw6IHN0cmluZztcbiAgY291bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGb3JlY2FzdERhdGEge1xuICBkYXRlOiBzdHJpbmc7XG4gIGR1ZUNvdW50OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGlzdGljcyB7XG4gIGRhaWx5U3RhdHM6IERhaWx5U3RhdHNbXTtcbiAgY2FyZFN0YXRzOiBDYXJkU3RhdHM7XG4gIGFuc3dlckJ1dHRvbnM6IEFuc3dlckJ1dHRvbnM7XG4gIHJldGVudGlvblJhdGU6IG51bWJlcjtcbiAgaW50ZXJ2YWxzOiBJbnRlcnZhbERhdGFbXTtcbiAgZm9yZWNhc3Q6IEZvcmVjYXN0RGF0YVtdO1xuICBhdmVyYWdlUGFjZTogbnVtYmVyOyAvLyBBdmVyYWdlIHNlY29uZHMgcGVyIGNhcmRcbiAgdG90YWxSZXZpZXdUaW1lOiBudW1iZXI7IC8vIFRvdGFsIHRpbWUgc3BlbnQgcmV2aWV3aW5nIGluIHNlY29uZHNcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfREVDS19DT05GSUc6IERlY2tDb25maWcgPSB7XG4gIGhhc05ld0NhcmRzTGltaXRFbmFibGVkOiBmYWxzZSwgLy8gdW5saW1pdGVkIGJ5IGRlZmF1bHRcbiAgbmV3Q2FyZHNQZXJEYXk6IDIwLCAvLyBkZWZhdWx0IGxpbWl0IHdoZW4gZW5hYmxlZFxuICBoYXNSZXZpZXdDYXJkc0xpbWl0RW5hYmxlZDogZmFsc2UsIC8vIHVubGltaXRlZCBieSBkZWZhdWx0XG4gIHJldmlld0NhcmRzUGVyRGF5OiAxMDAsIC8vIGRlZmF1bHQgbGltaXQgd2hlbiBlbmFibGVkXG4gIGhlYWRlckxldmVsOiAyLCAvLyBEZWZhdWx0IHRvIEgyIGhlYWRlcnNcbiAgcmV2aWV3T3JkZXI6IFwiZHVlLWRhdGVcIixcbiAgZnNyczoge1xuICAgIHJlcXVlc3RSZXRlbnRpb246IERFRkFVTFRfRlNSU19QQVJBTUVURVJTLnJlcXVlc3RSZXRlbnRpb24sXG4gICAgcHJvZmlsZTogXCJTVEFOREFSRFwiLFxuICB9LFxufTtcblxuLy8gVXRpbGl0eSBmdW5jdGlvbnMgZm9yIGRhaWx5IGxpbWl0c1xuZXhwb3J0IGZ1bmN0aW9uIGhhc05ld0NhcmRzTGltaXQoY29uZmlnOiBEZWNrQ29uZmlnKTogYm9vbGVhbiB7XG4gIHJldHVybiBjb25maWcuaGFzTmV3Q2FyZHNMaW1pdEVuYWJsZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNSZXZpZXdDYXJkc0xpbWl0KGNvbmZpZzogRGVja0NvbmZpZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gY29uZmlnLmhhc1Jldmlld0NhcmRzTGltaXRFbmFibGVkO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIGZsYXNoY2FyZCBpcyBtYXR1cmUgKGludGVydmFsID4gMjEgZGF5cylcbiAqIFRPRE8gMTk6IE1hdHVyZSBjYXJkcyBhcmUgZmxhc2hjYXJkcyB0aGF0IGhhdmUgYW4gaW50ZXJ2YWwgb3ZlciAyMSBkYXlzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NhcmRNYXR1cmUoZmxhc2hjYXJkOiBGbGFzaGNhcmQpOiBib29sZWFuIHtcbiAgY29uc3QgTUFUVVJFX1RIUkVTSE9MRF9NSU5VVEVTID0gMjEgKiAyNCAqIDYwOyAvLyAyMSBkYXlzIGluIG1pbnV0ZXMgPSAzMCwyNDBcbiAgcmV0dXJuIChcbiAgICBmbGFzaGNhcmQuc3RhdGUgPT09IFwicmV2aWV3XCIgJiZcbiAgICBmbGFzaGNhcmQuaW50ZXJ2YWwgPiBNQVRVUkVfVEhSRVNIT0xEX01JTlVURVNcbiAgKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGNhcmQgbWF0dXJpdHkgdHlwZSBmb3IgY2xhc3NpZmljYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENhcmRNYXR1cml0eVR5cGUoXG4gIGZsYXNoY2FyZDogRmxhc2hjYXJkLFxuKTogXCJuZXdcIiB8IFwicmV2aWV3XCIgfCBcIm1hdHVyZVwiIHtcbiAgaWYgKGZsYXNoY2FyZC5zdGF0ZSA9PT0gXCJuZXdcIikge1xuICAgIHJldHVybiBcIm5ld1wiO1xuICB9XG4gIHJldHVybiBpc0NhcmRNYXR1cmUoZmxhc2hjYXJkKSA/IFwibWF0dXJlXCIgOiBcInJldmlld1wiO1xufVxuIiwgImltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSBcInNxbC5qc1wiO1xuXG4vLyBDdXJyZW50IFNjaGVtYSBWZXJzaW9uXG5leHBvcnQgY29uc3QgQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTiA9IDU7XG5cbi8vIFNRTCBUYWJsZSBDcmVhdGlvbiBTY2hlbWEgLSBVc2VkIHdoZW4gZGF0YWJhc2UgZmlsZSBkb2Vzbid0IGV4aXN0XG5leHBvcnQgY29uc3QgQ1JFQVRFX1RBQkxFU19TUUwgPSBgXG4gIFBSQUdNQSBmb3JlaWduX2tleXMgPSBPRkY7XG4gIEJFR0lOO1xuXG4gIC0tIERlY2tzIHRhYmxlXG4gIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGRlY2tzIChcbiAgICBpZCBURVhUIFBSSU1BUlkgS0VZLFxuICAgIG5hbWUgVEVYVCBOT1QgTlVMTCxcbiAgICBmaWxlcGF0aCBURVhUIE5PVCBOVUxMIFVOSVFVRSxcbiAgICB0YWcgVEVYVCBOT1QgTlVMTCxcbiAgICBsYXN0X3Jldmlld2VkIFRFWFQsXG4gICAgY29uZmlnIFRFWFQgTk9UIE5VTEwgREVGQVVMVCAne1wiaGFzTmV3Q2FyZHNMaW1pdEVuYWJsZWRcIjpmYWxzZSxcIm5ld0NhcmRzUGVyRGF5XCI6MjAsXCJoYXNSZXZpZXdDYXJkc0xpbWl0RW5hYmxlZFwiOmZhbHNlLFwicmV2aWV3Q2FyZHNQZXJEYXlcIjoxMDAsXCJoZWFkZXJMZXZlbFwiOjIsXCJyZXZpZXdPcmRlclwiOlwiZHVlLWRhdGVcIixcImZzcnNcIjp7XCJyZXF1ZXN0UmV0ZW50aW9uXCI6MC45LFwicHJvZmlsZVwiOlwiU1RBTkRBUkRcIn19JyxcbiAgICBjcmVhdGVkIFRFWFQgTk9UIE5VTEwsXG4gICAgbW9kaWZpZWQgVEVYVCBOT1QgTlVMTFxuICApO1xuXG4gIC0tIEZsYXNoY2FyZHMgdGFibGVcbiAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgZmxhc2hjYXJkcyAoXG4gICAgaWQgVEVYVCBQUklNQVJZIEtFWSxcbiAgICBkZWNrX2lkIFRFWFQgTk9UIE5VTEwsXG4gICAgZnJvbnQgVEVYVCBOT1QgTlVMTCxcbiAgICBiYWNrIFRFWFQgTk9UIE5VTEwsXG4gICAgdHlwZSBURVhUIE5PVCBOVUxMIENIRUNLICh0eXBlIElOICgnaGVhZGVyLXBhcmFncmFwaCcsICd0YWJsZScpKSxcbiAgICBzb3VyY2VfZmlsZSBURVhUIE5PVCBOVUxMLFxuICAgIGNvbnRlbnRfaGFzaCBURVhUIE5PVCBOVUxMLFxuXG4gICAgc3RhdGUgVEVYVCBOT1QgTlVMTCBDSEVDSyAoc3RhdGUgSU4gKCduZXcnLCAncmV2aWV3JykpLFxuICAgIGR1ZV9kYXRlIFRFWFQgTk9UIE5VTEwsXG4gICAgaW50ZXJ2YWwgUkVBTCBOT1QgTlVMTCxcbiAgICByZXBldGl0aW9ucyBJTlRFR0VSIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBkaWZmaWN1bHR5IFJFQUwgTk9UIE5VTEwgREVGQVVMVCA1LjAsXG4gICAgc3RhYmlsaXR5IFJFQUwgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgIGxhcHNlcyBJTlRFR0VSIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBsYXN0X3Jldmlld2VkIFRFWFQsXG4gICAgY3JlYXRlZCBURVhUIE5PVCBOVUxMLFxuICAgIG1vZGlmaWVkIFRFWFQgTk9UIE5VTEwsXG4gICAgRk9SRUlHTiBLRVkgKGRlY2tfaWQpIFJFRkVSRU5DRVMgZGVja3MoaWQpXG4gICk7XG5cbiAgLS0gUmV2aWV3IHNlc3Npb25zIHRhYmxlXG4gIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHJldmlld19zZXNzaW9ucyAoXG4gICAgaWQgVEVYVCBQUklNQVJZIEtFWSxcbiAgICBkZWNrX2lkIFRFWFQgTk9UIE5VTEwsXG4gICAgc3RhcnRlZF9hdCBURVhUIE5PVCBOVUxMLFxuICAgIGVuZGVkX2F0IFRFWFQsXG4gICAgZ29hbF90b3RhbCBJTlRFR0VSIE5PVCBOVUxMLFxuICAgIGRvbmVfdW5pcXVlIElOVEVHRVIgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgIEZPUkVJR04gS0VZIChkZWNrX2lkKSBSRUZFUkVOQ0VTIGRlY2tzKGlkKVxuICApO1xuXG4gIC0tIFJldmlldyBsb2dzIHRhYmxlXG4gIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHJldmlld19sb2dzIChcbiAgICBpZCBURVhUIFBSSU1BUlkgS0VZLFxuICAgIGZsYXNoY2FyZF9pZCBURVhUIE5PVCBOVUxMLFxuICAgIHNlc3Npb25faWQgVEVYVCxcbiAgICBsYXN0X3Jldmlld2VkX2F0IFRFWFQgTk9UIE5VTEwsXG4gICAgc2hvd25fYXQgVEVYVCxcbiAgICByZXZpZXdlZF9hdCBURVhUIE5PVCBOVUxMLFxuICAgIHJhdGluZyBJTlRFR0VSIE5PVCBOVUxMIENIRUNLIChyYXRpbmcgSU4gKDEsIDIsIDMsIDQpKSxcbiAgICByYXRpbmdfbGFiZWwgVEVYVCBOT1QgTlVMTCBDSEVDSyAocmF0aW5nX2xhYmVsIElOICgnYWdhaW4nLCAnaGFyZCcsICdnb29kJywgJ2Vhc3knKSksXG4gICAgdGltZV9lbGFwc2VkX21zIElOVEVHRVIsXG4gICAgb2xkX3N0YXRlIFRFWFQgTk9UIE5VTEwgQ0hFQ0sgKG9sZF9zdGF0ZSBJTiAoJ25ldycsICdyZXZpZXcnKSksXG4gICAgb2xkX3JlcGV0aXRpb25zIElOVEVHRVIgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgIG9sZF9sYXBzZXMgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgb2xkX3N0YWJpbGl0eSBSRUFMIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBvbGRfZGlmZmljdWx0eSBSRUFMIE5PVCBOVUxMIERFRkFVTFQgNS4wLFxuICAgIG5ld19zdGF0ZSBURVhUIE5PVCBOVUxMIENIRUNLIChuZXdfc3RhdGUgSU4gKCduZXcnLCAncmV2aWV3JykpLFxuICAgIG5ld19yZXBldGl0aW9ucyBJTlRFR0VSIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBuZXdfbGFwc2VzIElOVEVHRVIgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgIG5ld19zdGFiaWxpdHkgUkVBTCBOT1QgTlVMTCBERUZBVUxUIDIuNSxcbiAgICBuZXdfZGlmZmljdWx0eSBSRUFMIE5PVCBOVUxMIERFRkFVTFQgNS4wLFxuICAgIG9sZF9pbnRlcnZhbF9taW51dGVzIElOVEVHRVIgTk9UIE5VTEwsXG4gICAgbmV3X2ludGVydmFsX21pbnV0ZXMgSU5URUdFUiBOT1QgTlVMTCxcbiAgICBvbGRfZHVlX2F0IFRFWFQgTk9UIE5VTEwsXG4gICAgbmV3X2R1ZV9hdCBURVhUIE5PVCBOVUxMLFxuICAgIGVsYXBzZWRfZGF5cyBSRUFMIE5PVCBOVUxMLFxuICAgIHJldHJpZXZhYmlsaXR5IFJFQUwgTk9UIE5VTEwsXG4gICAgcmVxdWVzdF9yZXRlbnRpb24gUkVBTCBOT1QgTlVMTCxcbiAgICBwcm9maWxlIFRFWFQgTk9UIE5VTEwgREVGQVVMVCAnU1RBTkRBUkQnIENIRUNLIChwcm9maWxlIElOICgnSU5URU5TSVZFJywgJ1NUQU5EQVJEJykpLFxuICAgIG1heGltdW1faW50ZXJ2YWxfZGF5cyBJTlRFR0VSIE5PVCBOVUxMLFxuICAgIG1pbl9taW51dGVzIElOVEVHRVIgTk9UIE5VTEwsXG4gICAgZnNyc193ZWlnaHRzX3ZlcnNpb24gVEVYVCBOT1QgTlVMTCxcbiAgICBzY2hlZHVsZXJfdmVyc2lvbiBURVhUIE5PVCBOVUxMLFxuICAgIG5vdGVfbW9kZWxfaWQgVEVYVCxcbiAgICBjYXJkX3RlbXBsYXRlX2lkIFRFWFQsXG4gICAgY29udGVudF9oYXNoIFRFWFQsXG4gICAgY2xpZW50IFRFWFQsXG4gICAgRk9SRUlHTiBLRVkgKGZsYXNoY2FyZF9pZCkgUkVGRVJFTkNFUyBmbGFzaGNhcmRzKGlkKSxcbiAgICBGT1JFSUdOIEtFWSAoc2Vzc2lvbl9pZCkgUkVGRVJFTkNFUyByZXZpZXdfc2Vzc2lvbnMoaWQpXG4gICk7XG5cbiAgLS0gQ3JlYXRlIGluZGV4ZXNcbiAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2ZsYXNoY2FyZHNfZGVja19pZCBPTiBmbGFzaGNhcmRzKGRlY2tfaWQpO1xuICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfZmxhc2hjYXJkc19kdWVfZGF0ZSBPTiBmbGFzaGNhcmRzKGR1ZV9kYXRlKTtcbiAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X3Jldmlld19zZXNzaW9uc19kZWNrX2lkIE9OIHJldmlld19zZXNzaW9ucyhkZWNrX2lkKTtcbiAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X3Jldmlld19sb2dzX2ZsYXNoY2FyZF9pZCBPTiByZXZpZXdfbG9ncyhmbGFzaGNhcmRfaWQpO1xuICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfcmV2aWV3X2xvZ3Nfc2Vzc2lvbl9pZCBPTiByZXZpZXdfbG9ncyhzZXNzaW9uX2lkKTtcbiAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X3Jldmlld19sb2dzX3Jldmlld2VkX2F0IE9OIHJldmlld19sb2dzKHJldmlld2VkX2F0KTtcblxuICAtLSBTZXQgc2NoZW1hIHZlcnNpb25cbiAgUFJBR01BIHVzZXJfdmVyc2lvbiA9ICR7Q1VSUkVOVF9TQ0hFTUFfVkVSU0lPTn07XG5cbiAgQ09NTUlUO1xuICBQUkFHTUEgZm9yZWlnbl9rZXlzID0gT047XG5gO1xuXG5mdW5jdGlvbiBnZXRDb2x1bW5OYW1lcyhkYjogRGF0YWJhc2UsIHRhYmxlTmFtZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICB0cnkge1xuICAgIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBQUkFHTUEgdGFibGVfaW5mbygke3RhYmxlTmFtZX0pYCk7XG4gICAgY29uc3QgY29sdW1uczogc3RyaW5nW10gPSBbXTtcbiAgICB3aGlsZSAoc3RtdC5zdGVwKCkpIHtcbiAgICAgIGNvbnN0IHJvdyA9IHN0bXQuZ2V0KCk7XG4gICAgICBjb2x1bW5zLnB1c2gocm93WzFdIGFzIHN0cmluZyk7IC8vIGNvbHVtbiBuYW1lIGlzIGF0IGluZGV4IDFcbiAgICB9XG4gICAgc3RtdC5mcmVlKCk7XG4gICAgcmV0dXJuIGNvbHVtbnM7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRNaWdyYXRpb25TUUwoZGI6IERhdGFiYXNlKTogc3RyaW5nIHtcbiAgY29uc3QgZGVja3NDb2x1bW5zID0gZ2V0Q29sdW1uTmFtZXMoZGIsIFwiZGVja3NcIik7XG4gIGNvbnN0IGZsYXNoY2FyZHNDb2x1bW5zID0gZ2V0Q29sdW1uTmFtZXMoZGIsIFwiZmxhc2hjYXJkc1wiKTtcbiAgY29uc3QgcmV2aWV3TG9nc0NvbHVtbnMgPSBnZXRDb2x1bW5OYW1lcyhkYiwgXCJyZXZpZXdfbG9nc1wiKTtcbiAgY29uc3QgcmV2aWV3U2Vzc2lvbnNDb2x1bW5zID0gZ2V0Q29sdW1uTmFtZXMoZGIsIFwicmV2aWV3X3Nlc3Npb25zXCIpO1xuXG4gIC8vIEJ1aWxkIGRlY2tzIG1pZ3JhdGlvblxuICBjb25zdCBkZWNrc1NlbGVjdCA9IFtcbiAgICBcImlkXCIsXG4gICAgXCJuYW1lXCIsXG4gICAgZGVja3NDb2x1bW5zLmluY2x1ZGVzKFwiZmlsZXBhdGhcIikgPyBcImZpbGVwYXRoXCIgOiBgJycgYXMgZmlsZXBhdGhgLFxuICAgIFwidGFnXCIsXG4gICAgXCJsYXN0X3Jldmlld2VkXCIsXG4gICAgZGVja3NDb2x1bW5zLmluY2x1ZGVzKFwiY29uZmlnXCIpXG4gICAgICA/IFwiY29uZmlnXCJcbiAgICAgIDogYCd7XCJoYXNOZXdDYXJkc0xpbWl0RW5hYmxlZFwiOmZhbHNlLFwibmV3Q2FyZHNQZXJEYXlcIjoyMCxcImhhc1Jldmlld0NhcmRzTGltaXRFbmFibGVkXCI6ZmFsc2UsXCJyZXZpZXdDYXJkc1BlckRheVwiOjEwMCxcImhlYWRlckxldmVsXCI6MixcInJldmlld09yZGVyXCI6XCJkdWUtZGF0ZVwiLFwiZnNyc1wiOntcInJlcXVlc3RSZXRlbnRpb25cIjowLjksXCJwcm9maWxlXCI6XCJTVEFOREFSRFwifX0nIGFzIGNvbmZpZ2AsXG4gICAgZGVja3NDb2x1bW5zLmluY2x1ZGVzKFwiY3JlYXRlZFwiKSA/IFwiY3JlYXRlZFwiIDogYGRhdGV0aW1lKCdub3cnKSBhcyBjcmVhdGVkYCxcbiAgICBkZWNrc0NvbHVtbnMuaW5jbHVkZXMoXCJtb2RpZmllZFwiKVxuICAgICAgPyBcIm1vZGlmaWVkXCJcbiAgICAgIDogYGRhdGV0aW1lKCdub3cnKSBhcyBtb2RpZmllZGAsXG4gIF0uam9pbihcIiwgXCIpO1xuXG4gIC8vIEJ1aWxkIGZsYXNoY2FyZHMgbWlncmF0aW9uXG4gIGNvbnN0IGZsYXNoY2FyZHNTZWxlY3QgPSBbXG4gICAgXCJpZFwiLFxuICAgIFwiZGVja19pZFwiLFxuICAgIFwiZnJvbnRcIixcbiAgICBcImJhY2tcIixcbiAgICBmbGFzaGNhcmRzQ29sdW1ucy5pbmNsdWRlcyhcInR5cGVcIikgPyBcInR5cGVcIiA6IGAnaGVhZGVyLXBhcmFncmFwaCcgYXMgdHlwZWAsXG4gICAgZmxhc2hjYXJkc0NvbHVtbnMuaW5jbHVkZXMoXCJzb3VyY2VfZmlsZVwiKVxuICAgICAgPyBcInNvdXJjZV9maWxlXCJcbiAgICAgIDogYCcnIGFzIHNvdXJjZV9maWxlYCxcbiAgICBmbGFzaGNhcmRzQ29sdW1ucy5pbmNsdWRlcyhcImNvbnRlbnRfaGFzaFwiKVxuICAgICAgPyBcImNvbnRlbnRfaGFzaFwiXG4gICAgICA6IGAnJyBhcyBjb250ZW50X2hhc2hgLFxuXG4gICAgZmxhc2hjYXJkc0NvbHVtbnMuaW5jbHVkZXMoXCJzdGF0ZVwiKSA/IFwic3RhdGVcIiA6IGAnbmV3JyBhcyBzdGF0ZWAsXG4gICAgZmxhc2hjYXJkc0NvbHVtbnMuaW5jbHVkZXMoXCJkdWVfZGF0ZVwiKVxuICAgICAgPyBcImR1ZV9kYXRlXCJcbiAgICAgIDogYGRhdGV0aW1lKCdub3cnKSBhcyBkdWVfZGF0ZWAsXG4gICAgZmxhc2hjYXJkc0NvbHVtbnMuaW5jbHVkZXMoXCJpbnRlcnZhbFwiKSA/IFwiaW50ZXJ2YWxcIiA6IGAwIGFzIGludGVydmFsYCxcbiAgICBmbGFzaGNhcmRzQ29sdW1ucy5pbmNsdWRlcyhcInJlcGV0aXRpb25zXCIpXG4gICAgICA/IFwicmVwZXRpdGlvbnNcIlxuICAgICAgOiBgMCBhcyByZXBldGl0aW9uc2AsXG4gICAgZmxhc2hjYXJkc0NvbHVtbnMuaW5jbHVkZXMoXCJkaWZmaWN1bHR5XCIpXG4gICAgICA/IFwiZGlmZmljdWx0eVwiXG4gICAgICA6IGA1LjAgYXMgZGlmZmljdWx0eWAsXG4gICAgZmxhc2hjYXJkc0NvbHVtbnMuaW5jbHVkZXMoXCJzdGFiaWxpdHlcIikgPyBcInN0YWJpbGl0eVwiIDogYDAgYXMgc3RhYmlsaXR5YCxcbiAgICBmbGFzaGNhcmRzQ29sdW1ucy5pbmNsdWRlcyhcImxhcHNlc1wiKSA/IFwibGFwc2VzXCIgOiBgMCBhcyBsYXBzZXNgLFxuICAgIFwibGFzdF9yZXZpZXdlZFwiLFxuICAgIFwiY3JlYXRlZFwiLFxuICAgIFwibW9kaWZpZWRcIixcbiAgXS5qb2luKFwiLCBcIik7XG5cbiAgLy8gQnVpbGQgcmV2aWV3X2xvZ3MgbWlncmF0aW9uXG4gIGNvbnN0IHJldmlld0xvZ3NTZWxlY3QgPSBbXG4gICAgXCJpZFwiLFxuICAgIFwiZmxhc2hjYXJkX2lkXCIsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJzZXNzaW9uX2lkXCIpXG4gICAgICA/IFwic2Vzc2lvbl9pZFwiXG4gICAgICA6IFwiTlVMTCBhcyBzZXNzaW9uX2lkXCIsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJsYXN0X3Jldmlld2VkX2F0XCIpXG4gICAgICA/IFwibGFzdF9yZXZpZXdlZF9hdFwiXG4gICAgICA6IGBkYXRldGltZSgnbm93JykgYXMgbGFzdF9yZXZpZXdlZF9hdGAsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJzaG93bl9hdFwiKSA/IFwic2hvd25fYXRcIiA6IFwiTlVMTCBhcyBzaG93bl9hdFwiLFxuICAgIHJldmlld0xvZ3NDb2x1bW5zLmluY2x1ZGVzKFwicmV2aWV3ZWRfYXRcIilcbiAgICAgID8gXCJyZXZpZXdlZF9hdFwiXG4gICAgICA6IGBkYXRldGltZSgnbm93JykgYXMgcmV2aWV3ZWRfYXRgLFxuICAgIHJldmlld0xvZ3NDb2x1bW5zLmluY2x1ZGVzKFwicmF0aW5nXCIpID8gXCJyYXRpbmdcIiA6IGAzIGFzIHJhdGluZ2AsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJyYXRpbmdfbGFiZWxcIilcbiAgICAgID8gXCJyYXRpbmdfbGFiZWxcIlxuICAgICAgOiBgJ2dvb2QnIGFzIHJhdGluZ19sYWJlbGAsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJ0aW1lX2VsYXBzZWRfbXNcIilcbiAgICAgID8gXCJ0aW1lX2VsYXBzZWRfbXNcIlxuICAgICAgOiBcIk5VTEwgYXMgdGltZV9lbGFwc2VkX21zXCIsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJvbGRfc3RhdGVcIilcbiAgICAgID8gXCJvbGRfc3RhdGVcIlxuICAgICAgOiBgJ25ldycgYXMgb2xkX3N0YXRlYCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcIm9sZF9yZXBldGl0aW9uc1wiKVxuICAgICAgPyBcIm9sZF9yZXBldGl0aW9uc1wiXG4gICAgICA6IGAwIGFzIG9sZF9yZXBldGl0aW9uc2AsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJvbGRfbGFwc2VzXCIpID8gXCJvbGRfbGFwc2VzXCIgOiBgMCBhcyBvbGRfbGFwc2VzYCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcIm9sZF9zdGFiaWxpdHlcIilcbiAgICAgID8gXCJvbGRfc3RhYmlsaXR5XCJcbiAgICAgIDogYDAgYXMgb2xkX3N0YWJpbGl0eWAsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJvbGRfZGlmZmljdWx0eVwiKVxuICAgICAgPyBcIm9sZF9kaWZmaWN1bHR5XCJcbiAgICAgIDogYDUuMCBhcyBvbGRfZGlmZmljdWx0eWAsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJuZXdfc3RhdGVcIilcbiAgICAgID8gXCJuZXdfc3RhdGVcIlxuICAgICAgOiBgJ3JldmlldycgYXMgbmV3X3N0YXRlYCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcIm5ld19yZXBldGl0aW9uc1wiKVxuICAgICAgPyBcIm5ld19yZXBldGl0aW9uc1wiXG4gICAgICA6IGAxIGFzIG5ld19yZXBldGl0aW9uc2AsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJuZXdfbGFwc2VzXCIpID8gXCJuZXdfbGFwc2VzXCIgOiBgMCBhcyBuZXdfbGFwc2VzYCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcIm5ld19zdGFiaWxpdHlcIilcbiAgICAgID8gXCJuZXdfc3RhYmlsaXR5XCJcbiAgICAgIDogYDIuNSBhcyBuZXdfc3RhYmlsaXR5YCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcIm5ld19kaWZmaWN1bHR5XCIpXG4gICAgICA/IFwibmV3X2RpZmZpY3VsdHlcIlxuICAgICAgOiBgNS4wIGFzIG5ld19kaWZmaWN1bHR5YCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcIm9sZF9pbnRlcnZhbF9taW51dGVzXCIpXG4gICAgICA/IFwib2xkX2ludGVydmFsX21pbnV0ZXNcIlxuICAgICAgOiBgMCBhcyBvbGRfaW50ZXJ2YWxfbWludXRlc2AsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJuZXdfaW50ZXJ2YWxfbWludXRlc1wiKVxuICAgICAgPyBcIm5ld19pbnRlcnZhbF9taW51dGVzXCJcbiAgICAgIDogYDE0NDAgYXMgbmV3X2ludGVydmFsX21pbnV0ZXNgLFxuICAgIHJldmlld0xvZ3NDb2x1bW5zLmluY2x1ZGVzKFwib2xkX2R1ZV9hdFwiKVxuICAgICAgPyBcIm9sZF9kdWVfYXRcIlxuICAgICAgOiBgZGF0ZXRpbWUoJ25vdycpIGFzIG9sZF9kdWVfYXRgLFxuICAgIHJldmlld0xvZ3NDb2x1bW5zLmluY2x1ZGVzKFwibmV3X2R1ZV9hdFwiKVxuICAgICAgPyBcIm5ld19kdWVfYXRcIlxuICAgICAgOiBgZGF0ZXRpbWUoJ25vdycsICcrMSBkYXknKSBhcyBuZXdfZHVlX2F0YCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcImVsYXBzZWRfZGF5c1wiKVxuICAgICAgPyBcImVsYXBzZWRfZGF5c1wiXG4gICAgICA6IGAxLjAgYXMgZWxhcHNlZF9kYXlzYCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcInJldHJpZXZhYmlsaXR5XCIpXG4gICAgICA/IFwicmV0cmlldmFiaWxpdHlcIlxuICAgICAgOiBgMC45IGFzIHJldHJpZXZhYmlsaXR5YCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcInJlcXVlc3RfcmV0ZW50aW9uXCIpXG4gICAgICA/IFwicmVxdWVzdF9yZXRlbnRpb25cIlxuICAgICAgOiBgMC45IGFzIHJlcXVlc3RfcmV0ZW50aW9uYCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcInByb2ZpbGVcIikgPyBcInByb2ZpbGVcIiA6IGAnU1RBTkRBUkQnIGFzIHByb2ZpbGVgLFxuICAgIHJldmlld0xvZ3NDb2x1bW5zLmluY2x1ZGVzKFwibWF4aW11bV9pbnRlcnZhbF9kYXlzXCIpXG4gICAgICA/IFwibWF4aW11bV9pbnRlcnZhbF9kYXlzXCJcbiAgICAgIDogYDM2NTAwIGFzIG1heGltdW1faW50ZXJ2YWxfZGF5c2AsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJtaW5fbWludXRlc1wiKVxuICAgICAgPyBcIm1pbl9taW51dGVzXCJcbiAgICAgIDogYDEgYXMgbWluX21pbnV0ZXNgLFxuICAgIHJldmlld0xvZ3NDb2x1bW5zLmluY2x1ZGVzKFwiZnNyc193ZWlnaHRzX3ZlcnNpb25cIilcbiAgICAgID8gXCJmc3JzX3dlaWdodHNfdmVyc2lvblwiXG4gICAgICA6IGAnMS4wJyBhcyBmc3JzX3dlaWdodHNfdmVyc2lvbmAsXG4gICAgcmV2aWV3TG9nc0NvbHVtbnMuaW5jbHVkZXMoXCJzY2hlZHVsZXJfdmVyc2lvblwiKVxuICAgICAgPyBcInNjaGVkdWxlcl92ZXJzaW9uXCJcbiAgICAgIDogYCcxLjAnIGFzIHNjaGVkdWxlcl92ZXJzaW9uYCxcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcIm5vdGVfbW9kZWxfaWRcIilcbiAgICAgID8gXCJub3RlX21vZGVsX2lkXCJcbiAgICAgIDogXCJOVUxMIGFzIG5vdGVfbW9kZWxfaWRcIixcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcImNhcmRfdGVtcGxhdGVfaWRcIilcbiAgICAgID8gXCJjYXJkX3RlbXBsYXRlX2lkXCJcbiAgICAgIDogXCJOVUxMIGFzIGNhcmRfdGVtcGxhdGVfaWRcIixcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcImNvbnRlbnRfaGFzaFwiKVxuICAgICAgPyBcImNvbnRlbnRfaGFzaFwiXG4gICAgICA6IFwiTlVMTCBhcyBjb250ZW50X2hhc2hcIixcbiAgICByZXZpZXdMb2dzQ29sdW1ucy5pbmNsdWRlcyhcImNsaWVudFwiKSA/IFwiY2xpZW50XCIgOiBcIk5VTEwgYXMgY2xpZW50XCIsXG4gIF0uam9pbihcIiwgXCIpO1xuXG4gIC8vIEJ1aWxkIHJldmlld19zZXNzaW9ucyBtaWdyYXRpb25cbiAgY29uc3QgcmV2aWV3U2Vzc2lvbnNTZWxlY3QgPSBbXG4gICAgXCJpZFwiLFxuICAgIFwiZGVja19pZFwiLFxuICAgIFwic3RhcnRlZF9hdFwiLFxuICAgIFwiZW5kZWRfYXRcIixcbiAgICBcImdvYWxfdG90YWxcIixcbiAgICBcImRvbmVfdW5pcXVlXCIsXG4gIF0uam9pbihcIiwgXCIpO1xuXG4gIHJldHVybiBgXG4gICAgUFJBR01BIGZvcmVpZ25fa2V5cyA9IE9GRjtcbiAgICBCRUdJTjtcblxuICAgIC0tIENyZWF0ZSBuZXcgdGFibGVzXG4gICAgQ1JFQVRFIFRBQkxFIGRlY2tzX25ldyAoXG4gICAgICBpZCBURVhUIFBSSU1BUlkgS0VZLFxuICAgICAgbmFtZSBURVhUIE5PVCBOVUxMLFxuICAgICAgZmlsZXBhdGggVEVYVCBOT1QgTlVMTCBVTklRVUUsXG4gICAgICB0YWcgVEVYVCBOT1QgTlVMTCxcbiAgICAgIGxhc3RfcmV2aWV3ZWQgVEVYVCxcbiAgICAgIGNvbmZpZyBURVhUIE5PVCBOVUxMIERFRkFVTFQgJ3tcImhhc05ld0NhcmRzTGltaXRFbmFibGVkXCI6ZmFsc2UsXCJuZXdDYXJkc1BlckRheVwiOjIwLFwiaGFzUmV2aWV3Q2FyZHNMaW1pdEVuYWJsZWRcIjpmYWxzZSxcInJldmlld0NhcmRzUGVyRGF5XCI6MTAwLFwiaGVhZGVyTGV2ZWxcIjoyLFwicmV2aWV3T3JkZXJcIjpcImR1ZS1kYXRlXCIsXCJmc3JzXCI6e1wicmVxdWVzdFJldGVudGlvblwiOjAuOSxcInByb2ZpbGVcIjpcIlNUQU5EQVJEXCJ9fScsXG4gICAgICBjcmVhdGVkIFRFWFQgTk9UIE5VTEwsXG4gICAgICBtb2RpZmllZCBURVhUIE5PVCBOVUxMXG4gICAgKTtcblxuICAgIENSRUFURSBUQUJMRSBmbGFzaGNhcmRzX25ldyAoXG4gICAgICBpZCBURVhUIFBSSU1BUlkgS0VZLFxuICAgICAgZGVja19pZCBURVhUIE5PVCBOVUxMLFxuICAgICAgZnJvbnQgVEVYVCBOT1QgTlVMTCxcbiAgICAgIGJhY2sgVEVYVCBOT1QgTlVMTCxcbiAgICAgIHR5cGUgVEVYVCBOT1QgTlVMTCBDSEVDSyAodHlwZSBJTiAoJ2hlYWRlci1wYXJhZ3JhcGgnLCAndGFibGUnKSksXG4gICAgICBzb3VyY2VfZmlsZSBURVhUIE5PVCBOVUxMLFxuICAgICAgY29udGVudF9oYXNoIFRFWFQgTk9UIE5VTEwsXG5cbiAgICAgIHN0YXRlIFRFWFQgTk9UIE5VTEwgQ0hFQ0sgKHN0YXRlIElOICgnbmV3JywgJ3JldmlldycpKSxcbiAgICAgIGR1ZV9kYXRlIFRFWFQgTk9UIE5VTEwsXG4gICAgICBpbnRlcnZhbCBSRUFMIE5PVCBOVUxMLFxuICAgICAgcmVwZXRpdGlvbnMgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgICBkaWZmaWN1bHR5IFJFQUwgTk9UIE5VTEwgREVGQVVMVCA1LjAsXG4gICAgICBzdGFiaWxpdHkgUkVBTCBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgICBsYXBzZXMgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgICBsYXN0X3Jldmlld2VkIFRFWFQsXG4gICAgICBjcmVhdGVkIFRFWFQgTk9UIE5VTEwsXG4gICAgICBtb2RpZmllZCBURVhUIE5PVCBOVUxMLFxuICAgICAgRk9SRUlHTiBLRVkgKGRlY2tfaWQpIFJFRkVSRU5DRVMgZGVja3MoaWQpXG4gICAgKTtcblxuICAgIENSRUFURSBUQUJMRSByZXZpZXdfc2Vzc2lvbnNfbmV3IChcbiAgICAgIGlkIFRFWFQgUFJJTUFSWSBLRVksXG4gICAgICBkZWNrX2lkIFRFWFQgTk9UIE5VTEwsXG4gICAgICBzdGFydGVkX2F0IFRFWFQgTk9UIE5VTEwsXG4gICAgICBlbmRlZF9hdCBURVhULFxuICAgICAgZ29hbF90b3RhbCBJTlRFR0VSIE5PVCBOVUxMLFxuICAgICAgZG9uZV91bmlxdWUgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgICBGT1JFSUdOIEtFWSAoZGVja19pZCkgUkVGRVJFTkNFUyBkZWNrc19uZXcoaWQpXG4gICAgKTtcblxuICAgIENSRUFURSBUQUJMRSByZXZpZXdfbG9nc19uZXcgKFxuICAgICAgaWQgVEVYVCBQUklNQVJZIEtFWSxcbiAgICAgIGZsYXNoY2FyZF9pZCBURVhUIE5PVCBOVUxMLFxuICAgICAgc2Vzc2lvbl9pZCBURVhULFxuICAgICAgbGFzdF9yZXZpZXdlZF9hdCBURVhUIE5PVCBOVUxMLFxuICAgICAgc2hvd25fYXQgVEVYVCxcbiAgICAgIHJldmlld2VkX2F0IFRFWFQgTk9UIE5VTEwsXG4gICAgICByYXRpbmcgSU5URUdFUiBOT1QgTlVMTCBDSEVDSyAocmF0aW5nIElOICgxLCAyLCAzLCA0KSksXG4gICAgICByYXRpbmdfbGFiZWwgVEVYVCBOT1QgTlVMTCBDSEVDSyAocmF0aW5nX2xhYmVsIElOICgnYWdhaW4nLCAnaGFyZCcsICdnb29kJywgJ2Vhc3knKSksXG4gICAgICB0aW1lX2VsYXBzZWRfbXMgSU5URUdFUixcbiAgICAgIG9sZF9zdGF0ZSBURVhUIE5PVCBOVUxMIENIRUNLIChvbGRfc3RhdGUgSU4gKCduZXcnLCAncmV2aWV3JykpLFxuICAgICAgb2xkX3JlcGV0aXRpb25zIElOVEVHRVIgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgICAgb2xkX2xhcHNlcyBJTlRFR0VSIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICAgIG9sZF9zdGFiaWxpdHkgUkVBTCBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgICBvbGRfZGlmZmljdWx0eSBSRUFMIE5PVCBOVUxMIERFRkFVTFQgNS4wLFxuICAgICAgbmV3X3N0YXRlIFRFWFQgTk9UIE5VTEwgQ0hFQ0sgKG5ld19zdGF0ZSBJTiAoJ25ldycsICdyZXZpZXcnKSksXG4gICAgICBuZXdfcmVwZXRpdGlvbnMgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgICBuZXdfbGFwc2VzIElOVEVHRVIgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgICAgbmV3X3N0YWJpbGl0eSBSRUFMIE5PVCBOVUxMIERFRkFVTFQgMi41LFxuICAgICAgbmV3X2RpZmZpY3VsdHkgUkVBTCBOT1QgTlVMTCBERUZBVUxUIDUuMCxcbiAgICAgIG9sZF9pbnRlcnZhbF9taW51dGVzIElOVEVHRVIgTk9UIE5VTEwsXG4gICAgICBuZXdfaW50ZXJ2YWxfbWludXRlcyBJTlRFR0VSIE5PVCBOVUxMLFxuICAgICAgb2xkX2R1ZV9hdCBURVhUIE5PVCBOVUxMLFxuICAgICAgbmV3X2R1ZV9hdCBURVhUIE5PVCBOVUxMLFxuICAgICAgZWxhcHNlZF9kYXlzIFJFQUwgTk9UIE5VTEwsXG4gICAgICByZXRyaWV2YWJpbGl0eSBSRUFMIE5PVCBOVUxMLFxuICAgICAgcmVxdWVzdF9yZXRlbnRpb24gUkVBTCBOT1QgTlVMTCxcbiAgICAgIHByb2ZpbGUgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdTVEFOREFSRCcgQ0hFQ0sgKHByb2ZpbGUgSU4gKCdJTlRFTlNJVkUnLCAnU1RBTkRBUkQnKSksXG4gICAgICBtYXhpbXVtX2ludGVydmFsX2RheXMgSU5URUdFUiBOT1QgTlVMTCxcbiAgICAgIG1pbl9taW51dGVzIElOVEVHRVIgTk9UIE5VTEwsXG4gICAgICBmc3JzX3dlaWdodHNfdmVyc2lvbiBURVhUIE5PVCBOVUxMLFxuICAgICAgc2NoZWR1bGVyX3ZlcnNpb24gVEVYVCBOT1QgTlVMTCxcbiAgICAgIG5vdGVfbW9kZWxfaWQgVEVYVCxcbiAgICAgIGNhcmRfdGVtcGxhdGVfaWQgVEVYVCxcbiAgICAgIGNvbnRlbnRfaGFzaCBURVhULFxuICAgICAgY2xpZW50IFRFWFQsXG4gICAgICBGT1JFSUdOIEtFWSAoZmxhc2hjYXJkX2lkKSBSRUZFUkVOQ0VTIGZsYXNoY2FyZHMoaWQpLFxuICAgICAgRk9SRUlHTiBLRVkgKHNlc3Npb25faWQpIFJFRkVSRU5DRVMgcmV2aWV3X3Nlc3Npb25zKGlkKVxuICAgICk7XG5cbiAgICAtLSBDb3B5IGRhdGEgd2l0aCBkeW5hbWljIGNvbHVtbiBtYXBwaW5nXG4gICAgSU5TRVJUIE9SIElHTk9SRSBJTlRPIGRlY2tzX25ldyAoaWQsIG5hbWUsIGZpbGVwYXRoLCB0YWcsIGxhc3RfcmV2aWV3ZWQsIGNvbmZpZywgY3JlYXRlZCwgbW9kaWZpZWQpXG4gICAgU0VMRUNUICR7ZGVja3NTZWxlY3R9IEZST00gZGVja3MgV0hFUkUgRVhJU1RTIChTRUxFQ1QgMSBGUk9NIHNxbGl0ZV9tYXN0ZXIgV0hFUkUgdHlwZT0ndGFibGUnIEFORCBuYW1lPSdkZWNrcycpO1xuXG4gICAgSU5TRVJUIE9SIElHTk9SRSBJTlRPIGZsYXNoY2FyZHNfbmV3IChpZCwgZGVja19pZCwgZnJvbnQsIGJhY2ssIHR5cGUsIHNvdXJjZV9maWxlLCBjb250ZW50X2hhc2gsIHN0YXRlLCBkdWVfZGF0ZSwgaW50ZXJ2YWwsIHJlcGV0aXRpb25zLCBkaWZmaWN1bHR5LCBzdGFiaWxpdHksIGxhcHNlcywgbGFzdF9yZXZpZXdlZCwgY3JlYXRlZCwgbW9kaWZpZWQpXG4gICAgU0VMRUNUICR7Zmxhc2hjYXJkc1NlbGVjdH0gRlJPTSBmbGFzaGNhcmRzIFdIRVJFIEVYSVNUUyAoU0VMRUNUIDEgRlJPTSBzcWxpdGVfbWFzdGVyIFdIRVJFIHR5cGU9J3RhYmxlJyBBTkQgbmFtZT0nZmxhc2hjYXJkcycpO1xuXG4gICAgSU5TRVJUIE9SIElHTk9SRSBJTlRPIHJldmlld19sb2dzX25ldyAoaWQsIGZsYXNoY2FyZF9pZCwgc2Vzc2lvbl9pZCwgbGFzdF9yZXZpZXdlZF9hdCwgc2hvd25fYXQsIHJldmlld2VkX2F0LCByYXRpbmcsIHJhdGluZ19sYWJlbCwgdGltZV9lbGFwc2VkX21zLCBvbGRfc3RhdGUsIG9sZF9yZXBldGl0aW9ucywgb2xkX2xhcHNlcywgb2xkX3N0YWJpbGl0eSwgb2xkX2RpZmZpY3VsdHksIG5ld19zdGF0ZSwgbmV3X3JlcGV0aXRpb25zLCBuZXdfbGFwc2VzLCBuZXdfc3RhYmlsaXR5LCBuZXdfZGlmZmljdWx0eSwgb2xkX2ludGVydmFsX21pbnV0ZXMsIG5ld19pbnRlcnZhbF9taW51dGVzLCBvbGRfZHVlX2F0LCBuZXdfZHVlX2F0LCBlbGFwc2VkX2RheXMsIHJldHJpZXZhYmlsaXR5LCByZXF1ZXN0X3JldGVudGlvbiwgcHJvZmlsZSwgbWF4aW11bV9pbnRlcnZhbF9kYXlzLCBtaW5fbWludXRlcywgZnNyc193ZWlnaHRzX3ZlcnNpb24sIHNjaGVkdWxlcl92ZXJzaW9uLCBub3RlX21vZGVsX2lkLCBjYXJkX3RlbXBsYXRlX2lkLCBjb250ZW50X2hhc2gsIGNsaWVudClcbiAgICBTRUxFQ1QgJHtyZXZpZXdMb2dzU2VsZWN0fSBGUk9NIHJldmlld19sb2dzIFdIRVJFIEVYSVNUUyAoU0VMRUNUIDEgRlJPTSBzcWxpdGVfbWFzdGVyIFdIRVJFIHR5cGU9J3RhYmxlJyBBTkQgbmFtZT0ncmV2aWV3X2xvZ3MnKTtcblxuICAgIElOU0VSVCBPUiBJR05PUkUgSU5UTyByZXZpZXdfc2Vzc2lvbnNfbmV3IChpZCwgZGVja19pZCwgc3RhcnRlZF9hdCwgZW5kZWRfYXQsIGdvYWxfdG90YWwsIGRvbmVfdW5pcXVlKVxuICAgIFNFTEVDVCAke3Jldmlld1Nlc3Npb25zU2VsZWN0fSBGUk9NIHJldmlld19zZXNzaW9ucyBXSEVSRSBFWElTVFMgKFNFTEVDVCAxIEZST00gc3FsaXRlX21hc3RlciBXSEVSRSB0eXBlPSd0YWJsZScgQU5EIG5hbWU9J3Jldmlld19sb2dzJyk7XG5cbiAgICAtLSBEcm9wIG9sZCB0YWJsZXNcbiAgICBEUk9QIFRBQkxFIElGIEVYSVNUUyByZXZpZXdfbG9ncztcbiAgICBEUk9QIFRBQkxFIElGIEVYSVNUUyBmbGFzaGNhcmRzO1xuICAgIERST1AgVEFCTEUgSUYgRVhJU1RTIGRlY2tzO1xuICAgIERST1AgVEFCTEUgSUYgRVhJU1RTIHJldmlld19zZXNzaW9ucztcblxuICAgIC0tIFJlbmFtZSBuZXcgdGFibGVzXG4gICAgQUxURVIgVEFCTEUgZGVja3NfbmV3IFJFTkFNRSBUTyBkZWNrcztcbiAgICBBTFRFUiBUQUJMRSBmbGFzaGNhcmRzX25ldyBSRU5BTUUgVE8gZmxhc2hjYXJkcztcbiAgICBBTFRFUiBUQUJMRSByZXZpZXdfc2Vzc2lvbnNfbmV3IFJFTkFNRSBUTyByZXZpZXdfc2Vzc2lvbnM7XG4gICAgQUxURVIgVEFCTEUgcmV2aWV3X2xvZ3NfbmV3IFJFTkFNRSBUTyByZXZpZXdfbG9ncztcblxuICAgIC0tIENyZWF0ZSBpbmRleGVzXG4gICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2ZsYXNoY2FyZHNfZGVja19pZCBPTiBmbGFzaGNhcmRzKGRlY2tfaWQpO1xuICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9mbGFzaGNhcmRzX2R1ZV9kYXRlIE9OIGZsYXNoY2FyZHMoZHVlX2RhdGUpO1xuICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9yZXZpZXdfc2Vzc2lvbnNfZGVja19pZCBPTiByZXZpZXdfc2Vzc2lvbnMoZGVja19pZCk7XG4gICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X3Jldmlld19sb2dzX2ZsYXNoY2FyZF9pZCBPTiByZXZpZXdfbG9ncyhmbGFzaGNhcmRfaWQpO1xuICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9yZXZpZXdfbG9nc19zZXNzaW9uX2lkIE9OIHJldmlld19sb2dzKHNlc3Npb25faWQpO1xuICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9yZXZpZXdfbG9nc19yZXZpZXdlZF9hdCBPTiByZXZpZXdfbG9ncyhyZXZpZXdlZF9hdCk7XG5cbiAgICAtLSBTZXQgc2NoZW1hIHZlcnNpb25cbiAgICBQUkFHTUEgdXNlcl92ZXJzaW9uID0gJHtDVVJSRU5UX1NDSEVNQV9WRVJTSU9OfTtcblxuICAgIENPTU1JVDtcbiAgICBQUkFHTUEgZm9yZWlnbl9rZXlzID0gT047XG4gIGA7XG59XG5cbi8vIE1pZ3JhdGlvbiBoZWxwZXIgZnVuY3Rpb25zXG5cbi8vIFNRTCBRdWVyeSBDb25zdGFudHNcbmV4cG9ydCBjb25zdCBTUUxfUVVFUklFUyA9IHtcbiAgLy8gRGVjayBvcGVyYXRpb25zXG4gIElOU0VSVF9ERUNLOiBgXG4gICAgSU5TRVJUIE9SIFJFUExBQ0UgSU5UTyBkZWNrcyAoXG4gICAgICBpZCwgbmFtZSwgZmlsZXBhdGgsIHRhZywgbGFzdF9yZXZpZXdlZCwgY29uZmlnLCBjcmVhdGVkLCBtb2RpZmllZFxuICAgICkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KVxuICBgLFxuXG4gIEdFVF9ERUNLX0JZX1RBRzogYFNFTEVDVCAqIEZST00gZGVja3MgV0hFUkUgdGFnID0gP2AsXG5cbiAgR0VUX0RFQ0tfQllfRklMRVBBVEg6IGBTRUxFQ1QgKiBGUk9NIGRlY2tzIFdIRVJFIGZpbGVwYXRoID0gP2AsXG5cbiAgR0VUX0RFQ0tfQllfSUQ6IGBTRUxFQ1QgKiBGUk9NIGRlY2tzIFdIRVJFIGlkID0gP2AsXG5cbiAgR0VUX0FMTF9ERUNLUzogYFNFTEVDVCAqIEZST00gZGVja3MgT1JERVIgQlkgbmFtZWAsXG5cbiAgVVBEQVRFX0RFQ0tfVElNRVNUQU1QOiBgXG4gICAgVVBEQVRFIGRlY2tzXG4gICAgU0VUIG1vZGlmaWVkID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgLFxuXG4gIFVQREFURV9ERUNLX0xBU1RfUkVWSUVXRUQ6IGBcbiAgICBVUERBVEUgZGVja3NcbiAgICBTRVQgbGFzdF9yZXZpZXdlZCA9ID8sIG1vZGlmaWVkID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgLFxuXG4gIFJFTkFNRV9ERUNLOiBgXG4gICAgVVBEQVRFIGRlY2tzXG4gICAgU0VUIGlkID0gPywgbmFtZSA9ID8sIGZpbGVwYXRoID0gPywgbW9kaWZpZWQgPSA/XG4gICAgV0hFUkUgaWQgPSA/XG4gIGAsXG5cbiAgREVMRVRFX0RFQ0tfQllfRklMRVBBVEg6IGBERUxFVEUgRlJPTSBkZWNrcyBXSEVSRSBmaWxlcGF0aCA9ID9gLFxuXG4gIERFTEVURV9ERUNLOiBgREVMRVRFIEZST00gZGVja3MgV0hFUkUgaWQgPSA/YCxcblxuICAvLyBGbGFzaGNhcmQgb3BlcmF0aW9uc1xuICBJTlNFUlRfRkxBU0hDQVJEOiBgXG4gICAgSU5TRVJUIE9SIFJFUExBQ0UgSU5UTyBmbGFzaGNhcmRzIChcbiAgICAgIGlkLCBkZWNrX2lkLCBmcm9udCwgYmFjaywgdHlwZSwgc291cmNlX2ZpbGUsIGNvbnRlbnRfaGFzaCxcbiAgICAgIHN0YXRlLCBkdWVfZGF0ZSwgaW50ZXJ2YWwsIHJlcGV0aXRpb25zLFxuICAgICAgZGlmZmljdWx0eSwgc3RhYmlsaXR5LCBsYXBzZXMsIGxhc3RfcmV2aWV3ZWQsIGNyZWF0ZWQsIG1vZGlmaWVkXG4gICAgKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pXG5cbiAgYCxcblxuICBERUxFVEVfRkxBU0hDQVJEOiBgREVMRVRFIEZST00gZmxhc2hjYXJkcyBXSEVSRSBpZCA9ID9gLFxuXG4gIFVQREFURV9GTEFTSENBUkRfREVDS19JRFM6IGBcbiAgICBVUERBVEUgZmxhc2hjYXJkcyBTRVQgZGVja19pZCA9ID8gV0hFUkUgZGVja19pZCA9ID9cbiAgYCxcblxuICBHRVRfRkxBU0hDQVJEU19CWV9ERUNLOiBgU0VMRUNUICogRlJPTSBmbGFzaGNhcmRzIFdIRVJFIGRlY2tfaWQgPSA/IE9SREVSIEJZIGNyZWF0ZWRgLFxuXG4gIEdFVF9EVUVfRkxBU0hDQVJEUzogYFNFTEVDVCAqIEZST00gZmxhc2hjYXJkcyBXSEVSRSBkZWNrX2lkID0gPyBBTkQgZHVlX2RhdGUgPD0gPyBPUkRFUiBCWSBkdWVfZGF0ZWAsXG5cbiAgREVMRVRFX0ZMQVNIQ0FSRFNfQllfRklMRTogYERFTEVURSBGUk9NIGZsYXNoY2FyZHMgV0hFUkUgc291cmNlX2ZpbGUgPSA/YCxcblxuICBHRVRfTkVXX0NBUkRTX0ZPUl9SRVZJRVc6IGBcbiAgICBTRUxFQ1QgKiBGUk9NIGZsYXNoY2FyZHNcbiAgICBXSEVSRSBkZWNrX2lkID0gPyBBTkQgZHVlX2RhdGUgPD0gPyBBTkQgc3RhdGUgPSAnbmV3J1xuICAgIE9SREVSIEJZIGR1ZV9kYXRlXG4gIGAsXG5cbiAgR0VUX1JFVklFV19DQVJEU19GT1JfUkVWSUVXOiBgXG4gICAgU0VMRUNUICogRlJPTSBmbGFzaGNhcmRzXG4gICAgV0hFUkUgZGVja19pZCA9ID8gQU5EIGR1ZV9kYXRlIDw9ID8gQU5EIHN0YXRlID0gJ3JldmlldydcbiAgICBPUkRFUiBCWSBkdWVfZGF0ZVxuICBgLFxuXG4gIC8vIFJldmlldyBsb2cgb3BlcmF0aW9uc1xuICBJTlNFUlRfUkVWSUVXX0xPRzogYFxuICAgIElOU0VSVCBJTlRPIHJldmlld19sb2dzIChcbiAgICAgIGlkLCBmbGFzaGNhcmRfaWQsIHNlc3Npb25faWQsIGxhc3RfcmV2aWV3ZWRfYXQsIHNob3duX2F0LCByZXZpZXdlZF9hdCxcbiAgICAgIHJhdGluZywgcmF0aW5nX2xhYmVsLCB0aW1lX2VsYXBzZWRfbXMsXG4gICAgICBvbGRfc3RhdGUsIG9sZF9yZXBldGl0aW9ucywgb2xkX2xhcHNlcywgb2xkX3N0YWJpbGl0eSwgb2xkX2RpZmZpY3VsdHksXG4gICAgICBuZXdfc3RhdGUsIG5ld19yZXBldGl0aW9ucywgbmV3X2xhcHNlcywgbmV3X3N0YWJpbGl0eSwgbmV3X2RpZmZpY3VsdHksXG4gICAgICBvbGRfaW50ZXJ2YWxfbWludXRlcywgbmV3X2ludGVydmFsX21pbnV0ZXMsIG9sZF9kdWVfYXQsIG5ld19kdWVfYXQsXG4gICAgICBlbGFwc2VkX2RheXMsIHJldHJpZXZhYmlsaXR5LFxuICAgICAgcmVxdWVzdF9yZXRlbnRpb24sIHByb2ZpbGUsIG1heGltdW1faW50ZXJ2YWxfZGF5cywgbWluX21pbnV0ZXMsXG4gICAgICBmc3JzX3dlaWdodHNfdmVyc2lvbiwgc2NoZWR1bGVyX3ZlcnNpb24sXG4gICAgICBub3RlX21vZGVsX2lkLCBjYXJkX3RlbXBsYXRlX2lkLCBjb250ZW50X2hhc2gsIGNsaWVudFxuICAgICkgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KVxuICBgLFxuXG4gIEdFVF9MQVRFU1RfUkVWSUVXX0xPRzogYFxuICAgIFNFTEVDVFxuICAgICAgcmwuaWQsIHJsLmZsYXNoY2FyZF9pZCwgcmwubGFzdF9yZXZpZXdlZF9hdCwgcmwuc2hvd25fYXQsIHJsLnJldmlld2VkX2F0LFxuICAgICAgcmwucmF0aW5nLCBybC5yYXRpbmdfbGFiZWwsIHJsLnRpbWVfZWxhcHNlZF9tcyxcbiAgICAgIHJsLm9sZF9zdGF0ZSwgcmwub2xkX3JlcGV0aXRpb25zLCBybC5vbGRfbGFwc2VzLCBybC5vbGRfc3RhYmlsaXR5LCBybC5vbGRfZGlmZmljdWx0eSxcbiAgICAgIHJsLm5ld19zdGF0ZSwgcmwubmV3X3JlcGV0aXRpb25zLCBybC5uZXdfbGFwc2VzLCBybC5uZXdfc3RhYmlsaXR5LCBybC5uZXdfZGlmZmljdWx0eSxcbiAgICAgIHJsLm9sZF9pbnRlcnZhbF9taW51dGVzLCBybC5uZXdfaW50ZXJ2YWxfbWludXRlcywgcmwub2xkX2R1ZV9hdCwgcmwubmV3X2R1ZV9hdCxcbiAgICAgIHJsLmVsYXBzZWRfZGF5cywgcmwucmV0cmlldmFiaWxpdHksXG4gICAgICBybC5yZXF1ZXN0X3JldGVudGlvbiwgcmwucHJvZmlsZSwgcmwubWF4aW11bV9pbnRlcnZhbF9kYXlzLCBybC5taW5fbWludXRlcyxcbiAgICAgIHJsLmZzcnNfd2VpZ2h0c192ZXJzaW9uLCBybC5zY2hlZHVsZXJfdmVyc2lvbixcbiAgICAgIHJsLm5vdGVfbW9kZWxfaWQsIHJsLmNhcmRfdGVtcGxhdGVfaWQsIHJsLmNvbnRlbnRfaGFzaCwgcmwuY2xpZW50XG4gICAgRlJPTSByZXZpZXdfbG9ncyBybFxuICAgIFdIRVJFIHJsLmZsYXNoY2FyZF9pZCA9ID9cbiAgICBPUkRFUiBCWSBybC5yZXZpZXdlZF9hdCBERVNDXG4gICAgTElNSVQgMVxuICBgLFxuXG4gIC8vIERhaWx5IHJldmlldyBjb3VudHNcbiAgQ09VTlRfTkVXX0NBUkRTX1RPREFZOiBgXG4gICAgU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gcmV2aWV3X2xvZ3MgcmxcbiAgICBKT0lOIGZsYXNoY2FyZHMgZiBPTiBybC5mbGFzaGNhcmRfaWQgPSBmLmlkXG4gICAgV0hFUkUgZi5kZWNrX2lkID0gP1xuICAgICAgQU5EIHJsLnJldmlld2VkX2F0ID49ID9cbiAgICAgIEFORCBybC5yZXZpZXdlZF9hdCA8PSA/XG4gICAgICBBTkQgKHJsLm9sZF9pbnRlcnZhbF9taW51dGVzID0gMCBPUiBmLnJlcGV0aXRpb25zID0gMSlcbiAgYCxcblxuICBDT1VOVF9SRVZJRVdfQ0FSRFNfVE9EQVk6IGBcbiAgICBTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSByZXZpZXdfbG9ncyBybFxuICAgIEpPSU4gZmxhc2hjYXJkcyBmIE9OIHJsLmZsYXNoY2FyZF9pZCA9IGYuaWRcbiAgICBXSEVSRSBmLmRlY2tfaWQgPSA/XG4gICAgICBBTkQgcmwucmV2aWV3ZWRfYXQgPj0gPyBBTkQgcmwucmV2aWV3ZWRfYXQgPD0gP1xuICAgICAgQU5EIHJsLm9sZF9pbnRlcnZhbF9taW51dGVzID4gMFxuICBgLFxuXG4gIC8vIFN0YXRpc3RpY3MgcXVlcmllc1xuICBDT1VOVF9ORVdfQ0FSRFM6IGBcbiAgICBTRUxFQ1QgQ09VTlQoKikgRlJPTSBmbGFzaGNhcmRzXG4gICAgV0hFUkUgZGVja19pZCA9ID8gQU5EIHN0YXRlID0gJ25ldycgQU5EIGR1ZV9kYXRlIDw9ID9cbiAgYCxcblxuICBDT1VOVF9EVUVfQ0FSRFM6IGBcbiAgICBTRUxFQ1QgQ09VTlQoKikgRlJPTSBmbGFzaGNhcmRzXG4gICAgV0hFUkUgZGVja19pZCA9ID8gQU5EIHN0YXRlID0gJ3JldmlldycgQU5EIGR1ZV9kYXRlIDw9ID9cbiAgYCxcblxuICBDT1VOVF9UT1RBTF9DQVJEUzogYFxuICAgIFNFTEVDVCBDT1VOVCgqKSBGUk9NIGZsYXNoY2FyZHMgV0hFUkUgZGVja19pZCA9ID9cbiAgYCxcblxuICBHRVRfUkVWSUVXX0NPVU5UU19CWV9EQVRFOiBgXG4gICAgU0VMRUNUIERBVEUocmV2aWV3ZWRfYXQpIGFzIHJldmlld19kYXRlLCBDT1VOVCgqKSBhcyBjb3VudFxuICAgIEZST00gcmV2aWV3X2xvZ3NcbiAgICBXSEVSRSByZXZpZXdlZF9hdCA+PSA/IEFORCByZXZpZXdlZF9hdCA8PSA/XG4gICAgR1JPVVAgQlkgREFURShyZXZpZXdlZF9hdClcbiAgICBPUkRFUiBCWSByZXZpZXdfZGF0ZVxuICBgLFxuXG4gIC8vIE1pZ3JhdGlvbiBoZWxwZXJzXG4gIENIRUNLX0VYSVNUSU5HX1RBQkxFUzogYFxuICAgIFNFTEVDVCBuYW1lIEZST00gc3FsaXRlX21hc3RlclxuICAgIFdIRVJFIHR5cGU9J3RhYmxlJyBBTkQgbmFtZSBJTiAoJ2RlY2tzJywgJ2ZsYXNoY2FyZHMnLCAncmV2aWV3X2xvZ3MnKVxuICBgLFxuXG4gIC8vIFN0YXRpc3RpY3MgcXVlcmllcyBmb3Igb3ZlcmFsbCBzdGF0c1xuICBHRVRfREFJTFlfU1RBVFM6IGBcbiAgICBTRUxFQ1RcbiAgICAgIERBVEUocmV2aWV3ZWRfYXQpIGFzIGRhdGUsXG4gICAgICBDT1VOVCgqKSBhcyByZXZpZXdzLFxuICAgICAgQVZHKHRpbWVfZWxhcHNlZF9tcyAvIDEwMDAuMCkgYXMgYXZnX3RpbWVfc2Vjb25kcyxcbiAgICAgIFNVTShDQVNFIFdIRU4gb2xkX3JlcGV0aXRpb25zID0gMCBUSEVOIDEgRUxTRSAwIEVORCkgYXMgbmV3X2NhcmRzLFxuICAgICAgU1VNKENBU0UgV0hFTiBvbGRfcmVwZXRpdGlvbnMgPiAwIEFORCBvbGRfcmVwZXRpdGlvbnMgPCAzIFRIRU4gMSBFTFNFIDAgRU5EKSBhcyBsZWFybmluZ19jYXJkcyxcbiAgICAgIFNVTShDQVNFIFdIRU4gb2xkX3JlcGV0aXRpb25zID49IDMgVEhFTiAxIEVMU0UgMCBFTkQpIGFzIHJldmlld19jYXJkcyxcbiAgICAgIEFWRyhDQVNFIFdIRU4gcmF0aW5nID49IDMgVEhFTiAxLjAgRUxTRSAwLjAgRU5EKSBhcyBjb3JyZWN0X3JhdGVcbiAgICBGUk9NIHJldmlld19sb2dzIHJsXG4gICAgV0hFUkUgcmwucmV2aWV3ZWRfYXQgPj0gPyBBTkQgcmwucmV2aWV3ZWRfYXQgPD0gP1xuICAgIEdST1VQIEJZIERBVEUocmV2aWV3ZWRfYXQpXG4gICAgT1JERVIgQlkgZGF0ZVxuICBgLFxuXG4gIEdFVF9EQUlMWV9TVEFUU19PVkVSQUxMOiBgXG4gICAgU0VMRUNUXG4gICAgICBEQVRFKHJldmlld2VkX2F0KSBhcyBkYXRlLFxuICAgICAgQ09VTlQoKikgYXMgcmV2aWV3cyxcbiAgICAgIENPVU5UKENBU0UgV0hFTiByYXRpbmdfbGFiZWwgIT0gJ2FnYWluJyBUSEVOIDEgRU5EKSBhcyBjb3JyZWN0LFxuICAgICAgQ09VTlQoQ0FTRSBXSEVOIGYuc3RhdGUgPSAnbmV3JyBUSEVOIDEgRU5EKSBhcyBuZXdfY2FyZHMsXG4gICAgICBDT1VOVChDQVNFIFdIRU4gZi5zdGF0ZSA9ICdyZXZpZXcnIFRIRU4gMSBFTkQpIGFzIHJldmlld19jYXJkc1xuICAgIEZST00gcmV2aWV3X2xvZ3MgcmxcbiAgICBKT0lOIGZsYXNoY2FyZHMgZiBPTiBybC5mbGFzaGNhcmRfaWQgPSBmLmlkXG4gICAgV0hFUkUgREFURShyZXZpZXdlZF9hdCkgPj0gREFURSg/KVxuICAgIEdST1VQIEJZIERBVEUocmV2aWV3ZWRfYXQpXG4gICAgT1JERVIgQlkgZGF0ZSBERVNDXG4gIGAsXG5cbiAgR0VUX0NBUkRfU1RBVFM6IGBcbiAgICBTRUxFQ1RcbiAgICAgIENBU0VcbiAgICAgICAgV0hFTiBmLnN0YXRlID0gJ25ldycgVEhFTiAnbmV3J1xuICAgICAgICBXSEVOIGYuc3RhdGUgPSAncmV2aWV3JyBBTkQgZi5pbnRlcnZhbCA+IDMwMjQwIFRIRU4gJ21hdHVyZSdcbiAgICAgICAgRUxTRSAncmV2aWV3J1xuICAgICAgRU5EIGFzIGNhcmRfdHlwZSxcbiAgICAgIENPVU5UKCopIGFzIGNvdW50XG4gICAgRlJPTSBmbGFzaGNhcmRzIGZcbiAgICBHUk9VUCBCWSBjYXJkX3R5cGVcbiAgYCxcblxuICBHRVRfQU5TV0VSX0JVVFRPTl9TVEFUUzogYFxuICAgIFNFTEVDVFxuICAgICAgcmwucmF0aW5nX2xhYmVsLFxuICAgICAgQ09VTlQoKikgYXMgY291bnRcbiAgICBGUk9NIHJldmlld19sb2dzIHJsXG4gICAgV0hFUkUgcmwucmV2aWV3ZWRfYXQgPj0gPyBBTkQgcmwucmV2aWV3ZWRfYXQgPD0gP1xuICAgIEdST1VQIEJZIHJsLnJhdGluZ19sYWJlbFxuICBgLFxuXG4gIEdFVF9JTlRFUlZBTF9ESVNUUklCVVRJT046IGBcbiAgICBTRUxFQ1RcbiAgICAgIENBU0VcbiAgICAgICAgV0hFTiBmLmludGVydmFsIDwgMTQ0MCBUSEVOICc8MWQnXG4gICAgICAgIFdIRU4gZi5pbnRlcnZhbCA8IDEwMDgwIFRIRU4gJzEtN2QnXG4gICAgICAgIFdIRU4gZi5pbnRlcnZhbCA8IDQzMjAwIFRIRU4gJzEtNHcnXG4gICAgICAgIFdIRU4gZi5pbnRlcnZhbCA8IDEyOTYwMCBUSEVOICcxLTNtJ1xuICAgICAgICBXSEVOIGYuaW50ZXJ2YWwgPCA1MjU2MDAgVEhFTiAnMy0xMm0nXG4gICAgICAgIEVMU0UgJz4xeSdcbiAgICAgIEVORCBhcyBpbnRlcnZhbF9yYW5nZSxcbiAgICAgIENPVU5UKCopIGFzIGNvdW50XG4gICAgRlJPTSBmbGFzaGNhcmRzIGZcbiAgICBXSEVSRSBmLnN0YXRlID0gJ3JldmlldydcbiAgICBHUk9VUCBCWSBpbnRlcnZhbF9yYW5nZVxuICAgIE9SREVSIEJZXG4gICAgICBDQVNFIGludGVydmFsX3JhbmdlXG4gICAgICAgIFdIRU4gJzwxZCcgVEhFTiAxXG4gICAgICAgIFdIRU4gJzEtN2QnIFRIRU4gMlxuICAgICAgICBXSEVOICcxLTR3JyBUSEVOIDNcbiAgICAgICAgV0hFTiAnMS0zbScgVEhFTiA0XG4gICAgICAgIFdIRU4gJzMtMTJtJyBUSEVOIDVcbiAgICAgICAgV0hFTiAnPjF5JyBUSEVOIDZcbiAgICAgIEVORFxuICBgLFxuXG4gIEdFVF9GT1JFQ0FTVF9EVUVfQ09VTlQ6IGBcbiAgICBTRUxFQ1QgQ09VTlQoKikgYXMgZHVlX2NvdW50XG4gICAgRlJPTSBmbGFzaGNhcmRzIGZcbiAgICBXSEVSRSBEQVRFKGYuZHVlX2RhdGUpID0gREFURSg/KVxuICBgLFxuXG4gIEdFVF9QQUNFX1NUQVRTOiBgXG4gICAgU0VMRUNUXG4gICAgICBBVkcocmwudGltZV9lbGFwc2VkX21zIC8gMTAwMC4wKSBhcyBhdmdfcGFjZSxcbiAgICAgIFNVTShybC50aW1lX2VsYXBzZWRfbXMgLyAxMDAwLjApIGFzIHRvdGFsX3RpbWVcbiAgICBGUk9NIHJldmlld19sb2dzIHJsXG4gICAgV0hFUkUgcmwucmV2aWV3ZWRfYXQgPj0gPyBBTkQgcmwucmV2aWV3ZWRfYXQgPD0gP1xuICAgICAgQU5EIHJsLnRpbWVfZWxhcHNlZF9tcyBJUyBOT1QgTlVMTFxuICAgICAgQU5EIHJsLnRpbWVfZWxhcHNlZF9tcyA+IDBcbiAgYCxcblxuICAvLyBSZXZpZXcgU2Vzc2lvbiBvcGVyYXRpb25zXG4gIElOU0VSVF9SRVZJRVdfU0VTU0lPTjogYFxuICAgIElOU0VSVCBJTlRPIHJldmlld19zZXNzaW9ucyAoXG4gICAgICBpZCwgZGVja19pZCwgc3RhcnRlZF9hdCwgZW5kZWRfYXQsIGdvYWxfdG90YWwsIGRvbmVfdW5pcXVlXG4gICAgKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8pXG4gIGAsXG5cbiAgR0VUX1JFVklFV19TRVNTSU9OX0JZX0lEOiBgU0VMRUNUICogRlJPTSByZXZpZXdfc2Vzc2lvbnMgV0hFUkUgaWQgPSA/YCxcblxuICBVUERBVEVfUkVWSUVXX1NFU1NJT05fRE9ORV9VTklRVUU6IGBcbiAgICBVUERBVEUgcmV2aWV3X3Nlc3Npb25zXG4gICAgU0VUIGRvbmVfdW5pcXVlID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgLFxuXG4gIFVQREFURV9SRVZJRVdfU0VTU0lPTl9FTkQ6IGBcbiAgICBVUERBVEUgcmV2aWV3X3Nlc3Npb25zXG4gICAgU0VUIGVuZGVkX2F0ID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgLFxuXG4gIEdFVF9BQ1RJVkVfUkVWSUVXX1NFU1NJT046IGBcbiAgICBTRUxFQ1QgKiBGUk9NIHJldmlld19zZXNzaW9uc1xuICAgIFdIRVJFIGRlY2tfaWQgPSA/IEFORCBlbmRlZF9hdCBJUyBOVUxMXG4gICAgT1JERVIgQlkgc3RhcnRlZF9hdCBERVNDXG4gICAgTElNSVQgMVxuICBgLFxuXG4gIENIRUNLX0NBUkRfUkVWSUVXRURfSU5fU0VTU0lPTjogYFxuICAgIFNFTEVDVCBDT1VOVCgqKSBhcyBjb3VudFxuICAgIEZST00gcmV2aWV3X2xvZ3NcbiAgICBXSEVSRSBzZXNzaW9uX2lkID0gPyBBTkQgZmxhc2hjYXJkX2lkID0gP1xuICBgLFxufTtcblxuLy8gQmFja3VwIHRhYmxlIGNyZWF0aW9uIFNRTCAtIG1hdGNoZXMgbWFpbiBkYXRhYmFzZSBzY2hlbWEgZXhhY3RseVxuZXhwb3J0IGNvbnN0IEJBQ0tVUF9UQUJMRVNfU1FMID0gYFxuICBDUkVBVEUgVEFCTEUgcmV2aWV3X2xvZ3MgKFxuICAgIGlkIFRFWFQgUFJJTUFSWSBLRVksXG4gICAgZmxhc2hjYXJkX2lkIFRFWFQgTk9UIE5VTEwsXG4gICAgc2Vzc2lvbl9pZCBURVhULFxuICAgIGxhc3RfcmV2aWV3ZWRfYXQgVEVYVCBOT1QgTlVMTCxcbiAgICBzaG93bl9hdCBURVhULFxuICAgIHJldmlld2VkX2F0IFRFWFQgTk9UIE5VTEwsXG4gICAgcmF0aW5nIElOVEVHRVIgTk9UIE5VTEwgQ0hFQ0sgKHJhdGluZyBJTiAoMSwgMiwgMywgNCkpLFxuICAgIHJhdGluZ19sYWJlbCBURVhUIE5PVCBOVUxMIENIRUNLIChyYXRpbmdfbGFiZWwgSU4gKCdhZ2FpbicsICdoYXJkJywgJ2dvb2QnLCAnZWFzeScpKSxcbiAgICB0aW1lX2VsYXBzZWRfbXMgSU5URUdFUixcbiAgICBvbGRfc3RhdGUgVEVYVCBOT1QgTlVMTCBDSEVDSyAob2xkX3N0YXRlIElOICgnbmV3JywgJ3JldmlldycpKSxcbiAgICBvbGRfcmVwZXRpdGlvbnMgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgb2xkX2xhcHNlcyBJTlRFR0VSIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgICBvbGRfc3RhYmlsaXR5IFJFQUwgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgIG9sZF9kaWZmaWN1bHR5IFJFQUwgTk9UIE5VTEwgREVGQVVMVCA1LjAsXG4gICAgbmV3X3N0YXRlIFRFWFQgTk9UIE5VTEwgQ0hFQ0sgKG5ld19zdGF0ZSBJTiAoJ25ldycsICdyZXZpZXcnKSksXG4gICAgbmV3X3JlcGV0aXRpb25zIElOVEVHRVIgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgIG5ld19sYXBzZXMgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgbmV3X3N0YWJpbGl0eSBSRUFMIE5PVCBOVUxMIERFRkFVTFQgMi41LFxuICAgIG5ld19kaWZmaWN1bHR5IFJFQUwgTk9UIE5VTEwgREVGQVVMVCA1LjAsXG4gICAgb2xkX2ludGVydmFsX21pbnV0ZXMgSU5URUdFUiBOT1QgTlVMTCxcbiAgICBuZXdfaW50ZXJ2YWxfbWludXRlcyBJTlRFR0VSIE5PVCBOVUxMLFxuICAgIG9sZF9kdWVfYXQgVEVYVCBOT1QgTlVMTCxcbiAgICBuZXdfZHVlX2F0IFRFWFQgTk9UIE5VTEwsXG4gICAgZWxhcHNlZF9kYXlzIFJFQUwgTk9UIE5VTEwsXG4gICAgcmV0cmlldmFiaWxpdHkgUkVBTCBOT1QgTlVMTCxcbiAgICByZXF1ZXN0X3JldGVudGlvbiBSRUFMIE5PVCBOVUxMLFxuICAgIHByb2ZpbGUgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdTVEFOREFSRCcgQ0hFQ0sgKHByb2ZpbGUgSU4gKCdJTlRFTlNJVkUnLCAnU1RBTkRBUkQnKSksXG4gICAgbWF4aW11bV9pbnRlcnZhbF9kYXlzIElOVEVHRVIgTk9UIE5VTEwsXG4gICAgbWluX21pbnV0ZXMgSU5URUdFUiBOT1QgTlVMTCxcbiAgICBmc3JzX3dlaWdodHNfdmVyc2lvbiBURVhUIE5PVCBOVUxMLFxuICAgIHNjaGVkdWxlcl92ZXJzaW9uIFRFWFQgTk9UIE5VTEwsXG4gICAgbm90ZV9tb2RlbF9pZCBURVhULFxuICAgIGNhcmRfdGVtcGxhdGVfaWQgVEVYVCxcbiAgICBjb250ZW50X2hhc2ggVEVYVCxcbiAgICBjbGllbnQgVEVYVFxuICApO1xuXG4gIENSRUFURSBUQUJMRSByZXZpZXdfc2Vzc2lvbnMgKFxuICAgIGlkIFRFWFQgUFJJTUFSWSBLRVksXG4gICAgZGVja19pZCBURVhUIE5PVCBOVUxMLFxuICAgIHN0YXJ0ZWRfYXQgVEVYVCBOT1QgTlVMTCxcbiAgICBlbmRlZF9hdCBURVhULFxuICAgIGdvYWxfdG90YWwgSU5URUdFUiBOT1QgTlVMTCxcbiAgICBkb25lX3VuaXF1ZSBJTlRFR0VSIE5PVCBOVUxMIERFRkFVTFQgMFxuICApO1xuYDtcbiIsICJpbXBvcnQgeyBEYXRhYmFzZSB9IGZyb20gXCJzcWwuanNcIjtcbmltcG9ydCB7XG4gIENSRUFURV9UQUJMRVNfU1FMLFxuICBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OLFxuICBidWlsZE1pZ3JhdGlvblNRTCxcbn0gZnJvbSBcIi4vc2NoZW1hc1wiO1xuXG4vLyBNaWdyYXRpb24gaGVscGVyIGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRTY2hlbWFWZXJzaW9uKGRiOiBEYXRhYmFzZSk6IG51bWJlciB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFBSQUdNQSB1c2VyX3ZlcnNpb25gKTtcbiAgICBsZXQgdmVyc2lvbiA9IDA7XG4gICAgaWYgKHN0bXQuc3RlcCgpKSB7XG4gICAgICBjb25zdCByb3cgPSBzdG10LmdldCgpO1xuICAgICAgdmVyc2lvbiA9IE51bWJlcihyb3dbMF0pIHx8IDA7XG4gICAgfVxuICAgIHN0bXQuZnJlZSgpO1xuICAgIHJldHVybiB2ZXJzaW9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiAwO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZWVkc01pZ3JhdGlvbihkYjogRGF0YWJhc2UpOiBib29sZWFuIHtcbiAgcmV0dXJuIGdldEN1cnJlbnRTY2hlbWFWZXJzaW9uKGRiKSAhPT0gQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGZyZXNoIGRhdGFiYXNlIHRhYmxlcyB3aGVuIG5vIGRhdGFiYXNlIGZpbGUgZXhpc3RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYWJsZXMoXG4gIGRiOiBEYXRhYmFzZSxcbiAgZGVidWdMb2c/OiAobWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkLFxuKTogdm9pZCB7XG4gIGNvbnN0IGxvZyA9IGRlYnVnTG9nIHx8ICgoKSA9PiB7fSk7XG5cbiAgdHJ5IHtcbiAgICBsb2coYENyZWF0aW5nIGZyZXNoIGRhdGFiYXNlIHNjaGVtYSAodmVyc2lvbiAke0NVUlJFTlRfU0NIRU1BX1ZFUlNJT059KWApO1xuICAgIGRiLnJ1bihDUkVBVEVfVEFCTEVTX1NRTCk7XG4gICAgbG9nKGBcdTI3MDUgRGF0YWJhc2Ugc2NoZW1hIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5YCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nKGBcdTI3NEMgU2NoZW1hIGNyZWF0aW9uIGZhaWxlZDogJHtlcnJvcn1gKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFNjaGVtYSBjcmVhdGlvbiBmYWlsZWQ6ICR7ZXJyb3J9YCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1pZ3JhdGUoXG4gIGRiOiBEYXRhYmFzZSxcbiAgZGVidWdMb2c/OiAobWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkLFxuKTogdm9pZCB7XG4gIGNvbnN0IGxvZyA9IGRlYnVnTG9nIHx8ICgoKSA9PiB7fSk7XG4gIGNvbnN0IGN1cnJlbnRWZXJzaW9uID0gZ2V0Q3VycmVudFNjaGVtYVZlcnNpb24oZGIpO1xuXG4gIGlmIChjdXJyZW50VmVyc2lvbiA9PT0gQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTikge1xuICAgIGxvZyhgU2NoZW1hIGlzIGFscmVhZHkgdXAgdG8gZGF0ZSAodmVyc2lvbiAke0NVUlJFTlRfU0NIRU1BX1ZFUlNJT059KWApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxvZyhcbiAgICBgTWlncmF0aW5nIHNjaGVtYSBmcm9tIHZlcnNpb24gJHtjdXJyZW50VmVyc2lvbn0gdG8gJHtDVVJSRU5UX1NDSEVNQV9WRVJTSU9OfWAsXG4gICk7XG5cbiAgdHJ5IHtcbiAgICAvLyBDcmVhdGUgdGFibGVzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbiAgICBkYi5ydW4oQ1JFQVRFX1RBQkxFU19TUUwpO1xuICAgIGNvbnN0IG1pZ3JhdGlvblNRTCA9IGJ1aWxkTWlncmF0aW9uU1FMKGRiKTtcbiAgICBkYi5ydW4obWlncmF0aW9uU1FMKTtcbiAgICBsb2coYFx1MjcwNSBNaWdyYXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseWApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZyhgXHUyNzRDIE1pZ3JhdGlvbiBmYWlsZWQ6ICR7ZXJyb3J9YCk7XG4gIH1cbn1cbiIsICIvKipcbiAqIFVJIHV0aWxpdHkgZnVuY3Rpb25zIGZvciBwcmV2ZW50aW5nIGJsb2NraW5nIG9wZXJhdGlvbnNcbiAqL1xuXG4vKipcbiAqIFlpZWxkIGNvbnRyb2wgdG8gdGhlIFVJIHRocmVhZCB0byBwcmV2ZW50IGJsb2NraW5nXG4gKiBVc2VzIHJlcXVlc3RBbmltYXRpb25GcmFtZSBpbiBicm93c2VyIGVudmlyb25tZW50cywgc2V0VGltZW91dCBpbiBOb2RlLmpzICh0ZXN0cylcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHlpZWxkVG9VSSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBpZiAodHlwZW9mIHJlcXVlc3RBbmltYXRpb25GcmFtZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUobnVsbCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUobnVsbCksIDApO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogWWllbGQgY29udHJvbCBldmVyeSBOIGl0ZXJhdGlvbnMgdG8gcHJldmVudCBibG9ja2luZyBkdXJpbmcgbG9vcHNcbiAqIEBwYXJhbSBjdXJyZW50SW5kZXggLSBDdXJyZW50IGl0ZXJhdGlvbiBpbmRleFxuICogQHBhcmFtIHlpZWxkSW50ZXJ2YWwgLSBZaWVsZCBldmVyeSBOIGl0ZXJhdGlvbnMgKGRlZmF1bHQ6IDUwKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24geWllbGRFdmVyeShcbiAgY3VycmVudEluZGV4OiBudW1iZXIsXG4gIHlpZWxkSW50ZXJ2YWw6IG51bWJlciA9IDEwMCxcbik6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoY3VycmVudEluZGV4ID4gMCAmJiBjdXJyZW50SW5kZXggJSB5aWVsZEludGVydmFsID09PSAwKSB7XG4gICAgYXdhaXQgeWllbGRUb1VJKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlIGEgZnVuY3Rpb24gd2l0aCBhdXRvbWF0aWMgeWllbGRpbmcgZm9yIGxvbmctcnVubmluZyBvcGVyYXRpb25zXG4gKiBAcGFyYW0gaXRlbXMgLSBBcnJheSBvZiBpdGVtcyB0byBwcm9jZXNzXG4gKiBAcGFyYW0gcHJvY2Vzc29yIC0gRnVuY3Rpb24gdG8gcHJvY2VzcyBlYWNoIGl0ZW1cbiAqIEBwYXJhbSB5aWVsZEludGVydmFsIC0gWWllbGQgZXZlcnkgTiBpdGVtcyAoZGVmYXVsdDogNTApXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzV2l0aFlpZWxkaW5nPFQsIFI+KFxuICBpdGVtczogVFtdLFxuICBwcm9jZXNzb3I6IChpdGVtOiBULCBpbmRleDogbnVtYmVyKSA9PiBSIHwgUHJvbWlzZTxSPixcbiAgeWllbGRJbnRlcnZhbDogbnVtYmVyID0gNTAsXG4pOiBQcm9taXNlPFJbXT4ge1xuICBjb25zdCByZXN1bHRzOiBSW10gPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvY2Vzc29yKGl0ZW1zW2ldLCBpKTtcbiAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcblxuICAgIGF3YWl0IHlpZWxkRXZlcnkoaSwgeWllbGRJbnRlcnZhbCk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0cztcbn1cbiIsICJpbXBvcnQgeyBURmlsZSwgVmF1bHQsIE1ldGFkYXRhQ2FjaGUsIENhY2hlZE1ldGFkYXRhLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7XG4gIERlY2ssXG4gIEZsYXNoY2FyZCxcbiAgUmV2aWV3TG9nLFxuICBERUZBVUxUX0RFQ0tfQ09ORklHLFxufSBmcm9tIFwiLi4vZGF0YWJhc2UvdHlwZXNcIjtcbmltcG9ydCB7IERhdGFiYXNlU2VydmljZSB9IGZyb20gXCIuLi9kYXRhYmFzZS9EYXRhYmFzZVNlcnZpY2VcIjtcbmltcG9ydCB7IHlpZWxkVG9VSSwgeWllbGRFdmVyeSB9IGZyb20gXCIuLi91dGlscy91aVwiO1xuaW1wb3J0IHsgTG9nZ2VyLCBmb3JtYXRUaW1lIH0gZnJvbSBcIi4uL3V0aWxzL2xvZ2dpbmdcIjtcbmltcG9ydCB7IEZpbGVGaWx0ZXIgfSBmcm9tIFwiLi4vdXRpbHMvZmlsZUZpbHRlclwiO1xuaW1wb3J0IERlY2tzUGx1Z2luIGZyb20gXCJAL21haW5cIjtcblxuLy8gTWF4aW11bSBudW1iZXIgb2YgZmxhc2hjYXJkcyB0byBwcm9jZXNzIHBlciBkZWNrIGZvciBwZXJmb3JtYW5jZVxuY29uc3QgTUFYX0ZMQVNIQ0FSRFNfUEVSX0RFQ0sgPSA1MDAwMDtcblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRGbGFzaGNhcmQge1xuICBmcm9udDogc3RyaW5nO1xuICBiYWNrOiBzdHJpbmc7XG4gIHR5cGU6IFwiaGVhZGVyLXBhcmFncmFwaFwiIHwgXCJ0YWJsZVwiO1xufVxuXG5leHBvcnQgY2xhc3MgRGVja01hbmFnZXIge1xuICBwcml2YXRlIHZhdWx0OiBWYXVsdDtcbiAgcHJpdmF0ZSBtZXRhZGF0YUNhY2hlOiBNZXRhZGF0YUNhY2hlO1xuICBwcml2YXRlIGRiOiBEYXRhYmFzZVNlcnZpY2U7XG4gIHByaXZhdGUgcGx1Z2luPzogRGVja3NQbHVnaW47XG4gIHByaXZhdGUgbG9nZ2VyPzogTG9nZ2VyO1xuICBwcml2YXRlIGZpbGVGaWx0ZXI6IEZpbGVGaWx0ZXI7XG5cbiAgLy8gUHJlLWNvbXBpbGVkIHJlZ2V4IHBhdHRlcm5zIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgSEVBREVSX1JFR0VYID0gL14oI3sxLDZ9KVxccysvO1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBUQUJMRV9ST1dfUkVHRVggPSAvXlxcfC4qXFx8JC87XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFRBQkxFX1NFUEFSQVRPUl9SRUdFWCA9IC9eXFx8W1xccy1dK1xcfFtcXHMtXStcXHwkLztcblxuICBjb25zdHJ1Y3RvcihcbiAgICB2YXVsdDogVmF1bHQsXG4gICAgbWV0YWRhdGFDYWNoZTogTWV0YWRhdGFDYWNoZSxcbiAgICBkYjogRGF0YWJhc2VTZXJ2aWNlLFxuICAgIHBsdWdpbj86IERlY2tzUGx1Z2luLFxuICAgIGZvbGRlclNlYXJjaFBhdGg/OiBzdHJpbmcsXG4gICkge1xuICAgIHRoaXMudmF1bHQgPSB2YXVsdDtcbiAgICB0aGlzLm1ldGFkYXRhQ2FjaGUgPSBtZXRhZGF0YUNhY2hlO1xuICAgIHRoaXMuZGIgPSBkYjtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmZpbGVGaWx0ZXIgPSBuZXcgRmlsZUZpbHRlcihmb2xkZXJTZWFyY2hQYXRoKTtcbiAgICBpZiAocGx1Z2luPy5zZXR0aW5ncyAmJiBwbHVnaW4/LmFwcCkge1xuICAgICAgdGhpcy5sb2dnZXIgPSBuZXcgTG9nZ2VyKFxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MsXG4gICAgICAgIHRoaXMudmF1bHQuYWRhcHRlcixcbiAgICAgICAgcGx1Z2luLmFwcC52YXVsdC5jb25maWdEaXIsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGZvbGRlciBzZWFyY2ggcGF0aCBmb3IgZmlsdGVyaW5nIGZpbGVzXG4gICAqL1xuICB1cGRhdGVGb2xkZXJTZWFyY2hQYXRoKGZvbGRlclNlYXJjaFBhdGg/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmZpbGVGaWx0ZXIudXBkYXRlRm9sZGVyU2VhcmNoUGF0aChmb2xkZXJTZWFyY2hQYXRoKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVidWdMb2cobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIHRoaXMubG9nZ2VyPy5kZWJ1ZyhtZXNzYWdlLCAuLi5hcmdzKTtcbiAgfVxuXG4gIHByaXZhdGUgcGVyZm9ybWFuY2VMb2cobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIHRoaXMubG9nZ2VyPy5wZXJmb3JtYW5jZShtZXNzYWdlLCAuLi5hcmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY2FuIHZhdWx0IGZvciBhbGwgZGVja3MgKGZpbGVzIHdpdGggI2ZsYXNoY2FyZHMgdGFncylcbiAgICovXG4gIGFzeW5jIHNjYW5WYXVsdEZvckRlY2tzKCk6IFByb21pc2U8TWFwPHN0cmluZywgVEZpbGVbXT4+IHtcbiAgICBjb25zdCBkZWNrc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBURmlsZVtdPigpO1xuICAgIGxldCBmaWxlcyA9IHRoaXMudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgLy8gRmlsdGVyIGZpbGVzIGJ5IGZvbGRlciBzZWFyY2ggcGF0aCBpZiBzcGVjaWZpZWRcbiAgICBmaWxlcyA9IHRoaXMuZmlsZUZpbHRlci5maWx0ZXJGaWxlcyhmaWxlcyk7XG4gICAgdGhpcy5kZWJ1Z0xvZyhgRmlsdGVyZWQgdG8gJHtmaWxlcy5sZW5ndGh9IGZpbGVzIGZvciBzY2FubmluZ2ApO1xuXG4gICAgdGhpcy5kZWJ1Z0xvZyhgU2Nhbm5pbmcgJHtmaWxlcy5sZW5ndGh9IG1hcmtkb3duIGZpbGVzIGZvciBmbGFzaGNhcmQgdGFnc2ApO1xuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICBpZiAoIW1ldGFkYXRhKSB7XG4gICAgICAgIHRoaXMuZGVidWdMb2coYE5vIG1ldGFkYXRhIGZvciBmaWxlOiAke2ZpbGUucGF0aH1gKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB0aGlzLmRlYnVnTG9nKGBDaGVja2luZyBmaWxlOiAke2ZpbGUucGF0aH1gKTtcblxuICAgICAgY29uc3QgYWxsVGFnczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgLy8gQ2hlY2sgaW5saW5lIHRhZ3NcbiAgICAgIGlmIChtZXRhZGF0YS50YWdzKSB7XG4gICAgICAgIGNvbnN0IGlubGluZVRhZ3MgPSBtZXRhZGF0YS50YWdzLm1hcCgodCkgPT4gdC50YWcpO1xuICAgICAgICBhbGxUYWdzLnB1c2goLi4uaW5saW5lVGFncyk7XG4gICAgICAgIHRoaXMuZGVidWdMb2coYEZpbGUgJHtmaWxlLnBhdGh9IGhhcyBpbmxpbmUgdGFnczpgLCBpbmxpbmVUYWdzKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgZnJvbnRtYXR0ZXIgdGFnc1xuICAgICAgaWYgKG1ldGFkYXRhLmZyb250bWF0dGVyICYmIG1ldGFkYXRhLmZyb250bWF0dGVyLnRhZ3MpIHtcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJUYWdzID0gQXJyYXkuaXNBcnJheShtZXRhZGF0YS5mcm9udG1hdHRlci50YWdzKVxuICAgICAgICAgID8gbWV0YWRhdGEuZnJvbnRtYXR0ZXIudGFnc1xuICAgICAgICAgIDogW21ldGFkYXRhLmZyb250bWF0dGVyLnRhZ3NdO1xuXG4gICAgICAgIC8vIEFkZCAjIHByZWZpeCBpZiBub3QgcHJlc2VudFxuICAgICAgICBjb25zdCBub3JtYWxpemVkVGFncyA9IGZyb250bWF0dGVyVGFncy5tYXAoKHRhZzogc3RyaW5nKSA9PlxuICAgICAgICAgIHRhZy5zdGFydHNXaXRoKFwiI1wiKSA/IHRhZyA6IGAjJHt0YWd9YCxcbiAgICAgICAgKTtcbiAgICAgICAgYWxsVGFncy5wdXNoKC4uLm5vcm1hbGl6ZWRUYWdzKTtcbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgICAgICBgRmlsZSAke2ZpbGUucGF0aH0gaGFzIGZyb250bWF0dGVyIHRhZ3M6YCxcbiAgICAgICAgICBub3JtYWxpemVkVGFncyxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFsbFRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29rIGZvciAjZmxhc2hjYXJkcyB0YWdzXG4gICAgICBjb25zdCBmbGFzaGNhcmRUYWdzID0gYWxsVGFncy5maWx0ZXIoKHRhZykgPT5cbiAgICAgICAgdGFnLnN0YXJ0c1dpdGgoXCIjZmxhc2hjYXJkc1wiKSxcbiAgICAgICk7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBBbGwgdGFncyBmb3IgJHtmaWxlLnBhdGh9OmAsIGFsbFRhZ3MpO1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhgRmxhc2hjYXJkIHRhZ3MgZm9yICR7ZmlsZS5wYXRofTpgLCBmbGFzaGNhcmRUYWdzKTtcblxuICAgICAgZm9yIChjb25zdCB0YWcgb2YgZmxhc2hjYXJkVGFncykge1xuICAgICAgICBpZiAoIWRlY2tzTWFwLmhhcyh0YWcpKSB7XG4gICAgICAgICAgZGVja3NNYXAuc2V0KHRhZywgW10pO1xuICAgICAgICB9XG4gICAgICAgIGRlY2tzTWFwLmdldCh0YWcpIS5wdXNoKGZpbGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGVidWdMb2coYEZvdW5kICR7ZGVja3NNYXAuc2l6ZX0gZGVja3M6YCwgQXJyYXkuZnJvbShkZWNrc01hcC5rZXlzKCkpKTtcbiAgICByZXR1cm4gZGVja3NNYXA7XG4gIH1cblxuICAvKipcbiAgICogU3luYyBkZWNrcyB3aXRoIGRhdGFiYXNlXG4gICAqL1xuICBhc3luYyBzeW5jRGVja3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3luY0RlY2tzU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZGVidWdMb2coXCJTdGFydGluZyBkZWNrIHN5bmMuLi5cIik7XG4gICAgICBjb25zdCBkZWNrc01hcCA9IGF3YWl0IHRoaXMuc2NhblZhdWx0Rm9yRGVja3MoKTtcbiAgICAgIHRoaXMuZGVidWdMb2coXCJEZWNrcyBmb3VuZCBpbiB2YXVsdDpcIiwgZGVja3NNYXApO1xuICAgICAgY29uc3QgZXhpc3RpbmdEZWNrcyA9IGF3YWl0IHRoaXMuZGIuZ2V0QWxsRGVja3MoKTtcbiAgICAgIHRoaXMuZGVidWdMb2coXCJFeGlzdGluZyBkZWNrcyBpbiBkYXRhYmFzZTpcIiwgZXhpc3RpbmdEZWNrcyk7XG5cbiAgICAgIC8vIENyZWF0ZSBhIG1hcCBvZiBleGlzdGluZyBkZWNrcyBieSBmaWxlIHBhdGggZm9yIHF1aWNrIGxvb2t1cFxuICAgICAgY29uc3QgZXhpc3RpbmdEZWNrc0J5RmlsZSA9IG5ldyBNYXA8c3RyaW5nLCBEZWNrPigpO1xuICAgICAgZm9yIChjb25zdCBkZWNrIG9mIGV4aXN0aW5nRGVja3MpIHtcbiAgICAgICAgZXhpc3RpbmdEZWNrc0J5RmlsZS5zZXQoZGVjay5maWxlcGF0aCwgZGVjayk7XG4gICAgICB9XG5cbiAgICAgIGxldCBuZXdEZWNrc0NyZWF0ZWQgPSAwO1xuICAgICAgbGV0IHRvdGFsRmlsZXMgPSAwO1xuXG4gICAgICAvLyBQcm9jZXNzIGVhY2ggZmlsZSBhcyBpdHMgb3duIGRlY2tcbiAgICAgIGZvciAoY29uc3QgW3RhZywgZmlsZXNdIG9mIGRlY2tzTWFwKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgIHRvdGFsRmlsZXMrKztcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGZpbGUucGF0aDtcbiAgICAgICAgICBjb25zdCBkZWNrTmFtZSA9IGZpbGUuYmFzZW5hbWU7IC8vIFVzZSBmaWxlIGJhc2VuYW1lIGFzIGRlY2sgbmFtZVxuXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdEZWNrID0gZXhpc3RpbmdEZWNrc0J5RmlsZS5nZXQoZmlsZVBhdGgpO1xuXG4gICAgICAgICAgdGhpcy5kZWJ1Z0xvZyhgQ2hlY2tpbmcgZmlsZTogJHtmaWxlUGF0aH1gKTtcbiAgICAgICAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgICAgICAgYEV4aXN0aW5nIGRlY2sgZm91bmQ6YCxcbiAgICAgICAgICAgIGV4aXN0aW5nRGVjayA/IGBZRVMgKElEOiAke2V4aXN0aW5nRGVjay5pZH0pYCA6IFwiTk9cIixcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKGV4aXN0aW5nRGVjaykge1xuICAgICAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGRlY2sgaWYgdGFnIGNoYW5nZWRcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0RlY2sudGFnICE9PSB0YWcpIHtcbiAgICAgICAgICAgICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgICAgICAgICAgICBgVXBkYXRpbmcgZGVjayBcIiR7ZGVja05hbWV9XCIgdGFnIGZyb20gJHtleGlzdGluZ0RlY2sudGFnfSB0byAke3RhZ31gLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRiLnVwZGF0ZURlY2soZXhpc3RpbmdEZWNrLmlkLCB7XG4gICAgICAgICAgICAgICAgdGFnOiB0YWcsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgICAgICAgICAgICBgRGVjayBcIiR7ZGVja05hbWV9XCIgYWxyZWFkeSBleGlzdHMgd2l0aCBjb3JyZWN0IHRhZywgbm8gdXBkYXRlIG5lZWRlZGAsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgZGVjayBmb3IgdGhpcyBmaWxlXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICAgICAgbGV0IGRlY2tNb2RUaW1lID0gbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICBjb25zdCBmaWxlTW9kVGltZSA9IG5ldyBEYXRlKGZpbGUuc3RhdC5tdGltZSk7XG4gICAgICAgICAgICAgIGNvbnN0IGZpbGVDcmVhdGVUaW1lID0gbmV3IERhdGUoZmlsZS5zdGF0LmN0aW1lKTtcbiAgICAgICAgICAgICAgLy8gVXNlIHRoZSBlYXJsaWVyIG9mIGZpbGUgbW9kaWZpY2F0aW9uIHRpbWUgb3IgZmlsZSBjcmVhdGlvbiB0aW1lXG4gICAgICAgICAgICAgIGRlY2tNb2RUaW1lID1cbiAgICAgICAgICAgICAgICBmaWxlTW9kVGltZSA8IGZpbGVDcmVhdGVUaW1lID8gZmlsZU1vZFRpbWUgOiBmaWxlQ3JlYXRlVGltZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZGVjazogT21pdDxEZWNrLCBcImNyZWF0ZWRcIj4gPSB7XG4gICAgICAgICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlRGVja0lkKGZpbGVQYXRoKSxcbiAgICAgICAgICAgICAgbmFtZTogZGVja05hbWUsIC8vIFN0b3JlIGNsZWFuIGZpbGUgbmFtZVxuICAgICAgICAgICAgICBmaWxlcGF0aDogZmlsZVBhdGgsIC8vIFN0b3JlIGZ1bGwgZmlsZSBwYXRoIHNlcGFyYXRlbHlcbiAgICAgICAgICAgICAgdGFnOiB0YWcsXG4gICAgICAgICAgICAgIGxhc3RSZXZpZXdlZDogbnVsbCxcbiAgICAgICAgICAgICAgY29uZmlnOiBERUZBVUxUX0RFQ0tfQ09ORklHLFxuICAgICAgICAgICAgICBtb2RpZmllZDogZGVja01vZFRpbWUudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgICAgICAgICBgQ3JlYXRpbmcgbmV3IGRlY2s6IFwiJHtkZWNrTmFtZX1cIiB3aXRoIElEOiAke2RlY2suaWR9LCB0YWc6ICR7dGFnfSwgZmlsZXBhdGg6ICR7ZmlsZVBhdGh9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiLmNyZWF0ZURlY2soZGVjayk7XG4gICAgICAgICAgICBuZXdEZWNrc0NyZWF0ZWQrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYW4gdXAgb3JwaGFuZWQgZGVja3MgKGRlY2tzIHdob3NlIGZpbGVzIG5vIGxvbmdlciBleGlzdClcbiAgICAgIGNvbnN0IGFsbEZpbGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICBmb3IgKGNvbnN0IFt0YWcsIGZpbGVzXSBvZiBkZWNrc01hcCkge1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICBhbGxGaWxlcy5hZGQoZmlsZS5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgZGVsZXRlZERlY2tzID0gMDtcbiAgICAgIGZvciAoY29uc3QgZGVjayBvZiBleGlzdGluZ0RlY2tzKSB7XG4gICAgICAgIGlmICghYWxsRmlsZXMuaGFzKGRlY2suZmlsZXBhdGgpKSB7XG4gICAgICAgICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgICAgICAgIGBEZWxldGluZyBvcnBoYW5lZCBkZWNrOiBcIiR7ZGVjay5uYW1lfVwiICgke2RlY2suZmlsZXBhdGh9KWAsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRiLmRlbGV0ZURlY2tCeUZpbGVwYXRoKGRlY2suZmlsZXBhdGgpO1xuICAgICAgICAgIGRlbGV0ZWREZWNrcysrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZGVidWdMb2coXG4gICAgICAgIGBEZWNrIHN5bmMgY29tcGxldGVkLiBQcm9jZXNzZWQgJHt0b3RhbEZpbGVzfSBmaWxlcywgY3JlYXRlZCAke25ld0RlY2tzQ3JlYXRlZH0gbmV3IGRlY2tzLCBkZWxldGVkICR7ZGVsZXRlZERlY2tzfSBvcnBoYW5lZCBkZWNrcy5gLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHN5bmNEZWNrc1RpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN5bmNEZWNrc1N0YXJ0VGltZTtcbiAgICAgIHRoaXMucGVyZm9ybWFuY2VMb2coXG4gICAgICAgIGBEZWNrIHN5bmMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBpbiAke2Zvcm1hdFRpbWUoc3luY0RlY2tzVGltZSl9ICgke25ld0RlY2tzQ3JlYXRlZH0gY3JlYXRlZCwgJHtkZWxldGVkRGVja3N9IGRlbGV0ZWQpYCxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgZGVjayBzeW5jOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgdG8gbGV0IGNhbGxlciBoYW5kbGVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgZmxhc2hjYXJkcyBmcm9tIGEgZmlsZVxuICAgKi9cbiAgYXN5bmMgcGFyc2VGbGFzaGNhcmRzRnJvbUZpbGUoXG4gICAgZmlsZTogVEZpbGUsXG4gICAgaGVhZGVyTGV2ZWw6IG51bWJlciA9IDIsXG4gICk6IFByb21pc2U8UGFyc2VkRmxhc2hjYXJkW10+IHtcbiAgICBjb25zdCBwYXJzZVN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gICAgLy8gUmVhZCBhbmQgcGFyc2UgY29udGVudFxuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgY29uc3QgcmVhZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHBhcnNlU3RhcnRUaW1lO1xuXG4gICAgY29uc3QgcGFyc2VDb250ZW50U3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgZmxhc2hjYXJkcyA9IHRoaXMucGFyc2VGbGFzaGNhcmRzRnJvbUNvbnRlbnQoY29udGVudCwgaGVhZGVyTGV2ZWwpO1xuICAgIGNvbnN0IHBhcnNlVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcGFyc2VDb250ZW50U3RhcnRUaW1lO1xuXG4gICAgY29uc3QgdG90YWxUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwYXJzZVN0YXJ0VGltZTtcblxuICAgIHRoaXMucGVyZm9ybWFuY2VMb2coXG4gICAgICBgUGFyc2VkICR7Zmxhc2hjYXJkcy5sZW5ndGh9IGZsYXNoY2FyZHMgZnJvbSAke2ZpbGUucGF0aH0gaW4gJHtmb3JtYXRUaW1lKHRvdGFsVGltZSl9IChyZWFkOiAke2Zvcm1hdFRpbWUocmVhZFRpbWUpfSwgcGFyc2U6ICR7Zm9ybWF0VGltZShwYXJzZVRpbWUpfSlgLFxuICAgICk7XG5cbiAgICByZXR1cm4gZmxhc2hjYXJkcztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBmbGFzaGNhcmRzIGZyb20gY29udGVudCBzdHJpbmcgKG9wdGltaXplZCBzaW5nbGUtcGFzcyBwYXJzaW5nKVxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUZsYXNoY2FyZHNGcm9tQ29udGVudChcbiAgICBjb250ZW50OiBzdHJpbmcsXG4gICAgaGVhZGVyTGV2ZWw6IG51bWJlciA9IDIsXG4gICk6IFBhcnNlZEZsYXNoY2FyZFtdIHtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoXCJcXG5cIik7XG4gICAgY29uc3QgZmxhc2hjYXJkczogUGFyc2VkRmxhc2hjYXJkW10gPSBbXTtcblxuICAgIC8vIFNpbmdsZSBwYXNzIHRocm91Z2ggbGluZXMgZm9yIGJvdGggdGFibGUgYW5kIGhlYWRlciBwYXJzaW5nXG4gICAgbGV0IGluVGFibGUgPSBmYWxzZTtcbiAgICBsZXQgaGVhZGVyU2VlbiA9IGZhbHNlO1xuICAgIGxldCBjdXJyZW50SGVhZGVyOiB7IHRleHQ6IHN0cmluZzsgbGV2ZWw6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IGN1cnJlbnRDb250ZW50OiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBpbkZyb250bWF0dGVyID0gZmFsc2U7XG4gICAgbGV0IHNraXBOZXh0UGFyYWdyYXBoID0gZmFsc2U7XG5cbiAgICAvLyBVc2UgcHJlLWNvbXBpbGVkIHJlZ2V4IHBhdHRlcm5zIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgIGNvbnN0IHRyaW1tZWRMaW5lID0gbGluZS50cmltKCk7XG5cbiAgICAgIC8vIEhhbmRsZSBmcm9udG1hdHRlclxuICAgICAgaWYgKGkgPT09IDAgJiYgdHJpbW1lZExpbmUgPT09IFwiLS0tXCIpIHtcbiAgICAgICAgaW5Gcm9udG1hdHRlciA9IHRydWU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGluRnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgaWYgKHRyaW1tZWRMaW5lID09PSBcIi0tLVwiKSB7XG4gICAgICAgICAgaW5Gcm9udG1hdHRlciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBmb3IgdGFibGUgcm93c1xuICAgICAgaWYgKERlY2tNYW5hZ2VyLlRBQkxFX1JPV19SRUdFWC50ZXN0KHRyaW1tZWRMaW5lKSkge1xuICAgICAgICBpZiAoIWluVGFibGUpIHtcbiAgICAgICAgICBpblRhYmxlID0gdHJ1ZTtcbiAgICAgICAgICBoZWFkZXJTZWVuID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTa2lwIGhlYWRlciBhbmQgc2VwYXJhdG9yIHJvd3NcbiAgICAgICAgaWYgKCFoZWFkZXJTZWVuKSB7XG4gICAgICAgICAgaGVhZGVyU2VlbiA9IHRydWU7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKERlY2tNYW5hZ2VyLlRBQkxFX1NFUEFSQVRPUl9SRUdFWC50ZXN0KHRyaW1tZWRMaW5lKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGFyc2UgdGFibGUgcm93XG4gICAgICAgIGNvbnN0IGNlbGxzID0gdHJpbW1lZExpbmVcbiAgICAgICAgICAuc2xpY2UoMSwgLTEpIC8vIFJlbW92ZSBsZWFkaW5nL3RyYWlsaW5nIHBpcGVzXG4gICAgICAgICAgLnNwbGl0KFwifFwiKVxuICAgICAgICAgIC5tYXAoKGNlbGwpID0+IGNlbGwudHJpbSgpKTtcblxuICAgICAgICBpZiAoY2VsbHMubGVuZ3RoID49IDIgJiYgY2VsbHNbMF0gJiYgY2VsbHNbMV0pIHtcbiAgICAgICAgICBmbGFzaGNhcmRzLnB1c2goe1xuICAgICAgICAgICAgZnJvbnQ6IGNlbGxzWzBdLCAvLyBUT0RPIHN0cmlwIG9mIHVubmVjZXNzYXJ5IGNoYXJhY3RlcnNcbiAgICAgICAgICAgIGJhY2s6IGNlbGxzWzFdLFxuICAgICAgICAgICAgdHlwZTogXCJ0YWJsZVwiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3QgYSB0YWJsZSByb3csIGVuZCB0YWJsZSBwcm9jZXNzaW5nXG4gICAgICAgIGlmIChpblRhYmxlKSB7XG4gICAgICAgICAgaW5UYWJsZSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGhlYWRlcnNcbiAgICAgICAgY29uc3QgaGVhZGVyTWF0Y2ggPSBEZWNrTWFuYWdlci5IRUFERVJfUkVHRVguZXhlYyhsaW5lKTtcbiAgICAgICAgaWYgKGhlYWRlck1hdGNoKSB7XG4gICAgICAgICAgY29uc3QgY3VycmVudEhlYWRlckxldmVsID0gaGVhZGVyTWF0Y2hbMV0ubGVuZ3RoO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIHRpdGxlIGhlYWRlcnMgdG8gc2tpcFxuICAgICAgICAgIGlmIChsaW5lLm1hdGNoKC9eI1xccysvKSAmJiBsaW5lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJmbGFzaGNhcmRcIikpIHtcbiAgICAgICAgICAgIHNraXBOZXh0UGFyYWdyYXBoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZmluYWxpemVDdXJyZW50SGVhZGVyKFxuICAgICAgICAgICAgICBjdXJyZW50SGVhZGVyLFxuICAgICAgICAgICAgICBjdXJyZW50Q29udGVudCxcbiAgICAgICAgICAgICAgZmxhc2hjYXJkcyxcbiAgICAgICAgICAgICAgaGVhZGVyTGV2ZWwsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY3VycmVudEhlYWRlciA9IG51bGw7XG4gICAgICAgICAgICBjdXJyZW50Q29udGVudCA9IFtdO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRmluYWxpemUgcHJldmlvdXMgaGVhZGVyXG4gICAgICAgICAgdGhpcy5maW5hbGl6ZUN1cnJlbnRIZWFkZXIoXG4gICAgICAgICAgICBjdXJyZW50SGVhZGVyLFxuICAgICAgICAgICAgY3VycmVudENvbnRlbnQsXG4gICAgICAgICAgICBmbGFzaGNhcmRzLFxuICAgICAgICAgICAgaGVhZGVyTGV2ZWwsXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIFN0YXJ0IG5ldyBoZWFkZXJcbiAgICAgICAgICBjdXJyZW50SGVhZGVyID0ge1xuICAgICAgICAgICAgdGV4dDogbGluZSxcbiAgICAgICAgICAgIGxldmVsOiBjdXJyZW50SGVhZGVyTGV2ZWwsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjdXJyZW50Q29udGVudCA9IFtdO1xuICAgICAgICAgIHNraXBOZXh0UGFyYWdyYXBoID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoc2tpcE5leHRQYXJhZ3JhcGgpIHtcbiAgICAgICAgICBpZiAodHJpbW1lZExpbmUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHNraXBOZXh0UGFyYWdyYXBoID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRIZWFkZXIpIHtcbiAgICAgICAgICAvLyBTa2lwIGVtcHR5IGxpbmVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgY29udGVudFxuICAgICAgICAgIGlmICh0cmltbWVkTGluZSA9PT0gXCJcIiAmJiBjdXJyZW50Q29udGVudC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50Q29udGVudC5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmluYWxpemUgbGFzdCBoZWFkZXJcbiAgICB0aGlzLmZpbmFsaXplQ3VycmVudEhlYWRlcihcbiAgICAgIGN1cnJlbnRIZWFkZXIsXG4gICAgICBjdXJyZW50Q29udGVudCxcbiAgICAgIGZsYXNoY2FyZHMsXG4gICAgICBoZWFkZXJMZXZlbCxcbiAgICApO1xuXG4gICAgcmV0dXJuIGZsYXNoY2FyZHM7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIGZpbmFsaXplIGN1cnJlbnQgaGVhZGVyIGZsYXNoY2FyZFxuICAgKi9cbiAgcHJpdmF0ZSBmaW5hbGl6ZUN1cnJlbnRIZWFkZXIoXG4gICAgY3VycmVudEhlYWRlcjogeyB0ZXh0OiBzdHJpbmc7IGxldmVsOiBudW1iZXIgfSB8IG51bGwsXG4gICAgY3VycmVudENvbnRlbnQ6IHN0cmluZ1tdLFxuICAgIGZsYXNoY2FyZHM6IFBhcnNlZEZsYXNoY2FyZFtdLFxuICAgIHRhcmdldEhlYWRlckxldmVsOiBudW1iZXIsXG4gICk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIGN1cnJlbnRIZWFkZXIgJiZcbiAgICAgIGN1cnJlbnRDb250ZW50Lmxlbmd0aCA+IDAgJiZcbiAgICAgIGN1cnJlbnRIZWFkZXIubGV2ZWwgPT09IHRhcmdldEhlYWRlckxldmVsXG4gICAgKSB7XG4gICAgICBmbGFzaGNhcmRzLnB1c2goe1xuICAgICAgICBmcm9udDogY3VycmVudEhlYWRlci50ZXh0LnJlcGxhY2UoL14jezEsNn1cXHMrLywgXCJcIiksXG4gICAgICAgIGJhY2s6IGN1cnJlbnRDb250ZW50LmpvaW4oXCJcXG5cIikudHJpbSgpLFxuICAgICAgICB0eXBlOiBcImhlYWRlci1wYXJhZ3JhcGhcIixcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGJhdGNoIGRhdGFiYXNlIG9wZXJhdGlvbnMgdXNpbmcgdHJhbnNhY3Rpb25zIHdpdGggcHJlcGFyZWQgc3RhdGVtZW50cyBmb3Igb3B0aW1hbCBwZXJmb3JtYW5jZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlQmF0Y2hPcGVyYXRpb25zKFxuICAgIG9wZXJhdGlvbnM6IEFycmF5PHtcbiAgICAgIHR5cGU6IFwiY3JlYXRlXCIgfCBcInVwZGF0ZVwiIHwgXCJkZWxldGVcIjtcbiAgICAgIGZsYXNoY2FyZElkPzogc3RyaW5nO1xuICAgICAgZmxhc2hjYXJkPzogT21pdDxGbGFzaGNhcmQsIFwiY3JlYXRlZFwiIHwgXCJtb2RpZmllZFwiPjtcbiAgICAgIHVwZGF0ZXM/OiBhbnk7XG4gICAgfT4sXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGJhdGNoU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgbGV0IGNyZWF0ZUNvdW50ID0gMDtcbiAgICBsZXQgdXBkYXRlQ291bnQgPSAwO1xuICAgIGxldCBkZWxldGVDb3VudCA9IDA7XG5cbiAgICB0aGlzLmRlYnVnTG9nKGBTdGFydGluZyB0cmFuc2FjdGlvbiBmb3IgJHtvcGVyYXRpb25zLmxlbmd0aH0gb3BlcmF0aW9uc2ApO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEJlZ2luIHRyYW5zYWN0aW9uXG4gICAgICB0aGlzLmRiLmJlZ2luVHJhbnNhY3Rpb24oKTtcbiAgICAgIHRoaXMuZGVidWdMb2coYFRyYW5zYWN0aW9uIHN0YXJ0ZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cbiAgICAgIC8vIEdyb3VwIG9wZXJhdGlvbnMgYnkgdHlwZSBmb3IgYmF0Y2ggcHJvY2Vzc2luZ1xuICAgICAgY29uc3QgZGVsZXRlT3BzID0gb3BlcmF0aW9ucy5maWx0ZXIoXG4gICAgICAgIChvcCkgPT4gb3AudHlwZSA9PT0gXCJkZWxldGVcIiAmJiBvcC5mbGFzaGNhcmRJZCxcbiAgICAgICk7XG4gICAgICBjb25zdCBjcmVhdGVPcHMgPSBvcGVyYXRpb25zLmZpbHRlcihcbiAgICAgICAgKG9wKSA9PiBvcC50eXBlID09PSBcImNyZWF0ZVwiICYmIG9wLmZsYXNoY2FyZCxcbiAgICAgICk7XG4gICAgICBjb25zdCB1cGRhdGVPcHMgPSBvcGVyYXRpb25zLmZpbHRlcihcbiAgICAgICAgKG9wKSA9PiBvcC50eXBlID09PSBcInVwZGF0ZVwiICYmIG9wLmZsYXNoY2FyZElkICYmIG9wLnVwZGF0ZXMsXG4gICAgICApO1xuXG4gICAgICAvLyBFeGVjdXRlIGFsbCBERUxFVEUgb3BlcmF0aW9ucyB3aXRoIHNpbmdsZSBwcmVwYXJlZCBzdGF0ZW1lbnRcbiAgICAgIGlmIChkZWxldGVPcHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmRiLmJhdGNoRGVsZXRlRmxhc2hjYXJkcyhkZWxldGVPcHMubWFwKChvcCkgPT4gb3AuZmxhc2hjYXJkSWQhKSk7XG4gICAgICAgIGRlbGV0ZUNvdW50ID0gZGVsZXRlT3BzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhgQmF0Y2ggZGVsZXRlZCAke2RlbGV0ZUNvdW50fSBmbGFzaGNhcmRzYCk7XG4gICAgICB9XG4gICAgICAvLyBFeGVjdXRlIGFsbCBDUkVBVEUgb3BlcmF0aW9ucyB3aXRoIHNpbmdsZSBwcmVwYXJlZCBzdGF0ZW1lbnRcbiAgICAgIGlmIChjcmVhdGVPcHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmRiLmJhdGNoQ3JlYXRlRmxhc2hjYXJkcyhjcmVhdGVPcHMubWFwKChvcCkgPT4gb3AuZmxhc2hjYXJkISkpO1xuICAgICAgICBjcmVhdGVDb3VudCA9IGNyZWF0ZU9wcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuZGVidWdMb2coYEJhdGNoIGNyZWF0ZWQgJHtjcmVhdGVDb3VudH0gZmxhc2hjYXJkc2ApO1xuICAgICAgfVxuICAgICAgLy8gRXhlY3V0ZSBhbGwgVVBEQVRFIG9wZXJhdGlvbnMgd2l0aCBzaW5nbGUgcHJlcGFyZWQgc3RhdGVtZW50XG4gICAgICBpZiAodXBkYXRlT3BzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5kYi5iYXRjaFVwZGF0ZUZsYXNoY2FyZHMoXG4gICAgICAgICAgdXBkYXRlT3BzLm1hcCgob3ApID0+ICh7XG4gICAgICAgICAgICBpZDogb3AuZmxhc2hjYXJkSWQhLFxuICAgICAgICAgICAgdXBkYXRlczogb3AudXBkYXRlcyEsXG4gICAgICAgICAgfSkpLFxuICAgICAgICApO1xuICAgICAgICB1cGRhdGVDb3VudCA9IHVwZGF0ZU9wcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuZGVidWdMb2coYEJhdGNoIHVwZGF0ZWQgJHt1cGRhdGVDb3VudH0gZmxhc2hjYXJkc2ApO1xuICAgICAgfVxuICAgICAgYXdhaXQgeWllbGRUb1VJKCk7XG5cbiAgICAgIC8vIENvbW1pdCB0cmFuc2FjdGlvblxuICAgICAgdGhpcy5kYi5jb21taXRUcmFuc2FjdGlvbigpO1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhgVHJhbnNhY3Rpb24gY29tbWl0dGVkIHN1Y2Nlc3NmdWxseWApO1xuXG4gICAgICBjb25zdCB0b3RhbEJhdGNoVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gYmF0Y2hTdGFydFRpbWU7XG4gICAgICB0aGlzLnBlcmZvcm1hbmNlTG9nKFxuICAgICAgICBgVHJhbnNhY3Rpb24gY29tcGxldGVkIGluICR7Zm9ybWF0VGltZSh0b3RhbEJhdGNoVGltZSl9ICgke2NyZWF0ZUNvdW50fSBjcmVhdGVkLCAke3VwZGF0ZUNvdW50fSB1cGRhdGVkLCAke2RlbGV0ZUNvdW50fSBkZWxldGVkKWAsXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBDcml0aWNhbCBlcnJvciBpbiB0cmFuc2FjdGlvbjpgLCBlcnJvcik7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmRiLnJvbGxiYWNrVHJhbnNhY3Rpb24oKTtcbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhgVHJhbnNhY3Rpb24gcm9sbGVkIGJhY2sgZHVlIHRvIGVycm9yYCk7XG4gICAgICB9IGNhdGNoIChyb2xsYmFja0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byByb2xsYmFjayB0cmFuc2FjdGlvbjpgLCByb2xsYmFja0Vycm9yKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTeW5jIGZsYXNoY2FyZHMgZm9yIGEgc3BlY2lmaWMgZGVja1xuICAgKi9cbiAgYXN5bmMgc3luY0ZsYXNoY2FyZHNGb3JEZWNrKFxuICAgIGRlY2tJZDogc3RyaW5nLFxuICAgIGZvcmNlOiBib29sZWFuID0gZmFsc2UsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGRlY2tTeW5jU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgdGhpcy5kZWJ1Z0xvZyhgU3luY2luZyBmbGFzaGNhcmRzIGZvciBkZWNrIElEOiAke2RlY2tJZH1gKTtcblxuICAgIGNvbnN0IGRlY2sgPSBhd2FpdCB0aGlzLmRiLmdldERlY2tCeUlkKGRlY2tJZCk7XG4gICAgaWYgKCFkZWNrKSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBObyBkZWNrIGZvdW5kIGZvciBJRDogJHtkZWNrSWR9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZGVidWdMb2coXG4gICAgICBgRm91bmQgZGVjayBJRDogJHtkZWNrLmlkfSwgbmFtZTogJHtkZWNrLm5hbWV9LCBmaWxlcGF0aDogJHtkZWNrLmZpbGVwYXRofWAsXG4gICAgKTtcblxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkZWNrLmZpbGVwYXRoKTtcbiAgICBpZiAoIWZpbGUgfHwgIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG5cbiAgICAvLyBHZXQgZmlsZSBtb2RpZmljYXRpb24gdGltZVxuICAgIGNvbnN0IGZpbGVNb2RpZmllZFRpbWUgPSBuZXcgRGF0ZShmaWxlLnN0YXQubXRpbWUpO1xuXG4gICAgLy8gQ2hlY2sgaWYgZmlsZSBoYXMgYmVlbiBtb2RpZmllZCBzaW5jZSBsYXN0IGRlY2sgdXBkYXRlICh1bmxlc3MgZm9yY2VkKVxuICAgIGlmICghZm9yY2UpIHtcbiAgICAgIGNvbnN0IGRlY2tNb2RpZmllZFRpbWUgPSBuZXcgRGF0ZShkZWNrLm1vZGlmaWVkKTtcbiAgICAgIGlmIChmaWxlTW9kaWZpZWRUaW1lIDw9IGRlY2tNb2RpZmllZFRpbWUpIHtcbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgICAgICBgRmlsZSAke2RlY2suZmlsZXBhdGh9IG5vdCBtb2RpZmllZCBzaW5jZSBsYXN0IHN5bmMsIHNraXBwaW5nYCxcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgYEZpbGUgbW9kaWZpZWQ6ICR7ZmlsZU1vZGlmaWVkVGltZS50b0lTT1N0cmluZygpfSwgbGFzdCBzeW5jOiAke2RlY2subW9kaWZpZWR9YCxcbiAgICApO1xuXG4gICAgLy8gR2V0IGV4aXN0aW5nIGZsYXNoY2FyZHMgZm9yIHRoaXMgZGVjayB0byBkZXRlcm1pbmUgd2hhdCBjaGFuZ2VkXG4gICAgY29uc3QgZXhpc3RpbmdGbGFzaGNhcmRzID0gYXdhaXQgdGhpcy5kYi5nZXRGbGFzaGNhcmRzQnlEZWNrKGRlY2suaWQpO1xuICAgIHRoaXMuZGVidWdMb2coXG4gICAgICBgRm91bmQgJHtleGlzdGluZ0ZsYXNoY2FyZHMubGVuZ3RofSBleGlzdGluZyBmbGFzaGNhcmRzIGZvciBkZWNrICR7ZGVjay5uYW1lfWAsXG4gICAgKTtcblxuICAgIGNvbnN0IGV4aXN0aW5nQnlJZCA9IG5ldyBNYXA8c3RyaW5nLCBGbGFzaGNhcmQ+KCk7XG4gICAgZXhpc3RpbmdGbGFzaGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGV4aXN0aW5nQnlJZC5zZXQoY2FyZC5pZCwgY2FyZCk7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBFeGlzdGluZyBjYXJkIElEOiAke2NhcmQuaWR9LCBGcm9udDogXCIke2NhcmQuZnJvbnR9XCJgKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHByb2Nlc3NlZElkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IGR1cGxpY2F0ZVdhcm5pbmdzID0gbmV3IFNldDxzdHJpbmc+KCk7IC8vIFRyYWNrIGR1cGxpY2F0ZXMgdG8gd2FybiBvbmx5IG9uY2UgcGVyIGZpbGVcblxuICAgIC8vIEJhdGNoIG9wZXJhdGlvbnMgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICAgIGNvbnN0IGJhdGNoT3BlcmF0aW9uczogQXJyYXk8e1xuICAgICAgdHlwZTogXCJjcmVhdGVcIiB8IFwidXBkYXRlXCIgfCBcImRlbGV0ZVwiO1xuICAgICAgZmxhc2hjYXJkSWQ/OiBzdHJpbmc7XG4gICAgICBmbGFzaGNhcmQ/OiBPbWl0PEZsYXNoY2FyZCwgXCJjcmVhdGVkXCIgfCBcIm1vZGlmaWVkXCI+O1xuICAgICAgdXBkYXRlcz86IGFueTtcbiAgICB9PiA9IFtdO1xuXG4gICAgLy8gUGFyc2UgZmxhc2hjYXJkcyBmcm9tIHRoZSBmaWxlIHVzaW5nIGRlY2sncyBoZWFkZXIgbGV2ZWwgY29uZmlndXJhdGlvblxuICAgIGNvbnN0IGFsbFBhcnNlZENhcmRzID0gYXdhaXQgdGhpcy5wYXJzZUZsYXNoY2FyZHNGcm9tRmlsZShcbiAgICAgIGZpbGUsXG4gICAgICBkZWNrLmNvbmZpZy5oZWFkZXJMZXZlbCxcbiAgICApO1xuXG4gICAgLy8gTGltaXQgdG8gZmlyc3QgNDAwMCBmbGFzaGNhcmRzIHBlciBkZWNrXG4gICAgY29uc3QgcGFyc2VkQ2FyZHMgPSBhbGxQYXJzZWRDYXJkcy5zbGljZSgwLCBNQVhfRkxBU0hDQVJEU19QRVJfREVDSyk7XG5cbiAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgYFBhcnNlZCAke2FsbFBhcnNlZENhcmRzLmxlbmd0aH0gZmxhc2hjYXJkcyBmcm9tICR7ZGVjay5maWxlcGF0aH0sIHByb2Nlc3NpbmcgZmlyc3QgJHtwYXJzZWRDYXJkcy5sZW5ndGh9IChsaW1pdDogJHtNQVhfRkxBU0hDQVJEU19QRVJfREVDS30pYCxcbiAgICApO1xuXG4gICAgaWYgKGFsbFBhcnNlZENhcmRzLmxlbmd0aCA+IE1BWF9GTEFTSENBUkRTX1BFUl9ERUNLKSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgICBgXHUyNkEwXHVGRTBGIERlY2sgXCIke2RlY2submFtZX1cIiBleGNlZWRzIGZsYXNoY2FyZCBsaW1pdC4gJHthbGxQYXJzZWRDYXJkcy5sZW5ndGggLSBNQVhfRkxBU0hDQVJEU19QRVJfREVDS30gZmxhc2hjYXJkcyB3aWxsIGJlIHNraXBwZWQuYCxcbiAgICAgICk7XG4gICAgICBpZiAodGhpcy5wbHVnaW4/LnNldHRpbmdzPy51aT8uZW5hYmxlTm90aWNlcykge1xuICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgIGBcdTI2QTBcdUZFMEYgRGVjayBcIiR7ZGVjay5uYW1lfVwiIGhhcyAke2FsbFBhcnNlZENhcmRzLmxlbmd0aH0gZmxhc2hjYXJkcy4gT25seSBwcm9jZXNzaW5nIGZpcnN0ICR7TUFYX0ZMQVNIQ0FSRFNfUEVSX0RFQ0t9IGZvciBwZXJmb3JtYW5jZS5gLFxuICAgICAgICAgIDgwMDAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJvY2VzcyBmbGFzaGNhcmRzIGluIGNodW5rcyB0byBhdm9pZCBibG9ja2luZyBVSSB3aXRoIGxhcmdlIGRhdGFzZXRzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJzZWRDYXJkcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gWWllbGQgY29udHJvbCB0byBVSSBldmVyeSA1MCBmbGFzaGNhcmRzIHRvIHByZXZlbnQgYmxvY2tpbmdcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlZENhcmRzW2ldO1xuICAgICAgY29uc3QgZmxhc2hjYXJkSWQgPSB0aGlzLmdlbmVyYXRlRmxhc2hjYXJkSWQocGFyc2VkLmZyb250KTtcbiAgICAgIGNvbnN0IGNvbnRlbnRIYXNoID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRIYXNoKHBhcnNlZC5iYWNrKTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nQ2FyZCA9IGV4aXN0aW5nQnlJZC5nZXQoZmxhc2hjYXJkSWQpO1xuXG4gICAgICAvLyBDaGVjayBmb3IgZHVwbGljYXRlIGZyb250IHRleHQgd2l0aGluIHRoZSBzYW1lIHBhcnNpbmcgc2Vzc2lvblxuICAgICAgaWYgKHByb2Nlc3NlZElkcy5oYXMoZmxhc2hjYXJkSWQpKSB7XG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZUtleSA9IGAke2RlY2submFtZX06JHtwYXJzZWQuZnJvbnR9YDtcbiAgICAgICAgaWYgKCFkdXBsaWNhdGVXYXJuaW5ncy5oYXMoZHVwbGljYXRlS2V5KSkge1xuICAgICAgICAgIGlmICh0aGlzLnBsdWdpbj8uc2V0dGluZ3M/LnVpPy5lbmFibGVOb3RpY2VzKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgICAgICBgXHUyNkEwXHVGRTBGIER1cGxpY2F0ZSBmbGFzaGNhcmQgZGV0ZWN0ZWQgaW4gXCIke2RlY2submFtZX1cIjogXCIke3BhcnNlZC5mcm9udC5zdWJzdHJpbmcoMCwgNTApfSR7cGFyc2VkLmZyb250Lmxlbmd0aCA+IDUwID8gXCIuLi5cIiA6IFwiXCJ9XCIuIE9ubHkgdGhlIGZpcnN0IG9jY3VycmVuY2Ugd2lsbCBiZSB1c2VkLmAsXG4gICAgICAgICAgICAgIDgwMDAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkdXBsaWNhdGVXYXJuaW5ncy5hZGQoZHVwbGljYXRlS2V5KTtcbiAgICAgICAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgICAgICAgYER1cGxpY2F0ZSBmbGFzaGNhcmQgZGV0ZWN0ZWQ6IFwiJHtwYXJzZWQuZnJvbnR9XCIgaW4gZGVjayBcIiR7ZGVjay5uYW1lfVwiYCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgZHVwbGljYXRlXG4gICAgICB9XG5cbiAgICAgIHRoaXMuZGVidWdMb2coXG4gICAgICAgIGBQcm9jZXNzaW5nIGZsYXNoY2FyZDogXCIke3BhcnNlZC5mcm9udC5zdWJzdHJpbmcoMCwgNTApfS4uLlwiYCxcbiAgICAgICk7XG4gICAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgICBgR2VuZXJhdGVkIElEOiAke2ZsYXNoY2FyZElkfSAoZnJvbSBmcm9udDogXCIke3BhcnNlZC5mcm9udC5zdWJzdHJpbmcoMCwgMzApfS4uLlwiICsgZGVjazogJHtkZWNrLmlkfSlgLFxuICAgICAgKTtcbiAgICAgIHRoaXMuZGVidWdMb2coYEV4aXN0aW5nIGNhcmQgZm91bmQ6YCwgZXhpc3RpbmdDYXJkID8gXCJZRVNcIiA6IFwiTk9cIik7XG5cbiAgICAgIGlmIChleGlzdGluZ0NhcmQpIHtcbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgICAgICBgRXhpc3RpbmcgY2FyZCAtIElEOiAke2V4aXN0aW5nQ2FyZC5pZH0sIEZyb250OiBcIiR7ZXhpc3RpbmdDYXJkLmZyb250LnN1YnN0cmluZygwLCAzMCl9Li4uXCIsIEhhc2g6ICR7ZXhpc3RpbmdDYXJkLmNvbnRlbnRIYXNofWAsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3NlZElkcy5hZGQoZmxhc2hjYXJkSWQpO1xuICAgICAgYXdhaXQgeWllbGRFdmVyeShpKTtcbiAgICAgIGlmIChleGlzdGluZ0NhcmQpIHtcbiAgICAgICAgLy8gVXBkYXRlIGlmIGNvbnRlbnQgaGFzIGNoYW5nZWRcbiAgICAgICAgaWYgKGV4aXN0aW5nQ2FyZC5jb250ZW50SGFzaCAhPT0gY29udGVudEhhc2gpIHtcbiAgICAgICAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgICAgICAgYENvbnRlbnQgY2hhbmdlZCwgdXBkYXRpbmcgZmxhc2hjYXJkOiAke3BhcnNlZC5mcm9udC5zdWJzdHJpbmcoMCwgMzApfS4uLmAsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBiYXRjaE9wZXJhdGlvbnMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInVwZGF0ZVwiLFxuICAgICAgICAgICAgZmxhc2hjYXJkSWQ6IGV4aXN0aW5nQ2FyZC5pZCxcbiAgICAgICAgICAgIHVwZGF0ZXM6IHtcbiAgICAgICAgICAgICAgZnJvbnQ6IHBhcnNlZC5mcm9udCxcbiAgICAgICAgICAgICAgYmFjazogcGFyc2VkLmJhY2ssXG4gICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC50eXBlLFxuICAgICAgICAgICAgICBjb250ZW50SGFzaDogY29udGVudEhhc2gsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZGVidWdMb2coXG4gICAgICAgICAgICBgTm8gY29udGVudCBjaGFuZ2UsIHNraXBwaW5nIHVwZGF0ZTogJHtwYXJzZWQuZnJvbnQuc3Vic3RyaW5nKDAsIDMwKX0uLi5gLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENoZWNrIGZvciBleGlzdGluZyByZXZpZXcgbG9ncyB0byByZXN0b3JlIHByb2dyZXNzXG4gICAgICAgIGNvbnN0IHByZXZpb3VzUHJvZ3Jlc3MgPVxuICAgICAgICAgIGF3YWl0IHRoaXMuZGIuZ2V0TGF0ZXN0UmV2aWV3TG9nRm9yRmxhc2hjYXJkKGZsYXNoY2FyZElkKTtcblxuICAgICAgICAvLyBDcmVhdGUgbmV3IGZsYXNoY2FyZCB3aXRoIHJlc3RvcmVkIHByb2dyZXNzIGlmIGF2YWlsYWJsZVxuICAgICAgICBjb25zdCBmbGFzaGNhcmQ6IE9taXQ8Rmxhc2hjYXJkLCBcImNyZWF0ZWRcIiB8IFwibW9kaWZpZWRcIj4gPSB7XG4gICAgICAgICAgaWQ6IGZsYXNoY2FyZElkLFxuICAgICAgICAgIGRlY2tJZDogZGVjay5pZCxcbiAgICAgICAgICBmcm9udDogcGFyc2VkLmZyb250LFxuICAgICAgICAgIGJhY2s6IHBhcnNlZC5iYWNrLFxuICAgICAgICAgIHR5cGU6IHBhcnNlZC50eXBlLFxuICAgICAgICAgIHNvdXJjZUZpbGU6IGZpbGUucGF0aCxcbiAgICAgICAgICBjb250ZW50SGFzaDogY29udGVudEhhc2gsXG5cbiAgICAgICAgICAvLyBSZXN0b3JlIHByb2dyZXNzIGZyb20gcmV2aWV3IGxvZ3Mgb3IgdXNlIGRlZmF1bHRzXG4gICAgICAgICAgc3RhdGU6IHByZXZpb3VzUHJvZ3Jlc3M/Lm5ld1N0YXRlIHx8IFwibmV3XCIsXG4gICAgICAgICAgZHVlRGF0ZTogcHJldmlvdXNQcm9ncmVzc1xuICAgICAgICAgICAgPyBuZXcgRGF0ZShcbiAgICAgICAgICAgICAgICBuZXcgRGF0ZShwcmV2aW91c1Byb2dyZXNzLnJldmlld2VkQXQpLmdldFRpbWUoKSArXG4gICAgICAgICAgICAgICAgICBwcmV2aW91c1Byb2dyZXNzLm5ld0ludGVydmFsTWludXRlcyAqIDYwICogMTAwMCxcbiAgICAgICAgICAgICAgKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBpbnRlcnZhbDogcHJldmlvdXNQcm9ncmVzcz8ubmV3SW50ZXJ2YWxNaW51dGVzIHx8IDAsXG4gICAgICAgICAgcmVwZXRpdGlvbnM6IHByZXZpb3VzUHJvZ3Jlc3M/Lm5ld1JlcGV0aXRpb25zIHx8IDAsXG4gICAgICAgICAgZGlmZmljdWx0eTogcHJldmlvdXNQcm9ncmVzcz8ubmV3RGlmZmljdWx0eSB8fCA1LjAsIC8vIEZTUlMgaW5pdGlhbCBkaWZmaWN1bHR5XG4gICAgICAgICAgc3RhYmlsaXR5OiBwcmV2aW91c1Byb2dyZXNzPy5uZXdTdGFiaWxpdHkgfHwgMi41LCAvLyBGU1JTIGluaXRpYWwgc3RhYmlsaXR5XG4gICAgICAgICAgbGFwc2VzOiBwcmV2aW91c1Byb2dyZXNzPy5uZXdMYXBzZXMgfHwgMCxcbiAgICAgICAgICBsYXN0UmV2aWV3ZWQ6IHByZXZpb3VzUHJvZ3Jlc3M/LnJldmlld2VkQXQgfHwgbnVsbCxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocHJldmlvdXNQcm9ncmVzcykge1xuICAgICAgICAgIHRoaXMuZGVidWdMb2coXG4gICAgICAgICAgICBgUmVzdG9yaW5nIGZsYXNoY2FyZCBwcm9ncmVzcyBmcm9tIHJldmlldyBsb2dzOiAke2ZsYXNoY2FyZC5mcm9udH0gKHN0YXRlOiAke3ByZXZpb3VzUHJvZ3Jlc3MubmV3U3RhdGV9LCBpbnRlcnZhbDogJHtwcmV2aW91c1Byb2dyZXNzLm5ld0ludGVydmFsTWludXRlc30pYCxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gTm90aWZ5IHVzZXIgdGhhdCBwcm9ncmVzcyB3YXMgcmVzdG9yZWRcbiAgICAgICAgICBpZiAodGhpcy5wbHVnaW4/LnNldHRpbmdzPy51aT8uZW5hYmxlTm90aWNlcykge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICAgICAgYFx1MjcwNSBQcm9ncmVzcyByZXN0b3JlZCBmb3IgZmxhc2hjYXJkOiBcIiR7cGFyc2VkLmZyb250LnN1YnN0cmluZygwLCA0MCl9JHtwYXJzZWQuZnJvbnQubGVuZ3RoID4gNDAgPyBcIi4uLlwiIDogXCJcIn1cIiAoJHtwcmV2aW91c1Byb2dyZXNzLm5ld1N0YXRlfSwgJHtwcmV2aW91c1Byb2dyZXNzLm5ld1JlcGV0aXRpb25zfSByZXZpZXdzKWAsXG4gICAgICAgICAgICAgIDUwMDAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRlYnVnTG9nKGBDcmVhdGluZyBuZXcgZmxhc2hjYXJkOiAke2ZsYXNoY2FyZC5mcm9udH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJhdGNoT3BlcmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcImNyZWF0ZVwiLFxuICAgICAgICAgIGZsYXNoY2FyZDogZmxhc2hjYXJkLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWxldGUgZmxhc2hjYXJkcyB0aGF0IGFyZSBubyBsb25nZXIgaW4gdGhlIGZpbGVcbiAgICBmb3IgKGNvbnN0IFtmbGFzaGNhcmRJZCwgZXhpc3RpbmdDYXJkXSBvZiBleGlzdGluZ0J5SWQpIHtcbiAgICAgIGlmICghcHJvY2Vzc2VkSWRzLmhhcyhmbGFzaGNhcmRJZCkpIHtcbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhgRGVsZXRpbmcgZmxhc2hjYXJkOiAke2V4aXN0aW5nQ2FyZC5mcm9udH1gKTtcbiAgICAgICAgYmF0Y2hPcGVyYXRpb25zLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwiZGVsZXRlXCIsXG4gICAgICAgICAgZmxhc2hjYXJkSWQ6IGV4aXN0aW5nQ2FyZC5pZCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSBhbGwgYmF0Y2ggb3BlcmF0aW9uc1xuICAgIGlmIChiYXRjaE9wZXJhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgICAgYEV4ZWN1dGluZyAke2JhdGNoT3BlcmF0aW9ucy5sZW5ndGh9IGJhdGNoIGRhdGFiYXNlIG9wZXJhdGlvbnNgLFxuICAgICAgKTtcbiAgICAgIGF3YWl0IHRoaXMuZXhlY3V0ZUJhdGNoT3BlcmF0aW9ucyhiYXRjaE9wZXJhdGlvbnMpO1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhgQmF0Y2ggb3BlcmF0aW9ucyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5YCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGRlY2sncyBtb2RpZmllZCB0aW1lc3RhbXAgdG8gbWF0Y2ggZmlsZSBtb2RpZmljYXRpb24gdGltZSAod2l0aG91dCBzYXZlKVxuICAgIGNvbnN0IHRpbWVzdGFtcFN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBVcGRhdGluZyBkZWNrIHRpbWVzdGFtcCBmb3I6ICR7ZGVjay5uYW1lfWApO1xuICAgICAgYXdhaXQgdGhpcy5kYi51cGRhdGVEZWNrVGltZXN0YW1wV2l0aG91dFNhdmUoXG4gICAgICAgIGRlY2suaWQsXG4gICAgICAgIGZpbGVNb2RpZmllZFRpbWUudG9JU09TdHJpbmcoKSxcbiAgICAgICk7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBEZWNrIHRpbWVzdGFtcCB1cGRhdGVkIHN1Y2Nlc3NmdWxseWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIGRlY2sgdGltZXN0YW1wIGZvciAke2RlY2submFtZX06YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZGVidWdMb2coYENoZWNraW5nIGZvciBkdXBsaWNhdGVzIGluIGRlY2s6ICR7ZGVjay5uYW1lfWApO1xuICAgICAgYXdhaXQgdGhpcy5jaGVja0ZvckR1cGxpY2F0ZXNJbkRlY2soZGVjay5pZCk7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBEdXBsaWNhdGUgY2hlY2sgY29tcGxldGVkIGZvciBkZWNrOiAke2RlY2submFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNoZWNrIGR1cGxpY2F0ZXMgZm9yICR7ZGVjay5uYW1lfTpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICBjb25zdCB0aW1lc3RhbXBUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSB0aW1lc3RhbXBTdGFydFRpbWU7XG5cbiAgICBjb25zdCB0b3RhbERlY2tTeW5jVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gZGVja1N5bmNTdGFydFRpbWU7XG4gICAgdGhpcy5wZXJmb3JtYW5jZUxvZyhcbiAgICAgIGBTeW5jIGNvbXBsZXRlZCBmb3IgZGVjazogJHtkZWNrLm5hbWV9IGluICR7Zm9ybWF0VGltZSh0b3RhbERlY2tTeW5jVGltZSl9ICgke3BhcnNlZENhcmRzLmxlbmd0aH0gZmxhc2hjYXJkcywgJHtiYXRjaE9wZXJhdGlvbnMubGVuZ3RofSBvcGVyYXRpb25zLCBjbGVhbnVwOiAke2Zvcm1hdFRpbWUodGltZXN0YW1wVGltZSl9KSAtIERCIHNhdmUgZGVmZXJyZWRgLFxuICAgICk7XG4gICAgeWllbGRUb1VJKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGRlY2sgZm9yIGEgc2luZ2xlIGZpbGUgd2l0aG91dCBydW5uaW5nIGZ1bGwgc3luY1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlRGVja0ZvckZpbGUoZmlsZVBhdGg6IHN0cmluZywgdGFnOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgIGlmICghZmlsZSB8fCAhKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcblxuICAgIGNvbnN0IGRlY2tOYW1lID0gZmlsZS5iYXNlbmFtZTtcbiAgICBjb25zdCBleGlzdGluZ0RlY2sgPSBhd2FpdCB0aGlzLmRiLmdldERlY2tCeUZpbGVwYXRoKGZpbGVQYXRoKTtcblxuICAgIGlmICghZXhpc3RpbmdEZWNrKSB7XG4gICAgICAvLyBDcmVhdGUgbmV3IGRlY2sgZm9yIHRoaXMgZmlsZVxuICAgICAgY29uc3QgZmlsZU1vZFRpbWUgPSBuZXcgRGF0ZShmaWxlLnN0YXQubXRpbWUpO1xuICAgICAgY29uc3QgZmlsZUNyZWF0ZVRpbWUgPSBuZXcgRGF0ZShmaWxlLnN0YXQuY3RpbWUpO1xuXG4gICAgICAvLyBVc2UgdGhlIGVhcmxpZXIgb2YgZmlsZSBtb2RpZmljYXRpb24gdGltZSBvciBmaWxlIGNyZWF0aW9uIHRpbWVcbiAgICAgIGNvbnN0IGRlY2tNb2RUaW1lID1cbiAgICAgICAgZmlsZU1vZFRpbWUgPCBmaWxlQ3JlYXRlVGltZSA/IGZpbGVNb2RUaW1lIDogZmlsZUNyZWF0ZVRpbWU7XG5cbiAgICAgIGNvbnN0IGRlY2s6IE9taXQ8RGVjaywgXCJjcmVhdGVkXCI+ID0ge1xuICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZURlY2tJZChmaWxlUGF0aCksXG4gICAgICAgIG5hbWU6IGRlY2tOYW1lLFxuICAgICAgICBmaWxlcGF0aDogZmlsZVBhdGgsXG4gICAgICAgIHRhZzogdGFnLFxuICAgICAgICBsYXN0UmV2aWV3ZWQ6IG51bGwsXG4gICAgICAgIGNvbmZpZzogREVGQVVMVF9ERUNLX0NPTkZJRyxcbiAgICAgICAgbW9kaWZpZWQ6IGRlY2tNb2RUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICB9O1xuXG4gICAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgICBgQ3JlYXRpbmcgbmV3IGRlY2s6IFwiJHtkZWNrTmFtZX1cIiB3aXRoIElEOiAke2RlY2suaWR9LCB0YWc6ICR7dGFnfSwgZmlsZXBhdGg6ICR7ZmlsZVBhdGh9YCxcbiAgICAgICk7XG4gICAgICBhd2FpdCB0aGlzLmRiLmNyZWF0ZURlY2soZGVjayk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNvbnRlbnQgaGFzaCBmb3IgZmxhc2hjYXJkIGJhY2sgY29udGVudCAoZnJvbnQgaXMgdXNlZCBmb3IgSUQpXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQ29udGVudEhhc2goYmFjazogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgaGFzaCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGFyID0gYmFjay5jaGFyQ29kZUF0KGkpO1xuICAgICAgaGFzaCA9IChoYXNoIDw8IDUpIC0gaGFzaCArIGNoYXI7XG4gICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzItYml0IGludGVnZXJcbiAgICB9XG4gICAgcmV0dXJuIE1hdGguYWJzKGhhc2gpLnRvU3RyaW5nKDE2KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGRlY2sgbmFtZSBmcm9tIGZpbGVzICh1c2UgdGhlIGZpcnN0IGZpbGUncyBuYW1lKVxuICAgKi9cbiAgcHVibGljIGV4dHJhY3REZWNrTmFtZUZyb21GaWxlcyhmaWxlczogVEZpbGVbXSk6IHN0cmluZyB7XG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFwiR2VuZXJhbFwiO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGUgZmlyc3QgZmlsZSdzIGJhc2VuYW1lICh3aXRob3V0IGV4dGVuc2lvbikgYXMgZGVjayBuYW1lXG4gICAgY29uc3QgZmlyc3RGaWxlID0gZmlsZXNbMF07XG4gICAgcmV0dXJuIGZpcnN0RmlsZS5iYXNlbmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGRlY2sgbmFtZSBmcm9tIHRhZyAobGVnYWN5IG1ldGhvZCBmb3IgY29tcGF0aWJpbGl0eSlcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdERlY2tOYW1lKHRhZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgI2ZsYXNoY2FyZHMgcHJlZml4XG4gICAgbGV0IG5hbWUgPSB0YWcucmVwbGFjZShcIiNmbGFzaGNhcmRzXCIsIFwiXCIpO1xuXG4gICAgLy8gSWYgdGhlcmUncyBhIHJlbWFpbmluZyBzbGFzaCwgcmVtb3ZlIGl0XG4gICAgaWYgKG5hbWUuc3RhcnRzV2l0aChcIi9cIikpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZygxKTtcbiAgICB9XG5cbiAgICAvLyBJZiBlbXB0eSAoanVzdCAjZmxhc2hjYXJkcyksIHJldHVybiBcIkdlbmVyYWxcIlxuICAgIGlmICghbmFtZSkge1xuICAgICAgcmV0dXJuIFwiR2VuZXJhbFwiO1xuICAgIH1cblxuICAgIC8vIFNwbGl0IGJ5IHNsYXNoZXMgYW5kIGNvbnZlcnQgdG8gdGl0bGUgY2FzZVxuICAgIGNvbnN0IHBhcnRzID0gbmFtZS5zcGxpdChcIi9cIik7XG4gICAgcmV0dXJuIHBhcnRzXG4gICAgICAubWFwKChwYXJ0KSA9PiBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zbGljZSgxKSlcbiAgICAgIC5qb2luKFwiIC0gXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGRldGVybWluaXN0aWMgZGVjayBJRCBiYXNlZCBvbiBmaWxlcGF0aFxuICAgKi9cbiAgcHVibGljIGdlbmVyYXRlRGVja0lkKGZpbGVwYXRoPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoZmlsZXBhdGgpIHtcbiAgICAgIC8vIEdlbmVyYXRlIGRldGVybWluaXN0aWMgSUQgYmFzZWQgb24gZmlsZXBhdGhcbiAgICAgIGxldCBoYXNoID0gMDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hhciA9IGZpbGVwYXRoLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBjaGFyO1xuICAgICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzItYml0IGludGVnZXJcbiAgICAgIH1cbiAgICAgIHJldHVybiBgZGVja18ke01hdGguYWJzKGhhc2gpLnRvU3RyaW5nKDM2KX1gO1xuICAgIH1cbiAgICAvLyBGYWxsYmFjayB0byB0aW1lc3RhbXAtYmFzZWQgSUQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICByZXR1cm4gYGRlY2tfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHVuaXF1ZSBmbGFzaGNhcmQgSUQgdXNpbmcgaGFzaCBvZiBmcm9udCB0ZXh0IG9ubHlcbiAgICovXG4gIHB1YmxpYyBnZW5lcmF0ZUZsYXNoY2FyZElkKGZyb250VGV4dDogc3RyaW5nLCBkZWNrSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFVzZSBvbmx5IGZyb250IHRleHQgZm9yIElEIGdlbmVyYXRpb24gdG8gcHJlc2VydmUgcHJvZ3Jlc3MgYWNyb3NzIGRlY2sgY2hhbmdlc1xuICAgIGxldCBoYXNoID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyb250VGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hhciA9IGZyb250VGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgaGFzaCA9IChoYXNoIDw8IDUpIC0gaGFzaCArIGNoYXI7XG4gICAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzItYml0IGludGVnZXJcbiAgICB9XG4gICAgcmV0dXJuIGBjYXJkXyR7TWF0aC5hYnMoaGFzaCkudG9TdHJpbmcoMzYpfWA7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgZm9yIGR1cGxpY2F0ZSBmbGFzaGNhcmRzIGluIGEgZGVjayBhbmQgd2FybiB0aGUgdXNlclxuICAgKi9cbiAgYXN5bmMgY2hlY2tGb3JEdXBsaWNhdGVzSW5EZWNrKGRlY2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZXhpc3RpbmdGbGFzaGNhcmRzID0gYXdhaXQgdGhpcy5kYi5nZXRGbGFzaGNhcmRzQnlEZWNrKGRlY2tJZCk7XG4gICAgY29uc3QgZnJvbnRUZXh0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEZsYXNoY2FyZFtdPigpO1xuXG4gICAgLy8gR3JvdXAgZmxhc2hjYXJkcyBieSBmcm9udCB0ZXh0XG4gICAgZm9yIChjb25zdCBjYXJkIG9mIGV4aXN0aW5nRmxhc2hjYXJkcykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZEZyb250ID0gY2FyZC5mcm9udC50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmICghZnJvbnRUZXh0TWFwLmhhcyhub3JtYWxpemVkRnJvbnQpKSB7XG4gICAgICAgIGZyb250VGV4dE1hcC5zZXQobm9ybWFsaXplZEZyb250LCBbXSk7XG4gICAgICB9XG4gICAgICBmcm9udFRleHRNYXAuZ2V0KG5vcm1hbGl6ZWRGcm9udCkhLnB1c2goY2FyZCk7XG4gICAgfVxuXG4gICAgLy8gRmluZCBhbmQgd2FybiBhYm91dCBkdXBsaWNhdGVzXG4gICAgY29uc3QgZGVjayA9IGF3YWl0IHRoaXMuZGIuZ2V0RGVja0J5SWQoZGVja0lkKTtcbiAgICBjb25zdCBkZWNrTmFtZSA9IGRlY2s/Lm5hbWUgfHwgXCJVbmtub3duIERlY2tcIjtcblxuICAgIGZvciAoY29uc3QgW2Zyb250VGV4dCwgY2FyZHNdIG9mIGZyb250VGV4dE1hcCkge1xuICAgICAgaWYgKGNhcmRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luPy5zZXR0aW5ncz8udWk/LmVuYWJsZU5vdGljZXMpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgICAgYFx1MjZBMFx1RkUwRiBGb3VuZCAke2NhcmRzLmxlbmd0aH0gZHVwbGljYXRlIGZsYXNoY2FyZHMgaW4gXCIke2RlY2tOYW1lfVwiOiBcIiR7Y2FyZHNbMF0uZnJvbnQuc3Vic3RyaW5nKDAsIDUwKX0ke2NhcmRzWzBdLmZyb250Lmxlbmd0aCA+IDUwID8gXCIuLi5cIiA6IFwiXCJ9XCIuIENvbnNpZGVyIHJlbW92aW5nIGR1cGxpY2F0ZXMgdG8gYXZvaWQgY29uZnVzaW9uLmAsXG4gICAgICAgICAgICAxMDAwMCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVidWdMb2coXG4gICAgICAgICAgYER1cGxpY2F0ZSBmbGFzaGNhcmRzIGZvdW5kIGluIGRlY2sgXCIke2RlY2tOYW1lfVwiOiBcIiR7Y2FyZHNbMF0uZnJvbnR9XCIgKCR7Y2FyZHMubGVuZ3RofSBjb3BpZXMpYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGRlY2sgSURzIGZvciBhbGwgZmxhc2hjYXJkcyB3aGVuIGEgZGVjayBJRCBjaGFuZ2VzIChlLmcuLCBmaWxlIHJlbmFtZSlcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUZsYXNoY2FyZERlY2tJZHMoXG4gICAgb2xkRGVja0lkOiBzdHJpbmcsXG4gICAgbmV3RGVja0lkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuZGVidWdMb2coXG4gICAgICBgVXBkYXRpbmcgZmxhc2hjYXJkIGRlY2sgSURzIGZyb20gJHtvbGREZWNrSWR9IHRvICR7bmV3RGVja0lkfWAsXG4gICAgKTtcbiAgICBhd2FpdCB0aGlzLmRiLnVwZGF0ZUZsYXNoY2FyZERlY2tJZHMob2xkRGVja0lkLCBuZXdEZWNrSWQpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgRmxhc2hjYXJkc1NldHRpbmdzIH0gZnJvbSBcIi4uL3NldHRpbmdzXCI7XG5pbXBvcnQgeyBEYXRhQWRhcHRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBzZXR0aW5nczogRmxhc2hjYXJkc1NldHRpbmdzLFxuICAgIHByaXZhdGUgYWRhcHRlcj86IERhdGFBZGFwdGVyLFxuICAgIHByaXZhdGUgY29uZmlnRGlyPzogc3RyaW5nLFxuICApIHt9XG5cbiAgZGVidWcobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNldHRpbmdzPy5kZWJ1Zz8uZW5hYmxlTG9nZ2luZykge1xuICAgICAgY29uc29sZS5sb2coYFtEZWNrcyBEZWJ1Z10gJHttZXNzYWdlfWAsIC4uLmFyZ3MpO1xuICAgICAgaWYgKHRoaXMuYWRhcHRlciAmJiB0aGlzLmNvbmZpZ0Rpcikge1xuICAgICAgICB0aGlzLndyaXRlVG9Mb2dGaWxlKG1lc3NhZ2UsIC4uLmFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHBlcmZvcm1hbmNlKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncz8uZGVidWc/LnBlcmZvcm1hbmNlTG9ncykge1xuICAgICAgY29uc29sZS5sb2coYFtEZWNrcyBQZXJmb3JtYW5jZV0gJHttZXNzYWdlfWAsIC4uLmFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgd3JpdGVUb0xvZ0ZpbGUobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMuYWRhcHRlciB8fCAhdGhpcy5jb25maWdEaXIpIHJldHVybjtcblxuICAgICAgY29uc3QgbG9nUGF0aCA9IGAke3RoaXMuY29uZmlnRGlyfS9wbHVnaW5zL2RlY2tzL2RlYnVnLmxvZ2A7XG5cbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIGNvbnN0IGFyZ3NTdHIgPVxuICAgICAgICBhcmdzLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IGAgJHthcmdzXG4gICAgICAgICAgICAgIC5tYXAoKGFyZykgPT5cbiAgICAgICAgICAgICAgICB0eXBlb2YgYXJnID09PSBcIm9iamVjdFwiID8gSlNPTi5zdHJpbmdpZnkoYXJnKSA6IFN0cmluZyhhcmcpLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIC5qb2luKFwiIFwiKX1gXG4gICAgICAgICAgOiBcIlwiO1xuICAgICAgY29uc3QgbG9nRW50cnkgPSBgWyR7dGltZXN0YW1wfV0gJHttZXNzYWdlfSR7YXJnc1N0cn1cXG5gO1xuXG4gICAgICBsZXQgZXhpc3RpbmdDb250ZW50ID0gXCJcIjtcbiAgICAgIGlmIChhd2FpdCB0aGlzLmFkYXB0ZXIuZXhpc3RzKGxvZ1BhdGgpKSB7XG4gICAgICAgIGV4aXN0aW5nQ29udGVudCA9IGF3YWl0IHRoaXMuYWRhcHRlci5yZWFkKGxvZ1BhdGgpO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmFkYXB0ZXIud3JpdGUobG9nUGF0aCwgZXhpc3RpbmdDb250ZW50ICsgbG9nRW50cnkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW0RlY2tzIERlYnVnXSBGYWlsZWQgdG8gd3JpdGUgdG8gbG9nIGZpbGU6XCIsIGVycm9yKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUobXM6IG51bWJlcik6IHN0cmluZyB7XG4gIGlmIChtcyA8IDEwMDApIHtcbiAgICByZXR1cm4gYCR7bXMudG9GaXhlZCgyKX1tc2A7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAkeyhtcyAvIDEwMDApLnRvRml4ZWQoMil9c2A7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY2xhc3MgRmlsZUZpbHRlciB7XG4gIHByaXZhdGUgZm9sZGVyU2VhcmNoUGF0aD86IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihmb2xkZXJTZWFyY2hQYXRoPzogc3RyaW5nKSB7XG4gICAgdGhpcy5mb2xkZXJTZWFyY2hQYXRoID0gZm9sZGVyU2VhcmNoUGF0aDtcbiAgfVxuXG4gIHVwZGF0ZUZvbGRlclNlYXJjaFBhdGgoZm9sZGVyU2VhcmNoUGF0aD86IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuZm9sZGVyU2VhcmNoUGF0aCA9IGZvbGRlclNlYXJjaFBhdGg7XG4gIH1cblxuICBmaWx0ZXJGaWxlcyhmaWxlczogVEZpbGVbXSk6IFRGaWxlW10ge1xuICAgIGlmICghdGhpcy5mb2xkZXJTZWFyY2hQYXRoIHx8IHRoaXMuZm9sZGVyU2VhcmNoUGF0aC50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgIHJldHVybiBmaWxlcztcbiAgICB9XG5cbiAgICBjb25zdCBzZWFyY2hQYXRoID0gdGhpcy5mb2xkZXJTZWFyY2hQYXRoLnRyaW0oKTtcbiAgICByZXR1cm4gZmlsZXMuZmlsdGVyKFxuICAgICAgKGZpbGUpID0+XG4gICAgICAgIGZpbGUucGF0aC5zdGFydHNXaXRoKHNlYXJjaFBhdGggKyBcIi9cIikgfHwgZmlsZS5wYXRoID09PSBzZWFyY2hQYXRoXG4gICAgKTtcbiAgfVxuXG4gIHNob3VsZEluY2x1ZGVGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmZvbGRlclNlYXJjaFBhdGggfHwgdGhpcy5mb2xkZXJTZWFyY2hQYXRoLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VhcmNoUGF0aCA9IHRoaXMuZm9sZGVyU2VhcmNoUGF0aC50cmltKCk7XG4gICAgcmV0dXJuIGZpbGUucGF0aC5zdGFydHNXaXRoKHNlYXJjaFBhdGggKyBcIi9cIikgfHwgZmlsZS5wYXRoID09PSBzZWFyY2hQYXRoO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBEYXRhYmFzZVNlcnZpY2UgfSBmcm9tIFwiLi4vZGF0YWJhc2UvRGF0YWJhc2VTZXJ2aWNlXCI7XG5pbXBvcnQgeyBEZWNrTWFuYWdlciB9IGZyb20gXCIuL0RlY2tNYW5hZ2VyXCI7XG5pbXBvcnQgeyB5aWVsZFRvVUkgfSBmcm9tIFwiLi4vdXRpbHMvdWlcIjtcbmltcG9ydCB7IExvZ2dlciwgZm9ybWF0VGltZSB9IGZyb20gXCIuLi91dGlscy9sb2dnaW5nXCI7XG5pbXBvcnQgeyBGbGFzaGNhcmRzU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IERhdGFBZGFwdGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3luY1Byb2dyZXNzIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBwZXJjZW50YWdlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3luY09wdGlvbnMge1xuICBmb3JjZVN5bmM/OiBib29sZWFuO1xuICBzaG93UHJvZ3Jlc3M/OiBib29sZWFuO1xuICBvblByb2dyZXNzPzogKHByb2dyZXNzOiBTeW5jUHJvZ3Jlc3MpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3luY1Jlc3VsdCB7XG4gIHRvdGFsRGVja3M6IG51bWJlcjtcbiAgdG90YWxGbGFzaGNhcmRzOiBudW1iZXI7XG4gIHN5bmNUaW1lOiBudW1iZXI7XG4gIHNhdmVUaW1lOiBudW1iZXI7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGVycm9yPzogRXJyb3I7XG59XG5cbmV4cG9ydCBjbGFzcyBEZWNrU3luY2hyb25pemVyIHtcbiAgcHJpdmF0ZSBkYjogRGF0YWJhc2VTZXJ2aWNlO1xuICBwcml2YXRlIGRlY2tNYW5hZ2VyOiBEZWNrTWFuYWdlcjtcbiAgcHJpdmF0ZSBpc1N5bmNpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBkYjogRGF0YWJhc2VTZXJ2aWNlLFxuICAgIGRlY2tNYW5hZ2VyOiBEZWNrTWFuYWdlcixcbiAgICBzZXR0aW5nczogRmxhc2hjYXJkc1NldHRpbmdzLFxuICAgIGFkYXB0ZXI6IERhdGFBZGFwdGVyLFxuICAgIGNvbmZpZ0Rpcjogc3RyaW5nLFxuICApIHtcbiAgICB0aGlzLmRiID0gZGI7XG4gICAgdGhpcy5kZWNrTWFuYWdlciA9IGRlY2tNYW5hZ2VyO1xuICAgIHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcihzZXR0aW5ncywgYWRhcHRlciwgY29uZmlnRGlyKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVidWdMb2cobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIHRoaXMubG9nZ2VyLmRlYnVnKG1lc3NhZ2UsIC4uLmFyZ3MpO1xuICB9XG5cbiAgcHJpdmF0ZSBwZXJmb3JtYW5jZUxvZyhtZXNzYWdlOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgdGhpcy5sb2dnZXIucGVyZm9ybWFuY2UobWVzc2FnZSwgLi4uYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBzeW5jIG9wZXJhdGlvbiBpcyBjdXJyZW50bHkgaW4gcHJvZ3Jlc3NcbiAgICovXG4gIGdldCBpc0luUHJvZ3Jlc3MoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNTeW5jaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0aW1lIGR1cmF0aW9uIGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKi9cblxuICAvKipcbiAgICogUGVyZm9ybSBpbml0aWFsIHN5bmMgd2l0aCBncmFjZWZ1bCBlcnJvciBoYW5kbGluZ1xuICAgKi9cbiAgYXN5bmMgcGVyZm9ybUluaXRpYWxTeW5jKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKFwiU3RhcnRpbmcgaW5pdGlhbCBzeW5jLi4uXCIpO1xuXG4gICAgICAvLyBBZGQgZGVsYXkgdG8gZW5zdXJlIHdvcmtzcGFjZSBpcyBmdWxseSByZWFkeVxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwMCkpO1xuXG4gICAgICBhd2FpdCB0aGlzLnBlcmZvcm1TeW5jKHsgZm9yY2VTeW5jOiBmYWxzZSwgc2hvd1Byb2dyZXNzOiB0cnVlIH0pO1xuXG4gICAgICB0aGlzLmRlYnVnTG9nKFwiSW5pdGlhbCBzeW5jIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbml0aWFsIHN5bmMgZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgICAvLyBEb24ndCB0aHJvdyAtIGxldCB0aGUgYXBwIGNvbnRpbnVlIHdvcmtpbmcgZXZlbiBpZiBpbml0aWFsIHN5bmMgZmFpbHNcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWFpbiBzeW5jIG9wZXJhdGlvbiAtIGNvb3JkaW5hdGVzIGRlY2sgZGlzY292ZXJ5IGFuZCBmbGFzaGNhcmQgc3luY2hyb25pemF0aW9uXG4gICAqL1xuICBhc3luYyBwZXJmb3JtU3luYyhvcHRpb25zOiBTeW5jT3B0aW9ucyA9IHt9KTogUHJvbWlzZTxTeW5jUmVzdWx0PiB7XG4gICAgY29uc3QgeyBmb3JjZVN5bmMgPSBmYWxzZSwgc2hvd1Byb2dyZXNzID0gZmFsc2UsIG9uUHJvZ3Jlc3MgfSA9IG9wdGlvbnM7XG5cbiAgICBpZiAodGhpcy5pc1N5bmNpbmcpIHtcbiAgICAgIHRoaXMuZGVidWdMb2coXCJTeW5jIGFscmVhZHkgaW4gcHJvZ3Jlc3MsIHNraXBwaW5nLi4uXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3luYyBhbHJlYWR5IGluIHByb2dyZXNzXCIpO1xuICAgIH1cblxuICAgIHRoaXMuaXNTeW5jaW5nID0gdHJ1ZTtcbiAgICBjb25zdCBzeW5jU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgICAgYFBlcmZvcm1pbmcgJHtmb3JjZVN5bmMgPyBcImZvcmNlZCBcIiA6IFwiXCJ9c3luYyBvZiBkZWNrcyBhbmQgZmxhc2hjYXJkcy4uLmAsXG4gICAgICApO1xuXG4gICAgICAvLyBTdGVwIDE6IFN5bmMgYWxsIGRlY2tzXG4gICAgICBpZiAoc2hvd1Byb2dyZXNzICYmIG9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgb25Qcm9ncmVzcyh7IG1lc3NhZ2U6IFwiXHVEODNEXHVERDBEIERpc2NvdmVyaW5nIGRlY2tzLi4uXCIsIHBlcmNlbnRhZ2U6IDEwIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkZWNrc1N0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgLy8gYXdhaXQgeWllbGRUb1VJKCk7XG4gICAgICBhd2FpdCB0aGlzLmRlY2tNYW5hZ2VyLnN5bmNEZWNrcygpO1xuICAgICAgY29uc3QgZGVja3NUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBkZWNrc1N0YXJ0VGltZTtcblxuICAgICAgdGhpcy5wZXJmb3JtYW5jZUxvZyhcbiAgICAgICAgYERlY2sgZGlzY292ZXJ5IGNvbXBsZXRlZCBpbiAke2Zvcm1hdFRpbWUoZGVja3NUaW1lKX1gLFxuICAgICAgKTtcblxuICAgICAgLy8gU3RlcCAyOiBHZXQgYWxsIGRlY2tzIGFuZCBwcmVwYXJlIGZvciBmbGFzaGNhcmQgc3luY1xuICAgICAgLy8gYXdhaXQgeWllbGRUb1VJKCk7XG4gICAgICBjb25zdCBkZWNrcyA9IGF3YWl0IHRoaXMuZGIuZ2V0QWxsRGVja3MoKTtcbiAgICAgIHRoaXMuZGVidWdMb2coXG4gICAgICAgIGBGb3VuZCAke2RlY2tzLmxlbmd0aH0gZGVja3MgYWZ0ZXIgc3luYzpgLFxuICAgICAgICBkZWNrcy5tYXAoKGQpID0+IGQubmFtZSksXG4gICAgICApO1xuXG4gICAgICBpZiAoc2hvd1Byb2dyZXNzICYmIG9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgb25Qcm9ncmVzcyh7XG4gICAgICAgICAgbWVzc2FnZTogYFx1RDgzRFx1RENEQSBQcm9jZXNzaW5nICR7ZGVja3MubGVuZ3RofSBkZWNrcy4uLmAsXG4gICAgICAgICAgcGVyY2VudGFnZTogMjAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBTdGVwIDM6IFN5bmMgZmxhc2hjYXJkcyBmb3IgZWFjaCBkZWNrXG4gICAgICBsZXQgdG90YWxGbGFzaGNhcmRzID0gMDtcbiAgICAgIGNvbnN0IGZsYXNoY2FyZFN5bmNTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBkZWNrID0gZGVja3NbaV07XG4gICAgICAgIGNvbnN0IGRlY2tTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgICAgICAvLyBVcGRhdGUgcHJvZ3Jlc3NcbiAgICAgICAgaWYgKHNob3dQcm9ncmVzcyAmJiBvblByb2dyZXNzKSB7XG4gICAgICAgICAgY29uc3QgZGVja1Byb2dyZXNzID0gMjAgKyAoaSAvIGRlY2tzLmxlbmd0aCkgKiA3MDtcbiAgICAgICAgICBvblByb2dyZXNzKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBcdUQ4M0RcdURDQzQgUHJvY2Vzc2luZyBkZWNrOiAke2RlY2submFtZX0gKCR7aSArIDF9LyR7ZGVja3MubGVuZ3RofSlgLFxuICAgICAgICAgICAgcGVyY2VudGFnZTogZGVja1Byb2dyZXNzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgICAgICBgJHtmb3JjZVN5bmMgPyBcIkZvcmNlIHNcIiA6IFwiU1wifXluY2luZyBmbGFzaGNhcmRzIGZvciBkZWNrOiAke2RlY2submFtZX0gKCR7ZGVjay5maWxlcGF0aH0pYCxcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLmRlY2tNYW5hZ2VyLnN5bmNGbGFzaGNhcmRzRm9yRGVjayhkZWNrLmlkLCBmb3JjZVN5bmMpO1xuICAgICAgICBhd2FpdCB5aWVsZFRvVUkoKTtcblxuICAgICAgICAvLyBUcmFjayBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAgICAgIGNvbnN0IGZsYXNoY2FyZHMgPSBhd2FpdCB0aGlzLmRiLmdldEZsYXNoY2FyZHNCeURlY2soZGVjay5pZCk7XG4gICAgICAgIGNvbnN0IGRlY2tUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBkZWNrU3RhcnRUaW1lO1xuICAgICAgICB0b3RhbEZsYXNoY2FyZHMgKz0gZmxhc2hjYXJkcy5sZW5ndGg7XG5cbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUxvZyhcbiAgICAgICAgICBgRGVjayAke2RlY2submFtZX0gcHJvY2Vzc2VkIGluICR7Zm9ybWF0VGltZShkZWNrVGltZSl9IC0gJHtmbGFzaGNhcmRzLmxlbmd0aH0gZmxhc2hjYXJkc2AsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN0ZXAgNDogU2F2ZSBkYXRhYmFzZVxuICAgICAgaWYgKHNob3dQcm9ncmVzcyAmJiBvblByb2dyZXNzKSB7XG4gICAgICAgIG9uUHJvZ3Jlc3MoeyBtZXNzYWdlOiBcIlx1RDgzRFx1RENCRSBTYXZpbmcgZGF0YWJhc2UuLi5cIiwgcGVyY2VudGFnZTogOTUgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZGVidWdMb2coXCJTYXZpbmcgZGF0YWJhc2UgYWZ0ZXIgcHJvY2Vzc2luZyBhbGwgZGVja3MuLi5cIik7XG4gICAgICBjb25zdCBzYXZlU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICAgIGF3YWl0IHlpZWxkVG9VSSgpO1xuICAgICAgYXdhaXQgdGhpcy5kYi5zYXZlKCk7XG4gICAgICBhd2FpdCB5aWVsZFRvVUkoKTtcblxuICAgICAgY29uc3Qgc2F2ZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHNhdmVTdGFydFRpbWU7XG5cbiAgICAgIHRoaXMuZGVidWdMb2coXCJEYXRhYmFzZSBzYXZlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICB0aGlzLnBlcmZvcm1hbmNlTG9nKFxuICAgICAgICBgRGF0YWJhc2Ugc2F2ZWQgaW4gJHtmb3JtYXRUaW1lKHNhdmVUaW1lKX0gYWZ0ZXIgcHJvY2Vzc2luZyAke2RlY2tzLmxlbmd0aH0gZGVja3NgLFxuICAgICAgKTtcblxuICAgICAgLy8gU3RlcCA1OiBDYWxjdWxhdGUgZmluYWwgbWV0cmljc1xuICAgICAgY29uc3QgZmxhc2hjYXJkU3luY1RpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGZsYXNoY2FyZFN5bmNTdGFydFRpbWU7XG4gICAgICBjb25zdCB0b3RhbFN5bmNUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzeW5jU3RhcnRUaW1lO1xuXG4gICAgICB0aGlzLnBlcmZvcm1hbmNlTG9nKFxuICAgICAgICBgVG90YWwgc3luYyBjb21wbGV0ZWQgaW4gJHtmb3JtYXRUaW1lKHRvdGFsU3luY1RpbWUpfSAtICR7dG90YWxGbGFzaGNhcmRzfSBmbGFzaGNhcmRzIGFjcm9zcyAke2RlY2tzLmxlbmd0aH0gZGVja3NgLFxuICAgICAgKTtcblxuICAgICAgLy8gUGVyZm9ybWFuY2Ugc3VtbWFyeVxuICAgICAgaWYgKGRlY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgYXZnRGVja1RpbWUgPSBmbGFzaGNhcmRTeW5jVGltZSAvIGRlY2tzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYXZnRmxhc2hjYXJkVGltZSA9XG4gICAgICAgICAgdG90YWxGbGFzaGNhcmRzID4gMCA/IGZsYXNoY2FyZFN5bmNUaW1lIC8gdG90YWxGbGFzaGNhcmRzIDogMDtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZUxvZyhcbiAgICAgICAgICBgUGVyZm9ybWFuY2U6ICR7Zm9ybWF0VGltZShhdmdEZWNrVGltZSl9L2RlY2ssICR7Zm9ybWF0VGltZShhdmdGbGFzaGNhcmRUaW1lKX0vZmxhc2hjYXJkYCxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gRmluYWwgcHJvZ3Jlc3MgdXBkYXRlXG4gICAgICBpZiAoc2hvd1Byb2dyZXNzICYmIG9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgb25Qcm9ncmVzcyh7XG4gICAgICAgICAgbWVzc2FnZTogYFx1MjcwNSBTeW5jIGNvbXBsZXRlISBQcm9jZXNzZWQgJHt0b3RhbEZsYXNoY2FyZHN9IGZsYXNoY2FyZHMgYWNyb3NzICR7ZGVja3MubGVuZ3RofSBkZWNrcyBpbiAke2Zvcm1hdFRpbWUodG90YWxTeW5jVGltZSl9IChEQiBzYXZlZCBpbiAke2Zvcm1hdFRpbWUoc2F2ZVRpbWUpfSlgLFxuICAgICAgICAgIHBlcmNlbnRhZ2U6IDEwMCxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsRGVja3M6IGRlY2tzLmxlbmd0aCxcbiAgICAgICAgdG90YWxGbGFzaGNhcmRzLFxuICAgICAgICBzeW5jVGltZTogdG90YWxTeW5jVGltZSxcbiAgICAgICAgc2F2ZVRpbWUsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKFwiRXJyb3IgZHVyaW5nIHN5bmM6XCIsIGVycm9yKTtcblxuICAgICAgaWYgKHNob3dQcm9ncmVzcyAmJiBvblByb2dyZXNzKSB7XG4gICAgICAgIG9uUHJvZ3Jlc3Moe1xuICAgICAgICAgIG1lc3NhZ2U6IGBcdTI3NEMgU3luYyBmYWlsZWQgLSBjaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLCBtZXNzYWdlOiAke2Vycm9yLm1lc3NhZ2V9LCBzdGFjayAke2Vycm9yLnN0YWNrfWAsXG4gICAgICAgICAgcGVyY2VudGFnZTogMCxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsRGVja3M6IDAsXG4gICAgICAgIHRvdGFsRmxhc2hjYXJkczogMCxcbiAgICAgICAgc3luY1RpbWU6IHBlcmZvcm1hbmNlLm5vdygpIC0gc3luY1N0YXJ0VGltZSxcbiAgICAgICAgc2F2ZVRpbWU6IDAsXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgYXMgRXJyb3IsXG4gICAgICB9O1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzU3luY2luZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTeW5jIGZsYXNoY2FyZHMgZm9yIGEgc3BlY2lmaWMgZGVja1xuICAgKi9cbiAgYXN5bmMgc3luY0RlY2soXG4gICAgZGVja0lkOiBzdHJpbmcsXG4gICAgZm9yY2VTeW5jOiBib29sZWFuID0gZmFsc2UsXG4gICAgb25Qcm9ncmVzcz86IChwcm9ncmVzczogeyBtZXNzYWdlOiBzdHJpbmc7IHBlcmNlbnRhZ2U6IG51bWJlciB9KSA9PiB2b2lkLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmRlYnVnTG9nKGBTeW5jaW5nIHNwZWNpZmljIGRlY2sgSUQ6ICR7ZGVja0lkfWApO1xuXG4gICAgLy8gR2V0IGRlY2sgdG8gZXh0cmFjdCBkaXNwbGF5IG5hbWVcbiAgICBjb25zdCBkZWNrID0gYXdhaXQgdGhpcy5kYi5nZXREZWNrQnlJZChkZWNrSWQpO1xuICAgIGlmICghZGVjaykge1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhgTm8gZGVjayBmb3VuZCBmb3IgSUQ6ICR7ZGVja0lkfWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRlY2tEaXNwbGF5TmFtZSA9IGRlY2submFtZTtcblxuICAgIGlmIChvblByb2dyZXNzKSB7XG4gICAgICBvblByb2dyZXNzKHtcbiAgICAgICAgbWVzc2FnZTogYFx1RDgzRFx1REQwNCBGb3JjZSByZWZyZXNoaW5nIGRlY2s6ICR7ZGVja0Rpc3BsYXlOYW1lfS4uLmAsXG4gICAgICAgIHBlcmNlbnRhZ2U6IDIwLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgYXdhaXQgdGhpcy5kZWNrTWFuYWdlci5zeW5jRmxhc2hjYXJkc0ZvckRlY2soZGVja0lkLCBmb3JjZVN5bmMpO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICBpZiAob25Qcm9ncmVzcykge1xuICAgICAgb25Qcm9ncmVzcyh7XG4gICAgICAgIG1lc3NhZ2U6IGBcdTI3MDUgRm9yY2UgcmVmcmVzaCBjb21wbGV0ZTogJHtkZWNrRGlzcGxheU5hbWV9ICgke01hdGgucm91bmQoZHVyYXRpb24pfW1zKWAsXG4gICAgICAgIHBlcmNlbnRhZ2U6IDEwMCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBkZWNrIGZvciBhIHNwZWNpZmljIGZpbGVcbiAgICovXG4gIGFzeW5jIGNyZWF0ZURlY2tGb3JGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIHRhZzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5kZWJ1Z0xvZyhgQ3JlYXRpbmcgZGVjayBmb3IgZmlsZTogJHtmaWxlUGF0aH0gd2l0aCB0YWc6ICR7dGFnfWApO1xuICAgIGF3YWl0IHRoaXMuZGVja01hbmFnZXIuY3JlYXRlRGVja0ZvckZpbGUoZmlsZVBhdGgsIHRhZyk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGZsYXNoY2FyZCBkZWNrIElEcyB3aGVuIGEgZGVjayBpcyByZW5hbWVkXG4gICAqL1xuICBhc3luYyB1cGRhdGVGbGFzaGNhcmREZWNrSWRzKFxuICAgIG9sZERlY2tJZDogc3RyaW5nLFxuICAgIG5ld0RlY2tJZDogc3RyaW5nLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgYFVwZGF0aW5nIGZsYXNoY2FyZCBkZWNrIElEcyBmcm9tICR7b2xkRGVja0lkfSB0byAke25ld0RlY2tJZH1gLFxuICAgICk7XG4gICAgYXdhaXQgdGhpcy5kZWNrTWFuYWdlci51cGRhdGVGbGFzaGNhcmREZWNrSWRzKG9sZERlY2tJZCwgbmV3RGVja0lkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3luYyBzdGF0aXN0aWNzXG4gICAqL1xuICBnZXRTeW5jU3RhdHMoKTogeyBpc0luUHJvZ3Jlc3M6IGJvb2xlYW4gfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzSW5Qcm9ncmVzczogdGhpcy5pc1N5bmNpbmcsXG4gICAgfTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEZsYXNoY2FyZCwgRmxhc2hjYXJkU3RhdGUgfSBmcm9tIFwiLi4vZGF0YWJhc2UvdHlwZXNcIjtcbmltcG9ydCB7XG4gIEZTUlNQcm9maWxlLFxuICBnZXRXZWlnaHRzRm9yUHJvZmlsZSxcbiAgZ2V0TWluTWludXRlc0ZvclByb2ZpbGUsXG4gIGdldE1heEludGVydmFsRGF5c0ZvclByb2ZpbGUsXG4gIHZhbGlkYXRlRlNSU1dlaWdodHMsXG4gIHZhbGlkYXRlUHJvZmlsZSxcbiAgdmFsaWRhdGVSZXF1ZXN0UmV0ZW50aW9uLFxufSBmcm9tIFwiLi9mc3JzLXdlaWdodHNcIjtcblxuZXhwb3J0IHR5cGUgUmF0aW5nTGFiZWwgPSBcImFnYWluXCIgfCBcImhhcmRcIiB8IFwiZ29vZFwiIHwgXCJlYXN5XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRlNSU1BhcmFtZXRlcnMge1xuICByZXF1ZXN0UmV0ZW50aW9uOiBudW1iZXI7IC8vIHRhcmdldCByZXRlbnRpb24gcmF0ZSAoMCwxKVxuICBwcm9maWxlOiBGU1JTUHJvZmlsZTsgLy8gXCJJTlRFTlNJVkVcIiB8IFwiU1RBTkRBUkRcIlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZTUlNDYXJkIHtcbiAgc3RhYmlsaXR5OiBudW1iZXI7XG4gIGRpZmZpY3VsdHk6IG51bWJlcjtcbiAgZWxhcHNlZERheXM6IG51bWJlcjtcbiAgcmVwczogbnVtYmVyO1xuICBsYXBzZXM6IG51bWJlcjtcbiAgc3RhdGU6IEZTUlNTdGF0ZTtcbiAgbGFzdFJldmlldzogRGF0ZTtcbn1cblxuZXhwb3J0IHR5cGUgRlNSU1N0YXRlID0gXCJOZXdcIiB8IFwiUmV2aWV3XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NoZWR1bGluZ0NhcmQge1xuICBkdWVEYXRlOiBzdHJpbmc7XG4gIGludGVydmFsOiBudW1iZXI7IC8vIGluIG1pbnV0ZXNcbiAgcmVwZXRpdGlvbnM6IG51bWJlcjtcbiAgc3RhYmlsaXR5OiBudW1iZXI7XG4gIGRpZmZpY3VsdHk6IG51bWJlcjtcbiAgc3RhdGU6IEZsYXNoY2FyZFN0YXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNjaGVkdWxpbmdJbmZvIHtcbiAgYWdhaW46IFNjaGVkdWxpbmdDYXJkO1xuICBoYXJkOiBTY2hlZHVsaW5nQ2FyZDtcbiAgZ29vZDogU2NoZWR1bGluZ0NhcmQ7XG4gIGVhc3k6IFNjaGVkdWxpbmdDYXJkO1xufVxuXG4vLyBDb25zdGFudHMgZm9yIGV4YWN0IGNhbGN1bGF0aW9uc1xuY29uc3QgTUlMTElTRUNPTkRTX1BFUl9EQVkgPSA4NjQwMDAwMDtcbmNvbnN0IE1JTlVURVNfUEVSX0RBWSA9IDE0NDA7XG5jb25zdCBTRUNPTkRTX1BFUl9NSU5VVEUgPSA2MDtcbmNvbnN0IE1JTExJU0VDT05EU19QRVJfTUlOVVRFID0gNjAwMDA7XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIGZvciBVSS1vbmx5IGZvcm1hdHRpbmcgLSBuZXZlciB1c2UgaW4gY2FsY3VsYXRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3VuZEZvckRpc3BsYXkodmFsdWU6IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiB2YWx1ZS50b0ZpeGVkKGRlY2ltYWxzKTtcbn1cblxuZXhwb3J0IGNsYXNzIEZTUlMge1xuICBwcml2YXRlIHBhcmFtczogRlNSU1BhcmFtZXRlcnM7XG5cbiAgY29uc3RydWN0b3IocGFyYW1zPzogUGFydGlhbDxGU1JTUGFyYW1ldGVycz4pIHtcbiAgICB0aGlzLnBhcmFtcyA9IHtcbiAgICAgIHJlcXVlc3RSZXRlbnRpb246IDAuOSxcbiAgICAgIHByb2ZpbGU6IFwiU1RBTkRBUkRcIixcbiAgICAgIC4uLnBhcmFtcyxcbiAgICB9O1xuICAgIHRoaXMudmFsaWRhdGVQYXJhbWV0ZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIEZTUlMgcGFyYW1ldGVyc1xuICAgKi9cbiAgdXBkYXRlUGFyYW1ldGVycyhwYXJhbXM6IFBhcnRpYWw8RlNSU1BhcmFtZXRlcnM+KSB7XG4gICAgdGhpcy5wYXJhbXMgPSB7IC4uLnRoaXMucGFyYW1zLCAuLi5wYXJhbXMgfTtcbiAgICB0aGlzLnZhbGlkYXRlUGFyYW1ldGVycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHByb2ZpbGUgd2VpZ2h0cyAoaGFyZGNvZGVkLCBub3QgdXNlci1lZGl0YWJsZSlcbiAgICovXG4gIHByaXZhdGUgZ2V0V2VpZ2h0cygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIGdldFdlaWdodHNGb3JQcm9maWxlKHRoaXMucGFyYW1zLnByb2ZpbGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtaW5pbXVtIG1pbnV0ZXMgZm9yIGN1cnJlbnQgcHJvZmlsZSAoaGFyZGNvZGVkKVxuICAgKi9cbiAgcHJpdmF0ZSBnZXRNaW5NaW51dGVzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIGdldE1pbk1pbnV0ZXNGb3JQcm9maWxlKHRoaXMucGFyYW1zLnByb2ZpbGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtYXhpbXVtIGludGVydmFsIGRheXMgZm9yIGN1cnJlbnQgcHJvZmlsZSAoaGFyZGNvZGVkKVxuICAgKi9cbiAgcHJpdmF0ZSBnZXRNYXhJbnRlcnZhbERheXMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gZ2V0TWF4SW50ZXJ2YWxEYXlzRm9yUHJvZmlsZSh0aGlzLnBhcmFtcy5wcm9maWxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBGU1JTIHBhcmFtZXRlcnNcbiAgICovXG4gIHByaXZhdGUgdmFsaWRhdGVQYXJhbWV0ZXJzKCkge1xuICAgIGlmICghdmFsaWRhdGVQcm9maWxlKHRoaXMucGFyYW1zLnByb2ZpbGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnZhbGlkIHByb2ZpbGU6ICR7dGhpcy5wYXJhbXMucHJvZmlsZX0sIG11c3QgYmUgXCJJTlRFTlNJVkVcIiBvciBcIlNUQU5EQVJEXCJgLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCF2YWxpZGF0ZVJlcXVlc3RSZXRlbnRpb24odGhpcy5wYXJhbXMucmVxdWVzdFJldGVudGlvbikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYHJlcXVlc3RSZXRlbnRpb24gbXVzdCBiZSBpbiByYW5nZSAoMC41LCAwLjk5NSksIGdvdCAke3RoaXMucGFyYW1zLnJlcXVlc3RSZXRlbnRpb259YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgaGFyZGNvZGVkIHdlaWdodHMgZm9yIGN1cnJlbnQgcHJvZmlsZVxuICAgIGNvbnN0IHdlaWdodHMgPSB0aGlzLmdldFdlaWdodHMoKTtcbiAgICBpZiAoIXZhbGlkYXRlRlNSU1dlaWdodHMod2VpZ2h0cykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEludmFsaWQgaGFyZGNvZGVkIHdlaWdodHMgZm9yIHByb2ZpbGUgJHt0aGlzLnBhcmFtcy5wcm9maWxlfWAsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgdGhlIG5leHQgc2NoZWR1bGluZyBpbmZvIGZvciBhIGZsYXNoY2FyZCBiYXNlZCBvbiByZXZpZXcgZGlmZmljdWx0eVxuICAgKi9cbiAgZ2V0U2NoZWR1bGluZ0luZm8oY2FyZDogRmxhc2hjYXJkKTogU2NoZWR1bGluZ0luZm8ge1xuICAgIGNvbnN0IGZzcnNDYXJkID0gdGhpcy5mbGFzaGNhcmRUb0ZTUlMoY2FyZCk7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblxuICAgIHJldHVybiB7XG4gICAgICBhZ2FpbjogdGhpcy5jYWxjdWxhdGVTY2hlZHVsZUZvclJhdGluZyhmc3JzQ2FyZCwgMSwgbm93KSxcbiAgICAgIGhhcmQ6IHRoaXMuY2FsY3VsYXRlU2NoZWR1bGVGb3JSYXRpbmcoZnNyc0NhcmQsIDIsIG5vdyksXG4gICAgICBnb29kOiB0aGlzLmNhbGN1bGF0ZVNjaGVkdWxlRm9yUmF0aW5nKGZzcnNDYXJkLCAzLCBub3cpLFxuICAgICAgZWFzeTogdGhpcy5jYWxjdWxhdGVTY2hlZHVsZUZvclJhdGluZyhmc3JzQ2FyZCwgNCwgbm93KSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIGZsYXNoY2FyZCBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgZGlmZmljdWx0eVxuICAgKi9cbiAgdXBkYXRlQ2FyZChjYXJkOiBGbGFzaGNhcmQsIGRpZmZpY3VsdHk6IFJhdGluZ0xhYmVsKTogRmxhc2hjYXJkIHtcbiAgICBjb25zdCByYXRpbmcgPSB0aGlzLmRpZmZpY3VsdHlUb1JhdGluZyhkaWZmaWN1bHR5KTtcbiAgICBjb25zdCBmc3JzQ2FyZCA9IHRoaXMuZmxhc2hjYXJkVG9GU1JTKGNhcmQpO1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5cbiAgICAvLyBDYWxjdWxhdGUgRlNSUyB1cGRhdGUgb25jZSBhbmQgcmV1c2VcbiAgICBjb25zdCB1cGRhdGVkRnNyc0NhcmQgPSB0aGlzLmNhbGN1bGF0ZVVwZGF0ZWRGc3JzQ2FyZChcbiAgICAgIGZzcnNDYXJkLFxuICAgICAgcmF0aW5nLFxuICAgICAgbm93LFxuICAgICk7XG4gICAgbGV0IGludGVydmFsTWludXRlczogbnVtYmVyO1xuXG4gICAgLy8gRm9yIFwiQWdhaW5cIiByYXRpbmcgKDEpLCBhbHdheXMgdXNlIG1pbmltdW0gaW50ZXJ2YWwgcmVnYXJkbGVzcyBvZiBzdGFiaWxpdHlcbiAgICBpZiAocmF0aW5nID09PSAxKSB7XG4gICAgICBpbnRlcnZhbE1pbnV0ZXMgPSB0aGlzLmdldE1pbk1pbnV0ZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW50ZXJ2YWxNaW51dGVzID0gdGhpcy5uZXh0SW50ZXJ2YWxNaW51dGVzKHVwZGF0ZWRGc3JzQ2FyZC5zdGFiaWxpdHkpO1xuICAgIH1cbiAgICBjb25zdCBzY2hlZHVsZSA9IHRoaXMuY3JlYXRlU2NoZWR1bGluZ0NhcmQoXG4gICAgICBpbnRlcnZhbE1pbnV0ZXMsXG4gICAgICB1cGRhdGVkRnNyc0NhcmQsXG4gICAgICBub3csXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICAuLi5jYXJkLFxuICAgICAgc3RhdGU6IHNjaGVkdWxlLnN0YXRlLFxuICAgICAgZHVlRGF0ZTogc2NoZWR1bGUuZHVlRGF0ZSxcbiAgICAgIGludGVydmFsOiBzY2hlZHVsZS5pbnRlcnZhbCxcbiAgICAgIGRpZmZpY3VsdHk6IHNjaGVkdWxlLmRpZmZpY3VsdHksIC8vIFN0b3JlIEZTUlMgZGlmZmljdWx0eSB3aXRoIGZ1bGwgcHJlY2lzaW9uXG4gICAgICByZXBldGl0aW9uczogc2NoZWR1bGUucmVwZXRpdGlvbnMsXG4gICAgICBzdGFiaWxpdHk6IHNjaGVkdWxlLnN0YWJpbGl0eSwgLy8gU3RvcmUgc3RhYmlsaXR5IHdpdGggZnVsbCBwcmVjaXNpb25cbiAgICAgIGxhcHNlczogdXBkYXRlZEZzcnNDYXJkLmxhcHNlcyxcbiAgICAgIGxhc3RSZXZpZXdlZDogbm93LnRvSVNPU3RyaW5nKCksXG4gICAgICBtb2RpZmllZDogbm93LnRvSVNPU3RyaW5nKCksXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlVXBkYXRlZEZzcnNDYXJkKFxuICAgIGNhcmQ6IEZTUlNDYXJkLFxuICAgIHJhdGluZzogbnVtYmVyLFxuICAgIG5vdzogRGF0ZSxcbiAgKTogRlNSU0NhcmQge1xuICAgIGlmIChjYXJkLnN0YXRlID09PSBcIk5ld1wiIHx8IGNhcmQuc3RhYmlsaXR5ID09PSAwIHx8IGNhcmQuZGlmZmljdWx0eSA9PT0gMCkge1xuICAgICAgLy8gSW5pdGlhbGl6YXRpb25cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmNhcmQsXG4gICAgICAgIHN0YWJpbGl0eTogdGhpcy5pbml0U3RhYmlsaXR5KHJhdGluZyksXG4gICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuaW5pdERpZmZpY3VsdHkocmF0aW5nKSxcbiAgICAgICAgcmVwczogMSxcbiAgICAgICAgbGFwc2VzOiByYXRpbmcgPT09IDEgPyAxIDogMCxcbiAgICAgICAgbGFzdFJldmlldzogbm93LFxuICAgICAgICBzdGF0ZTogXCJSZXZpZXdcIixcbiAgICAgICAgZWxhcHNlZERheXM6IDAsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTdWJzZXF1ZW50IHJldmlld3NcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSB7IC4uLmNhcmQgfTtcbiAgICAgIG5ld0NhcmQuZWxhcHNlZERheXMgPSB0aGlzLmdldEVsYXBzZWREYXlzKGNhcmQubGFzdFJldmlldywgbm93KTtcbiAgICAgIG5ld0NhcmQucmVwcyArPSAxO1xuXG4gICAgICBpZiAocmF0aW5nID09PSAxKSB7XG4gICAgICAgIC8vIFwiQWdhaW5cIiByYXRpbmc6IEluY3JlYXNlIGRpZmZpY3VsdHkgYW5kIHJlc2V0IHN0YWJpbGl0eSB0byB3WzBdXG4gICAgICAgIG5ld0NhcmQubGFwc2VzICs9IDE7XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgY3VycmVudCBkaWZmaWN1bHR5IGJlZm9yZSB1c2luZyBpdFxuICAgICAgICBpZiAoIWlzRmluaXRlKG5ld0NhcmQuZGlmZmljdWx0eSkgfHwgbmV3Q2FyZC5kaWZmaWN1bHR5IDw9IDApIHtcbiAgICAgICAgICBuZXdDYXJkLmRpZmZpY3VsdHkgPSB0aGlzLmluaXREaWZmaWN1bHR5KDMpOyAvLyBEZWZhdWx0IHRvIFwiZ29vZFwiIHJhdGluZyBkaWZmaWN1bHR5XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxjdWxhdGUgZGlmZmljdWx0eSBub3JtYWxseSAodGhpcyB3aWxsIGluY3JlYXNlIGl0IGZvciBcIkFnYWluXCIpXG4gICAgICAgIG5ld0NhcmQuZGlmZmljdWx0eSA9IHRoaXMubmV4dERpZmZpY3VsdHkobmV3Q2FyZC5kaWZmaWN1bHR5LCByYXRpbmcpO1xuXG4gICAgICAgIC8vIFJlc2V0IHN0YWJpbGl0eVxuICAgICAgICBuZXdDYXJkLnN0YWJpbGl0eSA9IHRoaXMuaW5pdFN0YWJpbGl0eShyYXRpbmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG90aGVyIHJhdGluZ3MsIGNhbGN1bGF0ZSBub3JtYWxseVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIGN1cnJlbnQgc3RhYmlsaXR5IGJlZm9yZSB1c2luZyBpdFxuICAgICAgICBpZiAoIWlzRmluaXRlKG5ld0NhcmQuc3RhYmlsaXR5KSB8fCBuZXdDYXJkLnN0YWJpbGl0eSA8PSAwKSB7XG4gICAgICAgICAgbmV3Q2FyZC5zdGFiaWxpdHkgPSB0aGlzLmluaXRTdGFiaWxpdHkoMyk7IC8vIERlZmF1bHQgdG8gXCJnb29kXCIgcmF0aW5nIHN0YWJpbGl0eVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmV0cmlldmFiaWxpdHkgPSB0aGlzLmZvcmdldHRpbmdDdXJ2ZShcbiAgICAgICAgICBuZXdDYXJkLmVsYXBzZWREYXlzLFxuICAgICAgICAgIG5ld0NhcmQuc3RhYmlsaXR5LFxuICAgICAgICApO1xuXG4gICAgICAgIG5ld0NhcmQuZGlmZmljdWx0eSA9IHRoaXMubmV4dERpZmZpY3VsdHkobmV3Q2FyZC5kaWZmaWN1bHR5LCByYXRpbmcpO1xuICAgICAgICBuZXdDYXJkLnN0YWJpbGl0eSA9IHRoaXMubmV4dFN0YWJpbGl0eShcbiAgICAgICAgICBuZXdDYXJkLmRpZmZpY3VsdHksXG4gICAgICAgICAgbmV3Q2FyZC5zdGFiaWxpdHksXG4gICAgICAgICAgcmV0cmlldmFiaWxpdHksXG4gICAgICAgICAgcmF0aW5nLFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEZpbmFsIHZhbGlkYXRpb24gb2YgY2FsY3VsYXRlZCBzdGFiaWxpdHlcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShuZXdDYXJkLnN0YWJpbGl0eSkgfHwgbmV3Q2FyZC5zdGFiaWxpdHkgPD0gMCkge1xuICAgICAgICAgIG5ld0NhcmQuc3RhYmlsaXR5ID0gdGhpcy5pbml0U3RhYmlsaXR5KHJhdGluZyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbmV3Q2FyZC5sYXN0UmV2aWV3ID0gbm93O1xuICAgICAgbmV3Q2FyZC5zdGF0ZSA9IFwiUmV2aWV3XCI7XG5cbiAgICAgIHJldHVybiBuZXdDYXJkO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlU2NoZWR1bGVGb3JSYXRpbmcoXG4gICAgY2FyZDogRlNSU0NhcmQsXG4gICAgcmF0aW5nOiBudW1iZXIsXG4gICAgbm93OiBEYXRlLFxuICApOiBTY2hlZHVsaW5nQ2FyZCB7XG4gICAgY29uc3QgdXBkYXRlZENhcmQgPSB0aGlzLmNhbGN1bGF0ZVVwZGF0ZWRGc3JzQ2FyZChjYXJkLCByYXRpbmcsIG5vdyk7XG5cbiAgICAvLyBWYWxpZGF0ZSB1cGRhdGVkIGNhcmQgc3RhYmlsaXR5XG4gICAgaWYgKCFpc0Zpbml0ZSh1cGRhdGVkQ2FyZC5zdGFiaWxpdHkpIHx8IHVwZGF0ZWRDYXJkLnN0YWJpbGl0eSA8PSAwKSB7XG4gICAgICB1cGRhdGVkQ2FyZC5zdGFiaWxpdHkgPSB0aGlzLmluaXRTdGFiaWxpdHkocmF0aW5nKTtcbiAgICB9XG5cbiAgICBsZXQgaW50ZXJ2YWxNaW51dGVzOiBudW1iZXI7XG5cbiAgICAvLyBGb3IgXCJBZ2FpblwiIHJhdGluZyAoMSksIGFsd2F5cyB1c2UgbWluaW11bSBpbnRlcnZhbCByZWdhcmRsZXNzIG9mIHN0YWJpbGl0eVxuICAgIGlmIChyYXRpbmcgPT09IDEpIHtcbiAgICAgIGludGVydmFsTWludXRlcyA9IHRoaXMuZ2V0TWluTWludXRlcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcnZhbE1pbnV0ZXMgPSB0aGlzLm5leHRJbnRlcnZhbE1pbnV0ZXModXBkYXRlZENhcmQuc3RhYmlsaXR5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVTY2hlZHVsaW5nQ2FyZChpbnRlcnZhbE1pbnV0ZXMsIHVwZGF0ZWRDYXJkLCBub3cpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTY2hlZHVsaW5nQ2FyZChcbiAgICBpbnRlcnZhbE1pbnV0ZXM6IG51bWJlcixcbiAgICBjYXJkOiBGU1JTQ2FyZCxcbiAgICBub3c6IERhdGUsXG4gICk6IFNjaGVkdWxpbmdDYXJkIHtcbiAgICBpZiAoIWlzRmluaXRlKG5vdy5nZXRUaW1lKCkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgcHJvdmlkZWQgdG8gY3JlYXRlU2NoZWR1bGluZ0NhcmRcIik7XG4gICAgfVxuXG4gICAgLy8gVXNlIGV4YWN0IG1pbGxpc2Vjb25kIGNhbGN1bGF0aW9uIGZvciBtYXhpbXVtIHByZWNpc2lvblxuICAgIGNvbnN0IGludGVydmFsTWlsbGlzZWNvbmRzID0gaW50ZXJ2YWxNaW51dGVzICogTUlMTElTRUNPTkRTX1BFUl9NSU5VVEU7XG4gICAgY29uc3QgZHVlRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyBpbnRlcnZhbE1pbGxpc2Vjb25kcyk7XG5cbiAgICAvLyBWYWxpZGF0ZSB0aGUgcmVzdWx0aW5nIGRhdGVcbiAgICBpZiAoIWlzRmluaXRlKGR1ZURhdGUuZ2V0VGltZSgpKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW52YWxpZCBkdWUgZGF0ZSBjYWxjdWxhdGVkOiBpbnRlcnZhbE1pbnV0ZXM9JHtpbnRlcnZhbE1pbnV0ZXN9LCBub3c9JHtub3cudG9JU09TdHJpbmcoKX1gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZHVlRGF0ZTogZHVlRGF0ZS50b0lTT1N0cmluZygpLFxuICAgICAgaW50ZXJ2YWw6IGludGVydmFsTWludXRlcywgLy8gU3RvcmUgZnVsbCBwcmVjaXNpb24gaW50ZXJ2YWxcbiAgICAgIHJlcGV0aXRpb25zOiBjYXJkLnJlcHMsXG4gICAgICBzdGFiaWxpdHk6IGNhcmQuc3RhYmlsaXR5LCAvLyBTdG9yZSBmdWxsIHByZWNpc2lvbiBzdGFiaWxpdHlcbiAgICAgIGRpZmZpY3VsdHk6IGNhcmQuZGlmZmljdWx0eSwgLy8gU3RvcmUgZnVsbCBwcmVjaXNpb24gZGlmZmljdWx0eVxuICAgICAgc3RhdGU6IHRoaXMuZnNyc1N0YXRlVG9GbGFzaGNhcmRTdGF0ZShjYXJkLnN0YXRlKSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0U3RhYmlsaXR5KHJhdGluZzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCB3ZWlnaHRzID0gdGhpcy5nZXRXZWlnaHRzKCk7XG4gICAgY29uc3Qgc3RhYmlsaXR5ID0gd2VpZ2h0c1tyYXRpbmcgLSAxXTtcbiAgICBjb25zdCByZXN1bHQgPSBpc0Zpbml0ZShzdGFiaWxpdHkpID8gc3RhYmlsaXR5IDogMC4wMTsgLy8gQWxsb3cgdmVyeSBzbWFsbCBzdGFiaWxpdGllcyBmb3Igc3ViLWRheSBpbnRlcnZhbHNcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0RGlmZmljdWx0eShyYXRpbmc6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3Qgd2VpZ2h0cyA9IHRoaXMuZ2V0V2VpZ2h0cygpO1xuICAgIGNvbnN0IHc0ID0gd2VpZ2h0c1s0XTtcbiAgICBjb25zdCB3NSA9IHdlaWdodHNbNV07XG4gICAgY29uc3QgcmF0aW5nRGlmZiA9IHJhdGluZyAtIDM7XG4gICAgY29uc3QgZGlmZmljdWx0eSA9IHc0IC0gdzUgKiByYXRpbmdEaWZmO1xuXG4gICAgY29uc3QgdmFsaWREaWZmaWN1bHR5ID0gaXNGaW5pdGUoZGlmZmljdWx0eSkgPyBkaWZmaWN1bHR5IDogNS4wO1xuXG4gICAgLy8gQXBwbHkgY2xhbXBpbmcgb25seSBhZnRlciBhbGwgY2FsY3VsYXRpb25zXG4gICAgaWYgKHZhbGlkRGlmZmljdWx0eSA8IDEpIHJldHVybiAxO1xuICAgIGlmICh2YWxpZERpZmZpY3VsdHkgPiAxMCkgcmV0dXJuIDEwO1xuICAgIHJldHVybiB2YWxpZERpZmZpY3VsdHk7XG4gIH1cblxuICAvKipcbiAgICogRm9yZ2V0dGluZyBjdXJ2ZSBmdW5jdGlvbiB3aXRoIG1heGltdW0gcHJlY2lzaW9uXG4gICAqL1xuICBwdWJsaWMgZm9yZ2V0dGluZ0N1cnZlKGVsYXBzZWREYXlzOiBudW1iZXIsIHN0YWJpbGl0eTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAoIWlzRmluaXRlKGVsYXBzZWREYXlzKSB8fCAhaXNGaW5pdGUoc3RhYmlsaXR5KSB8fCBzdGFiaWxpdHkgPD0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgaW50ZXJtZWRpYXRlIGNhbGN1bGF0aW9ucyB0byBhdm9pZCBwcmVjaXNpb24gbG9zc1xuICAgIGNvbnN0IHN0YWJpbGl0eUZhY3RvciA9IDkgKiBzdGFiaWxpdHk7XG4gICAgY29uc3QgZWxhcHNlZFRvU3RhYmlsaXR5UmF0aW8gPSBlbGFwc2VkRGF5cyAvIHN0YWJpbGl0eUZhY3RvcjtcbiAgICBjb25zdCBiYXNlVGVybSA9IDEgKyBlbGFwc2VkVG9TdGFiaWxpdHlSYXRpbztcblxuICAgIGlmICghaXNGaW5pdGUoYmFzZVRlcm0pIHx8IGJhc2VUZXJtIDw9IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSBwb3dlciB0ZXJtIHdpdGggZnVsbCBwcmVjaXNpb25cbiAgICBjb25zdCBwb3dlclRlcm0gPSBNYXRoLnBvdyhiYXNlVGVybSwgLTEpO1xuXG4gICAgcmV0dXJuIGlzRmluaXRlKHBvd2VyVGVybSkgPyBwb3dlclRlcm0gOiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSByZXRyaWV2YWJpbGl0eSBmb3IgYSBmbGFzaGNhcmQgYXQgcmV2aWV3IHRpbWVcbiAgICogQHBhcmFtIGNhcmQgLSBUaGUgZmxhc2hjYXJkIGJlaW5nIHJldmlld2VkXG4gICAqIEBwYXJhbSByZXZpZXdlZEF0IC0gV2hlbiB0aGUgcmV2aWV3IGlzIGhhcHBlbmluZ1xuICAgKiBAcmV0dXJucyBSZXRyaWV2YWJpbGl0eSB2YWx1ZSAoMC0xKVxuICAgKi9cbiAgcHVibGljIGdldFJldHJpZXZhYmlsaXR5KFxuICAgIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICByZXZpZXdlZEF0OiBEYXRlID0gbmV3IERhdGUoKSxcbiAgKTogbnVtYmVyIHtcbiAgICBpZiAoIWNhcmQubGFzdFJldmlld2VkIHx8IGNhcmQuc3RhYmlsaXR5IDw9IDApIHtcbiAgICAgIHJldHVybiAwLjk7IC8vIERlZmF1bHQgZm9yIG5ldyBjYXJkcyBvciBpbnZhbGlkIHN0YWJpbGl0eVxuICAgIH1cblxuICAgIGNvbnN0IHJldmlld2VkQXRUaW1lID0gcmV2aWV3ZWRBdC5nZXRUaW1lKCk7XG4gICAgY29uc3QgbGFzdFJldmlld2VkVGltZSA9IG5ldyBEYXRlKGNhcmQubGFzdFJldmlld2VkKS5nZXRUaW1lKCk7XG4gICAgY29uc3QgZWxhcHNlZE1pbGxpc2Vjb25kcyA9IHJldmlld2VkQXRUaW1lIC0gbGFzdFJldmlld2VkVGltZTtcblxuICAgIC8vIENvbnZlcnQgdG8gZGF5cyB3aXRoIG1heGltdW0gcHJlY2lzaW9uXG4gICAgY29uc3QgZWxhcHNlZERheXMgPSBNYXRoLm1heCgwLCBlbGFwc2VkTWlsbGlzZWNvbmRzIC8gTUlMTElTRUNPTkRTX1BFUl9EQVkpO1xuXG4gICAgcmV0dXJuIHRoaXMuZm9yZ2V0dGluZ0N1cnZlKGVsYXBzZWREYXlzLCBjYXJkLnN0YWJpbGl0eSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIG5leHQgZGlmZmljdWx0eSB3aXRoIG1heGltdW0gcHJlY2lzaW9uXG4gICAqL1xuICBwcml2YXRlIG5leHREaWZmaWN1bHR5KGRpZmZpY3VsdHk6IG51bWJlciwgcmF0aW5nOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICghaXNGaW5pdGUoZGlmZmljdWx0eSkgfHwgIWlzRmluaXRlKHJhdGluZykpIHtcbiAgICAgIHJldHVybiA1LjA7XG4gICAgfVxuXG4gICAgY29uc3Qgd2VpZ2h0cyA9IHRoaXMuZ2V0V2VpZ2h0cygpO1xuICAgIGNvbnN0IHc2ID0gd2VpZ2h0c1s2XTtcbiAgICBjb25zdCByYXRpbmdEaWZmID0gcmF0aW5nIC0gMztcbiAgICBjb25zdCBkaWZmaWN1bHR5Q2hhbmdlID0gdzYgKiByYXRpbmdEaWZmO1xuICAgIGNvbnN0IG5leHREID0gZGlmZmljdWx0eSAtIGRpZmZpY3VsdHlDaGFuZ2U7XG5cbiAgICBjb25zdCB3NCA9IHdlaWdodHNbNF07XG4gICAgY29uc3QgcmV2ZXJ0ZWREID0gdGhpcy5tZWFuUmV2ZXJzaW9uKHc0LCBuZXh0RCk7XG5cbiAgICAvLyBBcHBseSBjbGFtcGluZyBvbmx5IGFmdGVyIGFsbCBjYWxjdWxhdGlvbnNcbiAgICBpZiAocmV2ZXJ0ZWREIDwgMSkgcmV0dXJuIDE7XG4gICAgaWYgKHJldmVydGVkRCA+IDEwKSByZXR1cm4gMTA7XG4gICAgcmV0dXJuIHJldmVydGVkRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBNZWFuIHJldmVyc2lvbiBjYWxjdWxhdGlvbiB3aXRoIG1heGltdW0gcHJlY2lzaW9uXG4gICAqL1xuICBwcml2YXRlIG1lYW5SZXZlcnNpb24oaW5pdDogbnVtYmVyLCBjdXJyZW50OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICghaXNGaW5pdGUoaW5pdCkgfHwgIWlzRmluaXRlKGN1cnJlbnQpKSB7XG4gICAgICByZXR1cm4gaW5pdDtcbiAgICB9XG5cbiAgICBjb25zdCB3ZWlnaHRzID0gdGhpcy5nZXRXZWlnaHRzKCk7XG4gICAgY29uc3QgdzcgPSB3ZWlnaHRzWzddO1xuICAgIGNvbnN0IGluaXRXZWlnaHQgPSB3NyAqIGluaXQ7XG4gICAgY29uc3QgY3VycmVudFdlaWdodCA9ICgxIC0gdzcpICogY3VycmVudDtcblxuICAgIHJldHVybiBpbml0V2VpZ2h0ICsgY3VycmVudFdlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgbmV4dCBzdGFiaWxpdHkgd2l0aCBtYXhpbXVtIHByZWNpc2lvblxuICAgKi9cbiAgcHJpdmF0ZSBuZXh0U3RhYmlsaXR5KFxuICAgIGRpZmZpY3VsdHk6IG51bWJlcixcbiAgICBzdGFiaWxpdHk6IG51bWJlcixcbiAgICByZXRyaWV2YWJpbGl0eTogbnVtYmVyLFxuICAgIHJhdGluZzogbnVtYmVyLFxuICApOiBudW1iZXIge1xuICAgIC8vIFZhbGlkYXRlIGlucHV0c1xuICAgIGlmIChcbiAgICAgICFpc0Zpbml0ZShkaWZmaWN1bHR5KSB8fFxuICAgICAgIWlzRmluaXRlKHN0YWJpbGl0eSkgfHxcbiAgICAgICFpc0Zpbml0ZShyZXRyaWV2YWJpbGl0eSlcbiAgICApIHtcbiAgICAgIHJldHVybiBNYXRoLm1heChzdGFiaWxpdHksIDAuMDEpO1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3Qgd2VpZ2h0cyB3aXRoIHZhbGlkYXRpb25cbiAgICBjb25zdCB3ZWlnaHRzID0gdGhpcy5nZXRXZWlnaHRzKCk7XG4gICAgY29uc3QgdzggPSBpc0Zpbml0ZSh3ZWlnaHRzWzhdKSA/IHdlaWdodHNbOF0gOiAwO1xuICAgIGNvbnN0IHc5ID0gaXNGaW5pdGUod2VpZ2h0c1s5XSkgPyB3ZWlnaHRzWzldIDogMC4xO1xuICAgIGNvbnN0IHcxMCA9IGlzRmluaXRlKHdlaWdodHNbMTBdKSA/IHdlaWdodHNbMTBdIDogMDtcbiAgICBjb25zdCB3MTUgPSBpc0Zpbml0ZSh3ZWlnaHRzWzE1XSkgPyB3ZWlnaHRzWzE1XSA6IDE7XG4gICAgY29uc3QgdzE2ID0gaXNGaW5pdGUod2VpZ2h0c1sxNl0pID8gd2VpZ2h0c1sxNl0gOiAxO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHBlbmFsdHkvYm9udXMgZmFjdG9yc1xuICAgIGNvbnN0IGhhcmRQZW5hbHR5ID0gcmF0aW5nID09PSAyID8gdzE1IDogMTtcbiAgICBjb25zdCBlYXN5Qm9udXMgPSByYXRpbmcgPT09IDQgPyB3MTYgOiAxO1xuXG4gICAgLy8gU3RvcmUgaW50ZXJtZWRpYXRlIGNhbGN1bGF0aW9ucyB0byBhdm9pZCBwcmVjaXNpb24gbG9zc1xuICAgIGNvbnN0IGV4cFc4ID0gTWF0aC5leHAodzgpO1xuICAgIGNvbnN0IGRpZmZpY3VsdHlUZXJtID0gMTEgLSBkaWZmaWN1bHR5O1xuICAgIGNvbnN0IHN0YWJpbGl0eVBvd2VyVGVybSA9IHN0YWJpbGl0eSA+IDAgPyBNYXRoLnBvdyhzdGFiaWxpdHksIC13OSkgOiAxO1xuICAgIGNvbnN0IHJldHJpZXZhYmlsaXR5VGVybSA9IDEgLSByZXRyaWV2YWJpbGl0eTtcbiAgICBjb25zdCByZXRyaWV2YWJpbGl0eVByb2R1Y3QgPSByZXRyaWV2YWJpbGl0eVRlcm0gKiB3MTA7XG4gICAgY29uc3QgZXhwUmV0cmlldmFiaWxpdHlUZXJtID0gTWF0aC5leHAocmV0cmlldmFiaWxpdHlQcm9kdWN0KSAtIDE7XG5cbiAgICAvLyBWYWxpZGF0ZSBlYWNoIGludGVybWVkaWF0ZSByZXN1bHRcbiAgICBpZiAoXG4gICAgICAhaXNGaW5pdGUoZXhwVzgpIHx8XG4gICAgICAhaXNGaW5pdGUoZGlmZmljdWx0eVRlcm0pIHx8XG4gICAgICAhaXNGaW5pdGUoc3RhYmlsaXR5UG93ZXJUZXJtKSB8fFxuICAgICAgIWlzRmluaXRlKGV4cFJldHJpZXZhYmlsaXR5VGVybSlcbiAgICApIHtcbiAgICAgIHJldHVybiBNYXRoLm1heChzdGFiaWxpdHksIDAuMDEpO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSBncm93dGggZmFjdG9yIHdpdGggZnVsbCBwcmVjaXNpb25cbiAgICBjb25zdCBncm93dGhGYWN0b3IgPVxuICAgICAgZXhwVzggKiBkaWZmaWN1bHR5VGVybSAqIHN0YWJpbGl0eVBvd2VyVGVybSAqIGV4cFJldHJpZXZhYmlsaXR5VGVybTtcbiAgICBjb25zdCB0b3RhbEdyb3d0aEZhY3RvciA9IGdyb3d0aEZhY3RvciAqIGhhcmRQZW5hbHR5ICogZWFzeUJvbnVzO1xuICAgIGNvbnN0IG5ld1N0YWJpbGl0eUZhY3RvciA9IDEgKyB0b3RhbEdyb3d0aEZhY3RvcjtcbiAgICBjb25zdCByZXN1bHQgPSBzdGFiaWxpdHkgKiBuZXdTdGFiaWxpdHlGYWN0b3I7XG5cbiAgICAvLyBWYWxpZGF0ZSByZXN1bHQgYW5kIGVuc3VyZSBpdCdzIHBvc2l0aXZlXG4gICAgcmV0dXJuIGlzRmluaXRlKHJlc3VsdCkgJiYgcmVzdWx0ID4gMCA/IHJlc3VsdCA6IE1hdGgubWF4KHN0YWJpbGl0eSwgMC4xKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgbmV4dCBpbnRlcnZhbCBpbiBtaW51dGVzIHdpdGggbWF4aW11bSBwcmVjaXNpb25cbiAgICovXG4gIHByaXZhdGUgbmV4dEludGVydmFsTWludXRlcyhzdGFiaWxpdHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgbWluSW50ZXJ2YWwgPSB0aGlzLmdldE1pbk1pbnV0ZXMoKTtcblxuICAgIC8vIFZhbGlkYXRlIHN0YWJpbGl0eVxuICAgIGlmICghaXNGaW5pdGUoc3RhYmlsaXR5KSB8fCBzdGFiaWxpdHkgPD0gMCkge1xuICAgICAgY29uc29sZS53YXJuKGBJbnZhbGlkIHN0YWJpbGl0eTogJHtzdGFiaWxpdHl9LCB1c2luZyBtaW5NaW51dGVzYCk7XG4gICAgICByZXR1cm4gbWluSW50ZXJ2YWw7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgcGFyYW1ldGVyc1xuICAgIGlmIChcbiAgICAgICFpc0Zpbml0ZSh0aGlzLnBhcmFtcy5yZXF1ZXN0UmV0ZW50aW9uKSB8fFxuICAgICAgdGhpcy5wYXJhbXMucmVxdWVzdFJldGVudGlvbiA8PSAwIHx8XG4gICAgICB0aGlzLnBhcmFtcy5yZXF1ZXN0UmV0ZW50aW9uID49IDFcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYEludmFsaWQgcmVxdWVzdFJldGVudGlvbjogJHt0aGlzLnBhcmFtcy5yZXF1ZXN0UmV0ZW50aW9ufSwgdXNpbmcgbWluTWludXRlc2AsXG4gICAgICApO1xuICAgICAgcmV0dXJuIG1pbkludGVydmFsO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSB3aXRoIG1heGltdW0gcHJlY2lzaW9uIHVzaW5nIGV4YWN0IGNvbnN0YW50c1xuICAgIGNvbnN0IHJldGVudGlvbkxvZyA9IE1hdGgubG9nKHRoaXMucGFyYW1zLnJlcXVlc3RSZXRlbnRpb24pO1xuICAgIGNvbnN0IGJhc2VMb2cgPSBNYXRoLmxvZygwLjkpO1xuICAgIGNvbnN0IGsgPSByZXRlbnRpb25Mb2cgLyBiYXNlTG9nOyAvLyBwb3NpdGl2ZSBmb3IgMDxyZXF1ZXN0UmV0ZW50aW9uPDFcblxuICAgIC8vIENhbGN1bGF0ZSBpbnRlcnZhbCB1c2luZyBleGFjdCBkYXktdG8tbWludXRlIGNvbnZlcnNpb25cbiAgICBjb25zdCBpbnRlcnZhbERheXMgPSBzdGFiaWxpdHkgKiBrO1xuICAgIGNvbnN0IGludGVydmFsTWludXRlcyA9IGludGVydmFsRGF5cyAqIE1JTlVURVNfUEVSX0RBWTtcblxuICAgIC8vIFZhbGlkYXRlIGNhbGN1bGF0aW9uIHJlc3VsdFxuICAgIGlmICghaXNGaW5pdGUoaW50ZXJ2YWxNaW51dGVzKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgSW52YWxpZCBtaW51dGVzIGNhbGN1bGF0aW9uOiBzdGFiaWxpdHk9JHtzdGFiaWxpdHl9LCBrPSR7a30sIHVzaW5nIG1pbk1pbnV0ZXNgLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBtaW5JbnRlcnZhbDtcbiAgICB9XG5cbiAgICAvLyBBcHBseSBib3VuZHMgd2l0aCBleGFjdCBjb252ZXJzaW9uXG4gICAgY29uc3QgbWF4SW50ZXJ2YWwgPSB0aGlzLmdldE1heEludGVydmFsRGF5cygpICogTUlOVVRFU19QRVJfREFZO1xuXG4gICAgbGV0IHJlc3VsdCA9IGludGVydmFsTWludXRlcztcbiAgICBpZiAocmVzdWx0IDwgbWluSW50ZXJ2YWwpIHJlc3VsdCA9IG1pbkludGVydmFsO1xuICAgIGlmIChyZXN1bHQgPiBtYXhJbnRlcnZhbCkgcmVzdWx0ID0gbWF4SW50ZXJ2YWw7XG5cbiAgICAvLyBGaW5hbCB2YWxpZGF0aW9uIHRvIGVuc3VyZSByZXN1bHQgaXMgZmluaXRlXG4gICAgaWYgKCFpc0Zpbml0ZShyZXN1bHQpKSB7XG4gICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgZmluYWwgcmVzdWx0OiAke3Jlc3VsdH0sIHVzaW5nIG1pbk1pbnV0ZXNgKTtcbiAgICAgIHJldHVybiBtaW5JbnRlcnZhbDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBlbGFwc2VkIGRheXMgd2l0aCBtYXhpbXVtIHByZWNpc2lvblxuICAgKi9cbiAgcHJpdmF0ZSBnZXRFbGFwc2VkRGF5cyhsYXN0UmV2aWV3OiBEYXRlLCBub3c6IERhdGUpOiBudW1iZXIge1xuICAgIGNvbnN0IG5vd1RpbWUgPSBub3cuZ2V0VGltZSgpO1xuICAgIGNvbnN0IGxhc3RSZXZpZXdUaW1lID0gbGFzdFJldmlldy5nZXRUaW1lKCk7XG4gICAgY29uc3QgZWxhcHNlZE1pbGxpc2Vjb25kcyA9IG5vd1RpbWUgLSBsYXN0UmV2aWV3VGltZTtcbiAgICBjb25zdCBlbGFwc2VkRGF5cyA9IGVsYXBzZWRNaWxsaXNlY29uZHMgLyBNSUxMSVNFQ09ORFNfUEVSX0RBWTtcblxuICAgIHJldHVybiBNYXRoLm1heCgwLCBlbGFwc2VkRGF5cyk7XG4gIH1cblxuICBwcml2YXRlIGZsYXNoY2FyZFRvRlNSUyhjYXJkOiBGbGFzaGNhcmQpOiBGU1JTQ2FyZCB7XG4gICAgY29uc3QgbGFzdFJldmlldyA9IGNhcmQubGFzdFJldmlld2VkXG4gICAgICA/IG5ldyBEYXRlKGNhcmQubGFzdFJldmlld2VkKVxuICAgICAgOiBuZXcgRGF0ZSgpO1xuXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IGNhcmQuZGlmZmljdWx0eSB8fCA1LjA7IC8vIFVzZSBkaWZmaWN1bHR5IGZpZWxkXG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhYmlsaXR5OiBjYXJkLnN0YWJpbGl0eSB8fCAwLFxuICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSB8fCAwLFxuICAgICAgZWxhcHNlZERheXM6IDAsIC8vIFdpbGwgYmUgY2FsY3VsYXRlZCBpbiBzY2hlZHVsaW5nXG4gICAgICByZXBzOiBjYXJkLnJlcGV0aXRpb25zLFxuICAgICAgbGFwc2VzOiBjYXJkLmxhcHNlcyB8fCAwLFxuICAgICAgc3RhdGU6IHRoaXMuZmxhc2hjYXJkU3RhdGVUb0ZTUlNTdGF0ZShjYXJkLnN0YXRlKSxcbiAgICAgIGxhc3RSZXZpZXcsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZmxhc2hjYXJkU3RhdGVUb0ZTUlNTdGF0ZShzdGF0ZTogRmxhc2hjYXJkU3RhdGUpOiBGU1JTU3RhdGUge1xuICAgIC8vIE1hcCBhbGwgbm9uLW5ldyBzdGF0ZXMgdG8gUmV2aWV3IGZvciBwdXJlIEZTUlNcbiAgICByZXR1cm4gc3RhdGUgPT09IFwibmV3XCIgPyBcIk5ld1wiIDogXCJSZXZpZXdcIjtcbiAgfVxuXG4gIHByaXZhdGUgZnNyc1N0YXRlVG9GbGFzaGNhcmRTdGF0ZShzdGF0ZTogRlNSU1N0YXRlKTogRmxhc2hjYXJkU3RhdGUge1xuICAgIC8vIE1hcCBGU1JTIHN0YXRlcyB0byBmbGFzaGNhcmQgc3RhdGVzIChvbmx5IG5ldyBhbmQgcmV2aWV3IGZvciBwdXJlIEZTUlMpXG4gICAgcmV0dXJuIHN0YXRlID09PSBcIk5ld1wiID8gXCJuZXdcIiA6IFwicmV2aWV3XCI7XG4gIH1cblxuICBwcml2YXRlIGRpZmZpY3VsdHlUb1JhdGluZyhkaWZmaWN1bHR5OiBSYXRpbmdMYWJlbCk6IG51bWJlciB7XG4gICAgc3dpdGNoIChkaWZmaWN1bHR5KSB7XG4gICAgICBjYXNlIFwiYWdhaW5cIjpcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICBjYXNlIFwiaGFyZFwiOlxuICAgICAgICByZXR1cm4gMjtcbiAgICAgIGNhc2UgXCJnb29kXCI6XG4gICAgICAgIHJldHVybiAzO1xuICAgICAgY2FzZSBcImVhc3lcIjpcbiAgICAgICAgcmV0dXJuIDQ7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gMztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRpc3BsYXkgdGV4dCBmb3IgaW50ZXJ2YWxzIC0gVUkgZm9ybWF0dGluZyBvbmx5XG4gICAqL1xuICBzdGF0aWMgZ2V0SW50ZXJ2YWxEaXNwbGF5KG1pbnV0ZXM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKG1pbnV0ZXMgPCA2MCkge1xuICAgICAgcmV0dXJuIGAke01hdGgucm91bmQobWludXRlcyl9bWA7XG4gICAgfSBlbHNlIGlmIChtaW51dGVzIDwgTUlOVVRFU19QRVJfREFZKSB7XG4gICAgICBjb25zdCBob3VycyA9IE1hdGgucm91bmQobWludXRlcyAvIDYwKTtcbiAgICAgIHJldHVybiBgJHtob3Vyc31oYDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGF5cyA9IE1hdGgucm91bmQobWludXRlcyAvIE1JTlVURVNfUEVSX0RBWSk7XG4gICAgICBpZiAoZGF5cyA8IDMwKSB7XG4gICAgICAgIHJldHVybiBgJHtkYXlzfWRgO1xuICAgICAgfSBlbHNlIGlmIChkYXlzIDwgMzY1KSB7XG4gICAgICAgIGNvbnN0IG1vbnRocyA9IE1hdGgucm91bmQoZGF5cyAvIDMwKTtcbiAgICAgICAgcmV0dXJuIGAke21vbnRoc31tb2A7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB5ZWFycyA9IGRheXMgLyAzNjU7XG4gICAgICAgIHJldHVybiBgJHtyb3VuZEZvckRpc3BsYXkoeWVhcnMsIDEpfXlgO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIEZsYXNoY2FyZCxcbiAgRmxhc2hjYXJkU3RhdGUsXG4gIERlY2ssXG4gIFJldmlld0xvZyxcbiAgUmV2aWV3U2Vzc2lvbixcbn0gZnJvbSBcIi4uL2RhdGFiYXNlL3R5cGVzXCI7XG5pbXBvcnQgeyBEYXRhYmFzZVNlcnZpY2UgfSBmcm9tIFwiLi4vZGF0YWJhc2UvRGF0YWJhc2VTZXJ2aWNlXCI7XG5pbXBvcnQge1xuICBGU1JTLFxuICB0eXBlIFJhdGluZ0xhYmVsLFxuICB0eXBlIFNjaGVkdWxpbmdJbmZvLFxuICB0eXBlIFNjaGVkdWxpbmdDYXJkLFxufSBmcm9tIFwiLi4vYWxnb3JpdGhtL2ZzcnNcIjtcbmltcG9ydCB7XG4gIGdldFdlaWdodHNGb3JQcm9maWxlLFxuICBnZXRNaW5NaW51dGVzRm9yUHJvZmlsZSxcbiAgZ2V0TWF4SW50ZXJ2YWxEYXlzRm9yUHJvZmlsZSxcbiAgRlNSU1Byb2ZpbGUsXG59IGZyb20gXCIuLi9hbGdvcml0aG0vZnNycy13ZWlnaHRzXCI7XG5pbXBvcnQgeyB5aWVsZFRvVUkgfSBmcm9tIFwiLi4vdXRpbHMvdWlcIjtcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi91dGlscy9sb2dnaW5nXCI7XG5pbXBvcnQgeyBGbGFzaGNhcmRzU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IERhdGFBZGFwdGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBCYWNrdXBTZXJ2aWNlIH0gZnJvbSBcIi4vQmFja3VwU2VydmljZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNjaGVkdWxlck9wdGlvbnMge1xuICBhbGxvd05ldz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NoZWR1bGluZ1ByZXZpZXcge1xuICBhZ2FpbjogU2NoZWR1bGluZ0NhcmQ7XG4gIGhhcmQ6IFNjaGVkdWxpbmdDYXJkO1xuICBnb29kOiBTY2hlZHVsaW5nQ2FyZDtcbiAgZWFzeTogU2NoZWR1bGluZ0NhcmQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvblByb2dyZXNzIHtcbiAgZG9uZVVuaXF1ZTogbnVtYmVyO1xuICBnb2FsVG90YWw6IG51bWJlcjtcbiAgcHJvZ3Jlc3M6IG51bWJlcjsgLy8gMC0xMDBcbn1cblxuLyoqXG4gKiBVbmlmaWVkIHNjaGVkdWxlciB0aGF0IGNvbnNvbGlkYXRlcyBhbGwgY2FyZCBzZWxlY3Rpb24gYW5kIHNjaGVkdWxpbmcgbG9naWMuXG4gKiBIYW5kbGVzIGRldGVybWluaXN0aWMgY2FyZCBzZWxlY3Rpb24sIEZTUlMtYmFzZWQgaW50ZXJ2YWwgY2FsY3VsYXRpb24sXG4gKiBhbmQgYXRvbWljIHN0YXRlIHVwZGF0ZXMgd2l0aCByZXZpZXcgbG9nZ2luZy5cbiAqL1xuZXhwb3J0IGNsYXNzIFNjaGVkdWxlciB7XG4gIHByaXZhdGUgZGI6IERhdGFiYXNlU2VydmljZTtcbiAgcHJpdmF0ZSBmc3JzOiBGU1JTO1xuICBwcml2YXRlIGN1cnJlbnRTZXNzaW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuICBwcml2YXRlIGJhY2t1cFNlcnZpY2U6IEJhY2t1cFNlcnZpY2UgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzZXR0aW5nczogRmxhc2hjYXJkc1NldHRpbmdzO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGRiOiBEYXRhYmFzZVNlcnZpY2UsXG4gICAgc2V0dGluZ3M6IEZsYXNoY2FyZHNTZXR0aW5ncyxcbiAgICBhZGFwdGVyOiBEYXRhQWRhcHRlcixcbiAgICBjb25maWdEaXI6IHN0cmluZyxcbiAgICBiYWNrdXBTZXJ2aWNlPzogQmFja3VwU2VydmljZSxcbiAgKSB7XG4gICAgdGhpcy5kYiA9IGRiO1xuICAgIHRoaXMuZnNycyA9IG5ldyBGU1JTKCk7XG4gICAgdGhpcy5sb2dnZXIgPSBuZXcgTG9nZ2VyKHNldHRpbmdzLCBhZGFwdGVyLCBjb25maWdEaXIpO1xuICAgIHRoaXMuYmFja3VwU2VydmljZSA9IGJhY2t1cFNlcnZpY2UgfHwgbnVsbDtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gIH1cblxuICBwcml2YXRlIGRlYnVnTG9nKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhtZXNzYWdlLCAuLi5hcmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBhIG5ldyByZXZpZXcgc2Vzc2lvbiBmb3IgYSBkZWNrXG4gICAqL1xuICBhc3luYyBzdGFydFJldmlld1Nlc3Npb24oXG4gICAgZGVja0lkOiBzdHJpbmcsXG4gICAgbm93OiBEYXRlID0gbmV3IERhdGUoKSxcbiAgICBzZXNzaW9uRHVyYXRpb25NaW51dGVzPzogbnVtYmVyLFxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRoaXMuZGVidWdMb2coYFN0YXJ0aW5nIHJldmlldyBzZXNzaW9uIGZvciBkZWNrOiAke2RlY2tJZH1gKTtcbiAgICBjb25zdCBkZWNrID0gYXdhaXQgdGhpcy5kYi5nZXREZWNrQnlJZChkZWNrSWQpO1xuICAgIGlmICghZGVjaykge1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhgRXJyb3I6IERlY2sgbm90IGZvdW5kOiAke2RlY2tJZH1gKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRGVjayBub3QgZm91bmQ6ICR7ZGVja0lkfWApO1xuICAgIH1cbiAgICB0aGlzLmRlYnVnTG9nKGBGb3VuZCBkZWNrOiAke2RlY2submFtZX0gKCR7ZGVjay5pZH0pYCk7XG5cbiAgICAvLyBDYWxjdWxhdGUgZ29hbCB0b3RhbCBtb3JlIGFjY3VyYXRlbHlcbiAgICBjb25zdCBkYWlseUNvdW50cyA9IGF3YWl0IHRoaXMuZGIuZ2V0RGFpbHlSZXZpZXdDb3VudHMoZGVja0lkKTtcbiAgICAvLyBJbmNsdWRlIGNhcmRzIGR1ZSB3aXRoaW4gc2Vzc2lvbiBkdXJhdGlvbiBmb3Igc2Vzc2lvbiBnb2FsIGNhbGN1bGF0aW9uXG4gICAgLy8gVGhpcyBlbnN1cmVzIGNhcmRzIHRoYXQgYmVjb21lIGR1ZSBkdXJpbmcgdGhlIHJldmlldyBzZXNzaW9uIGNvdW50IHRvd2FyZHMgdGhlIGdvYWxcbiAgICBjb25zdCBkdWVDYXJkQ291bnQgPSBhd2FpdCB0aGlzLmdldER1ZUNhcmRDb3VudChcbiAgICAgIG5vdyxcbiAgICAgIGRlY2tJZCxcbiAgICAgIHNlc3Npb25EdXJhdGlvbk1pbnV0ZXMsXG4gICAgKTtcbiAgICBjb25zdCBuZXdDYXJkQ291bnQgPSBhd2FpdCB0aGlzLmdldE5ld0NhcmRDb3VudChkZWNrSWQpO1xuXG4gICAgbGV0IGdvYWxUb3RhbCA9IDA7XG5cbiAgICAvLyBBZGQgZHVlIHJldmlldyBjYXJkcyAoYXBwbHlpbmcgZGFpbHkgbGltaXRzIGlmIGNvbmZpZ3VyZWQpXG4gICAgaWYgKGRlY2suY29uZmlnLmhhc1Jldmlld0NhcmRzTGltaXRFbmFibGVkKSB7XG4gICAgICBjb25zdCByZW1haW5pbmdSZXZpZXdRdW90YSA9IE1hdGgubWF4KFxuICAgICAgICAwLFxuICAgICAgICBkZWNrLmNvbmZpZy5yZXZpZXdDYXJkc1BlckRheSAtIGRhaWx5Q291bnRzLnJldmlld0NvdW50LFxuICAgICAgKTtcbiAgICAgIGdvYWxUb3RhbCArPSBNYXRoLm1pbihkdWVDYXJkQ291bnQsIHJlbWFpbmluZ1Jldmlld1F1b3RhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdW5saW1pdGVkXG4gICAgICBnb2FsVG90YWwgKz0gZHVlQ2FyZENvdW50O1xuICAgIH1cblxuICAgIC8vIEFkZCBuZXcgY2FyZHMgKGFwcGx5aW5nIGRhaWx5IGxpbWl0cyBpZiBjb25maWd1cmVkKVxuICAgIGlmIChkZWNrLmNvbmZpZy5oYXNOZXdDYXJkc0xpbWl0RW5hYmxlZCkge1xuICAgICAgY29uc3QgcmVtYWluaW5nTmV3UXVvdGEgPSBNYXRoLm1heChcbiAgICAgICAgMCxcbiAgICAgICAgZGVjay5jb25maWcubmV3Q2FyZHNQZXJEYXkgLSBkYWlseUNvdW50cy5uZXdDb3VudCxcbiAgICAgICk7XG4gICAgICBnb2FsVG90YWwgKz0gTWF0aC5taW4obmV3Q2FyZENvdW50LCByZW1haW5pbmdOZXdRdW90YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVubGltaXRlZFxuICAgICAgZ29hbFRvdGFsICs9IG5ld0NhcmRDb3VudDtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgYXQgbGVhc3QgMSBmb3IgcHJvZ3Jlc3MgY2FsY3VsYXRpb25cbiAgICBjb25zdCBmaW5hbEdvYWxUb3RhbCA9IE1hdGgubWF4KDEsIGdvYWxUb3RhbCk7XG5cbiAgICBjb25zdCBzZXNzaW9uSWQgPSBhd2FpdCB0aGlzLmRiLmNyZWF0ZVJldmlld1Nlc3Npb24oe1xuICAgICAgZGVja0lkLFxuICAgICAgc3RhcnRlZEF0OiBub3cudG9JU09TdHJpbmcoKSxcbiAgICAgIGVuZGVkQXQ6IG51bGwsXG4gICAgICBnb2FsVG90YWw6IGZpbmFsR29hbFRvdGFsLFxuICAgICAgZG9uZVVuaXF1ZTogMCxcbiAgICB9KTtcblxuICAgIHRoaXMuZGVidWdMb2coXG4gICAgICBgUmV2aWV3IHNlc3Npb24gY3JlYXRlZDogJHtzZXNzaW9uSWR9LCBnb2FsOiAke2ZpbmFsR29hbFRvdGFsfWAsXG4gICAgKTtcbiAgICByZXR1cm4gc2Vzc2lvbklkO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwcm9ncmVzcyBmb3IgYSByZXZpZXcgc2Vzc2lvblxuICAgKi9cbiAgYXN5bmMgZ2V0U2Vzc2lvblByb2dyZXNzKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTxTZXNzaW9uUHJvZ3Jlc3MgfCBudWxsPiB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuZGIuZ2V0UmV2aWV3U2Vzc2lvbkJ5SWQoc2Vzc2lvbklkKTtcbiAgICBpZiAoIXNlc3Npb24pIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgcHJvZ3Jlc3MgPVxuICAgICAgc2Vzc2lvbi5nb2FsVG90YWwgPiAwXG4gICAgICAgID8gTWF0aC5taW4oMTAwLCAoc2Vzc2lvbi5kb25lVW5pcXVlIC8gc2Vzc2lvbi5nb2FsVG90YWwpICogMTAwKVxuICAgICAgICA6IDA7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZG9uZVVuaXF1ZTogc2Vzc2lvbi5kb25lVW5pcXVlLFxuICAgICAgZ29hbFRvdGFsOiBzZXNzaW9uLmdvYWxUb3RhbCxcbiAgICAgIHByb2dyZXNzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRW5kIGEgcmV2aWV3IHNlc3Npb25cbiAgICovXG4gIGFzeW5jIGVuZFJldmlld1Nlc3Npb24oXG4gICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgbm93OiBEYXRlID0gbmV3IERhdGUoKSxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5kYi5lbmRSZXZpZXdTZXNzaW9uKHNlc3Npb25JZCwgbm93LnRvSVNPU3RyaW5nKCkpO1xuXG4gICAgLy8gU2F2ZSBkYlxuICAgIHRoaXMuc2F2ZSgpO1xuICAgIC8vIFRyaWdnZXIgYmFja3VwIGFmdGVyIHNlc3Npb24gZW5kcyAoaWYgZW5hYmxlZCBpbiBzZXR0aW5ncylcbiAgICBpZiAodGhpcy5iYWNrdXBTZXJ2aWNlICYmIHRoaXMuc2V0dGluZ3MuYmFja3VwLmVuYWJsZUF1dG9CYWNrdXApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYmFja3VwU2VydmljZS5jcmVhdGVCYWNrdXAodGhpcy5kYik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLmRlYnVnTG9nKFwiRmFpbGVkIHRvIGNyZWF0ZSBiYWNrdXAgYWZ0ZXIgc2Vzc2lvbiBlbmQ6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYSBmcmVzaCByZXZpZXcgc2Vzc2lvbiBmb3IgYSBkZWNrIChlbmRzIGFueSBleGlzdGluZyBzZXNzaW9uKVxuICAgKi9cbiAgYXN5bmMgc3RhcnRGcmVzaFNlc3Npb24oXG4gICAgZGVja0lkOiBzdHJpbmcsXG4gICAgbm93OiBEYXRlID0gbmV3IERhdGUoKSxcbiAgICBzZXNzaW9uRHVyYXRpb25NaW51dGVzPzogbnVtYmVyLFxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIEVuZCBhbnkgZXhpc3RpbmcgYWN0aXZlIHNlc3Npb24gZmlyc3RcbiAgICAvLyBUT0RPOiBFbmQgYnkgdGFraW5nIHRoZSByZXZpZXcgdGltZSBvZiBsYXN0IHJldmlldyBsb2cgd2l0aCBzZXNzaW9uIGlkIG9mIGFjdGl2ZSBzZXNzaW9uXG4gICAgY29uc3QgYWN0aXZlU2Vzc2lvbiA9IGF3YWl0IHRoaXMuZGIuZ2V0QWN0aXZlUmV2aWV3U2Vzc2lvbihkZWNrSWQpO1xuICAgIGlmIChhY3RpdmVTZXNzaW9uKSB7XG4gICAgICBhd2FpdCB0aGlzLmRiLmVuZFJldmlld1Nlc3Npb24oYWN0aXZlU2Vzc2lvbi5pZCwgbm93LnRvSVNPU3RyaW5nKCkpO1xuICAgIH1cblxuICAgIC8vIFN0YXJ0IGEgbmV3IHNlc3Npb25cbiAgICB0aGlzLmN1cnJlbnRTZXNzaW9uSWQgPSBhd2FpdCB0aGlzLnN0YXJ0UmV2aWV3U2Vzc2lvbihcbiAgICAgIGRlY2tJZCxcbiAgICAgIG5vdyxcbiAgICAgIHNlc3Npb25EdXJhdGlvbk1pbnV0ZXMsXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50U2Vzc2lvbklkO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY3VycmVudCBhY3RpdmUgc2Vzc2lvbiBmb3IgdHJhY2tpbmdcbiAgICovXG4gIHNldEN1cnJlbnRTZXNzaW9uKHNlc3Npb25JZDogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudFNlc3Npb25JZCA9IHNlc3Npb25JZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgYWN0aXZlIHNlc3Npb25cbiAgICovXG4gIGdldEN1cnJlbnRTZXNzaW9uKCk6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRTZXNzaW9uSWQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBuZXh0IGR1ZSBjYXJkIGZvciByZXZpZXdcbiAgICovXG4gIGFzeW5jIGdldE5leHQoXG4gICAgbm93OiBEYXRlLFxuICAgIGRlY2tJZDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IHsgYWxsb3dOZXc/OiBib29sZWFuIH0gPSB7fSxcbiAgKTogUHJvbWlzZTxGbGFzaGNhcmQgfCBudWxsPiB7XG4gICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgIGBHZXR0aW5nIG5leHQgY2FyZCBmb3IgZGVjazogJHtkZWNrSWR9LCBhbGxvd05ldzogJHtvcHRpb25zLmFsbG93TmV3fWAsXG4gICAgKTtcblxuICAgIGNvbnN0IHsgYWxsb3dOZXcgPSB0cnVlIH0gPSBvcHRpb25zO1xuXG4gICAgLy8gRmlyc3QgY2hlY2sgZm9yIGR1ZSBjYXJkcyB3aXRoIHF1b3RhXG4gICAgaWYgKGF3YWl0IHRoaXMuaGFzUmV2aWV3Q2FyZFF1b3RhKGRlY2tJZCkpIHtcbiAgICAgIHRoaXMuZGVidWdMb2coYENoZWNraW5nIGZvciBkdWUgY2FyZHMgZm9yIGRlY2s6ICR7ZGVja0lkfWApO1xuICAgICAgY29uc3QgZHVlQ2FyZCA9IGF3YWl0IHRoaXMuZ2V0TmV4dER1ZUNhcmQobm93LCBkZWNrSWQpO1xuICAgICAgaWYgKGR1ZUNhcmQpIHtcbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhgRm91bmQgZHVlIGNhcmQ6ICR7ZHVlQ2FyZC5pZH1gKTtcbiAgICAgICAgcmV0dXJuIGR1ZUNhcmQ7XG4gICAgICB9XG4gICAgICB0aGlzLmRlYnVnTG9nKGBObyBkdWUgY2FyZHMgZm91bmQgZm9yIGRlY2s6ICR7ZGVja0lkfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBSZXZpZXcgY2FyZCBxdW90YSBleGhhdXN0ZWQgZm9yIGRlY2s6ICR7ZGVja0lkfWApO1xuICAgIH1cblxuICAgIC8vIElmIG5vIGR1ZSBjYXJkcyBhbmQgbmV3IGNhcmRzIGFsbG93ZWQsIGdldCBuZXh0IG5ldyBjYXJkXG4gICAgLy8gVGhlbiBjaGVjayBmb3IgbmV3IGNhcmRzIHdpdGggcXVvdGFcbiAgICBpZiAoYWxsb3dOZXcgJiYgKGF3YWl0IHRoaXMuaGFzTmV3Q2FyZFF1b3RhKGRlY2tJZCkpKSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBDaGVja2luZyBmb3IgbmV3IGNhcmRzIGZvciBkZWNrOiAke2RlY2tJZH1gKTtcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBhd2FpdCB0aGlzLmdldE5leHROZXdDYXJkKGRlY2tJZCk7XG4gICAgICBpZiAobmV3Q2FyZCkge1xuICAgICAgICB0aGlzLmRlYnVnTG9nKGBGb3VuZCBuZXcgY2FyZDogJHtuZXdDYXJkLmlkfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kZWJ1Z0xvZyhgTm8gbmV3IGNhcmRzIGZvdW5kIGZvciBkZWNrOiAke2RlY2tJZH1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdDYXJkO1xuICAgIH0gZWxzZSBpZiAoIWFsbG93TmV3KSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBOZXcgY2FyZHMgbm90IGFsbG93ZWQgZm9yIHRoaXMgcmVxdWVzdGApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBOZXcgY2FyZCBxdW90YSBleGhhdXN0ZWQgZm9yIGRlY2s6ICR7ZGVja0lkfWApO1xuICAgIH1cblxuICAgIHRoaXMuZGVidWdMb2coYE5vIGNhcmRzIGF2YWlsYWJsZSBmb3IgZGVjazogJHtkZWNrSWR9YCk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUHJldmlldyBzY2hlZHVsaW5nIG91dGNvbWVzIGZvciBhbGwgZm91ciByYXRpbmdzIHdpdGhvdXQgbXV0YXRpb25zXG4gICAqL1xuICBhc3luYyBwcmV2aWV3KFxuICAgIGNhcmRJZDogc3RyaW5nLFxuICAgIG5vdzogRGF0ZSA9IG5ldyBEYXRlKCksXG4gICk6IFByb21pc2U8U2NoZWR1bGluZ1ByZXZpZXcgfCBudWxsPiB7XG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZGIuZ2V0Rmxhc2hjYXJkQnlJZChjYXJkSWQpO1xuICAgIGlmICghY2FyZCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBkZWNrID0gYXdhaXQgdGhpcy5kYi5nZXREZWNrQnlJZChjYXJkLmRlY2tJZCk7XG4gICAgaWYgKCFkZWNrKSByZXR1cm4gbnVsbDtcblxuICAgIHRoaXMudXBkYXRlRlNSU0ZvckRlY2soZGVjayk7XG5cbiAgICBjb25zdCByYXRpbmdzOiBSYXRpbmdMYWJlbFtdID0gW1wiYWdhaW5cIiwgXCJoYXJkXCIsIFwiZ29vZFwiLCBcImVhc3lcIl07XG4gICAgY29uc3QgcHJldmlldzogUGFydGlhbDxTY2hlZHVsaW5nUHJldmlldz4gPSB7fTtcblxuICAgIGZvciAoY29uc3QgcmF0aW5nIG9mIHJhdGluZ3MpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRDYXJkID0gdGhpcy5mc3JzLnVwZGF0ZUNhcmQoY2FyZCwgcmF0aW5nKTtcbiAgICAgIHByZXZpZXdbcmF0aW5nXSA9IHtcbiAgICAgICAgZHVlRGF0ZTogdXBkYXRlZENhcmQuZHVlRGF0ZSxcbiAgICAgICAgaW50ZXJ2YWw6IHVwZGF0ZWRDYXJkLmludGVydmFsLFxuICAgICAgICByZXBldGl0aW9uczogdXBkYXRlZENhcmQucmVwZXRpdGlvbnMsXG4gICAgICAgIHN0YWJpbGl0eTogdXBkYXRlZENhcmQuc3RhYmlsaXR5LFxuICAgICAgICBkaWZmaWN1bHR5OiB1cGRhdGVkQ2FyZC5kaWZmaWN1bHR5LFxuICAgICAgICBzdGF0ZTogdXBkYXRlZENhcmQuc3RhdGUsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBwcmV2aWV3IGFzIFNjaGVkdWxpbmdQcmV2aWV3O1xuICB9XG5cbiAgLyoqXG4gICAqIFJhdGUgYSBjYXJkIGFuZCB1cGRhdGUgaXRzIHN0YXRlIGF0b21pY2FsbHkgd2l0aCBzZXNzaW9uIHRyYWNraW5nXG4gICAqL1xuICBhc3luYyByYXRlKFxuICAgIGNhcmRJZDogc3RyaW5nLFxuICAgIHJhdGluZzogUmF0aW5nTGFiZWwsXG4gICAgbm93OiBEYXRlID0gbmV3IERhdGUoKSxcbiAgICB0aW1lRWxhcHNlZD86IG51bWJlcixcbiAgKTogUHJvbWlzZTxGbGFzaGNhcmQ+IHtcbiAgICB0aGlzLmRlYnVnTG9nKGBSYXRpbmcgY2FyZCAke2NhcmRJZH0gd2l0aCByYXRpbmc6ICR7cmF0aW5nfWApO1xuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmRiLmdldEZsYXNoY2FyZEJ5SWQoY2FyZElkKTtcbiAgICBpZiAoIWNhcmQpIHtcbiAgICAgIHRoaXMuZGVidWdMb2coYEVycm9yOiBDYXJkIG5vdCBmb3VuZDogJHtjYXJkSWR9YCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhcmQgbm90IGZvdW5kOiAke2NhcmRJZH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkZWNrID0gYXdhaXQgdGhpcy5kYi5nZXREZWNrQnlJZChjYXJkLmRlY2tJZCk7XG4gICAgaWYgKCFkZWNrKSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKGBFcnJvcjogRGVjayBub3QgZm91bmQ6ICR7Y2FyZC5kZWNrSWR9YCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERlY2sgbm90IGZvdW5kOiAke2NhcmQuZGVja0lkfWApO1xuICAgIH1cblxuICAgIHRoaXMuZGVidWdMb2coXG4gICAgICBgRm91bmQgY2FyZDogJHtjYXJkLmZyb250LnN1YnN0cmluZygwLCA1MCl9Li4uIGluIGRlY2s6ICR7ZGVjay5uYW1lfWAsXG4gICAgKTtcbiAgICB0aGlzLnVwZGF0ZUZTUlNGb3JEZWNrKGRlY2spO1xuXG4gICAgLy8gQ2FsY3VsYXRlIG5ldyBjYXJkIHN0YXRlXG4gICAgY29uc3Qgb2xkQ2FyZCA9IHsgLi4uY2FyZCB9O1xuICAgIGNvbnN0IHVwZGF0ZWRDYXJkID0gdGhpcy5mc3JzLnVwZGF0ZUNhcmQoY2FyZCwgcmF0aW5nKTtcblxuICAgIC8vIENhbGN1bGF0ZSByZXZpZXcgbWV0cmljc1xuICAgIGNvbnN0IGVsYXBzZWREYXlzID0gdGhpcy5nZXRFbGFwc2VkRGF5cyhjYXJkLCBub3cpO1xuICAgIGNvbnN0IHJldHJpZXZhYmlsaXR5ID0gdGhpcy5jYWxjdWxhdGVSZXRyaWV2YWJpbGl0eShjYXJkLCBlbGFwc2VkRGF5cyk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHJldmlld2luZyB0aGlzIGNhcmQgaW4gdGhlIHNlc3Npb25cbiAgICBsZXQgaXNGaXJzdFJldmlld0luU2Vzc2lvbiA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmN1cnJlbnRTZXNzaW9uSWQpIHtcbiAgICAgIGlzRmlyc3RSZXZpZXdJblNlc3Npb24gPSAhKGF3YWl0IHRoaXMuZGIuaXNDYXJkUmV2aWV3ZWRJblNlc3Npb24oXG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb25JZCxcbiAgICAgICAgY2FyZC5pZCxcbiAgICAgICkpO1xuXG4gICAgICAvLyBVcGRhdGUgc2Vzc2lvbiBwcm9ncmVzcyBpZiBmaXJzdCByZXZpZXdcbiAgICAgIGlmIChpc0ZpcnN0UmV2aWV3SW5TZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCB0aGlzLmRiLmdldFJldmlld1Nlc3Npb25CeUlkKFxuICAgICAgICAgIHRoaXMuY3VycmVudFNlc3Npb25JZCxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgICBjb25zdCBuZXdEb25lVW5pcXVlID0gc2Vzc2lvbi5kb25lVW5pcXVlICsgMTtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRiLnVwZGF0ZVJldmlld1Nlc3Npb25Eb25lVW5pcXVlKFxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2Vzc2lvbklkLFxuICAgICAgICAgICAgbmV3RG9uZVVuaXF1ZSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHJldmlldyBsb2cgZW50cnlcbiAgICBjb25zdCByZXZpZXdMb2c6IE9taXQ8UmV2aWV3TG9nLCBcImlkXCI+ID0ge1xuICAgICAgZmxhc2hjYXJkSWQ6IGNhcmQuaWQsXG4gICAgICBzZXNzaW9uSWQ6IHRoaXMuY3VycmVudFNlc3Npb25JZCB8fCB1bmRlZmluZWQsXG4gICAgICBsYXN0UmV2aWV3ZWRBdDogb2xkQ2FyZC5sYXN0UmV2aWV3ZWQgfHwgb2xkQ2FyZC5kdWVEYXRlLFxuICAgICAgcmV2aWV3ZWRBdDogbm93LnRvSVNPU3RyaW5nKCksXG4gICAgICByYXRpbmc6IHRoaXMucmF0aW5nVG9OdW1iZXIocmF0aW5nKSBhcyAxIHwgMiB8IDMgfCA0LFxuICAgICAgcmF0aW5nTGFiZWw6IHJhdGluZyxcbiAgICAgIHRpbWVFbGFwc2VkTXM6IHRpbWVFbGFwc2VkIHx8IDAsXG5cbiAgICAgIC8vIFByZS1zdGF0ZVxuICAgICAgb2xkU3RhdGU6IG9sZENhcmQuc3RhdGUsXG4gICAgICBvbGRSZXBldGl0aW9uczogb2xkQ2FyZC5yZXBldGl0aW9ucyB8fCAwLFxuICAgICAgb2xkTGFwc2VzOiBvbGRDYXJkLmxhcHNlcyB8fCAwLFxuICAgICAgb2xkU3RhYmlsaXR5OiBvbGRDYXJkLnN0YWJpbGl0eSB8fCAwLFxuICAgICAgb2xkRGlmZmljdWx0eTogb2xkQ2FyZC5kaWZmaWN1bHR5IHx8IDAsXG5cbiAgICAgIC8vIFBvc3Qtc3RhdGVcbiAgICAgIG5ld1N0YXRlOiB1cGRhdGVkQ2FyZC5zdGF0ZSxcbiAgICAgIG5ld1JlcGV0aXRpb25zOiB1cGRhdGVkQ2FyZC5yZXBldGl0aW9ucyxcbiAgICAgIG5ld0xhcHNlczogdXBkYXRlZENhcmQubGFwc2VzLFxuICAgICAgbmV3U3RhYmlsaXR5OiB1cGRhdGVkQ2FyZC5zdGFiaWxpdHksXG4gICAgICBuZXdEaWZmaWN1bHR5OiB1cGRhdGVkQ2FyZC5kaWZmaWN1bHR5LFxuXG4gICAgICAvLyBJbnRlcnZhbHMgJiBkdWUgdGltZXNcbiAgICAgIG9sZEludGVydmFsTWludXRlczogb2xkQ2FyZC5pbnRlcnZhbCxcbiAgICAgIG5ld0ludGVydmFsTWludXRlczogdXBkYXRlZENhcmQuaW50ZXJ2YWwsXG4gICAgICBvbGREdWVBdDogb2xkQ2FyZC5kdWVEYXRlLFxuICAgICAgbmV3RHVlQXQ6IHVwZGF0ZWRDYXJkLmR1ZURhdGUsXG5cbiAgICAgIC8vIERlcml2ZWQgdmFsdWVzXG4gICAgICBlbGFwc2VkRGF5cyxcbiAgICAgIHJldHJpZXZhYmlsaXR5LFxuXG4gICAgICAvLyBDb25maWd1cmF0aW9uIGNvbnRleHRcbiAgICAgIHJlcXVlc3RSZXRlbnRpb246IGRlY2suY29uZmlnLmZzcnMucmVxdWVzdFJldGVudGlvbixcbiAgICAgIHByb2ZpbGU6IGRlY2suY29uZmlnLmZzcnMucHJvZmlsZSxcbiAgICAgIG1heGltdW1JbnRlcnZhbERheXM6IGdldE1heEludGVydmFsRGF5c0ZvclByb2ZpbGUoXG4gICAgICAgIGRlY2suY29uZmlnLmZzcnMucHJvZmlsZSxcbiAgICAgICksXG4gICAgICBtaW5NaW51dGVzOiBnZXRNaW5NaW51dGVzRm9yUHJvZmlsZShkZWNrLmNvbmZpZy5mc3JzLnByb2ZpbGUpLFxuICAgICAgZnNyc1dlaWdodHNWZXJzaW9uOiB0aGlzLmdldFdlaWdodHNIYXNoKGRlY2suY29uZmlnLmZzcnMucHJvZmlsZSksXG4gICAgICBzY2hlZHVsZXJWZXJzaW9uOiBcIjEuMFwiLFxuXG4gICAgICAvLyBDb250ZW50IGNvbnRleHRcbiAgICAgIGNvbnRlbnRIYXNoOiBjYXJkLmNvbnRlbnRIYXNoLFxuICAgIH07XG5cbiAgICAvLyBVcGRhdGUgY2FyZCBzdGF0ZSBhbmQgY3JlYXRlIHJldmlldyBsb2cgKG5vIHNhdmUgZHVyaW5nIHJldmlldylcbiAgICBhd2FpdCB0aGlzLmRiLnVwZGF0ZUZsYXNoY2FyZCh1cGRhdGVkQ2FyZC5pZCwge1xuICAgICAgc3RhdGU6IHVwZGF0ZWRDYXJkLnN0YXRlLFxuICAgICAgZHVlRGF0ZTogdXBkYXRlZENhcmQuZHVlRGF0ZSxcbiAgICAgIGludGVydmFsOiB1cGRhdGVkQ2FyZC5pbnRlcnZhbCxcbiAgICAgIHJlcGV0aXRpb25zOiB1cGRhdGVkQ2FyZC5yZXBldGl0aW9ucyxcbiAgICAgIGRpZmZpY3VsdHk6IHVwZGF0ZWRDYXJkLmRpZmZpY3VsdHksXG4gICAgICBzdGFiaWxpdHk6IHVwZGF0ZWRDYXJkLnN0YWJpbGl0eSxcbiAgICAgIGxhcHNlczogdXBkYXRlZENhcmQubGFwc2VzLFxuICAgICAgbGFzdFJldmlld2VkOiB1cGRhdGVkQ2FyZC5sYXN0UmV2aWV3ZWQsXG4gICAgfSk7XG5cbiAgICBhd2FpdCB5aWVsZFRvVUkoKTtcblxuICAgIGF3YWl0IHRoaXMuZGIuY3JlYXRlUmV2aWV3TG9nKHJldmlld0xvZyk7XG5cbiAgICByZXR1cm4gdXBkYXRlZENhcmQ7XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSBhbGwgcGVuZGluZyBjaGFuZ2VzIHRvIGRpc2tcbiAgICovXG4gIGFzeW5jIHNhdmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgeWllbGRUb1VJKCk7XG4gICAgYXdhaXQgdGhpcy5kYi5zYXZlKCk7XG4gICAgYXdhaXQgeWllbGRUb1VJKCk7XG4gIH1cblxuICAvKipcbiAgICogUGVlayBhdCB0aGUgbmV4dCBOIGR1ZSBjYXJkcyB3aXRob3V0IG11dGF0aW9uc1xuICAgKi9cbiAgYXN5bmMgcGVla0R1ZShcbiAgICBub3c6IERhdGUsXG4gICAgZGVja0lkOiBzdHJpbmcsXG4gICAgbGltaXQ6IG51bWJlciA9IDEwLFxuICApOiBQcm9taXNlPEZsYXNoY2FyZFtdPiB7XG4gICAgdGhpcy5kZWJ1Z0xvZyhgUGVla2luZyBhdCBkdWUgY2FyZHMgZm9yIGRlY2s6ICR7ZGVja0lkfSwgbGltaXQ6ICR7bGltaXR9YCk7XG4gICAgY29uc3QgZGVjayA9IGF3YWl0IHRoaXMuZGIuZ2V0RGVja0J5SWQoZGVja0lkKTtcbiAgICBpZiAoIWRlY2spIHJldHVybiBbXTtcblxuICAgIGxldCBxdWVyeSA9IGBcbiAgICAgIFNFTEVDVCAqIEZST00gZmxhc2hjYXJkc1xuICAgICAgV0hFUkUgZGVja19pZCA9ID8gQU5EIGR1ZV9kYXRlIDw9ID8gQU5EIHN0YXRlID0gJ3JldmlldydcbiAgICBgO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtkZWNrSWQsIG5vdy50b0lTT1N0cmluZygpXTtcblxuICAgIC8vIEFwcGx5IHJldmlldyBvcmRlciBmcm9tIGRlY2sgY29uZmlndXJhdGlvblxuICAgIGlmIChkZWNrLmNvbmZpZy5yZXZpZXdPcmRlciA9PT0gXCJyYW5kb21cIikge1xuICAgICAgcXVlcnkgKz0gXCIgT1JERVIgQlkgUkFORE9NKCkgTElNSVQgP1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEZWZhdWx0OiBkdWUtZGF0ZSBvcmRlciAob2xkZXN0IGR1ZSBmaXJzdClcbiAgICAgIHF1ZXJ5ICs9IFwiIE9SREVSIEJZIGR1ZV9kYXRlIEFTQywgbGFzdF9yZXZpZXdlZCBBU0MgTElNSVQgP1wiO1xuICAgIH1cbiAgICBwYXJhbXMucHVzaChsaW1pdC50b1N0cmluZygpKTtcblxuICAgIGNvbnN0IGR1ZUNhcmRzID0gYXdhaXQgdGhpcy5xdWVyeUZsYXNoY2FyZHMocXVlcnksIHBhcmFtcyk7XG4gICAgdGhpcy5kZWJ1Z0xvZyhgRm91bmQgJHtkdWVDYXJkcy5sZW5ndGh9IGR1ZSBjYXJkcyBmb3IgZGVjazogJHtkZWNrSWR9YCk7XG4gICAgcmV0dXJuIGR1ZUNhcmRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtaWxsaXNlY29uZHMgdW50aWwgbmV4dCBjYXJkIGlzIGR1ZVxuICAgKi9cbiAgYXN5bmMgdGltZVRvTmV4dChub3c6IERhdGUsIGRlY2tJZDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgICBTRUxFQ1QgTUlOKGR1ZV9kYXRlKSBhcyBuZXh0X2R1ZVxuICAgICAgRlJPTSBmbGFzaGNhcmRzXG4gICAgICBXSEVSRSBkZWNrX2lkID0gPyBBTkQgZHVlX2RhdGUgPiA/XG4gICAgICBPUkRFUiBCWSBkdWVfZGF0ZSBBU0NcbiAgICAgIExJTUlUIDFcbiAgICBgO1xuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMucXVlcnlSYXcocXVlcnksIFtkZWNrSWQsIG5vdy50b0lTT1N0cmluZygpXSk7XG4gICAgY29uc3QgbmV4dER1ZSA9IHJlc3VsdHMubGVuZ3RoID4gMCA/IHJlc3VsdHNbMF1bMF0gOiBudWxsO1xuXG4gICAgaWYgKCFuZXh0RHVlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBuZXh0RHVlRGF0ZSA9IG5ldyBEYXRlKG5leHREdWUpO1xuICAgIHJldHVybiBNYXRoLm1heCgwLCBuZXh0RHVlRGF0ZS5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpKTtcbiAgfVxuXG4gIC8vIFByaXZhdGUgaGVscGVyIG1ldGhvZHNcblxuICBwcml2YXRlIGFzeW5jIGdldE5leHREdWVDYXJkKFxuICAgIG5vdzogRGF0ZSxcbiAgICBkZWNrSWQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxGbGFzaGNhcmQgfCBudWxsPiB7XG4gICAgY29uc3QgZGVjayA9IGF3YWl0IHRoaXMuZGIuZ2V0RGVja0J5SWQoZGVja0lkKTtcbiAgICBpZiAoIWRlY2spIHJldHVybiBudWxsO1xuXG4gICAgbGV0IHF1ZXJ5ID0gYFxuICAgICAgU0VMRUNUICogRlJPTSBmbGFzaGNhcmRzXG4gICAgICBXSEVSRSBkZWNrX2lkID0gPyBBTkQgZHVlX2RhdGUgPD0gPyBBTkQgc3RhdGUgPSAncmV2aWV3J1xuICAgIGA7XG4gICAgY29uc3QgcGFyYW1zID0gW2RlY2tJZCwgbm93LnRvSVNPU3RyaW5nKCldO1xuXG4gICAgLy8gQXBwbHkgcmV2aWV3IG9yZGVyIGZyb20gZGVjayBjb25maWd1cmF0aW9uXG4gICAgaWYgKGRlY2suY29uZmlnLnJldmlld09yZGVyID09PSBcInJhbmRvbVwiKSB7XG4gICAgICBxdWVyeSArPSBcIiBPUkRFUiBCWSBSQU5ET00oKSBMSU1JVCAxXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlZmF1bHQ6IGR1ZS1kYXRlIG9yZGVyIChvbGRlc3QgZHVlIGZpcnN0KVxuICAgICAgcXVlcnkgKz0gXCIgT1JERVIgQlkgZHVlX2RhdGUgQVNDLCBsYXN0X3Jldmlld2VkIEFTQyBMSU1JVCAxXCI7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMucXVlcnlGbGFzaGNhcmRzKHF1ZXJ5LCBwYXJhbXMpO1xuICAgIHJldHVybiByZXN1bHRzLmxlbmd0aCA+IDAgPyByZXN1bHRzWzBdIDogbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0TmV4dE5ld0NhcmQoZGVja0lkOiBzdHJpbmcpOiBQcm9taXNlPEZsYXNoY2FyZCB8IG51bGw+IHtcbiAgICBsZXQgcXVlcnkgPSBgXG4gICAgICBTRUxFQ1QgKiBGUk9NIGZsYXNoY2FyZHNcbiAgICAgIFdIRVJFIGRlY2tfaWQgPSA/IEFORCBzdGF0ZSA9ICduZXcnXG4gICAgYDtcbiAgICBjb25zdCBwYXJhbXMgPSBbZGVja0lkXTtcblxuICAgIHF1ZXJ5ICs9IFwiIE9SREVSIEJZIGR1ZV9kYXRlIEFTQyBMSU1JVCAxXCI7XG5cbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5xdWVyeUZsYXNoY2FyZHMocXVlcnksIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdHMubGVuZ3RoID4gMCA/IHJlc3VsdHNbMF0gOiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYXNOZXdDYXJkUXVvdGEoZGVja0lkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBkZWNrID0gYXdhaXQgdGhpcy5kYi5nZXREZWNrQnlJZChkZWNrSWQpO1xuICAgIGlmICghZGVjaykgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKCFkZWNrLmNvbmZpZy5oYXNOZXdDYXJkc0xpbWl0RW5hYmxlZCkgcmV0dXJuIHRydWU7IC8vIHVubGltaXRlZFxuXG4gICAgY29uc3QgZGFpbHlDb3VudHMgPSBhd2FpdCB0aGlzLmRiLmdldERhaWx5UmV2aWV3Q291bnRzKGRlY2tJZCk7XG4gICAgcmV0dXJuIGRhaWx5Q291bnRzLm5ld0NvdW50IDwgZGVjay5jb25maWcubmV3Q2FyZHNQZXJEYXk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhc1Jldmlld0NhcmRRdW90YShkZWNrSWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGRlY2sgPSBhd2FpdCB0aGlzLmRiLmdldERlY2tCeUlkKGRlY2tJZCk7XG4gICAgaWYgKCFkZWNrKSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAoIWRlY2suY29uZmlnLmhhc1Jldmlld0NhcmRzTGltaXRFbmFibGVkKSByZXR1cm4gdHJ1ZTsgLy8gdW5saW1pdGVkXG5cbiAgICBjb25zdCBkYWlseUNvdW50cyA9IGF3YWl0IHRoaXMuZGIuZ2V0RGFpbHlSZXZpZXdDb3VudHMoZGVja0lkKTtcbiAgICByZXR1cm4gZGFpbHlDb3VudHMucmV2aWV3Q291bnQgPCBkZWNrLmNvbmZpZy5yZXZpZXdDYXJkc1BlckRheTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRlNSU0ZvckRlY2soZGVjazogRGVjayk6IHZvaWQge1xuICAgIHRoaXMuZnNycy51cGRhdGVQYXJhbWV0ZXJzKHtcbiAgICAgIHJlcXVlc3RSZXRlbnRpb246IGRlY2suY29uZmlnLmZzcnMucmVxdWVzdFJldGVudGlvbixcbiAgICAgIHByb2ZpbGU6IGRlY2suY29uZmlnLmZzcnMucHJvZmlsZSxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RWxhcHNlZERheXMoY2FyZDogRmxhc2hjYXJkLCBub3c6IERhdGUpOiBudW1iZXIge1xuICAgIGlmICghY2FyZC5sYXN0UmV2aWV3ZWQpIHJldHVybiAwO1xuXG4gICAgY29uc3QgbGFzdFJldmlldyA9IG5ldyBEYXRlKGNhcmQubGFzdFJldmlld2VkKTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgKG5vdy5nZXRUaW1lKCkgLSBsYXN0UmV2aWV3LmdldFRpbWUoKSkgLyA4NjQwMDAwMCk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVJldHJpZXZhYmlsaXR5KFxuICAgIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICBlbGFwc2VkRGF5czogbnVtYmVyLFxuICApOiBudW1iZXIge1xuICAgIGlmICghY2FyZC5zdGFiaWxpdHkgfHwgY2FyZC5zdGF0ZSA9PT0gXCJuZXdcIikgcmV0dXJuIDE7XG5cbiAgICAvLyBSID0gKDEgKyBlbGFwc2VkRGF5cyAvICg5ICogc3RhYmlsaXR5KSleKC0xKVxuICAgIHJldHVybiBNYXRoLnBvdygxICsgZWxhcHNlZERheXMgLyAoOSAqIGNhcmQuc3RhYmlsaXR5KSwgLTEpO1xuICB9XG5cbiAgcHJpdmF0ZSByYXRpbmdUb051bWJlcihyYXRpbmc6IFJhdGluZ0xhYmVsKTogbnVtYmVyIHtcbiAgICBjb25zdCByYXRpbmdNYXA6IFJlY29yZDxSYXRpbmdMYWJlbCwgbnVtYmVyPiA9IHtcbiAgICAgIGFnYWluOiAxLFxuICAgICAgaGFyZDogMixcbiAgICAgIGdvb2Q6IDMsXG4gICAgICBlYXN5OiA0LFxuICAgIH07XG4gICAgcmV0dXJuIHJhdGluZ01hcFtyYXRpbmddO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRXZWlnaHRzSGFzaChwcm9maWxlOiBGU1JTUHJvZmlsZSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3Byb2ZpbGV9LXYxLjBgO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXREdWVDYXJkQ291bnQoXG4gICAgbm93OiBEYXRlLFxuICAgIGRlY2tJZDogc3RyaW5nLFxuICAgIHNlc3Npb25EdXJhdGlvbk1pbnV0ZXM6IG51bWJlciA9IDI1LFxuICApOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIC8vIEluY2x1ZGUgY2FyZHMgZHVlIHdpdGhpbiB0aGUgc2Vzc2lvbiBkdXJhdGlvbiBmb3Igc2Vzc2lvbiBnb2FsIGNhbGN1bGF0aW9uXG4gICAgY29uc3Qgc2Vzc2lvbkVuZFRpbWUgPSBuZXcgRGF0ZShcbiAgICAgIG5vdy5nZXRUaW1lKCkgKyBzZXNzaW9uRHVyYXRpb25NaW51dGVzICogNjAgKiAxMDAwLFxuICAgICk7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgU0VMRUNUIENPVU5UKCopIGFzIGNvdW50XG4gICAgRlJPTSBmbGFzaGNhcmRzXG4gICAgV0hFUkUgZGVja19pZCA9ID8gQU5EIGR1ZV9kYXRlIDw9ID8gQU5EIHN0YXRlID0gJ3JldmlldydcbiAgYDtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5xdWVyeVJhdyhxdWVyeSwgW1xuICAgICAgZGVja0lkLFxuICAgICAgc2Vzc2lvbkVuZFRpbWUudG9JU09TdHJpbmcoKSxcbiAgICBdKTtcbiAgICByZXR1cm4gcmVzdWx0cy5sZW5ndGggPiAwID8gKHJlc3VsdHNbMF1bMF0gYXMgbnVtYmVyKSA6IDA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldE5ld0NhcmRDb3VudChkZWNrSWQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgY29uc3QgcXVlcnkgPSBgXG4gICAgU0VMRUNUIENPVU5UKCopIGFzIGNvdW50XG4gICAgRlJPTSBmbGFzaGNhcmRzXG4gICAgV0hFUkUgZGVja19pZCA9ID8gQU5EIHN0YXRlID0gJ25ldydcbiAgYDtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5xdWVyeVJhdyhxdWVyeSwgW2RlY2tJZF0pO1xuICAgIHJldHVybiByZXN1bHRzLmxlbmd0aCA+IDAgPyAocmVzdWx0c1swXVswXSBhcyBudW1iZXIpIDogMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIHF1ZXJ5IGZsYXNoY2FyZHMgYW5kIGNvbnZlcnQgcm93cyB0byBGbGFzaGNhcmQgb2JqZWN0c1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBxdWVyeUZsYXNoY2FyZHMoXG4gICAgcXVlcnk6IHN0cmluZyxcbiAgICBwYXJhbXM6IGFueVtdLFxuICApOiBQcm9taXNlPEZsYXNoY2FyZFtdPiB7XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMucXVlcnlSYXcocXVlcnksIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdHMubWFwKChyb3cpID0+IHRoaXMucm93VG9GbGFzaGNhcmQocm93KSk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSByYXcgU1FMIHF1ZXJ5IGFuZCByZXR1cm4gcmVzdWx0c1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBxdWVyeVJhdyhxdWVyeTogc3RyaW5nLCBwYXJhbXM6IGFueVtdKTogUHJvbWlzZTxhbnlbXVtdPiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZGIucXVlcnkocXVlcnksIHBhcmFtcyk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBkYXRhYmFzZSByb3cgdG8gRmxhc2hjYXJkIG9iamVjdCAoc2FtZSBsb2dpYyBhcyBEYXRhYmFzZVNlcnZpY2UpXG4gICAqL1xuICBwcml2YXRlIHJvd1RvRmxhc2hjYXJkKHJvdzogYW55W10pOiBGbGFzaGNhcmQge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogcm93WzBdIGFzIHN0cmluZyxcbiAgICAgIGRlY2tJZDogcm93WzFdIGFzIHN0cmluZyxcbiAgICAgIGZyb250OiByb3dbMl0gYXMgc3RyaW5nLFxuICAgICAgYmFjazogcm93WzNdIGFzIHN0cmluZyxcbiAgICAgIHR5cGU6IHJvd1s0XSBhcyBcImhlYWRlci1wYXJhZ3JhcGhcIiB8IFwidGFibGVcIixcbiAgICAgIHNvdXJjZUZpbGU6IHJvd1s1XSBhcyBzdHJpbmcsXG4gICAgICBjb250ZW50SGFzaDogcm93WzZdIGFzIHN0cmluZyxcbiAgICAgIHN0YXRlOiByb3dbN10gYXMgRmxhc2hjYXJkU3RhdGUsXG4gICAgICBkdWVEYXRlOiByb3dbOF0gYXMgc3RyaW5nLFxuICAgICAgaW50ZXJ2YWw6IHJvd1s5XSBhcyBudW1iZXIsXG4gICAgICByZXBldGl0aW9uczogcm93WzEwXSBhcyBudW1iZXIsXG4gICAgICBkaWZmaWN1bHR5OiByb3dbMTFdIGFzIG51bWJlcixcbiAgICAgIHN0YWJpbGl0eTogcm93WzEyXSBhcyBudW1iZXIsXG4gICAgICBsYXBzZXM6IHJvd1sxM10gYXMgbnVtYmVyLFxuICAgICAgbGFzdFJldmlld2VkOiByb3dbMTRdIGFzIHN0cmluZyB8IG51bGwsXG4gICAgICBjcmVhdGVkOiByb3dbMTVdIGFzIHN0cmluZyxcbiAgICAgIG1vZGlmaWVkOiByb3dbMTZdIGFzIHN0cmluZyxcbiAgICB9O1xuICB9XG59XG4iLCAiaW1wb3J0IHsgRGF0YUFkYXB0ZXIsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRGF0YWJhc2VTZXJ2aWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlL0RhdGFiYXNlU2VydmljZVwiO1xuaW1wb3J0IHsgUmV2aWV3TG9nLCBSZXZpZXdTZXNzaW9uIH0gZnJvbSBcIi4uL2RhdGFiYXNlL3R5cGVzXCI7XG5pbXBvcnQgeyBCQUNLVVBfVEFCTEVTX1NRTCB9IGZyb20gXCIuLi9kYXRhYmFzZS9zY2hlbWFzXCI7XG5pbXBvcnQgaW5pdFNxbEpzLCB7IERhdGFiYXNlIH0gZnJvbSBcInNxbC5qc1wiO1xuaW1wb3J0IHsgeWllbGRUb1VJIH0gZnJvbSBcIkAvdXRpbHMvdWlcIjtcblxuaW50ZXJmYWNlIEJhY2t1cE1ldGFkYXRhIHtcbiAgZmlsZW5hbWU6IHN0cmluZztcbiAgdGltZXN0YW1wOiBEYXRlO1xufVxuXG5leHBvcnQgY2xhc3MgQmFja3VwU2VydmljZSB7XG4gIHByaXZhdGUgYWRhcHRlcjogRGF0YUFkYXB0ZXI7XG4gIHByaXZhdGUgYmFja3VwRGlyOiBzdHJpbmc7XG4gIHByaXZhdGUgbWF4QmFja3VwczogbnVtYmVyID0gNTtcbiAgcHJpdmF0ZSBkZWJ1Z0xvZzogKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYWRhcHRlcjogRGF0YUFkYXB0ZXIsXG4gICAgdmF1bHRDb25maWdEaXI6IHN0cmluZyxcbiAgICBkZWJ1Z0xvZzogKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHZvaWQsXG4gICkge1xuICAgIHRoaXMuYWRhcHRlciA9IGFkYXB0ZXI7XG4gICAgdGhpcy5iYWNrdXBEaXIgPSBgJHt2YXVsdENvbmZpZ0Rpcn0vcGx1Z2lucy9kZWNrcy9iYWNrdXBzYDtcbiAgICB0aGlzLmRlYnVnTG9nID0gZGVidWdMb2c7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgYmFja3VwIG9mIHJldmlld19sb2dzIGFuZCByZXZpZXdfc2Vzc2lvbnMgdGFibGVzXG4gICAqL1xuICBhc3luYyBjcmVhdGVCYWNrdXAoZGI6IERhdGFiYXNlU2VydmljZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBFbnN1cmUgYmFja3VwIGRpcmVjdG9yeSBleGlzdHNcbiAgICAgIGF3YWl0IHRoaXMuZW5zdXJlQmFja3VwRGlyKCk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgc3FsLmpzIGZvciBiYWNrdXAgZGF0YWJhc2VcbiAgICAgIGNvbnN0IFNRTCA9IGF3YWl0IGluaXRTcWxKcyh7XG4gICAgICAgIGxvY2F0ZUZpbGU6IChmaWxlKSA9PiBgaHR0cHM6Ly9zcWwuanMub3JnL2Rpc3QvJHtmaWxlfWAsXG4gICAgICB9KTtcblxuICAgICAgLy8gQ3JlYXRlIHRlbXBvcmFyeSBiYWNrdXAgZGF0YWJhc2VcbiAgICAgIGNvbnN0IGJhY2t1cERiID0gbmV3IFNRTC5EYXRhYmFzZSgpO1xuXG4gICAgICAvLyBDcmVhdGUgYmFja3VwIHRhYmxlcyB3aXRoIHNhbWUgc2NoZW1hXG4gICAgICBiYWNrdXBEYi5leGVjKEJBQ0tVUF9UQUJMRVNfU1FMKTtcblxuICAgICAgLy8gR2V0IGRhdGEgZnJvbSBzb3VyY2UgZGF0YWJhc2VcbiAgICAgIGNvbnN0IHJldmlld0xvZ3MgPSBhd2FpdCBkYi5nZXRBbGxSZXZpZXdMb2dzKCk7XG4gICAgICBjb25zdCByZXZpZXdTZXNzaW9ucyA9IGF3YWl0IGRiLmdldEFsbFJldmlld1Nlc3Npb25zKCk7XG5cbiAgICAgIC8vIEluc2VydCByZXZpZXcgbG9ncyBpbnRvIGJhY2t1cCBkYXRhYmFzZVxuICAgICAgY29uc3QgcmV2aWV3TG9nU3RtdCA9IGJhY2t1cERiLnByZXBhcmUoYFxuICAgICAgICBJTlNFUlQgSU5UTyByZXZpZXdfbG9ncyBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pXG4gICAgICBgKTtcblxuICAgICAgZm9yIChjb25zdCBsb2cgb2YgcmV2aWV3TG9ncykge1xuICAgICAgICByZXZpZXdMb2dTdG10LnJ1bihbXG4gICAgICAgICAgbG9nLmlkLFxuICAgICAgICAgIGxvZy5mbGFzaGNhcmRJZCxcbiAgICAgICAgICBsb2cuc2Vzc2lvbklkIHx8IG51bGwsXG4gICAgICAgICAgbG9nLmxhc3RSZXZpZXdlZEF0LFxuICAgICAgICAgIGxvZy5zaG93bkF0IHx8IG51bGwsXG4gICAgICAgICAgbG9nLnJldmlld2VkQXQsXG4gICAgICAgICAgbG9nLnJhdGluZyxcbiAgICAgICAgICBsb2cucmF0aW5nTGFiZWwsXG4gICAgICAgICAgbG9nLnRpbWVFbGFwc2VkTXMgfHwgbnVsbCxcbiAgICAgICAgICBsb2cub2xkU3RhdGUsXG4gICAgICAgICAgbG9nLm9sZFJlcGV0aXRpb25zLFxuICAgICAgICAgIGxvZy5vbGRMYXBzZXMsXG4gICAgICAgICAgbG9nLm9sZFN0YWJpbGl0eSxcbiAgICAgICAgICBsb2cub2xkRGlmZmljdWx0eSxcbiAgICAgICAgICBsb2cubmV3U3RhdGUsXG4gICAgICAgICAgbG9nLm5ld1JlcGV0aXRpb25zLFxuICAgICAgICAgIGxvZy5uZXdMYXBzZXMsXG4gICAgICAgICAgbG9nLm5ld1N0YWJpbGl0eSxcbiAgICAgICAgICBsb2cubmV3RGlmZmljdWx0eSxcbiAgICAgICAgICBsb2cub2xkSW50ZXJ2YWxNaW51dGVzLFxuICAgICAgICAgIGxvZy5uZXdJbnRlcnZhbE1pbnV0ZXMsXG4gICAgICAgICAgbG9nLm9sZER1ZUF0LFxuICAgICAgICAgIGxvZy5uZXdEdWVBdCxcbiAgICAgICAgICBsb2cuZWxhcHNlZERheXMsXG4gICAgICAgICAgbG9nLnJldHJpZXZhYmlsaXR5LFxuICAgICAgICAgIGxvZy5yZXF1ZXN0UmV0ZW50aW9uLFxuICAgICAgICAgIGxvZy5wcm9maWxlLFxuICAgICAgICAgIGxvZy5tYXhpbXVtSW50ZXJ2YWxEYXlzLFxuICAgICAgICAgIGxvZy5taW5NaW51dGVzLFxuICAgICAgICAgIGxvZy5mc3JzV2VpZ2h0c1ZlcnNpb24sXG4gICAgICAgICAgbG9nLnNjaGVkdWxlclZlcnNpb24sXG4gICAgICAgICAgbG9nLm5vdGVNb2RlbElkIHx8IG51bGwsXG4gICAgICAgICAgbG9nLmNhcmRUZW1wbGF0ZUlkIHx8IG51bGwsXG4gICAgICAgICAgbG9nLmNvbnRlbnRIYXNoIHx8IG51bGwsXG4gICAgICAgICAgbG9nLmNsaWVudCB8fCBudWxsLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHJldmlld0xvZ1N0bXQuZnJlZSgpO1xuXG4gICAgICBhd2FpdCB5aWVsZFRvVUkoKTtcblxuICAgICAgLy8gSW5zZXJ0IHJldmlldyBzZXNzaW9ucyBpbnRvIGJhY2t1cCBkYXRhYmFzZVxuICAgICAgY29uc3QgcmV2aWV3U2Vzc2lvblN0bXQgPSBiYWNrdXBEYi5wcmVwYXJlKGBcbiAgICAgICAgSU5TRVJUIElOVE8gcmV2aWV3X3Nlc3Npb25zIFZBTFVFUyAoPywgPywgPywgPywgPywgPylcbiAgICAgIGApO1xuXG4gICAgICBmb3IgKGNvbnN0IHNlc3Npb24gb2YgcmV2aWV3U2Vzc2lvbnMpIHtcbiAgICAgICAgcmV2aWV3U2Vzc2lvblN0bXQucnVuKFtcbiAgICAgICAgICBzZXNzaW9uLmlkLFxuICAgICAgICAgIHNlc3Npb24uZGVja0lkLFxuICAgICAgICAgIHNlc3Npb24uc3RhcnRlZEF0LFxuICAgICAgICAgIHNlc3Npb24uZW5kZWRBdCxcbiAgICAgICAgICBzZXNzaW9uLmdvYWxUb3RhbCxcbiAgICAgICAgICBzZXNzaW9uLmRvbmVVbmlxdWUsXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcmV2aWV3U2Vzc2lvblN0bXQuZnJlZSgpO1xuXG4gICAgICBhd2FpdCB5aWVsZFRvVUkoKTtcblxuICAgICAgLy8gR2VuZXJhdGUgZmlsZW5hbWUgd2l0aCBkYXRlIG9ubHkgKG9uZSBiYWNrdXAgcGVyIGRheSlcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBkYXRlU3RyaW5nID0gbm93LnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdOyAvLyBZWVlZLU1NLUREXG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGBiYWNrdXAtJHtkYXRlU3RyaW5nfS5kYmA7XG4gICAgICBjb25zdCBmaWxlcGF0aCA9IGAke3RoaXMuYmFja3VwRGlyfS8ke2ZpbGVuYW1lfWA7XG5cbiAgICAgIC8vIEV4cG9ydCBiYWNrdXAgZGF0YWJhc2UgdG8gZmlsZVxuICAgICAgY29uc3QgYmFja3VwQnVmZmVyID0gYmFja3VwRGIuZXhwb3J0KCk7XG4gICAgICBhd2FpdCB0aGlzLmFkYXB0ZXIud3JpdGVCaW5hcnkoZmlsZXBhdGgsIGJhY2t1cEJ1ZmZlcik7XG5cbiAgICAgIGF3YWl0IHlpZWxkVG9VSSgpO1xuXG4gICAgICBiYWNrdXBEYi5jbG9zZSgpO1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhgQmFja3VwIGNyZWF0ZWQ6ICR7ZmlsZW5hbWV9YCk7XG5cbiAgICAgIC8vIENsZWFuIHVwIG9sZCBiYWNrdXBzXG4gICAgICBhd2FpdCB0aGlzLmNsZWFudXBPbGRCYWNrdXBzKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZGVidWdMb2coXCJGYWlsZWQgdG8gY3JlYXRlIGJhY2t1cDpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGlzdCBvZiBhdmFpbGFibGUgYmFja3Vwc1xuICAgKi9cbiAgYXN5bmMgZ2V0QXZhaWxhYmxlQmFja3VwcygpOiBQcm9taXNlPEJhY2t1cE1ldGFkYXRhW10+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhgQ2hlY2tpbmcgYmFja3VwIGRpcmVjdG9yeTogJHt0aGlzLmJhY2t1cERpcn1gKTtcbiAgICAgIGF3YWl0IHRoaXMuZW5zdXJlQmFja3VwRGlyKCk7XG5cbiAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgdGhpcy5hZGFwdGVyLmxpc3QodGhpcy5iYWNrdXBEaXIpO1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhgTGlzdGVkIGZpbGVzIGluIGJhY2t1cCBkaXJlY3Rvcnk6YCwgZmlsZXMpO1xuICAgICAgY29uc3QgYmFja3VwczogQmFja3VwTWV0YWRhdGFbXSA9IFtdO1xuXG4gICAgICB0aGlzLmRlYnVnTG9nKGBGb3VuZCAke2ZpbGVzLmZpbGVzLmxlbmd0aH0gZmlsZXMgdG8gY2hlY2tgKTtcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5maWxlcykge1xuICAgICAgICB0aGlzLmRlYnVnTG9nKGBDaGVja2luZyBmaWxlOiAke2ZpbGV9YCk7XG4gICAgICAgIC8vIEV4dHJhY3QganVzdCB0aGUgZmlsZW5hbWUgZnJvbSB0aGUgcGF0aCBmb3IgcGF0dGVybiBtYXRjaGluZ1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGZpbGUuc3BsaXQoXCIvXCIpLnBvcCgpIHx8IGZpbGU7XG4gICAgICAgIGlmIChmaWxlbmFtZS5lbmRzV2l0aChcIi5kYlwiKSAmJiBmaWxlbmFtZS5zdGFydHNXaXRoKFwiYmFja3VwLVwiKSkge1xuICAgICAgICAgIHRoaXMuZGVidWdMb2coYEZpbGUgbWF0Y2hlcyBiYWNrdXAgcGF0dGVybjogJHtmaWxlfWApO1xuXG4gICAgICAgICAgLy8gUGFyc2UgZGF0ZSBmcm9tIGZpbGVuYW1lOiBiYWNrdXAtWVlZWS1NTS1ERC5kYlxuICAgICAgICAgIGNvbnN0IGRhdGVNYXRjaCA9IGZpbGVuYW1lLm1hdGNoKC9eYmFja3VwLShcXGR7NH0tXFxkezJ9LVxcZHsyfSlcXC5kYiQvKTtcbiAgICAgICAgICB0aGlzLmRlYnVnTG9nKGBGaWxlbmFtZSBleHRyYWN0ZWQ6ICR7ZmlsZW5hbWV9YCk7XG4gICAgICAgICAgdGhpcy5kZWJ1Z0xvZyhgRGF0ZSBtYXRjaCBmb3IgJHtmaWxlbmFtZX06YCwgZGF0ZU1hdGNoKTtcbiAgICAgICAgICBpZiAoZGF0ZU1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZShkYXRlTWF0Y2hbMV0gKyBcIlQwMDowMDowMFwiKTtcbiAgICAgICAgICAgIHRoaXMuZGVidWdMb2coYFBhcnNlZCB0aW1lc3RhbXAgZm9yICR7ZmlsZW5hbWV9OmAsIHRpbWVzdGFtcCk7XG4gICAgICAgICAgICBiYWNrdXBzLnB1c2goe1xuICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZW5hbWUsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgICAgICAgICBgRGF0ZSBwYXR0ZXJuIGRpZCBub3QgbWF0Y2ggZm9yIGZpbGVuYW1lOiAke2ZpbGVuYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRlYnVnTG9nKGBGaWxlIGRvZXMgbm90IG1hdGNoIGJhY2t1cCBwYXR0ZXJuOiAke2ZpbGV9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU29ydCBieSB0aW1lc3RhbXAgKG5ld2VzdCBmaXJzdClcbiAgICAgIGJhY2t1cHMuc29ydCgoYSwgYikgPT4gYi50aW1lc3RhbXAuZ2V0VGltZSgpIC0gYS50aW1lc3RhbXAuZ2V0VGltZSgpKTtcblxuICAgICAgcmV0dXJuIGJhY2t1cHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZGVidWdMb2coXCJGYWlsZWQgdG8gbGlzdCBiYWNrdXBzOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc3RvcmUgYmFja3VwIGRhdGEgdG8gZGF0YWJhc2VcbiAgICovXG4gIGFzeW5jIHJlc3RvcmVCYWNrdXAoXG4gICAgZmlsZW5hbWU6IHN0cmluZyxcbiAgICBkYjogRGF0YWJhc2VTZXJ2aWNlLFxuICAgIG9uUHJvZ3Jlc3M/OiAoY3VycmVudDogbnVtYmVyLCB0b3RhbDogbnVtYmVyKSA9PiB2b2lkLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmlsZXBhdGggPSBgJHt0aGlzLmJhY2t1cERpcn0vJHtmaWxlbmFtZX1gO1xuXG4gICAgICAvLyBDaGVjayBpZiBiYWNrdXAgZmlsZSBleGlzdHNcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYWRhcHRlci5leGlzdHMoZmlsZXBhdGgpKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhY2t1cCBmaWxlIG5vdCBmb3VuZDogJHtmaWxlbmFtZX1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gSW5pdGlhbGl6ZSBzcWwuanMgZm9yIHJlYWRpbmcgYmFja3VwIGRhdGFiYXNlXG4gICAgICBjb25zdCBTUUwgPSBhd2FpdCBpbml0U3FsSnMoe1xuICAgICAgICBsb2NhdGVGaWxlOiAoZmlsZSkgPT4gYGh0dHBzOi8vc3FsLmpzLm9yZy9kaXN0LyR7ZmlsZX1gLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlYWQgYmFja3VwIGRhdGFiYXNlIGZpbGVcbiAgICAgIGNvbnN0IGJhY2t1cEJ1ZmZlciA9IGF3YWl0IHRoaXMuYWRhcHRlci5yZWFkQmluYXJ5KGZpbGVwYXRoKTtcbiAgICAgIGNvbnN0IGJhY2t1cERiID0gbmV3IFNRTC5EYXRhYmFzZShuZXcgVWludDhBcnJheShiYWNrdXBCdWZmZXIpKTtcblxuICAgICAgLy8gR2V0IGRhdGEgZnJvbSBiYWNrdXAgZGF0YWJhc2VcbiAgICAgIGNvbnN0IHJldmlld0xvZ3M6IFJldmlld0xvZ1tdID0gW107XG4gICAgICBjb25zdCByZXZpZXdTZXNzaW9uczogUmV2aWV3U2Vzc2lvbltdID0gW107XG5cbiAgICAgIC8vIFJlYWQgcmV2aWV3IGxvZ3MgZnJvbSBiYWNrdXBcbiAgICAgIGNvbnN0IHJldmlld0xvZ1N0bXQgPSBiYWNrdXBEYi5wcmVwYXJlKGBcbiAgICAgICAgU0VMRUNUIGlkLCBmbGFzaGNhcmRfaWQsIHNlc3Npb25faWQsIGxhc3RfcmV2aWV3ZWRfYXQsIHNob3duX2F0LCByZXZpZXdlZF9hdCxcbiAgICAgICAgICAgICAgIHJhdGluZywgcmF0aW5nX2xhYmVsLCB0aW1lX2VsYXBzZWRfbXMsIG9sZF9zdGF0ZSwgb2xkX3JlcGV0aXRpb25zLFxuICAgICAgICAgICAgICAgb2xkX2xhcHNlcywgb2xkX3N0YWJpbGl0eSwgb2xkX2RpZmZpY3VsdHksIG5ld19zdGF0ZSwgbmV3X3JlcGV0aXRpb25zLFxuICAgICAgICAgICAgICAgbmV3X2xhcHNlcywgbmV3X3N0YWJpbGl0eSwgbmV3X2RpZmZpY3VsdHksIG9sZF9pbnRlcnZhbF9taW51dGVzLFxuICAgICAgICAgICAgICAgbmV3X2ludGVydmFsX21pbnV0ZXMsIG9sZF9kdWVfYXQsIG5ld19kdWVfYXQsIGVsYXBzZWRfZGF5cyxcbiAgICAgICAgICAgICAgIHJldHJpZXZhYmlsaXR5LCByZXF1ZXN0X3JldGVudGlvbiwgcHJvZmlsZSwgbWF4aW11bV9pbnRlcnZhbF9kYXlzLFxuICAgICAgICAgICAgICAgbWluX21pbnV0ZXMsIGZzcnNfd2VpZ2h0c192ZXJzaW9uLCBzY2hlZHVsZXJfdmVyc2lvbiwgbm90ZV9tb2RlbF9pZCxcbiAgICAgICAgICAgICAgIGNhcmRfdGVtcGxhdGVfaWQsIGNvbnRlbnRfaGFzaCwgY2xpZW50XG4gICAgICAgIEZST00gcmV2aWV3X2xvZ3NcbiAgICAgIGApO1xuXG4gICAgICB3aGlsZSAocmV2aWV3TG9nU3RtdC5zdGVwKCkpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gcmV2aWV3TG9nU3RtdC5nZXQoKTtcbiAgICAgICAgcmV2aWV3TG9ncy5wdXNoKHtcbiAgICAgICAgICBpZDogcm93WzBdIGFzIHN0cmluZyxcbiAgICAgICAgICBmbGFzaGNhcmRJZDogcm93WzFdIGFzIHN0cmluZyxcbiAgICAgICAgICBzZXNzaW9uSWQ6IHJvd1syXSBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgICAgbGFzdFJldmlld2VkQXQ6IHJvd1szXSBhcyBzdHJpbmcsXG4gICAgICAgICAgc2hvd25BdDogcm93WzRdIGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICAgICAgICByZXZpZXdlZEF0OiByb3dbNV0gYXMgc3RyaW5nLFxuICAgICAgICAgIHJhdGluZzogcm93WzZdIGFzIDEgfCAyIHwgMyB8IDQsXG4gICAgICAgICAgcmF0aW5nTGFiZWw6IHJvd1s3XSBhcyBcImFnYWluXCIgfCBcImhhcmRcIiB8IFwiZ29vZFwiIHwgXCJlYXN5XCIsXG4gICAgICAgICAgdGltZUVsYXBzZWRNczogcm93WzhdIGFzIG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICAgICAgICBvbGRTdGF0ZTogcm93WzldIGFzIFwibmV3XCIgfCBcInJldmlld1wiLFxuICAgICAgICAgIG9sZFJlcGV0aXRpb25zOiByb3dbMTBdIGFzIG51bWJlcixcbiAgICAgICAgICBvbGRMYXBzZXM6IHJvd1sxMV0gYXMgbnVtYmVyLFxuICAgICAgICAgIG9sZFN0YWJpbGl0eTogcm93WzEyXSBhcyBudW1iZXIsXG4gICAgICAgICAgb2xkRGlmZmljdWx0eTogcm93WzEzXSBhcyBudW1iZXIsXG4gICAgICAgICAgbmV3U3RhdGU6IHJvd1sxNF0gYXMgXCJuZXdcIiB8IFwicmV2aWV3XCIsXG4gICAgICAgICAgbmV3UmVwZXRpdGlvbnM6IHJvd1sxNV0gYXMgbnVtYmVyLFxuICAgICAgICAgIG5ld0xhcHNlczogcm93WzE2XSBhcyBudW1iZXIsXG4gICAgICAgICAgbmV3U3RhYmlsaXR5OiByb3dbMTddIGFzIG51bWJlcixcbiAgICAgICAgICBuZXdEaWZmaWN1bHR5OiByb3dbMThdIGFzIG51bWJlcixcbiAgICAgICAgICBvbGRJbnRlcnZhbE1pbnV0ZXM6IHJvd1sxOV0gYXMgbnVtYmVyLFxuICAgICAgICAgIG5ld0ludGVydmFsTWludXRlczogcm93WzIwXSBhcyBudW1iZXIsXG4gICAgICAgICAgb2xkRHVlQXQ6IHJvd1syMV0gYXMgc3RyaW5nLFxuICAgICAgICAgIG5ld0R1ZUF0OiByb3dbMjJdIGFzIHN0cmluZyxcbiAgICAgICAgICBlbGFwc2VkRGF5czogcm93WzIzXSBhcyBudW1iZXIsXG4gICAgICAgICAgcmV0cmlldmFiaWxpdHk6IHJvd1syNF0gYXMgbnVtYmVyLFxuICAgICAgICAgIHJlcXVlc3RSZXRlbnRpb246IHJvd1syNV0gYXMgbnVtYmVyLFxuICAgICAgICAgIHByb2ZpbGU6IHJvd1syNl0gYXMgXCJJTlRFTlNJVkVcIiB8IFwiU1RBTkRBUkRcIixcbiAgICAgICAgICBtYXhpbXVtSW50ZXJ2YWxEYXlzOiByb3dbMjddIGFzIG51bWJlcixcbiAgICAgICAgICBtaW5NaW51dGVzOiByb3dbMjhdIGFzIG51bWJlcixcbiAgICAgICAgICBmc3JzV2VpZ2h0c1ZlcnNpb246IHJvd1syOV0gYXMgc3RyaW5nLFxuICAgICAgICAgIHNjaGVkdWxlclZlcnNpb246IHJvd1szMF0gYXMgc3RyaW5nLFxuICAgICAgICAgIG5vdGVNb2RlbElkOiByb3dbMzFdIGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICAgICAgICBjYXJkVGVtcGxhdGVJZDogcm93WzMyXSBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgICAgY29udGVudEhhc2g6IHJvd1szM10gYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgICAgIGNsaWVudDogcm93WzM0XSBhcyBcIndlYlwiIHwgXCJkZXNrdG9wXCIgfCBcIm1vYmlsZVwiIHwgdW5kZWZpbmVkLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldmlld0xvZ1N0bXQuZnJlZSgpO1xuXG4gICAgICBhd2FpdCB5aWVsZFRvVUkoKTtcblxuICAgICAgLy8gUmVhZCByZXZpZXcgc2Vzc2lvbnMgZnJvbSBiYWNrdXBcbiAgICAgIGNvbnN0IHJldmlld1Nlc3Npb25TdG10ID0gYmFja3VwRGIucHJlcGFyZShgXG4gICAgICAgIFNFTEVDVCBpZCwgZGVja19pZCwgc3RhcnRlZF9hdCwgZW5kZWRfYXQsIGdvYWxfdG90YWwsIGRvbmVfdW5pcXVlXG4gICAgICAgIEZST00gcmV2aWV3X3Nlc3Npb25zXG4gICAgICBgKTtcblxuICAgICAgd2hpbGUgKHJldmlld1Nlc3Npb25TdG10LnN0ZXAoKSkge1xuICAgICAgICBjb25zdCByb3cgPSByZXZpZXdTZXNzaW9uU3RtdC5nZXQoKTtcbiAgICAgICAgcmV2aWV3U2Vzc2lvbnMucHVzaCh7XG4gICAgICAgICAgaWQ6IHJvd1swXSBhcyBzdHJpbmcsXG4gICAgICAgICAgZGVja0lkOiByb3dbMV0gYXMgc3RyaW5nLFxuICAgICAgICAgIHN0YXJ0ZWRBdDogcm93WzJdIGFzIHN0cmluZyxcbiAgICAgICAgICBlbmRlZEF0OiByb3dbM10gYXMgc3RyaW5nIHwgbnVsbCxcbiAgICAgICAgICBnb2FsVG90YWw6IHJvd1s0XSBhcyBudW1iZXIsXG4gICAgICAgICAgZG9uZVVuaXF1ZTogcm93WzVdIGFzIG51bWJlcixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXZpZXdTZXNzaW9uU3RtdC5mcmVlKCk7XG5cbiAgICAgIGF3YWl0IHlpZWxkVG9VSSgpO1xuXG4gICAgICBiYWNrdXBEYi5jbG9zZSgpO1xuXG4gICAgICBsZXQgcmVzdG9yZWQgPSAwO1xuICAgICAgY29uc3QgdG90YWwgPSByZXZpZXdMb2dzLmxlbmd0aCArIHJldmlld1Nlc3Npb25zLmxlbmd0aDtcblxuICAgICAgLy8gUmVzdG9yZSByZXZpZXdfbG9ncyAoc2tpcCBkdXBsaWNhdGVzKVxuICAgICAgZm9yIChjb25zdCBsb2cgb2YgcmV2aWV3TG9ncykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHJldmlldyBsb2cgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCBkYi5yZXZpZXdMb2dFeGlzdHMobG9nLmlkKTtcbiAgICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgICAgYXdhaXQgZGIuaW5zZXJ0UmV2aWV3TG9nKGxvZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3RvcmVkKys7XG4gICAgICAgICAgb25Qcm9ncmVzcz8uKHJlc3RvcmVkLCB0b3RhbCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy5kZWJ1Z0xvZyhgRmFpbGVkIHRvIHJlc3RvcmUgcmV2aWV3IGxvZyAke2xvZy5pZH06YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc3RvcmUgcmV2aWV3X3Nlc3Npb25zIChza2lwIGR1cGxpY2F0ZXMpXG4gICAgICBmb3IgKGNvbnN0IHNlc3Npb24gb2YgcmV2aWV3U2Vzc2lvbnMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDaGVjayBpZiBzZXNzaW9uIGFscmVhZHkgZXhpc3RzXG4gICAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgZGIucmV2aWV3U2Vzc2lvbkV4aXN0cyhzZXNzaW9uLmlkKTtcbiAgICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgICAgYXdhaXQgZGIuaW5zZXJ0UmV2aWV3U2Vzc2lvbihzZXNzaW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdG9yZWQrKztcbiAgICAgICAgICBvblByb2dyZXNzPy4ocmVzdG9yZWQsIHRvdGFsKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLmRlYnVnTG9nKFxuICAgICAgICAgICAgYEZhaWxlZCB0byByZXN0b3JlIHJldmlldyBzZXNzaW9uICR7c2Vzc2lvbi5pZH06YCxcbiAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgeWllbGRUb1VJKCk7XG5cbiAgICAgIHRoaXMuZGVidWdMb2coXG4gICAgICAgIGBCYWNrdXAgcmVzdG9yZWQ6ICR7ZmlsZW5hbWV9LCAke3Jlc3RvcmVkfS8ke3RvdGFsfSByZWNvcmRzIHByb2Nlc3NlZGAsXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKFwiRmFpbGVkIHRvIHJlc3RvcmUgYmFja3VwOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5zdXJlIGJhY2t1cCBkaXJlY3RvcnkgZXhpc3RzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGVuc3VyZUJhY2t1cERpcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hZGFwdGVyLmV4aXN0cyh0aGlzLmJhY2t1cERpcikpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRhcHRlci5ta2Rpcih0aGlzLmJhY2t1cERpcik7XG4gICAgICAgIHRoaXMuZGVidWdMb2coYENyZWF0ZWQgYmFja3VwIGRpcmVjdG9yeTogJHt0aGlzLmJhY2t1cERpcn1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5kZWJ1Z0xvZyhcIkZhaWxlZCB0byBjcmVhdGUgYmFja3VwIGRpcmVjdG9yeTpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwIG9sZCBiYWNrdXBzLCBrZWVwaW5nIG9ubHkgdGhlIG1vc3QgcmVjZW50IG9uZXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2xlYW51cE9sZEJhY2t1cHMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJhY2t1cHMgPSBhd2FpdCB0aGlzLmdldEF2YWlsYWJsZUJhY2t1cHMoKTtcblxuICAgICAgLy8gS2VlcCBvbmx5IHRoZSBtb3N0IHJlY2VudCBiYWNrdXBzXG4gICAgICBpZiAoYmFja3Vwcy5sZW5ndGggPiB0aGlzLm1heEJhY2t1cHMpIHtcbiAgICAgICAgY29uc3QgdG9EZWxldGUgPSBiYWNrdXBzLnNsaWNlKHRoaXMubWF4QmFja3Vwcyk7XG5cbiAgICAgICAgZm9yIChjb25zdCBiYWNrdXAgb2YgdG9EZWxldGUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZXBhdGggPSBgJHt0aGlzLmJhY2t1cERpcn0vJHtiYWNrdXAuZmlsZW5hbWV9YDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRhcHRlci5yZW1vdmUoZmlsZXBhdGgpO1xuICAgICAgICAgICAgdGhpcy5kZWJ1Z0xvZyhgRGVsZXRlZCBvbGQgYmFja3VwOiAke2JhY2t1cC5maWxlbmFtZX1gKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5kZWJ1Z0xvZyhcbiAgICAgICAgICAgICAgYEZhaWxlZCB0byBkZWxldGUgb2xkIGJhY2t1cCAke2JhY2t1cC5maWxlbmFtZX06YCxcbiAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmRlYnVnTG9nKFwiRmFpbGVkIHRvIGNsZWFudXAgb2xkIGJhY2t1cHM6XCIsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRpbWVzdGFtcCBmb3IgZGlzcGxheVxuICAgKi9cbiAgc3RhdGljIGZvcm1hdFRpbWVzdGFtcCh0aW1lc3RhbXA6IERhdGUpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aW1lc3RhbXAudG9Mb2NhbGVTdHJpbmcoKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRmxhc2hjYXJkc1NldHRpbmdzIH0gZnJvbSBcIi4uL3NldHRpbmdzXCI7XG5cbmV4cG9ydCBjbGFzcyBQcm9ncmVzc1RyYWNrZXIge1xuICBwcml2YXRlIHByb2dyZXNzTm90aWNlOiBOb3RpY2UgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzZXR0aW5nczogRmxhc2hjYXJkc1NldHRpbmdzO1xuXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBGbGFzaGNhcmRzU2V0dGluZ3MpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gIH1cblxuICBzaG93KG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNldHRpbmdzPy51aT8uZW5hYmxlTm90aWNlcyAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMucHJvZ3Jlc3NOb3RpY2UgPSBuZXcgTm90aWNlKG1lc3NhZ2UsIDApO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZShtZXNzYWdlOiBzdHJpbmcsIHByb2dyZXNzOiBudW1iZXIgPSAwKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucHJvZ3Jlc3NOb3RpY2UpIHtcbiAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gdGhpcy5jcmVhdGVQcm9ncmVzc0Jhcihwcm9ncmVzcyk7XG4gICAgICB0aGlzLnByb2dyZXNzTm90aWNlLnNldE1lc3NhZ2UoYCR7bWVzc2FnZX1cXG4ke3Byb2dyZXNzQmFyfWApO1xuICAgIH1cbiAgfVxuXG4gIGhpZGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucHJvZ3Jlc3NOb3RpY2UpIHtcbiAgICAgIHRoaXMucHJvZ3Jlc3NOb3RpY2UuaGlkZSgpO1xuICAgICAgdGhpcy5wcm9ncmVzc05vdGljZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQcm9ncmVzc0Jhcihwcm9ncmVzczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCB3aWR0aCA9IDI1O1xuICAgIGNvbnN0IGZpbGxlZCA9IE1hdGgucm91bmQoKHByb2dyZXNzIC8gMTAwKSAqIHdpZHRoKTtcbiAgICBjb25zdCBlbXB0eSA9IHdpZHRoIC0gZmlsbGVkO1xuICAgIGNvbnN0IGJhciA9IFwiXHUyNTg4XCIucmVwZWF0KGZpbGxlZCkgKyBcIlx1MjU5MVwiLnJlcGVhdChlbXB0eSk7XG4gICAgY29uc3QgcGVyY2VudGFnZSA9IE1hdGgucm91bmQocHJvZ3Jlc3MpO1xuICAgIHJldHVybiBgWyR7YmFyfV0gJHtwZXJjZW50YWdlfSVgO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgREVGQVVMVF9GU1JTX1BBUkFNRVRFUlMgfSBmcm9tIFwiLi9hbGdvcml0aG0vZnNycy13ZWlnaHRzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxhc2hjYXJkc1NldHRpbmdzIHtcbiAgLy8gUmV2aWV3IFNlc3Npb24gU2V0dGluZ3NcbiAgcmV2aWV3OiB7XG4gICAgc2hvd1Byb2dyZXNzOiBib29sZWFuO1xuICAgIGVuYWJsZUtleWJvYXJkU2hvcnRjdXRzOiBib29sZWFuO1xuICAgIHNlc3Npb25EdXJhdGlvbjogbnVtYmVyOyAvLyBTZXNzaW9uIGR1cmF0aW9uIGluIG1pbnV0ZXMgKDEtNjAsIGRlZmF1bHQgMjUpXG4gIH07XG5cbiAgLy8gUGFyc2luZyBTZXR0aW5nc1xuICBwYXJzaW5nOiB7XG4gICAgZm9sZGVyU2VhcmNoUGF0aDogc3RyaW5nOyAvLyBGb2xkZXIgcGF0aCB0byBzY2FuIGZvciBmbGFzaGNhcmQgZmlsZXMsIGVtcHR5IG1lYW5zIHNjYW4gZW50aXJlIHZhdWx0XG4gIH07XG5cbiAgLy8gVUkgU2V0dGluZ3NcbiAgdWk6IHtcbiAgICBlbmFibGVCYWNrZ3JvdW5kUmVmcmVzaDogYm9vbGVhbjtcbiAgICBiYWNrZ3JvdW5kUmVmcmVzaEludGVydmFsOiBudW1iZXI7IC8vIHNlY29uZHNcbiAgICBlbmFibGVOb3RpY2VzOiBib29sZWFuO1xuICB9O1xuXG4gIC8vIEJhY2t1cCBTZXR0aW5nc1xuICBiYWNrdXA6IHtcbiAgICBlbmFibGVBdXRvQmFja3VwOiBib29sZWFuO1xuICAgIG1heEJhY2t1cHM6IG51bWJlcjtcbiAgfTtcblxuICAvLyBEZWJ1ZyBTZXR0aW5nc1xuICBkZWJ1Zzoge1xuICAgIGVuYWJsZUxvZ2dpbmc6IGJvb2xlYW47XG4gICAgcGVyZm9ybWFuY2VMb2dzOiBib29sZWFuO1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRmxhc2hjYXJkc1NldHRpbmdzID0ge1xuICByZXZpZXc6IHtcbiAgICBzaG93UHJvZ3Jlc3M6IHRydWUsXG4gICAgZW5hYmxlS2V5Ym9hcmRTaG9ydGN1dHM6IHRydWUsXG4gICAgc2Vzc2lvbkR1cmF0aW9uOiAyNSxcbiAgfSxcblxuICBwYXJzaW5nOiB7XG4gICAgZm9sZGVyU2VhcmNoUGF0aDogXCJcIiwgLy8gRGVmYXVsdDogc2NhbiBlbnRpcmUgdmF1bHRcbiAgfSxcblxuICB1aToge1xuICAgIGVuYWJsZUJhY2tncm91bmRSZWZyZXNoOiB0cnVlLFxuICAgIGJhY2tncm91bmRSZWZyZXNoSW50ZXJ2YWw6IDUsXG4gICAgZW5hYmxlTm90aWNlczogdHJ1ZSxcbiAgfSxcblxuICBiYWNrdXA6IHtcbiAgICBlbmFibGVBdXRvQmFja3VwOiB0cnVlLFxuICAgIG1heEJhY2t1cHM6IDUsXG4gIH0sXG5cbiAgZGVidWc6IHtcbiAgICBlbmFibGVMb2dnaW5nOiBmYWxzZSxcbiAgICBwZXJmb3JtYW5jZUxvZ3M6IGZhbHNlLFxuICB9LFxufTtcbiIsICJpbXBvcnQge1xuICBBcHAsXG4gIFBsdWdpblNldHRpbmdUYWIsXG4gIFNldHRpbmcsXG4gIE5vdGljZSxcbiAgTW9kYWwsXG4gIERyb3Bkb3duQ29tcG9uZW50LFxufSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEZsYXNoY2FyZHNTZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgQmFja3VwU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9CYWNrdXBTZXJ2aWNlXCI7XG5pbXBvcnQgRGVja3NQbHVnaW4gZnJvbSBcIkAvbWFpblwiO1xuaW1wb3J0IHsgRGF0YWJhc2VTZXJ2aWNlIH0gZnJvbSBcIkAvZGF0YWJhc2UvRGF0YWJhc2VTZXJ2aWNlXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiQC91dGlscy9sb2dnaW5nXCI7XG5cbmV4cG9ydCBjbGFzcyBEZWNrc1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcHJpdmF0ZSBzZXR0aW5nczogRmxhc2hjYXJkc1NldHRpbmdzO1xuICBwcml2YXRlIHNhdmVTZXR0aW5nczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgcHJpdmF0ZSBwZXJmb3JtU3luYzogKGZvcmNlPzogYm9vbGVhbikgPT4gUHJvbWlzZTx2b2lkPjtcbiAgcHJpdmF0ZSByZWZyZXNoVmlld1N0YXRzOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBwcml2YXRlIHJlc3RhcnRCYWNrZ3JvdW5kUmVmcmVzaDogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBzdGFydEJhY2tncm91bmRSZWZyZXNoOiAoKSA9PiB2b2lkO1xuICBwcml2YXRlIHN0b3BCYWNrZ3JvdW5kUmVmcmVzaDogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBwdXJnZURhdGFiYXNlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBwcml2YXRlIGJhY2t1cFNlcnZpY2U6IEJhY2t1cFNlcnZpY2U7XG4gIHByaXZhdGUgcGx1Z2luOiBEZWNrc1BsdWdpbjtcbiAgcHJpdmF0ZSBkYjogRGF0YWJhc2VTZXJ2aWNlO1xuICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHBsdWdpbjogRGVja3NQbHVnaW4sXG4gICAgc2V0dGluZ3M6IEZsYXNoY2FyZHNTZXR0aW5ncyxcbiAgICBkYjogRGF0YWJhc2VTZXJ2aWNlLFxuICAgIHNhdmVTZXR0aW5nczogKCkgPT4gUHJvbWlzZTx2b2lkPixcbiAgICBsb2dnZXI6IExvZ2dlcixcbiAgICBwZXJmb3JtU3luYzogKGZvcmNlPzogYm9vbGVhbikgPT4gUHJvbWlzZTx2b2lkPixcbiAgICByZWZyZXNoVmlld1N0YXRzOiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICAgIHJlc3RhcnRCYWNrZ3JvdW5kUmVmcmVzaDogKCkgPT4gdm9pZCxcbiAgICBzdGFydEJhY2tncm91bmRSZWZyZXNoOiAoKSA9PiB2b2lkLFxuICAgIHN0b3BCYWNrZ3JvdW5kUmVmcmVzaDogKCkgPT4gdm9pZCxcbiAgICBwdXJnZURhdGFiYXNlOiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICAgIGJhY2t1cFNlcnZpY2U6IEJhY2t1cFNlcnZpY2UsXG4gICkge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5kYiA9IGRiO1xuICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgIHRoaXMuc2F2ZVNldHRpbmdzID0gc2F2ZVNldHRpbmdzO1xuICAgIHRoaXMucGVyZm9ybVN5bmMgPSBwZXJmb3JtU3luYztcbiAgICB0aGlzLnJlZnJlc2hWaWV3U3RhdHMgPSByZWZyZXNoVmlld1N0YXRzO1xuICAgIHRoaXMucmVzdGFydEJhY2tncm91bmRSZWZyZXNoID0gcmVzdGFydEJhY2tncm91bmRSZWZyZXNoO1xuICAgIHRoaXMuc3RhcnRCYWNrZ3JvdW5kUmVmcmVzaCA9IHN0YXJ0QmFja2dyb3VuZFJlZnJlc2g7XG4gICAgdGhpcy5zdG9wQmFja2dyb3VuZFJlZnJlc2ggPSBzdG9wQmFja2dyb3VuZFJlZnJlc2g7XG4gICAgdGhpcy5wdXJnZURhdGFiYXNlID0gcHVyZ2VEYXRhYmFzZTtcbiAgICB0aGlzLmJhY2t1cFNlcnZpY2UgPSBiYWNrdXBTZXJ2aWNlO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJEZWNrcyBQbHVnaW4gU2V0dGluZ3NcIiB9KTtcblxuICAgIC8vIFJldmlldyBTZXNzaW9uIFNldHRpbmdzXG4gICAgdGhpcy5hZGRSZXZpZXdTZXR0aW5ncyhjb250YWluZXJFbCk7XG5cbiAgICAvLyBQYXJzaW5nIFNldHRpbmdzXG4gICAgdGhpcy5hZGRQYXJzaW5nU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuXG4gICAgLy8gVUkgU2V0dGluZ3NcbiAgICB0aGlzLmFkZFVJU2V0dGluZ3MoY29udGFpbmVyRWwpO1xuXG4gICAgLy8gQmFja3VwIFNldHRpbmdzXG4gICAgdGhpcy5hZGRCYWNrdXBTZXR0aW5ncyhjb250YWluZXJFbCk7XG5cbiAgICAvLyBEZWJ1ZyBTZXR0aW5nc1xuICAgIHRoaXMuYWRkRGVidWdTZXR0aW5ncyhjb250YWluZXJFbCk7XG5cbiAgICAvLyBEYXRhYmFzZSBNYW5hZ2VtZW50IFNldHRpbmdzXG4gICAgdGhpcy5hZGREYXRhYmFzZVNldHRpbmdzKGNvbnRhaW5lckVsKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkUmV2aWV3U2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiUmV2aWV3IFNlc3Npb25zXCIgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiU2hvdyBQcm9ncmVzc1wiKVxuICAgICAgLnNldERlc2MoXCJEaXNwbGF5IHByb2dyZXNzIGJhciBkdXJpbmcgcmV2aWV3IHNlc3Npb25zXCIpXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLnJldmlldy5zaG93UHJvZ3Jlc3MpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yZXZpZXcuc2hvd1Byb2dyZXNzID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pLFxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJLZXlib2FyZCBTaG9ydGN1dHNcIilcbiAgICAgIC5zZXREZXNjKFwiRW5hYmxlIGtleWJvYXJkIHNob3J0Y3V0cyBpbiByZXZpZXcgbW9kYWwgKDEtNCBmb3IgZGlmZmljdWx0eSlcIilcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MucmV2aWV3LmVuYWJsZUtleWJvYXJkU2hvcnRjdXRzKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucmV2aWV3LmVuYWJsZUtleWJvYXJkU2hvcnRjdXRzID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pLFxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJTZXNzaW9uIER1cmF0aW9uXCIpXG4gICAgICAuc2V0RGVzYyhcbiAgICAgICAgXCJNYXhpbXVtIGR1cmF0aW9uIGZvciBmbGFzaGNhcmQgcmV2aWV3IHNlc3Npb25zIGluIG1pbnV0ZXMgKDEtNjApXCIsXG4gICAgICApXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjI1XCIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MucmV2aWV3LnNlc3Npb25EdXJhdGlvbi50b1N0cmluZygpKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMSAmJiBudW0gPD0gNjApIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yZXZpZXcuc2Vzc2lvbkR1cmF0aW9uID0gbnVtO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLFxuICAgICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkUGFyc2luZ1NldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlBhcnNpbmdcIiB9KTtcblxuICAgIC8vIEdldCBhbGwgZm9sZGVycyBmb3IgZHJvcGRvd24gb3B0aW9uc1xuICAgIGNvbnN0IGZvbGRlck9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBcIlwiOiBcIlNjYW4gZW50aXJlIHZhdWx0IChkZWZhdWx0KVwiLFxuICAgIH07XG5cbiAgICB0aGlzLmFwcC52YXVsdC5nZXRBbGxGb2xkZXJzKCkuZm9yRWFjaCgoZm9sZGVyKSA9PiB7XG4gICAgICBmb2xkZXJPcHRpb25zW2ZvbGRlci5wYXRoXSA9IGZvbGRlci5wYXRoO1xuICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkZvbGRlciBTZWFyY2ggUGF0aFwiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiTGltaXQgc2Nhbm5pbmcgdG8gYSBzcGVjaWZpYyBmb2xkZXIuIFNlbGVjdCAnU2NhbiBlbnRpcmUgdmF1bHQnIHRvIHNjYW4gYWxsIGZpbGVzLlwiLFxuICAgICAgKVxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICAvLyBBZGQgb3B0aW9ucyB0byBkcm9wZG93blxuICAgICAgICBPYmplY3QuZW50cmllcyhmb2xkZXJPcHRpb25zKS5mb3JFYWNoKChbdmFsdWUsIGRpc3BsYXldKSA9PiB7XG4gICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKHZhbHVlLCBkaXNwbGF5KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5ncy5wYXJzaW5nLmZvbGRlclNlYXJjaFBhdGgpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5wYXJzaW5nLmZvbGRlclNlYXJjaFBhdGggPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkVUlTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJVc2VyIEludGVyZmFjZVwiIH0pO1xuXG4gICAgY29uc3QgaW50ZXJ2YWxTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkJhY2tncm91bmQgUmVmcmVzaCBJbnRlcnZhbFwiKVxuICAgICAgLnNldERlc2MoXCJIb3cgb2Z0ZW4gdG8gcmVmcmVzaCBkZWNrIHN0YXRzIGluIHRoZSBzaWRlIHBhbmVsIChpbiBzZWNvbmRzKVwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCI1XCIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MudWkuYmFja2dyb3VuZFJlZnJlc2hJbnRlcnZhbC50b1N0cmluZygpKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMSAmJiBudW0gPD0gNjApIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy51aS5iYWNrZ3JvdW5kUmVmcmVzaEludGVydmFsID0gbnVtO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAvLyBSZXN0YXJ0IGJhY2tncm91bmQgcmVmcmVzaCB3aXRoIG5ldyBpbnRlcnZhbFxuICAgICAgICAgICAgICB0aGlzLnJlc3RhcnRCYWNrZ3JvdW5kUmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLFxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJFbmFibGUgQmFja2dyb3VuZCBSZWZyZXNoXCIpXG4gICAgICAuc2V0RGVzYyhcIkF1dG9tYXRpY2FsbHkgcmVmcmVzaCBkZWNrIHN0YXRzIGluIHRoZSBzaWRlIHBhbmVsXCIpXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLnVpLmVuYWJsZUJhY2tncm91bmRSZWZyZXNoKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudWkuZW5hYmxlQmFja2dyb3VuZFJlZnJlc2ggPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgICAgIC8vIEVuYWJsZS9kaXNhYmxlIGludGVydmFsIHNldHRpbmcgYmFzZWQgb24gdG9nZ2xlXG4gICAgICAgICAgICBpbnRlcnZhbFNldHRpbmcuc2V0RGlzYWJsZWQoIXZhbHVlKTtcblxuICAgICAgICAgICAgLy8gU3RhcnQgb3Igc3RvcCBiYWNrZ3JvdW5kIHJlZnJlc2ggYmFzZWQgb24gc2V0dGluZ1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3RhcnRCYWNrZ3JvdW5kUmVmcmVzaCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5zdG9wQmFja2dyb3VuZFJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSxcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiRW5hYmxlIE5vdGljZXNcIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIlNob3cgbm90aWZpY2F0aW9uIG1lc3NhZ2VzIGZvciBjb21wbGV0ZWQgcmV2aWV3IHNlc3Npb25zIGFuZCBzeW5jIG9wZXJhdGlvbnNcIixcbiAgICAgIClcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MudWkuZW5hYmxlTm90aWNlcylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnVpLmVuYWJsZU5vdGljZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSksXG4gICAgICApO1xuXG4gICAgLy8gU2V0IGluaXRpYWwgc3RhdGUgb2YgaW50ZXJ2YWwgc2V0dGluZ1xuICAgIGludGVydmFsU2V0dGluZy5zZXREaXNhYmxlZCghdGhpcy5zZXR0aW5ncy51aS5lbmFibGVCYWNrZ3JvdW5kUmVmcmVzaCk7XG4gIH1cblxuICBwcml2YXRlIGFkZERlYnVnU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiRGVidWdcIiB9KTtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgdGV4dDogXCJEZWJ1ZyBzZXR0aW5ncyBmb3IgdHJvdWJsZXNob290aW5nIGFuZCBkZXZlbG9wbWVudC5cIixcbiAgICAgIGNsczogXCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIixcbiAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJFbmFibGUgRGVidWcgTG9nZ2luZ1wiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiU2hvdyBkZXRhaWxlZCBsb2dnaW5nIGluIHRoZSBjb25zb2xlIGZvciBzeW5jIG9wZXJhdGlvbnMgYW5kIGZsYXNoY2FyZCBwcm9jZXNzaW5nXCIsXG4gICAgICApXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmRlYnVnPy5lbmFibGVMb2dnaW5nIHx8IGZhbHNlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5kZWJ1Zykge1xuICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmRlYnVnID0ge1xuICAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlTG9nczogZmFsc2UsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmRlYnVnLmVuYWJsZUxvZ2dpbmcgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSksXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkVuYWJsZSBQZXJmb3JtYW5jZSBMb2dzXCIpXG4gICAgICAuc2V0RGVzYyhcbiAgICAgICAgXCJTaG93IHBlcmZvcm1hbmNlIHRpbWluZyBtZXRyaWNzIGluIHRoZSBjb25zb2xlIChzeW5jIHRpbWVzLCBwYXJzaW5nIHBlcmZvcm1hbmNlLCBldGMuKVwiLFxuICAgICAgKVxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5ncy5kZWJ1Zz8ucGVyZm9ybWFuY2VMb2dzIHx8IGZhbHNlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5kZWJ1Zykge1xuICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmRlYnVnID0ge1xuICAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlTG9nczogZmFsc2UsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmRlYnVnLnBlcmZvcm1hbmNlTG9ncyA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KSxcbiAgICAgICk7XG4gIH1cblxuICBwcml2YXRlIGFkZERhdGFiYXNlU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiRGF0YWJhc2UgTWFuYWdlbWVudFwiIH0pO1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICB0ZXh0OiBcIk1hbmFnZSB5b3VyIGZsYXNoY2FyZCBkYXRhYmFzZS4gVXNlIHdpdGggY2F1dGlvbiAtIHRoZXNlIGFjdGlvbnMgY2Fubm90IGJlIHVuZG9uZS5cIixcbiAgICAgIGNsczogXCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIixcbiAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJQdXJnZSBEYXRhYmFzZVwiKVxuICAgICAgLnNldERlc2MoXG4gICAgICAgIFwiXHUyNkEwXHVGRTBGIFBlcm1hbmVudGx5IGRlbGV0ZSBhbGwgZmxhc2hjYXJkcywgcmV2aWV3IGhpc3RvcnksIGFuZCBkZWNrIGRhdGEuIFRoaXMgd2lsbCBmb3JjZSBhIGNsZWFuIHJlYnVpbGQgZnJvbSB5b3VyIHZhdWx0IGZpbGVzLiBBbGwgcHJvZ3Jlc3Mgd2lsbCBiZSBsb3N0IVwiLFxuICAgICAgKVxuICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlB1cmdlIERhdGFiYXNlXCIpXG4gICAgICAgICAgLnNldFdhcm5pbmcoKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIG5ldyBEYXRhYmFzZVB1cmdlTW9kYWwoXG4gICAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgICB0aGlzLnB1cmdlRGF0YWJhc2UsXG4gICAgICAgICAgICAgIHRoaXMucGVyZm9ybVN5bmMsXG4gICAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXdTdGF0cyxcbiAgICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgICApLm9wZW4oKTtcbiAgICAgICAgICB9KSxcbiAgICAgICk7XG4gIH1cblxuICBwcml2YXRlIGFkZEJhY2t1cFNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIkJhY2t1cFwiIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkVuYWJsZSBBdXRvIEJhY2t1cFwiKVxuICAgICAgLnNldERlc2MoXCJBdXRvbWF0aWNhbGx5IGJhY2t1cCByZXZpZXcgZGF0YSBhZnRlciBlYWNoIHNlc3Npb25cIilcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MuYmFja3VwLmVuYWJsZUF1dG9CYWNrdXApXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5iYWNrdXAuZW5hYmxlQXV0b0JhY2t1cCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KSxcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiTWF4IEJhY2t1cHNcIilcbiAgICAgIC5zZXREZXNjKFwiTWF4aW11bSBudW1iZXIgb2YgYmFja3VwcyB0byBrZWVwICgzLTEwKVwiKVxuICAgICAgLmFkZFNsaWRlcigoc2xpZGVyKSA9PlxuICAgICAgICBzbGlkZXJcbiAgICAgICAgICAuc2V0TGltaXRzKDMsIDEwLCAxKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmJhY2t1cC5tYXhCYWNrdXBzKVxuICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5iYWNrdXAubWF4QmFja3VwcyA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KSxcbiAgICAgICk7XG5cbiAgICAvLyBCYWNrdXAgcmVzdG9yYXRpb24gc2VjdGlvblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlJlc3RvcmUgQmFja3VwXCIgfSk7XG5cbiAgICBsZXQgc2VsZWN0ZWRCYWNrdXAgPSBcIlwiO1xuICAgIGNvbnN0IGJhY2t1cFNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiQXZhaWxhYmxlIEJhY2t1cHNcIilcbiAgICAgIC5zZXREZXNjKFwiU2VsZWN0IGEgYmFja3VwIHRvIHJlc3RvcmVcIilcbiAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKFwiXCIsIFwiU2VsZWN0IGJhY2t1cC4uLlwiKTtcbiAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgc2VsZWN0ZWRCYWNrdXAgPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlJlZnJlc2hcIilcbiAgICAgICAgICAuc2V0VG9vbHRpcChcIlJlZnJlc2ggYmFja3VwIGxpc3RcIilcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hCYWNrdXBMaXN0KGJhY2t1cFNldHRpbmcpO1xuICAgICAgICAgIH0pLFxuICAgICAgKVxuICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlJlc3RvcmVcIilcbiAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkQmFja3VwKSB7XG4gICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQbGVhc2Ugc2VsZWN0IGEgYmFja3VwIHRvIHJlc3RvcmVcIik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXN0b3JlQmFja3VwKHNlbGVjdGVkQmFja3VwKTtcbiAgICAgICAgICB9KSxcbiAgICAgICk7XG5cbiAgICAvLyBJbml0aWFsIGxvYWQgb2YgYmFja3VwIGxpc3RcbiAgICB0aGlzLnJlZnJlc2hCYWNrdXBMaXN0KGJhY2t1cFNldHRpbmcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZWZyZXNoQmFja3VwTGlzdChzZXR0aW5nOiBTZXR0aW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiUmVmcmVzaGluZyBiYWNrdXAgbGlzdC4uLlwiKTtcbiAgICAgIGNvbnN0IGJhY2t1cHMgPSBhd2FpdCB0aGlzLmJhY2t1cFNlcnZpY2UuZ2V0QXZhaWxhYmxlQmFja3VwcygpO1xuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJGb3VuZCBiYWNrdXBzOlwiLCBiYWNrdXBzKTtcblxuICAgICAgLy8gR2V0IHRoZSBkcm9wZG93biBjb21wb25lbnRcbiAgICAgIGNvbnN0IGRyb3Bkb3duID0gc2V0dGluZy5jb21wb25lbnRzLmZpbmQoXG4gICAgICAgIChjb21wKSA9PiBjb21wIGluc3RhbmNlb2YgRHJvcGRvd25Db21wb25lbnQsXG4gICAgICApIGFzIERyb3Bkb3duQ29tcG9uZW50O1xuXG4gICAgICBpZiAoIWRyb3Bkb3duKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiRHJvcGRvd24gY29tcG9uZW50IG5vdCBmb3VuZFwiKTtcbiAgICAgICAgbmV3IE5vdGljZShcIkRyb3Bkb3duIG5vdCBmb3VuZFwiLCAzMDAwKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBleGlzdGluZyBvcHRpb25zIGJ5IHJlbW92aW5nIGFsbCBjaGlsZHJlblxuICAgICAgd2hpbGUgKGRyb3Bkb3duLnNlbGVjdEVsLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgZHJvcGRvd24uc2VsZWN0RWwucmVtb3ZlQ2hpbGQoZHJvcGRvd24uc2VsZWN0RWwuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBkZWZhdWx0IG9wdGlvblxuICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbiA9IGRyb3Bkb3duLnNlbGVjdEVsLmNyZWF0ZUVsKFwib3B0aW9uXCIpO1xuICAgICAgZGVmYXVsdE9wdGlvbi52YWx1ZSA9IFwiXCI7XG4gICAgICBkZWZhdWx0T3B0aW9uLnRleHRDb250ZW50ID0gXCJTZWxlY3QgYmFja3VwLi4uXCI7XG5cbiAgICAgIGlmIChiYWNrdXBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBub0JhY2t1cHNPcHRpb24gPSBkcm9wZG93bi5zZWxlY3RFbC5jcmVhdGVFbChcIm9wdGlvblwiKTtcbiAgICAgICAgbm9CYWNrdXBzT3B0aW9uLnZhbHVlID0gXCJcIjtcbiAgICAgICAgbm9CYWNrdXBzT3B0aW9uLnRleHRDb250ZW50ID0gXCJObyBiYWNrdXBzIGZvdW5kXCI7XG4gICAgICAgIGRyb3Bkb3duLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICBuZXcgTm90aWNlKFwiTm8gYmFja3VwcyBmb3VuZFwiLCAzMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyb3Bkb3duLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgZm9yIChjb25zdCBiYWNrdXAgb2YgYmFja3Vwcykge1xuICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRyb3Bkb3duLnNlbGVjdEVsLmNyZWF0ZUVsKFwib3B0aW9uXCIpO1xuICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGJhY2t1cC5maWxlbmFtZTtcbiAgICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBgJHtCYWNrdXBTZXJ2aWNlLmZvcm1hdFRpbWVzdGFtcChiYWNrdXAudGltZXN0YW1wKX1gO1xuICAgICAgICB9XG4gICAgICAgIG5ldyBOb3RpY2UoYEZvdW5kICR7YmFja3Vwcy5sZW5ndGh9IGJhY2t1cChzKWAsIDMwMDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIkZhaWxlZCB0byBsb2FkIGJhY2t1cCBsaXN0OlwiLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gbG9hZCBiYWNrdXAgbGlzdDogJHtlcnJvci5tZXNzYWdlfWAsIDUwMDApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVzdG9yZUJhY2t1cChmaWxlbmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgcHJvZ3Jlc3NOb3RpY2UgPSBuZXcgTm90aWNlKFwiUmVzdG9yaW5nIGJhY2t1cC4uLlwiLCAwKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgZGF0YWJhc2Ugc2VydmljZSBmcm9tIHBsdWdpblxuICAgICAgaWYgKCF0aGlzLmRiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGFiYXNlIG5vdCBhdmFpbGFibGVcIik7XG4gICAgICB9XG5cbiAgICAgIGxldCBjdXJyZW50ID0gMDtcbiAgICAgIGxldCB0b3RhbCA9IDA7XG5cbiAgICAgIGF3YWl0IHRoaXMuYmFja3VwU2VydmljZS5yZXN0b3JlQmFja3VwKFxuICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgdGhpcy5kYixcbiAgICAgICAgKGN1cnJlbnRDb3VudDogbnVtYmVyLCB0b3RhbENvdW50OiBudW1iZXIpID0+IHtcbiAgICAgICAgICBjdXJyZW50ID0gY3VycmVudENvdW50O1xuICAgICAgICAgIHRvdGFsID0gdG90YWxDb3VudDtcbiAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgucm91bmQoKGN1cnJlbnQgLyB0b3RhbCkgKiAxMDApO1xuICAgICAgICAgIHByb2dyZXNzTm90aWNlLnNldE1lc3NhZ2UoXG4gICAgICAgICAgICBgUmVzdG9yaW5nIGJhY2t1cDogJHtwcm9ncmVzc30lICgke2N1cnJlbnR9LyR7dG90YWx9KWAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIHByb2dyZXNzTm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoXG4gICAgICAgIGBcdTI3MDUgQmFja3VwIHJlc3RvcmVkIHN1Y2Nlc3NmdWxseSEgUHJvY2Vzc2VkICR7Y3VycmVudH0vJHt0b3RhbH0gcmVjb3Jkcy5gLFxuICAgICAgICA1MDAwLFxuICAgICAgKTtcblxuICAgICAgaWYgKHRoaXMucGx1Z2luLnZpZXcpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoKHRydWUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBwcm9ncmVzc05vdGljZS5oaWRlKCk7XG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIkJhY2t1cCByZXN0b3JhdGlvbiBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyBCYWNrdXAgcmVzdG9yYXRpb24gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCwgODAwMCk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIERhdGFiYXNlUHVyZ2VNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwdXJnZURhdGFiYXNlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBwcml2YXRlIHBlcmZvcm1TeW5jOiAoZm9yY2U/OiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBwcml2YXRlIHJlZnJlc2hWaWV3U3RhdHM6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIHByaXZhdGUgbG9nZ2VyOiBMb2dnZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYXBwOiBBcHAsXG4gICAgcHVyZ2VEYXRhYmFzZTogKCkgPT4gUHJvbWlzZTx2b2lkPixcbiAgICBwZXJmb3JtU3luYzogKGZvcmNlPzogYm9vbGVhbikgPT4gUHJvbWlzZTx2b2lkPixcbiAgICByZWZyZXNoVmlld1N0YXRzOiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICAgIGxvZ2dlcjogTG9nZ2VyLFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucHVyZ2VEYXRhYmFzZSA9IHB1cmdlRGF0YWJhc2U7XG4gICAgdGhpcy5wZXJmb3JtU3luYyA9IHBlcmZvcm1TeW5jO1xuICAgIHRoaXMucmVmcmVzaFZpZXdTdGF0cyA9IHJlZnJlc2hWaWV3U3RhdHM7XG4gICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiXHUyNkEwXHVGRTBGIFB1cmdlIERhdGFiYXNlXCIgfSk7XG5cbiAgICBjb25zdCB3YXJuaW5nID0gY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgIGNsczogXCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIixcbiAgICB9KTtcbiAgICB3YXJuaW5nLmlubmVySFRNTCA9IGBcbiAgICAgIDxwPjxzdHJvbmc+VGhpcyB3aWxsIHBlcm1hbmVudGx5IGRlbGV0ZSBBTEwgZmxhc2hjYXJkIGRhdGEgaW5jbHVkaW5nOjwvc3Ryb25nPjwvcD5cbiAgICAgIDx1bD5cbiAgICAgICAgPGxpPkFsbCBmbGFzaGNhcmRzIGFuZCB0aGVpciBjb250ZW50PC9saT5cbiAgICAgICAgPGxpPkNvbXBsZXRlIHJldmlldyBoaXN0b3J5IGFuZCBwcm9ncmVzczwvbGk+XG4gICAgICAgIDxsaT5BbGwgZGVjayBpbmZvcm1hdGlvbjwvbGk+XG4gICAgICAgIDxsaT5TdGF0aXN0aWNhbCBkYXRhPC9saT5cbiAgICAgIDwvdWw+XG4gICAgICA8cD48c3Ryb25nPlRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUhPC9zdHJvbmc+PC9wPlxuICAgICAgPHA+VGhlIGRhdGFiYXNlIHdpbGwgYmUgcmVidWlsdCBmcm9tIHlvdXIgY3VycmVudCB2YXVsdCBmaWxlcywgYnV0IGFsbCBwcm9ncmVzcyB3aWxsIGJlIGxvc3QuPC9wPlxuICAgIGA7XG5cbiAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgIHRleHQ6ICdUeXBlIFwiREVMRVRFIEFMTCBEQVRBXCIgdG8gY29uZmlybTonLFxuICAgICAgY2xzOiBcInNldHRpbmctaXRlbS1kZXNjcmlwdGlvblwiLFxuICAgIH0pO1xuXG4gICAgY29uc3QgaW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgIHBsYWNlaG9sZGVyOiBcIkRFTEVURSBBTEwgREFUQVwiLFxuICAgIH0pO1xuICAgIGlucHV0LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgaW5wdXQuc3R5bGUubWFyZ2luQm90dG9tID0gXCIxcmVtXCI7XG5cbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIik7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gXCIwLjVyZW1cIjtcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImZsZXgtZW5kXCI7XG5cbiAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuICAgIGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuXG4gICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICB0ZXh0OiBcIlB1cmdlIERhdGFiYXNlXCIsXG4gICAgICBjbHM6IFwibW9kLXdhcm5pbmdcIixcbiAgICB9KTtcblxuICAgIGNvbmZpcm1CdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gXCJERUxFVEUgQUxMIERBVEFcIikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcblxuICAgICAgICAgIC8vIFNob3cgcHJvZ3Jlc3Mgbm90aWNlXG4gICAgICAgICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZShcIlB1cmdpbmcgZGF0YWJhc2UuLi5cIiwgMCk7XG5cbiAgICAgICAgICAvLyBQdXJnZSB0aGUgZGF0YWJhc2VcbiAgICAgICAgICBhd2FpdCB0aGlzLnB1cmdlRGF0YWJhc2UoKTtcblxuICAgICAgICAgIC8vIFRyaWdnZXIgYSBmdWxsIHN5bmMgdG8gcmVidWlsZCBmcm9tIHZhdWx0XG4gICAgICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtU3luYyh0cnVlKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbm90aWNlXG4gICAgICAgICAgbm90aWNlLnNldE1lc3NhZ2UoXCJcdTI3MDUgRGF0YWJhc2UgcHVyZ2VkIGFuZCByZWJ1aWx0IHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG5vdGljZS5oaWRlKCksIDMwMDApO1xuXG4gICAgICAgICAgLy8gUmVmcmVzaCB0aGUgdmlld1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaFZpZXdTdGF0cygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiRmFpbGVkIHRvIHB1cmdlIGRhdGFiYXNlOlwiLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICAgIFwiXHUyNzRDIEZhaWxlZCB0byBwdXJnZSBkYXRhYmFzZS4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy5cIixcbiAgICAgICAgICAgIDUwMDAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICBcIkNvbmZpcm1hdGlvbiB0ZXh0IGRvZXNuJ3QgbWF0Y2guIERhdGFiYXNlIHB1cmdlIGNhbmNlbGxlZC5cIixcbiAgICAgICAgICAzMDAwLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBGb2N1cyB0aGUgaW5wdXRcbiAgICBpbnB1dC5mb2N1cygpO1xuXG4gICAgLy8gQWxsb3cgRW50ZXIga2V5IHRvIGNvbmZpcm1cbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgIGNvbmZpcm1CdXR0b24uY2xpY2soKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBEYXRhYmFzZVNlcnZpY2UgfSBmcm9tIFwiQC9kYXRhYmFzZS9EYXRhYmFzZVNlcnZpY2VcIjtcbmltcG9ydCB7XG4gIERlY2ssXG4gIERlY2tTdGF0cyxcbiAgRGVja0NvbmZpZyxcbiAgRmxhc2hjYXJkLFxuICBoYXNOZXdDYXJkc0xpbWl0LFxuICBoYXNSZXZpZXdDYXJkc0xpbWl0LFxuICBSZXZpZXdTZXNzaW9uLFxuICBTdGF0aXN0aWNzLFxufSBmcm9tIFwiQC9kYXRhYmFzZS90eXBlc1wiO1xuaW1wb3J0IHsgVklFV19UWVBFX0RFQ0tTIH0gZnJvbSBcIkAvbWFpblwiO1xuaW1wb3J0IHsgRGVja1N5bmNocm9uaXplciB9IGZyb20gXCJAL3NlcnZpY2VzL0RlY2tTeW5jaHJvbml6ZXJcIjtcbmltcG9ydCB7IEZsYXNoY2FyZHNTZXR0aW5ncyB9IGZyb20gXCJAL3NldHRpbmdzXCI7XG5pbXBvcnQgeyB5aWVsZFRvVUkgfSBmcm9tIFwiQC91dGlscy91aVwiO1xuaW1wb3J0IHsgTG9nZ2VyLCBmb3JtYXRUaW1lIH0gZnJvbSBcIkAvdXRpbHMvbG9nZ2luZ1wiO1xuaW1wb3J0IHsgSXRlbVZpZXcsIENvbXBvbmVudCwgV29ya3NwYWNlTGVhZiwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTY2hlZHVsZXIgfSBmcm9tIFwiQC9zZXJ2aWNlcy9TY2hlZHVsZXJcIjtcbmltcG9ydCB7IEZsYXNoY2FyZFJldmlld01vZGFsV3JhcHBlciB9IGZyb20gXCIuL0ZsYXNoY2FyZFJldmlld01vZGFsV3JhcHBlclwiO1xuaW1wb3J0IHsgU3RhdGlzdGljc01vZGFsIH0gZnJvbSBcIi4vU3RhdGlzdGljc01vZGFsXCI7XG5pbXBvcnQgeyBGU1JTLCB0eXBlIFJhdGluZ0xhYmVsIH0gZnJvbSBcIkAvYWxnb3JpdGhtL2ZzcnNcIjtcbmltcG9ydCBEZWNrTGlzdFBhbmVsIGZyb20gXCIuL0RlY2tMaXN0UGFuZWwuc3ZlbHRlXCI7XG5pbXBvcnQgeyBQcm9ncmVzc1RyYWNrZXIgfSBmcm9tIFwiQC91dGlscy9wcm9ncmVzc1wiO1xuXG5leHBvcnQgY2xhc3MgRGVja3NWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwcml2YXRlIGRiOiBEYXRhYmFzZVNlcnZpY2U7XG4gIHByaXZhdGUgZGVja1N5bmNocm9uaXplcjogRGVja1N5bmNocm9uaXplcjtcbiAgcHJpdmF0ZSBzY2hlZHVsZXI6IFNjaGVkdWxlcjtcbiAgcHJpdmF0ZSBzZXR0aW5nczogRmxhc2hjYXJkc1NldHRpbmdzO1xuICBwcml2YXRlIHNldFZpZXdSZWZlcmVuY2U6ICh2aWV3OiBEZWNrc1ZpZXcgfCBudWxsKSA9PiB2b2lkO1xuICBwcml2YXRlIGhhc1Nob3duSW5pdGlhbFByb2dyZXNzID0gZmFsc2U7XG4gIHByaXZhdGUgY29tcG9uZW50OiBEZWNrTGlzdFBhbmVsIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbWFya2Rvd25Db21wb25lbnRzOiBDb21wb25lbnRbXSA9IFtdO1xuICBwcml2YXRlIHN0YXRzUmVmcmVzaFRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYmFja2dyb3VuZFJlZnJlc2hJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBwcm9ncmVzc1RyYWNrZXI6IFByb2dyZXNzVHJhY2tlcjtcbiAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBsZWFmOiBXb3Jrc3BhY2VMZWFmLFxuICAgIGRhdGFiYXNlOiBEYXRhYmFzZVNlcnZpY2UsXG4gICAgZGVja1N5bmNocm9uaXplcjogRGVja1N5bmNocm9uaXplcixcbiAgICBzY2hlZHVsZXI6IFNjaGVkdWxlcixcbiAgICBzZXR0aW5nczogRmxhc2hjYXJkc1NldHRpbmdzLFxuICAgIHByb2dyZXNzVHJhY2tlcjogUHJvZ3Jlc3NUcmFja2VyLFxuICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgIHNldFZpZXdSZWZlcmVuY2U6ICh2aWV3OiBEZWNrc1ZpZXcgfCBudWxsKSA9PiB2b2lkLFxuICApIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLmRiID0gZGF0YWJhc2U7XG4gICAgdGhpcy5kZWNrU3luY2hyb25pemVyID0gZGVja1N5bmNocm9uaXplcjtcbiAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG5cbiAgICB0aGlzLnByb2dyZXNzVHJhY2tlciA9IHByb2dyZXNzVHJhY2tlcjtcblxuICAgIHRoaXMuc2V0Vmlld1JlZmVyZW5jZSA9IHNldFZpZXdSZWZlcmVuY2U7XG4gICAgLy8gU2V0IHJlZmVyZW5jZSBpbiBwbHVnaW4gc28gd2UgY2FuIGFjY2VzcyB0aGlzIHZpZXcgaW5zdGFuY2VcbiAgICB0aGlzLnNldFZpZXdSZWZlcmVuY2UodGhpcyk7XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfREVDS1M7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIkRlY2tzXCI7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiYnJhaW5cIjtcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcyhcImRlY2tzLXZpZXdcIik7XG5cbiAgICAvLyBDcmVhdGUgYW5kIG1vdW50IFN2ZWx0ZSBjb21wb25lbnRcbiAgICB0aGlzLmNvbXBvbmVudCA9IG5ldyBEZWNrTGlzdFBhbmVsKHtcbiAgICAgIHRhcmdldDogY29udGFpbmVyLFxuICAgICAgcHJvcHM6IHtcbiAgICAgICAgb25EZWNrQ2xpY2s6IChkZWNrOiBEZWNrKSA9PiB0aGlzLnN0YXJ0UmV2aWV3KGRlY2spLFxuICAgICAgICBvblJlZnJlc2g6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIm9uUmVmcmVzaCBjYWxsYmFjayBpbnZva2VkXCIpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaChmYWxzZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRm9yY2VSZWZyZXNoRGVjazogYXN5bmMgKGRlY2tJZDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXG4gICAgICAgICAgICBcIm9uRm9yY2VSZWZyZXNoRGVjayBjYWxsYmFjayBpbnZva2VkIGZvciBkZWNrOlwiLFxuICAgICAgICAgICAgZGVja0lkLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBHZXQgZGVjayB0byBleHRyYWN0IGRpc3BsYXkgbmFtZVxuICAgICAgICAgIGNvbnN0IGRlY2sgPSBhd2FpdCB0aGlzLmRiLmdldERlY2tCeUlkKGRlY2tJZCk7XG4gICAgICAgICAgY29uc3QgZGVja0Rpc3BsYXlOYW1lID0gZGVjayA/IGRlY2submFtZSA6IGRlY2tJZDtcblxuICAgICAgICAgIHRoaXMucHJvZ3Jlc3NUcmFja2VyLnNob3coXG4gICAgICAgICAgICBgXHVEODNEXHVERDA0IEZvcmNlIHJlZnJlc2hpbmcgZGVjazogJHtkZWNrRGlzcGxheU5hbWV9Li4uYCxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVja1N5bmNocm9uaXplci5zeW5jRGVjayhkZWNrSWQsIHRydWUsIChwcm9ncmVzcykgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzVHJhY2tlci51cGRhdGUoXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5wZXJjZW50YWdlLFxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIGlmIChwcm9ncmVzcy5wZXJjZW50YWdlID09PSAxMDApIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucHJvZ3Jlc3NUcmFja2VyLmhpZGUoKSwgMjAwMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBSZWZyZXNoIHN0YXRzIGFmdGVyIGZvcmNlIHJlZnJlc2hcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaFN0YXRzKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NUcmFja2VyLnVwZGF0ZShcbiAgICAgICAgICAgICAgXCJcdTI3NEMgRGVjayByZWZyZXNoIGZhaWxlZCAtIGNoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHNcIixcbiAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucHJvZ3Jlc3NUcmFja2VyLmhpZGUoKSwgMzAwMCk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldFJldmlld0NvdW50czogYXN5bmMgKGRheXM6IG51bWJlcikgPT4ge1xuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRiLmdldFJldmlld0NvdW50c0J5RGF0ZShkYXlzKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0U3R1ZHlTdGF0czogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRiLmdldFN0dWR5U3RhdHMoKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25PcGVuU3RhdGlzdGljczogKCkgPT4ge1xuICAgICAgICAgIHRoaXMub3BlblN0YXRpc3RpY3NNb2RhbCgpO1xuICAgICAgICB9LFxuICAgICAgICBnZXREYXRhYmFzZTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmRiO1xuICAgICAgICB9LFxuICAgICAgICBnZXREZWNrU3luY2hyb25pemVyOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZGVja1N5bmNocm9uaXplcjtcbiAgICAgICAgfSxcbiAgICAgICAgcGx1Z2luOiB7IGFwcDogdGhpcy5hcHAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyAvLyBJbml0aWFsIHJlZnJlc2hcbiAgICAvLyBhd2FpdCB0aGlzLnJlZnJlc2goZmFsc2UpO1xuXG4gICAgLy8gU3RhcnQgYmFja2dyb3VuZCByZWZyZXNoIGpvYiBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MudWkuZW5hYmxlQmFja2dyb3VuZFJlZnJlc2gpIHtcbiAgICAgIHRoaXMuc3RhcnRCYWNrZ3JvdW5kUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XG4gICAgICB0aGlzLmNvbXBvbmVudC4kZGVzdHJveSgpO1xuICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIENsZWFuIHVwIHRpbWVvdXRzXG4gICAgaWYgKHRoaXMuc3RhdHNSZWZyZXNoVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc3RhdHNSZWZyZXNoVGltZW91dCk7XG4gICAgICB0aGlzLnN0YXRzUmVmcmVzaFRpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIENsZWFuIHVwIGJhY2tncm91bmQgcmVmcmVzaFxuICAgIHRoaXMuc3RvcEJhY2tncm91bmRSZWZyZXNoKCk7XG5cbiAgICAvLyBDbGVhbiB1cCBtYXJrZG93biBjb21wb25lbnRzXG4gICAgdGhpcy5tYXJrZG93bkNvbXBvbmVudHMuZm9yRWFjaCgoY29tcCkgPT4gY29tcC51bmxvYWQoKSk7XG4gICAgdGhpcy5tYXJrZG93bkNvbXBvbmVudHMgPSBbXTtcblxuICAgIC8vIENsZWFyIHJlZmVyZW5jZSBpbiBwbHVnaW5cbiAgICB0aGlzLnNldFZpZXdSZWZlcmVuY2UobnVsbCk7XG4gIH1cblxuICBhc3luYyB1cGRhdGUodXBkYXRlZERlY2tzOiBEZWNrW10sIGRlY2tTdGF0czogTWFwPHN0cmluZywgRGVja1N0YXRzPikge1xuICAgIGF3YWl0IHRoaXMuY29tcG9uZW50Py51cGRhdGVBbGwodXBkYXRlZERlY2tzLCBkZWNrU3RhdHMpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRBbGxEZWNrU3RhdHNNYXAoKTogUHJvbWlzZTxNYXA8c3RyaW5nLCBEZWNrU3RhdHM+PiB7XG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLmRiLmdldEFsbERlY2tTdGF0cygpO1xuICAgIGNvbnN0IHN0YXRzTWFwID0gbmV3IE1hcDxzdHJpbmcsIERlY2tTdGF0cz4oKTtcbiAgICBmb3IgKGNvbnN0IHN0YXQgb2Ygc3RhdHMpIHtcbiAgICAgIHN0YXRzTWFwLnNldChzdGF0LmRlY2tJZCwgc3RhdCk7XG4gICAgfVxuICAgIHJldHVybiBzdGF0c01hcDtcbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm1TeW5jKGZvcmNlU3luYzogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5kZWNrU3luY2hyb25pemVyLnBlcmZvcm1TeW5jKHtcbiAgICAgIGZvcmNlU3luYyxcbiAgICAgIHNob3dQcm9ncmVzczogdHJ1ZSxcbiAgICAgIG9uUHJvZ3Jlc3M6IChwcm9ncmVzcykgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICBgUHJvZ3Jlc3M6ICR7cHJvZ3Jlc3MucGVyY2VudGFnZX0lIC0gJHtwcm9ncmVzcy5tZXNzYWdlfWAsXG4gICAgICAgICk7XG4gICAgICAgIGlmICghdGhpcy5oYXNTaG93bkluaXRpYWxQcm9ncmVzcykge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBmb3JjZVN5bmNcbiAgICAgICAgICAgID8gXCJcdUQ4M0RcdUREMDQgRm9yY2UgcmVmcmVzaGluZyBmbGFzaGNhcmRzLi4uXCJcbiAgICAgICAgICAgIDogXCJcdUQ4M0RcdUREMDQgU3luY2luZyBmbGFzaGNhcmRzLi4uXCI7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFNob3dpbmcgaW5pdGlhbCBwcm9ncmVzcyBub3RpY2U6ICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICB0aGlzLnByb2dyZXNzVHJhY2tlci5zaG93KG1lc3NhZ2UpO1xuICAgICAgICAgIHRoaXMuaGFzU2hvd25Jbml0aWFsUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NUcmFja2VyLnVwZGF0ZShwcm9ncmVzcy5tZXNzYWdlLCBwcm9ncmVzcy5wZXJjZW50YWdlKTtcbiAgICAgICAgaWYgKHByb2dyZXNzLnBlcmNlbnRhZ2UgPT09IDEwMCkge1xuICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiU3luYyBjb21wbGV0ZSwgaGlkaW5nIHByb2dyZXNzIG5vdGljZVwiKTtcbiAgICAgICAgICB0aGlzLmhhc1Nob3duSW5pdGlhbFByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnByb2dyZXNzVHJhY2tlci5oaWRlKCksIDMwMDApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuZXJyb3IpIHtcbiAgICAgIHRoaXMucHJvZ3Jlc3NUcmFja2VyLnVwZGF0ZShcbiAgICAgICAgXCJcdTI3NEMgU3luYyBmYWlsZWQgLSBjaGVjayBjb25zb2xlIGZvciBkZXRhaWxzXCIsXG4gICAgICAgIDAsXG4gICAgICApO1xuICAgICAgdGhpcy5oYXNTaG93bkluaXRpYWxQcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnByb2dyZXNzVHJhY2tlci5oaWRlKCksIDUwMDApO1xuICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgfVxuXG4gIG9wZW5TdGF0aXN0aWNzTW9kYWwoZGVja0ZpbHRlcj86IHN0cmluZyk6IHZvaWQge1xuICAgIG5ldyBTdGF0aXN0aWNzTW9kYWwodGhpcy5hcHAsIHRoaXMuZGIsIGRlY2tGaWx0ZXIpLm9wZW4oKTtcbiAgfVxuXG4gIGFzeW5jIHJlZnJlc2goZm9yY2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRoaXMubG9nZ2VyLmRlYnVnKFwiRGVja3NWaWV3LnJlZnJlc2goKSBjYWxsZWRcIik7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFBlcmZvcm0gc3luYyB3aXRoIGZvcmNlIHBhcmFtZXRlclxuICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtU3luYyhmb3JjZSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgdmlldyB3aXRoIHJlZnJlc2hlZCBkYXRhXG4gICAgICBjb25zdCB1cGRhdGVkRGVja3MgPSBhd2FpdCB0aGlzLmRiLmdldEFsbERlY2tzKCk7XG4gICAgICBjb25zdCBkZWNrU3RhdHMgPSBhd2FpdCB0aGlzLmdldEFsbERlY2tTdGF0c01hcCgpO1xuICAgICAgdGhpcy51cGRhdGUodXBkYXRlZERlY2tzLCBkZWNrU3RhdHMpO1xuXG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlJlZnJlc2ggY29tcGxldGVcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZWZyZXNoaW5nIGRlY2tzOlwiLCBlcnJvcik7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncz8udWk/LmVuYWJsZU5vdGljZXMgIT09IGZhbHNlKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciByZWZyZXNoaW5nIGRlY2tzLiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyByZWZyZXNoU3RhdHMoKSB7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoXCJEZWNrc1ZpZXcucmVmcmVzaFN0YXRzKCkgZXhlY3V0aW5nXCIpO1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdXBkYXRlZCBzdGF0cyBvbmx5IChmYXN0ZXIgdGhhbiBmdWxsIHJlZnJlc2gpXG4gICAgICBjb25zdCBkZWNrU3RhdHMgPSBhd2FpdCB0aGlzLmdldEFsbERlY2tTdGF0c01hcCgpO1xuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJVcGRhdGVkIGRlY2sgc3RhdHM6XCIsIGRlY2tTdGF0cyk7XG5cbiAgICAgIC8vIFVwZGF0ZSBjb21wb25lbnQgd2l0aCBuZXcgc3RhdHMgdXNpbmcgdW5pZmllZCBmdW5jdGlvblxuICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY29tcG9uZW50LnVwZGF0ZUFsbCh1bmRlZmluZWQsIGRlY2tTdGF0cyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZWZyZXNoaW5nIHN0YXRzOlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVmcmVzaFN0YXRzQnlJZChkZWNrSWQ6IHN0cmluZykge1xuICAgIHRoaXMubG9nZ2VyLmRlYnVnKFxuICAgICAgYERlY2tzVmlldy5yZWZyZXNoU3RhdHNCeUlkKCkgZXhlY3V0aW5nIGZvciBkZWNrOiAke2RlY2tJZH1gLFxuICAgICk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBzdGF0cyBmb3IgdGhlIHNwZWNpZmljIGRlY2tcbiAgICAgIGNvbnN0IGRlY2tTdGF0cyA9IGF3YWl0IHRoaXMuZGIuZ2V0RGVja1N0YXRzKGRlY2tJZCk7XG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlVwZGF0ZWQgZGVjayBzdGF0cyBmb3I6XCIsIGRlY2tJZCk7XG5cbiAgICAgIC8vIFVwZGF0ZSBjb21wb25lbnQgdXNpbmcgdW5pZmllZCBmdW5jdGlvblxuICAgICAgaWYgKHRoaXMuY29tcG9uZW50ICYmIGRlY2tTdGF0cykge1xuICAgICAgICBhd2FpdCB0aGlzLmNvbXBvbmVudC51cGRhdGVBbGwodW5kZWZpbmVkLCB1bmRlZmluZWQsIGRlY2tJZCwgZGVja1N0YXRzKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJlZnJlc2hpbmcgc3RhdHMgYnkgSUQ6XCIsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBzdGFydEJhY2tncm91bmRSZWZyZXNoKCkge1xuICAgIC8vIERvbid0IHN0YXJ0IGlmIGJhY2tncm91bmQgcmVmcmVzaCBpcyBkaXNhYmxlZFxuICAgIGlmICghdGhpcy5zZXR0aW5ncy51aS5lbmFibGVCYWNrZ3JvdW5kUmVmcmVzaCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBpbnRlcnZhbFxuICAgIHRoaXMuc3RvcEJhY2tncm91bmRSZWZyZXNoKCk7XG5cbiAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcbiAgICAgIGBTdGFydGluZyBiYWNrZ3JvdW5kIHJlZnJlc2ggam9iIChldmVyeSAke3RoaXMuc2V0dGluZ3MudWkuYmFja2dyb3VuZFJlZnJlc2hJbnRlcnZhbH0gc2Vjb25kcylgLFxuICAgICk7XG5cbiAgICB0aGlzLmJhY2tncm91bmRSZWZyZXNoSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIkJhY2tncm91bmQgcmVmcmVzaCB0aWNrXCIpO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSwgdGhpcy5zZXR0aW5ncy51aS5iYWNrZ3JvdW5kUmVmcmVzaEludGVydmFsICogMTAwMCk7XG4gIH1cblxuICBzdG9wQmFja2dyb3VuZFJlZnJlc2goKSB7XG4gICAgaWYgKHRoaXMuYmFja2dyb3VuZFJlZnJlc2hJbnRlcnZhbCkge1xuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXCJTdG9wcGluZyBiYWNrZ3JvdW5kIHJlZnJlc2ggam9iXCIpO1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmJhY2tncm91bmRSZWZyZXNoSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5iYWNrZ3JvdW5kUmVmcmVzaEludGVydmFsID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICByZXN0YXJ0QmFja2dyb3VuZFJlZnJlc2goKSB7XG4gICAgdGhpcy5zdG9wQmFja2dyb3VuZFJlZnJlc2goKTtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy51aS5lbmFibGVCYWNrZ3JvdW5kUmVmcmVzaCkge1xuICAgICAgdGhpcy5zdGFydEJhY2tncm91bmRSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVmcmVzaEhlYXRtYXAoKSB7XG4gICAgYXdhaXQgdGhpcy5jb21wb25lbnQ/LnVwZGF0ZUFsbCgpO1xuICB9XG5cbiAgLy8gVGVzdCBtZXRob2QgdG8gY2hlY2sgaWYgYmFja2dyb3VuZCBqb2IgaXMgcnVubmluZ1xuICBjaGVja0JhY2tncm91bmRKb2JTdGF0dXMoKSB7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoXCJCYWNrZ3JvdW5kIGpvYiBzdGF0dXM6XCIsIHtcbiAgICAgIGlzUnVubmluZzogISF0aGlzLmJhY2tncm91bmRSZWZyZXNoSW50ZXJ2YWwsXG4gICAgICBpbnRlcnZhbElkOiB0aGlzLmJhY2tncm91bmRSZWZyZXNoSW50ZXJ2YWwsXG4gICAgICBjb21wb25lbnRFeGlzdHM6ICEhdGhpcy5jb21wb25lbnQsXG4gICAgICByZWZyZXNoSW50ZXJ2YWw6IHRoaXMuc2V0dGluZ3MudWkuYmFja2dyb3VuZFJlZnJlc2hJbnRlcnZhbCxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0UmV2aWV3KGRlY2s6IERlY2spIHtcbiAgICB0cnkge1xuICAgICAgLy8gRmlyc3Qgc3luYyBmbGFzaGNhcmRzIGZvciB0aGlzIHNwZWNpZmljIGRlY2tcbiAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGBTeW5jaW5nIGNhcmRzIGZvciBkZWNrIGJlZm9yZSByZXZpZXc6ICR7ZGVjay5uYW1lfWApO1xuICAgICAgYXdhaXQgdGhpcy5kZWNrU3luY2hyb25pemVyLnN5bmNEZWNrKGRlY2suaWQpO1xuICAgICAgYXdhaXQgeWllbGRUb1VJKCk7XG4gICAgICAvLyBHZXQgZGFpbHkgcmV2aWV3IGNvdW50cyB0byBzaG93IHJlbWFpbmluZyBhbGxvd2FuY2VcbiAgICAgIGNvbnN0IGRhaWx5Q291bnRzID0gYXdhaXQgdGhpcy5kYi5nZXREYWlseVJldmlld0NvdW50cyhkZWNrLmlkKTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHJlbWFpbmluZyBkYWlseSBhbGxvd2FuY2VcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGRlY2suY29uZmlnO1xuICAgICAgY29uc3QgcmVtYWluaW5nTmV3ID0gaGFzTmV3Q2FyZHNMaW1pdChjb25maWcpXG4gICAgICAgID8gY29uZmlnLm5ld0NhcmRzUGVyRGF5ID09PSAwXG4gICAgICAgICAgPyBcIm5vbmVcIlxuICAgICAgICAgIDogTWF0aC5tYXgoMCwgY29uZmlnLm5ld0NhcmRzUGVyRGF5IC0gZGFpbHlDb3VudHMubmV3Q291bnQpXG4gICAgICAgIDogXCJ1bmxpbWl0ZWRcIjtcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1JldmlldyA9IGhhc1Jldmlld0NhcmRzTGltaXQoY29uZmlnKVxuICAgICAgICA/IGNvbmZpZy5yZXZpZXdDYXJkc1BlckRheSA9PT0gMFxuICAgICAgICAgID8gXCJub25lXCJcbiAgICAgICAgICA6IE1hdGgubWF4KDAsIGNvbmZpZy5yZXZpZXdDYXJkc1BlckRheSAtIGRhaWx5Q291bnRzLnJldmlld0NvdW50KVxuICAgICAgICA6IFwidW5saW1pdGVkXCI7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgY2FyZHMgYXZhaWxhYmxlIHVzaW5nIHRoZSBzY2hlZHVsZXJcbiAgICAgIGNvbnN0IG5leHRDYXJkID0gYXdhaXQgdGhpcy5zY2hlZHVsZXIuZ2V0TmV4dChuZXcgRGF0ZSgpLCBkZWNrLmlkLCB7XG4gICAgICAgIGFsbG93TmV3OiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghbmV4dENhcmQpIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBgTm8gY2FyZHMgZHVlIGZvciByZXZpZXcgaW4gJHtkZWNrLm5hbWV9YDtcblxuICAgICAgICAvLyBDaGVjayBpZiBsaW1pdHMgYXJlIHRoZSByZWFzb24gbm8gY2FyZHMgYXJlIGF2YWlsYWJsZVxuICAgICAgICBjb25zdCBuZXdMaW1pdFJlYWNoZWQgPVxuICAgICAgICAgIGhhc05ld0NhcmRzTGltaXQoY29uZmlnKSAmJlxuICAgICAgICAgIChyZW1haW5pbmdOZXcgPT09IDAgfHwgcmVtYWluaW5nTmV3ID09PSBcIm5vbmVcIik7XG4gICAgICAgIGNvbnN0IHJldmlld0xpbWl0UmVhY2hlZCA9XG4gICAgICAgICAgaGFzUmV2aWV3Q2FyZHNMaW1pdChjb25maWcpICYmXG4gICAgICAgICAgKHJlbWFpbmluZ1JldmlldyA9PT0gMCB8fCByZW1haW5pbmdSZXZpZXcgPT09IFwibm9uZVwiKTtcblxuICAgICAgICBpZiAobmV3TGltaXRSZWFjaGVkICYmIHJldmlld0xpbWl0UmVhY2hlZCkge1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYFxcblxcbkRhaWx5IGxpbWl0cyByZWFjaGVkOmA7XG4gICAgICAgICAgbWVzc2FnZSArPSBgXFxuTmV3IGNhcmRzOiAke2NvbmZpZy5uZXdDYXJkc1BlckRheX0vJHtjb25maWcubmV3Q2FyZHNQZXJEYXl9YDtcbiAgICAgICAgICBtZXNzYWdlICs9IGBcXG5SZXZpZXcgY2FyZHM6ICR7Y29uZmlnLnJldmlld0NhcmRzUGVyRGF5fS8ke2NvbmZpZy5yZXZpZXdDYXJkc1BlckRheX1gO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld0xpbWl0UmVhY2hlZCkge1xuICAgICAgICAgIG1lc3NhZ2UgKz0gYFxcblxcbkRhaWx5IG5ldyBjYXJkcyBsaW1pdCByZWFjaGVkOiAke2NvbmZpZy5uZXdDYXJkc1BlckRheX0vJHtjb25maWcubmV3Q2FyZHNQZXJEYXl9YDtcbiAgICAgICAgfSBlbHNlIGlmIChyZXZpZXdMaW1pdFJlYWNoZWQpIHtcbiAgICAgICAgICBtZXNzYWdlICs9IGBcXG5cXG5EYWlseSByZXZpZXcgY2FyZHMgbGltaXQgcmVhY2hlZDogJHtjb25maWcucmV2aWV3Q2FyZHNQZXJEYXl9LyR7Y29uZmlnLnJldmlld0NhcmRzUGVyRGF5fWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncz8udWk/LmVuYWJsZU5vdGljZXMgIT09IGZhbHNlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFNob3cgZGFpbHkgbGltaXQgaW5mbyBiZWZvcmUgc3RhcnRpbmcgcmV2aWV3IGlmIGxpbWl0cyBhcmUgYWN0aXZlXG4gICAgICBpZiAoaGFzTmV3Q2FyZHNMaW1pdChjb25maWcpIHx8IGhhc1Jldmlld0NhcmRzTGltaXQoY29uZmlnKSkge1xuICAgICAgICBsZXQgbGltaXRJbmZvID0gYERhaWx5IHByb2dyZXNzIGZvciAke2RlY2submFtZX06XFxuYDtcbiAgICAgICAgaWYgKGhhc05ld0NhcmRzTGltaXQoY29uZmlnKSkge1xuICAgICAgICAgIGlmIChjb25maWcubmV3Q2FyZHNQZXJEYXkgPT09IDApIHtcbiAgICAgICAgICAgIGxpbWl0SW5mbyArPSBgTmV3IGNhcmRzOiBESVNBQkxFRCAoMCBhbGxvd2VkIHBlciBkYXkpXFxuYDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhaWx5Q291bnRzLm5ld0NvdW50ID49IGNvbmZpZy5uZXdDYXJkc1BlckRheSkge1xuICAgICAgICAgICAgbGltaXRJbmZvICs9IGBOZXcgY2FyZHM6ICR7ZGFpbHlDb3VudHMubmV3Q291bnR9LyR7Y29uZmlnLm5ld0NhcmRzUGVyRGF5fSAoTElNSVQgRVhDRUVERUQpXFxuYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGltaXRJbmZvICs9IGBOZXcgY2FyZHM6ICR7ZGFpbHlDb3VudHMubmV3Q291bnR9LyR7Y29uZmlnLm5ld0NhcmRzUGVyRGF5fSAoJHtyZW1haW5pbmdOZXd9IHJlbWFpbmluZylcXG5gO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzUmV2aWV3Q2FyZHNMaW1pdChjb25maWcpKSB7XG4gICAgICAgICAgaWYgKGNvbmZpZy5yZXZpZXdDYXJkc1BlckRheSA9PT0gMCkge1xuICAgICAgICAgICAgbGltaXRJbmZvICs9IGBSZXZpZXcgY2FyZHM6IERJU0FCTEVEICgwIGFsbG93ZWQgcGVyIGRheSlcXG5gO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGFpbHlDb3VudHMucmV2aWV3Q291bnQgPj0gY29uZmlnLnJldmlld0NhcmRzUGVyRGF5KSB7XG4gICAgICAgICAgICBsaW1pdEluZm8gKz0gYFJldmlldyBjYXJkczogJHtkYWlseUNvdW50cy5yZXZpZXdDb3VudH0vJHtjb25maWcucmV2aWV3Q2FyZHNQZXJEYXl9IChMSU1JVCBFWENFRURFRClcXG5gO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaW1pdEluZm8gKz0gYFJldmlldyBjYXJkczogJHtkYWlseUNvdW50cy5yZXZpZXdDb3VudH0vJHtjb25maWcucmV2aWV3Q2FyZHNQZXJEYXl9ICgke3JlbWFpbmluZ1Jldmlld30gcmVtYWluaW5nKVxcbmA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGV4cGxhbmF0aW9uIHdoZW4gbGltaXRzIGFyZSBleGNlZWRlZCBidXQgbGVhcm5pbmcgY2FyZHMgYXJlIGF2YWlsYWJsZVxuICAgICAgICBjb25zdCBuZXdMaW1pdEV4Y2VlZGVkID1cbiAgICAgICAgICBoYXNOZXdDYXJkc0xpbWl0KGNvbmZpZykgJiZcbiAgICAgICAgICAoY29uZmlnLm5ld0NhcmRzUGVyRGF5ID09PSAwIHx8XG4gICAgICAgICAgICBkYWlseUNvdW50cy5uZXdDb3VudCA+PSBjb25maWcubmV3Q2FyZHNQZXJEYXkpO1xuICAgICAgICBjb25zdCByZXZpZXdMaW1pdEV4Y2VlZGVkID1cbiAgICAgICAgICBoYXNSZXZpZXdDYXJkc0xpbWl0KGNvbmZpZykgJiZcbiAgICAgICAgICAoY29uZmlnLnJldmlld0NhcmRzUGVyRGF5ID09PSAwIHx8XG4gICAgICAgICAgICBkYWlseUNvdW50cy5yZXZpZXdDb3VudCA+PSBjb25maWcucmV2aWV3Q2FyZHNQZXJEYXkpO1xuXG4gICAgICAgIGlmIChuZXdMaW1pdEV4Y2VlZGVkIHx8IHJldmlld0xpbWl0RXhjZWVkZWQpIHtcbiAgICAgICAgICBsaW1pdEluZm8gKz0gYFxcblxcbk5vdGU6IE9ubHkgbGVhcm5pbmcgY2FyZHMgd2lsbCBiZSBzaG93biAobGltaXRzIGV4Y2VlZGVkKWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncz8udWk/LmVuYWJsZU5vdGljZXMgIT09IGZhbHNlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShsaW1pdEluZm8sIDUwMDApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE9wZW4gcmV2aWV3IG1vZGFsXG4gICAgICBuZXcgRmxhc2hjYXJkUmV2aWV3TW9kYWxXcmFwcGVyKFxuICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgZGVjayxcbiAgICAgICAgW25leHRDYXJkXSxcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIsXG4gICAgICAgIHRoaXMuc2V0dGluZ3MsXG4gICAgICAgIHRoaXMuZGIsXG4gICAgICAgIHRoaXMucmVmcmVzaC5iaW5kKHRoaXMpLFxuICAgICAgICB0aGlzLnJlZnJlc2hTdGF0c0J5SWQuYmluZCh0aGlzKSxcbiAgICAgICkub3BlbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc3RhcnRpbmcgcmV2aWV3OlwiLCBlcnJvcik7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncz8udWk/LmVuYWJsZU5vdGljZXMgIT09IGZhbHNlKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciBzdGFydGluZyByZXZpZXcuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IE1vZGFsLCBDb21wb25lbnQsIE5vdGljZSwgTWFya2Rvd25SZW5kZXJlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBEZWNrLCBGbGFzaGNhcmQgfSBmcm9tIFwiLi4vZGF0YWJhc2UvdHlwZXNcIjtcbmltcG9ydCB0eXBlIHsgUmF0aW5nTGFiZWwgfSBmcm9tIFwiLi4vYWxnb3JpdGhtL2ZzcnNcIjtcbmltcG9ydCB0eXBlIHsgU2NoZWR1bGVyIH0gZnJvbSBcIi4uL3NlcnZpY2VzL1NjaGVkdWxlclwiO1xuaW1wb3J0IHR5cGUgeyBGbGFzaGNhcmRzU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcbmltcG9ydCB0eXBlIHsgRGF0YWJhc2VTZXJ2aWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlL0RhdGFiYXNlU2VydmljZVwiO1xuaW1wb3J0IEZsYXNoY2FyZFJldmlld01vZGFsIGZyb20gXCIuL0ZsYXNoY2FyZFJldmlld01vZGFsLnN2ZWx0ZVwiO1xuXG5leHBvcnQgY2xhc3MgRmxhc2hjYXJkUmV2aWV3TW9kYWxXcmFwcGVyIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIGRlY2s6IERlY2s7XG4gIHByaXZhdGUgaW5pdGlhbENhcmQ6IEZsYXNoY2FyZCB8IG51bGw7XG4gIHByaXZhdGUgc2NoZWR1bGVyOiBTY2hlZHVsZXI7XG4gIHByaXZhdGUgc2V0dGluZ3M6IEZsYXNoY2FyZHNTZXR0aW5ncztcbiAgcHJpdmF0ZSBkYjogRGF0YWJhc2VTZXJ2aWNlO1xuICBwcml2YXRlIHJlZnJlc2hTdGF0czogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgcHJpdmF0ZSByZWZyZXNoU3RhdHNCeUlkOiAoZGVja0lkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIHByaXZhdGUgY29tcG9uZW50OiBGbGFzaGNhcmRSZXZpZXdNb2RhbCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1hcmtkb3duQ29tcG9uZW50czogQ29tcG9uZW50W10gPSBbXTtcbiAgcHJpdmF0ZSByZXNpemVIYW5kbGVyPzogKCkgPT4gdm9pZDtcblxuICBwcml2YXRlIHJlbmRlck1hcmtkb3duKGNvbnRlbnQ6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KTogQ29tcG9uZW50IHwgbnVsbCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IG5ldyBDb21wb25lbnQoKTtcbiAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24oY29udGVudCwgZWwsIFwiXCIsIGNvbXBvbmVudCk7XG4gICAgICByZXR1cm4gY29tcG9uZW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVuZGVyaW5nIG1hcmtkb3duOlwiLCBlcnJvcik7XG4gICAgICBlbC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IGFueSxcbiAgICBkZWNrOiBEZWNrLFxuICAgIGZsYXNoY2FyZHM6IEZsYXNoY2FyZFtdLFxuICAgIHNjaGVkdWxlcjogU2NoZWR1bGVyLFxuICAgIHNldHRpbmdzOiBGbGFzaGNhcmRzU2V0dGluZ3MsXG4gICAgZGI6IERhdGFiYXNlU2VydmljZSxcbiAgICByZWZyZXNoU3RhdHM6ICgpID0+IFByb21pc2U8dm9pZD4sXG4gICAgcmVmcmVzaFN0YXRzQnlJZDogKGRlY2tJZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+LFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuZGVjayA9IGRlY2s7XG4gICAgdGhpcy5pbml0aWFsQ2FyZCA9IGZsYXNoY2FyZHMubGVuZ3RoID4gMCA/IGZsYXNoY2FyZHNbMF0gOiBudWxsO1xuICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB0aGlzLmRiID0gZGI7XG4gICAgdGhpcy5yZWZyZXNoU3RhdHMgPSByZWZyZXNoU3RhdHM7XG4gICAgdGhpcy5yZWZyZXNoU3RhdHNCeUlkID0gcmVmcmVzaFN0YXRzQnlJZDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmV2aWV3Rmxhc2hjYXJkKFxuICAgIGRlY2s6IERlY2ssXG4gICAgZmxhc2hjYXJkOiBGbGFzaGNhcmQsXG4gICAgZGlmZmljdWx0eTogXCJhZ2FpblwiIHwgXCJoYXJkXCIgfCBcImdvb2RcIiB8IFwiZWFzeVwiLFxuICAgIHRpbWVFbGFwc2VkPzogbnVtYmVyLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBVc2UgdW5pZmllZCBzY2hlZHVsZXIgZm9yIHJhdGluZ1xuICAgIGF3YWl0IHRoaXMuc2NoZWR1bGVyLnJhdGUoXG4gICAgICBmbGFzaGNhcmQuaWQsXG4gICAgICBkaWZmaWN1bHR5LFxuICAgICAgbmV3IERhdGUoKSxcbiAgICAgIHRpbWVFbGFwc2VkLFxuICAgICk7XG5cbiAgICAvLyBVcGRhdGUgZGVjayBsYXN0IHJldmlld2VkXG4gICAgYXdhaXQgdGhpcy5kYi51cGRhdGVEZWNrTGFzdFJldmlld2VkKGZsYXNoY2FyZC5kZWNrSWQpO1xuXG4gICAgLy8gUmVmcmVzaCBzdGF0cyBmb3IgdGhpcyBzcGVjaWZpYyBkZWNrXG4gICAgYXdhaXQgdGhpcy5yZWZyZXNoU3RhdHNCeUlkKGZsYXNoY2FyZC5kZWNrSWQpO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgLy8gQWRkIG1vYmlsZS1zcGVjaWZpYyBjbGFzc2VzXG4gICAgY29uc3QgbW9kYWxFbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcbiAgICBpZiAobW9kYWxFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICBtb2RhbEVsLmFkZENsYXNzKFwiZGVja3MtbW9kYWxcIik7XG5cbiAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHtcbiAgICAgICAgbW9kYWxFbC5hZGRDbGFzcyhcImRlY2tzLW1vZGFsLW1vYmlsZVwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vZGFsRWwucmVtb3ZlQ2xhc3MoXCJkZWNrcy1tb2RhbC1tb2JpbGVcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29udGVudEVsLmFkZENsYXNzKFwiZGVja3MtcmV2aWV3LW1vZGFsLWNvbnRhaW5lclwiKTtcblxuICAgIHRoaXMuY29tcG9uZW50ID0gbmV3IEZsYXNoY2FyZFJldmlld01vZGFsKHtcbiAgICAgIHRhcmdldDogY29udGVudEVsLFxuICAgICAgcHJvcHM6IHtcbiAgICAgICAgaW5pdGlhbENhcmQ6IHRoaXMuaW5pdGlhbENhcmQsXG4gICAgICAgIGRlY2s6IHRoaXMuZGVjayxcbiAgICAgICAgb25SZXZpZXc6IGFzeW5jIChcbiAgICAgICAgICBjYXJkOiBGbGFzaGNhcmQsXG4gICAgICAgICAgcmF0aW5nOiBSYXRpbmdMYWJlbCxcbiAgICAgICAgICB0aW1lRWxhcHNlZD86IG51bWJlcixcbiAgICAgICAgKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZXZpZXdGbGFzaGNhcmQodGhpcy5kZWNrLCBjYXJkLCByYXRpbmcsIHRpbWVFbGFwc2VkKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyTWFya2Rvd246IChjb250ZW50OiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMucmVuZGVyTWFya2Rvd24oY29udGVudCwgZWwpO1xuICAgICAgICAgIGlmIChjb21wb25lbnQpIHtcbiAgICAgICAgICAgIHRoaXMubWFya2Rvd25Db21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzLFxuICAgICAgICBzY2hlZHVsZXI6IHRoaXMuc2NoZWR1bGVyLFxuICAgICAgICBvbkNhcmRSZXZpZXdlZDogYXN5bmMgKHJldmlld2VkQ2FyZDogRmxhc2hjYXJkKSA9PiB7XG4gICAgICAgICAgLy8gUmVmcmVzaCBzdGF0cyBmb3IgdGhlIHNwZWNpZmljIGRlY2sgYmVpbmcgcmV2aWV3ZWQgKG1vcmUgZWZmaWNpZW50KVxuICAgICAgICAgIGlmIChyZXZpZXdlZENhcmQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaFN0YXRzQnlJZChyZXZpZXdlZENhcmQuZGVja0lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy5jb21wb25lbnQuJG9uKFwiY29tcGxldGVcIiwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIlJldmlldyBDb21wbGV0ZVwiKTtcbiAgICAgIGNvbnN0IHsgcmVhc29uLCByZXZpZXdlZCB9ID0gZXZlbnQuZGV0YWlsO1xuICAgICAgbGV0IG1lc3NhZ2UgPSBgUmV2aWV3IHNlc3Npb24gY29tcGxldGUgZm9yICR7dGhpcy5kZWNrLm5hbWV9IWA7XG5cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzPy51aT8uZW5hYmxlTm90aWNlcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgbmV3IE5vdGljZShtZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIC8vIFJlZnJlc2ggdGhlIHZpZXcgdG8gdXBkYXRlIHN0YXRzXG4gICAgICBhd2FpdCB0aGlzLnJlZnJlc2hTdGF0c0J5SWQodGhpcy5kZWNrLmlkKTtcbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSB3aW5kb3cgcmVzaXplIGZvciBtb2JpbGUgYWRhcHRhdGlvblxuICAgIGNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG1vZGFsRWwgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XG4gICAgICBpZiAobW9kYWxFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHtcbiAgICAgICAgICBtb2RhbEVsLmFkZENsYXNzKFwiZGVja3MtbW9kYWwtbW9iaWxlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1vZGFsRWwucmVtb3ZlQ2xhc3MoXCJkZWNrcy1tb2RhbC1tb2JpbGVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlUmVzaXplKTtcblxuICAgIC8vIFN0b3JlIHJlc2l6ZSBoYW5kbGVyIGZvciBjbGVhbnVwXG4gICAgdGhpcy5yZXNpemVIYW5kbGVyID0gaGFuZGxlUmVzaXplO1xuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAvLyBDbGVhbiB1cCByZXNpemUgaGFuZGxlclxuICAgIGlmICh0aGlzLnJlc2l6ZUhhbmRsZXIpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplSGFuZGxlcik7XG4gICAgICB0aGlzLnJlc2l6ZUhhbmRsZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XG4gICAgICB0aGlzLmNvbXBvbmVudC4kZGVzdHJveSgpO1xuICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIENsZWFuIHVwIG1hcmtkb3duIGNvbXBvbmVudHNcbiAgICB0aGlzLm1hcmtkb3duQ29tcG9uZW50cy5mb3JFYWNoKChjb21wKSA9PiBjb21wLnVubG9hZCgpKTtcbiAgICB0aGlzLm1hcmtkb3duQ29tcG9uZW50cyA9IFtdO1xuXG4gICAgLy8gUmVmcmVzaCB2aWV3IHdoZW4gY2xvc2luZ1xuICAgIHRoaXMucmVmcmVzaFN0YXRzQnlJZCh0aGlzLmRlY2suaWQpO1xuICB9XG59XG4iLCAiZnVuY3Rpb24gbm9vcCgpIHsgfVxuY29uc3QgaWRlbnRpdHkgPSB4ID0+IHg7XG5mdW5jdGlvbiBhc3NpZ24odGFyLCBzcmMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZm9yIChjb25zdCBrIGluIHNyYylcbiAgICAgICAgdGFyW2tdID0gc3JjW2tdO1xuICAgIHJldHVybiB0YXI7XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3RoZW4vaXMtcHJvbWlzZS9ibG9iL21hc3Rlci9pbmRleC5qc1xuLy8gRGlzdHJpYnV0ZWQgdW5kZXIgTUlUIExpY2Vuc2UgaHR0cHM6Ly9naXRodWIuY29tL3RoZW4vaXMtcHJvbWlzZS9ibG9iL21hc3Rlci9MSUNFTlNFXG5mdW5jdGlvbiBpc19wcm9taXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIGFkZF9sb2NhdGlvbihlbGVtZW50LCBmaWxlLCBsaW5lLCBjb2x1bW4sIGNoYXIpIHtcbiAgICBlbGVtZW50Ll9fc3ZlbHRlX21ldGEgPSB7XG4gICAgICAgIGxvYzogeyBmaWxlLCBsaW5lLCBjb2x1bW4sIGNoYXIgfVxuICAgIH07XG59XG5mdW5jdGlvbiBydW4oZm4pIHtcbiAgICByZXR1cm4gZm4oKTtcbn1cbmZ1bmN0aW9uIGJsYW5rX29iamVjdCgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cbmZ1bmN0aW9uIHJ1bl9hbGwoZm5zKSB7XG4gICAgZm5zLmZvckVhY2gocnVuKTtcbn1cbmZ1bmN0aW9uIGlzX2Z1bmN0aW9uKHRoaW5nKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGluZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIHNhZmVfbm90X2VxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYiB8fCAoKGEgJiYgdHlwZW9mIGEgPT09ICdvYmplY3QnKSB8fCB0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5sZXQgc3JjX3VybF9lcXVhbF9hbmNob3I7XG5mdW5jdGlvbiBzcmNfdXJsX2VxdWFsKGVsZW1lbnRfc3JjLCB1cmwpIHtcbiAgICBpZiAoIXNyY191cmxfZXF1YWxfYW5jaG9yKSB7XG4gICAgICAgIHNyY191cmxfZXF1YWxfYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIH1cbiAgICBzcmNfdXJsX2VxdWFsX2FuY2hvci5ocmVmID0gdXJsO1xuICAgIHJldHVybiBlbGVtZW50X3NyYyA9PT0gc3JjX3VybF9lcXVhbF9hbmNob3IuaHJlZjtcbn1cbmZ1bmN0aW9uIG5vdF9lcXVhbChhLCBiKSB7XG4gICAgcmV0dXJuIGEgIT0gYSA/IGIgPT0gYiA6IGEgIT09IGI7XG59XG5mdW5jdGlvbiBpc19lbXB0eShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9zdG9yZShzdG9yZSwgbmFtZSkge1xuICAgIGlmIChzdG9yZSAhPSBudWxsICYmIHR5cGVvZiBzdG9yZS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtuYW1lfScgaXMgbm90IGEgc3RvcmUgd2l0aCBhICdzdWJzY3JpYmUnIG1ldGhvZGApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN1YnNjcmliZShzdG9yZSwgLi4uY2FsbGJhY2tzKSB7XG4gICAgaWYgKHN0b3JlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgfVxuICAgIGNvbnN0IHVuc3ViID0gc3RvcmUuc3Vic2NyaWJlKC4uLmNhbGxiYWNrcyk7XG4gICAgcmV0dXJuIHVuc3ViLnVuc3Vic2NyaWJlID8gKCkgPT4gdW5zdWIudW5zdWJzY3JpYmUoKSA6IHVuc3ViO1xufVxuZnVuY3Rpb24gZ2V0X3N0b3JlX3ZhbHVlKHN0b3JlKSB7XG4gICAgbGV0IHZhbHVlO1xuICAgIHN1YnNjcmliZShzdG9yZSwgXyA9PiB2YWx1ZSA9IF8pKCk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gY29tcG9uZW50X3N1YnNjcmliZShjb21wb25lbnQsIHN0b3JlLCBjYWxsYmFjaykge1xuICAgIGNvbXBvbmVudC4kJC5vbl9kZXN0cm95LnB1c2goc3Vic2NyaWJlKHN0b3JlLCBjYWxsYmFjaykpO1xufVxuZnVuY3Rpb24gY3JlYXRlX3Nsb3QoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbikge1xuICAgIGlmIChkZWZpbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNsb3RfY3R4ID0gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKTtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb25bMF0oc2xvdF9jdHgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NvbnRleHQoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbikge1xuICAgIHJldHVybiBkZWZpbml0aW9uWzFdICYmIGZuXG4gICAgICAgID8gYXNzaWduKCQkc2NvcGUuY3R4LnNsaWNlKCksIGRlZmluaXRpb25bMV0oZm4oY3R4KSkpXG4gICAgICAgIDogJCRzY29wZS5jdHg7XG59XG5mdW5jdGlvbiBnZXRfc2xvdF9jaGFuZ2VzKGRlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBmbikge1xuICAgIGlmIChkZWZpbml0aW9uWzJdICYmIGZuKSB7XG4gICAgICAgIGNvbnN0IGxldHMgPSBkZWZpbml0aW9uWzJdKGZuKGRpcnR5KSk7XG4gICAgICAgIGlmICgkJHNjb3BlLmRpcnR5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBsZXRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbGV0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IFtdO1xuICAgICAgICAgICAgY29uc3QgbGVuID0gTWF0aC5tYXgoJCRzY29wZS5kaXJ0eS5sZW5ndGgsIGxldHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBtZXJnZWRbaV0gPSAkJHNjb3BlLmRpcnR5W2ldIHwgbGV0c1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICQkc2NvcGUuZGlydHkgfCBsZXRzO1xuICAgIH1cbiAgICByZXR1cm4gJCRzY29wZS5kaXJ0eTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZV9zbG90X2Jhc2Uoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIHNsb3RfY2hhbmdlcywgZ2V0X3Nsb3RfY29udGV4dF9mbikge1xuICAgIGlmIChzbG90X2NoYW5nZXMpIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jb250ZXh0ID0gZ2V0X3Nsb3RfY29udGV4dChzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZ2V0X3Nsb3RfY29udGV4dF9mbik7XG4gICAgICAgIHNsb3QucChzbG90X2NvbnRleHQsIHNsb3RfY2hhbmdlcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlX3Nsb3Qoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuLCBnZXRfc2xvdF9jb250ZXh0X2ZuKSB7XG4gICAgY29uc3Qgc2xvdF9jaGFuZ2VzID0gZ2V0X3Nsb3RfY2hhbmdlcyhzbG90X2RlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuKTtcbiAgICB1cGRhdGVfc2xvdF9iYXNlKHNsb3QsIHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBzbG90X2NoYW5nZXMsIGdldF9zbG90X2NvbnRleHRfZm4pO1xufVxuZnVuY3Rpb24gZ2V0X2FsbF9kaXJ0eV9mcm9tX3Njb3BlKCQkc2NvcGUpIHtcbiAgICBpZiAoJCRzY29wZS5jdHgubGVuZ3RoID4gMzIpIHtcbiAgICAgICAgY29uc3QgZGlydHkgPSBbXTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gJCRzY29wZS5jdHgubGVuZ3RoIC8gMzI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRpcnR5W2ldID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpcnR5O1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5mdW5jdGlvbiBleGNsdWRlX2ludGVybmFsX3Byb3BzKHByb3BzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIHByb3BzKVxuICAgICAgICBpZiAoa1swXSAhPT0gJyQnKVxuICAgICAgICAgICAgcmVzdWx0W2tdID0gcHJvcHNba107XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVfcmVzdF9wcm9wcyhwcm9wcywga2V5cykge1xuICAgIGNvbnN0IHJlc3QgPSB7fTtcbiAgICBrZXlzID0gbmV3IFNldChrZXlzKTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpXG4gICAgICAgIGlmICgha2V5cy5oYXMoaykgJiYga1swXSAhPT0gJyQnKVxuICAgICAgICAgICAgcmVzdFtrXSA9IHByb3BzW2tdO1xuICAgIHJldHVybiByZXN0O1xufVxuZnVuY3Rpb24gY29tcHV0ZV9zbG90cyhzbG90cykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNsb3RzKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG9uY2UoZm4pIHtcbiAgICBsZXQgcmFuID0gZmFsc2U7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIGlmIChyYW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJhbiA9IHRydWU7XG4gICAgICAgIGZuLmNhbGwodGhpcywgLi4uYXJncyk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG51bGxfdG9fZW1wdHkodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG59XG5mdW5jdGlvbiBzZXRfc3RvcmVfdmFsdWUoc3RvcmUsIHJldCwgdmFsdWUpIHtcbiAgICBzdG9yZS5zZXQodmFsdWUpO1xuICAgIHJldHVybiByZXQ7XG59XG5jb25zdCBoYXNfcHJvcCA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xuZnVuY3Rpb24gYWN0aW9uX2Rlc3Ryb3llcihhY3Rpb25fcmVzdWx0KSB7XG4gICAgcmV0dXJuIGFjdGlvbl9yZXN1bHQgJiYgaXNfZnVuY3Rpb24oYWN0aW9uX3Jlc3VsdC5kZXN0cm95KSA/IGFjdGlvbl9yZXN1bHQuZGVzdHJveSA6IG5vb3A7XG59XG5mdW5jdGlvbiBzcGxpdF9jc3NfdW5pdCh2YWx1ZSkge1xuICAgIGNvbnN0IHNwbGl0ID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5tYXRjaCgvXlxccyooLT9bXFxkLl0rKShbXlxcc10qKVxccyokLyk7XG4gICAgcmV0dXJuIHNwbGl0ID8gW3BhcnNlRmxvYXQoc3BsaXRbMV0pLCBzcGxpdFsyXSB8fCAncHgnXSA6IFt2YWx1ZSwgJ3B4J107XG59XG5jb25zdCBjb250ZW50ZWRpdGFibGVfdHJ1dGh5X3ZhbHVlcyA9IFsnJywgdHJ1ZSwgMSwgJ3RydWUnLCAnY29udGVudGVkaXRhYmxlJ107XG5cbmNvbnN0IGlzX2NsaWVudCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xubGV0IG5vdyA9IGlzX2NsaWVudFxuICAgID8gKCkgPT4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpXG4gICAgOiAoKSA9PiBEYXRlLm5vdygpO1xubGV0IHJhZiA9IGlzX2NsaWVudCA/IGNiID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZShjYikgOiBub29wO1xuLy8gdXNlZCBpbnRlcm5hbGx5IGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBzZXRfbm93KGZuKSB7XG4gICAgbm93ID0gZm47XG59XG5mdW5jdGlvbiBzZXRfcmFmKGZuKSB7XG4gICAgcmFmID0gZm47XG59XG5cbmNvbnN0IHRhc2tzID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gcnVuX3Rhc2tzKG5vdykge1xuICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgIGlmICghdGFzay5jKG5vdykpIHtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrKTtcbiAgICAgICAgICAgIHRhc2suZigpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHRhc2tzLnNpemUgIT09IDApXG4gICAgICAgIHJhZihydW5fdGFza3MpO1xufVxuLyoqXG4gKiBGb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5IVxuICovXG5mdW5jdGlvbiBjbGVhcl9sb29wcygpIHtcbiAgICB0YXNrcy5jbGVhcigpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhc2sgdGhhdCBydW5zIG9uIGVhY2ggcmFmIGZyYW1lXG4gKiB1bnRpbCBpdCByZXR1cm5zIGEgZmFsc3kgdmFsdWUgb3IgaXMgYWJvcnRlZFxuICovXG5mdW5jdGlvbiBsb29wKGNhbGxiYWNrKSB7XG4gICAgbGV0IHRhc2s7XG4gICAgaWYgKHRhc2tzLnNpemUgPT09IDApXG4gICAgICAgIHJhZihydW5fdGFza3MpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb21pc2U6IG5ldyBQcm9taXNlKGZ1bGZpbGwgPT4ge1xuICAgICAgICAgICAgdGFza3MuYWRkKHRhc2sgPSB7IGM6IGNhbGxiYWNrLCBmOiBmdWxmaWxsIH0pO1xuICAgICAgICB9KSxcbiAgICAgICAgYWJvcnQoKSB7XG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFzayk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCBnbG9iYWxzID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgPyB3aW5kb3dcbiAgICA6IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGdsb2JhbFRoaXNcbiAgICAgICAgOiBnbG9iYWwpO1xuXG4vKipcbiAqIFJlc2l6ZSBvYnNlcnZlciBzaW5nbGV0b24uXG4gKiBPbmUgbGlzdGVuZXIgcGVyIGVsZW1lbnQgb25seSFcbiAqIGh0dHBzOi8vZ3JvdXBzLmdvb2dsZS5jb20vYS9jaHJvbWl1bS5vcmcvZy9ibGluay1kZXYvYy96Nmllbk9OVWI1QS9tL0Y1LVZjVVp0QkFBSlxuICovXG5jbGFzcyBSZXNpemVPYnNlcnZlclNpbmdsZXRvbiB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSAnV2Vha01hcCcgaW4gZ2xvYmFscyA/IG5ldyBXZWFrTWFwKCkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIG9ic2VydmUoZWxlbWVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLnNldChlbGVtZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIHRoaXMuX2dldE9ic2VydmVyKCkub2JzZXJ2ZShlbGVtZW50LCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmRlbGV0ZShlbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuX29ic2VydmVyLnVub2JzZXJ2ZShlbGVtZW50KTsgLy8gdGhpcyBsaW5lIGNhbiBwcm9iYWJseSBiZSByZW1vdmVkXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9nZXRPYnNlcnZlcigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5fb2JzZXJ2ZXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICh0aGlzLl9vYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgUmVzaXplT2JzZXJ2ZXJTaW5nbGV0b24uZW50cmllcy5zZXQoZW50cnkudGFyZ2V0LCBlbnRyeSk7XG4gICAgICAgICAgICAgICAgKF9hID0gdGhpcy5fbGlzdGVuZXJzLmdldChlbnRyeS50YXJnZXQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EoZW50cnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxufVxuLy8gTmVlZHMgdG8gYmUgd3JpdHRlbiBsaWtlIHRoaXMgdG8gcGFzcyB0aGUgdHJlZS1zaGFrZS10ZXN0XG5SZXNpemVPYnNlcnZlclNpbmdsZXRvbi5lbnRyaWVzID0gJ1dlYWtNYXAnIGluIGdsb2JhbHMgPyBuZXcgV2Vha01hcCgpIDogdW5kZWZpbmVkO1xuXG4vLyBUcmFjayB3aGljaCBub2RlcyBhcmUgY2xhaW1lZCBkdXJpbmcgaHlkcmF0aW9uLiBVbmNsYWltZWQgbm9kZXMgY2FuIHRoZW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cbi8vIGF0IHRoZSBlbmQgb2YgaHlkcmF0aW9uIHdpdGhvdXQgdG91Y2hpbmcgdGhlIHJlbWFpbmluZyBub2Rlcy5cbmxldCBpc19oeWRyYXRpbmcgPSBmYWxzZTtcbmZ1bmN0aW9uIHN0YXJ0X2h5ZHJhdGluZygpIHtcbiAgICBpc19oeWRyYXRpbmcgPSB0cnVlO1xufVxuZnVuY3Rpb24gZW5kX2h5ZHJhdGluZygpIHtcbiAgICBpc19oeWRyYXRpbmcgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIHVwcGVyX2JvdW5kKGxvdywgaGlnaCwga2V5LCB2YWx1ZSkge1xuICAgIC8vIFJldHVybiBmaXJzdCBpbmRleCBvZiB2YWx1ZSBsYXJnZXIgdGhhbiBpbnB1dCB2YWx1ZSBpbiB0aGUgcmFuZ2UgW2xvdywgaGlnaClcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgICBjb25zdCBtaWQgPSBsb3cgKyAoKGhpZ2ggLSBsb3cpID4+IDEpO1xuICAgICAgICBpZiAoa2V5KG1pZCkgPD0gdmFsdWUpIHtcbiAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoaWdoID0gbWlkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb3c7XG59XG5mdW5jdGlvbiBpbml0X2h5ZHJhdGUodGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldC5oeWRyYXRlX2luaXQpXG4gICAgICAgIHJldHVybjtcbiAgICB0YXJnZXQuaHlkcmF0ZV9pbml0ID0gdHJ1ZTtcbiAgICAvLyBXZSBrbm93IHRoYXQgYWxsIGNoaWxkcmVuIGhhdmUgY2xhaW1fb3JkZXIgdmFsdWVzIHNpbmNlIHRoZSB1bmNsYWltZWQgaGF2ZSBiZWVuIGRldGFjaGVkIGlmIHRhcmdldCBpcyBub3QgPGhlYWQ+XG4gICAgbGV0IGNoaWxkcmVuID0gdGFyZ2V0LmNoaWxkTm9kZXM7XG4gICAgLy8gSWYgdGFyZ2V0IGlzIDxoZWFkPiwgdGhlcmUgbWF5IGJlIGNoaWxkcmVuIHdpdGhvdXQgY2xhaW1fb3JkZXJcbiAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lID09PSAnSEVBRCcpIHtcbiAgICAgICAgY29uc3QgbXlDaGlsZHJlbiA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICBpZiAobm9kZS5jbGFpbV9vcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbXlDaGlsZHJlbi5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuID0gbXlDaGlsZHJlbjtcbiAgICB9XG4gICAgLypcbiAgICAqIFJlb3JkZXIgY2xhaW1lZCBjaGlsZHJlbiBvcHRpbWFsbHkuXG4gICAgKiBXZSBjYW4gcmVvcmRlciBjbGFpbWVkIGNoaWxkcmVuIG9wdGltYWxseSBieSBmaW5kaW5nIHRoZSBsb25nZXN0IHN1YnNlcXVlbmNlIG9mXG4gICAgKiBub2RlcyB0aGF0IGFyZSBhbHJlYWR5IGNsYWltZWQgaW4gb3JkZXIgYW5kIG9ubHkgbW92aW5nIHRoZSByZXN0LiBUaGUgbG9uZ2VzdFxuICAgICogc3Vic2VxdWVuY2Ugb2Ygbm9kZXMgdGhhdCBhcmUgY2xhaW1lZCBpbiBvcmRlciBjYW4gYmUgZm91bmQgYnlcbiAgICAqIGNvbXB1dGluZyB0aGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIC5jbGFpbV9vcmRlciB2YWx1ZXMuXG4gICAgKlxuICAgICogVGhpcyBhbGdvcml0aG0gaXMgb3B0aW1hbCBpbiBnZW5lcmF0aW5nIHRoZSBsZWFzdCBhbW91bnQgb2YgcmVvcmRlciBvcGVyYXRpb25zXG4gICAgKiBwb3NzaWJsZS5cbiAgICAqXG4gICAgKiBQcm9vZjpcbiAgICAqIFdlIGtub3cgdGhhdCwgZ2l2ZW4gYSBzZXQgb2YgcmVvcmRlcmluZyBvcGVyYXRpb25zLCB0aGUgbm9kZXMgdGhhdCBkbyBub3QgbW92ZVxuICAgICogYWx3YXlzIGZvcm0gYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSwgc2luY2UgdGhleSBkbyBub3QgbW92ZSBhbW9uZyBlYWNoIG90aGVyXG4gICAgKiBtZWFuaW5nIHRoYXQgdGhleSBtdXN0IGJlIGFscmVhZHkgb3JkZXJlZCBhbW9uZyBlYWNoIG90aGVyLiBUaHVzLCB0aGUgbWF4aW1hbFxuICAgICogc2V0IG9mIG5vZGVzIHRoYXQgZG8gbm90IG1vdmUgZm9ybSBhIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZS5cbiAgICAqL1xuICAgIC8vIENvbXB1dGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlXG4gICAgLy8gbTogc3Vic2VxdWVuY2UgbGVuZ3RoIGogPT4gaW5kZXggayBvZiBzbWFsbGVzdCB2YWx1ZSB0aGF0IGVuZHMgYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBsZW5ndGggalxuICAgIGNvbnN0IG0gPSBuZXcgSW50MzJBcnJheShjaGlsZHJlbi5sZW5ndGggKyAxKTtcbiAgICAvLyBQcmVkZWNlc3NvciBpbmRpY2VzICsgMVxuICAgIGNvbnN0IHAgPSBuZXcgSW50MzJBcnJheShjaGlsZHJlbi5sZW5ndGgpO1xuICAgIG1bMF0gPSAtMTtcbiAgICBsZXQgbG9uZ2VzdCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gY2hpbGRyZW5baV0uY2xhaW1fb3JkZXI7XG4gICAgICAgIC8vIEZpbmQgdGhlIGxhcmdlc3Qgc3Vic2VxdWVuY2UgbGVuZ3RoIHN1Y2ggdGhhdCBpdCBlbmRzIGluIGEgdmFsdWUgbGVzcyB0aGFuIG91ciBjdXJyZW50IHZhbHVlXG4gICAgICAgIC8vIHVwcGVyX2JvdW5kIHJldHVybnMgZmlyc3QgZ3JlYXRlciB2YWx1ZSwgc28gd2Ugc3VidHJhY3Qgb25lXG4gICAgICAgIC8vIHdpdGggZmFzdCBwYXRoIGZvciB3aGVuIHdlIGFyZSBvbiB0aGUgY3VycmVudCBsb25nZXN0IHN1YnNlcXVlbmNlXG4gICAgICAgIGNvbnN0IHNlcUxlbiA9ICgobG9uZ2VzdCA+IDAgJiYgY2hpbGRyZW5bbVtsb25nZXN0XV0uY2xhaW1fb3JkZXIgPD0gY3VycmVudCkgPyBsb25nZXN0ICsgMSA6IHVwcGVyX2JvdW5kKDEsIGxvbmdlc3QsIGlkeCA9PiBjaGlsZHJlblttW2lkeF1dLmNsYWltX29yZGVyLCBjdXJyZW50KSkgLSAxO1xuICAgICAgICBwW2ldID0gbVtzZXFMZW5dICsgMTtcbiAgICAgICAgY29uc3QgbmV3TGVuID0gc2VxTGVuICsgMTtcbiAgICAgICAgLy8gV2UgY2FuIGd1YXJhbnRlZSB0aGF0IGN1cnJlbnQgaXMgdGhlIHNtYWxsZXN0IHZhbHVlLiBPdGhlcndpc2UsIHdlIHdvdWxkIGhhdmUgZ2VuZXJhdGVkIGEgbG9uZ2VyIHNlcXVlbmNlLlxuICAgICAgICBtW25ld0xlbl0gPSBpO1xuICAgICAgICBsb25nZXN0ID0gTWF0aC5tYXgobmV3TGVuLCBsb25nZXN0KTtcbiAgICB9XG4gICAgLy8gVGhlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBub2RlcyAoaW5pdGlhbGx5IHJldmVyc2VkKVxuICAgIGNvbnN0IGxpcyA9IFtdO1xuICAgIC8vIFRoZSByZXN0IG9mIHRoZSBub2Rlcywgbm9kZXMgdGhhdCB3aWxsIGJlIG1vdmVkXG4gICAgY29uc3QgdG9Nb3ZlID0gW107XG4gICAgbGV0IGxhc3QgPSBjaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgIGZvciAobGV0IGN1ciA9IG1bbG9uZ2VzdF0gKyAxOyBjdXIgIT0gMDsgY3VyID0gcFtjdXIgLSAxXSkge1xuICAgICAgICBsaXMucHVzaChjaGlsZHJlbltjdXIgLSAxXSk7XG4gICAgICAgIGZvciAoOyBsYXN0ID49IGN1cjsgbGFzdC0tKSB7XG4gICAgICAgICAgICB0b01vdmUucHVzaChjaGlsZHJlbltsYXN0XSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdC0tO1xuICAgIH1cbiAgICBmb3IgKDsgbGFzdCA+PSAwOyBsYXN0LS0pIHtcbiAgICAgICAgdG9Nb3ZlLnB1c2goY2hpbGRyZW5bbGFzdF0pO1xuICAgIH1cbiAgICBsaXMucmV2ZXJzZSgpO1xuICAgIC8vIFdlIHNvcnQgdGhlIG5vZGVzIGJlaW5nIG1vdmVkIHRvIGd1YXJhbnRlZSB0aGF0IHRoZWlyIGluc2VydGlvbiBvcmRlciBtYXRjaGVzIHRoZSBjbGFpbSBvcmRlclxuICAgIHRvTW92ZS5zb3J0KChhLCBiKSA9PiBhLmNsYWltX29yZGVyIC0gYi5jbGFpbV9vcmRlcik7XG4gICAgLy8gRmluYWxseSwgd2UgbW92ZSB0aGUgbm9kZXNcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IDA7IGkgPCB0b01vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgd2hpbGUgKGogPCBsaXMubGVuZ3RoICYmIHRvTW92ZVtpXS5jbGFpbV9vcmRlciA+PSBsaXNbal0uY2xhaW1fb3JkZXIpIHtcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbmNob3IgPSBqIDwgbGlzLmxlbmd0aCA/IGxpc1tqXSA6IG51bGw7XG4gICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUodG9Nb3ZlW2ldLCBhbmNob3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFwcGVuZCh0YXJnZXQsIG5vZGUpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfc3R5bGVzKHRhcmdldCwgc3R5bGVfc2hlZXRfaWQsIHN0eWxlcykge1xuICAgIGNvbnN0IGFwcGVuZF9zdHlsZXNfdG8gPSBnZXRfcm9vdF9mb3Jfc3R5bGUodGFyZ2V0KTtcbiAgICBpZiAoIWFwcGVuZF9zdHlsZXNfdG8uZ2V0RWxlbWVudEJ5SWQoc3R5bGVfc2hlZXRfaWQpKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGUuaWQgPSBzdHlsZV9zaGVldF9pZDtcbiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBzdHlsZXM7XG4gICAgICAgIGFwcGVuZF9zdHlsZXNoZWV0KGFwcGVuZF9zdHlsZXNfdG8sIHN0eWxlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSkge1xuICAgIGlmICghbm9kZSlcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIGNvbnN0IHJvb3QgPSBub2RlLmdldFJvb3ROb2RlID8gbm9kZS5nZXRSb290Tm9kZSgpIDogbm9kZS5vd25lckRvY3VtZW50O1xuICAgIGlmIChyb290ICYmIHJvb3QuaG9zdCkge1xuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGUub3duZXJEb2N1bWVudDtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0KG5vZGUpIHtcbiAgICBjb25zdCBzdHlsZV9lbGVtZW50ID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICBhcHBlbmRfc3R5bGVzaGVldChnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSksIHN0eWxlX2VsZW1lbnQpO1xuICAgIHJldHVybiBzdHlsZV9lbGVtZW50LnNoZWV0O1xufVxuZnVuY3Rpb24gYXBwZW5kX3N0eWxlc2hlZXQobm9kZSwgc3R5bGUpIHtcbiAgICBhcHBlbmQobm9kZS5oZWFkIHx8IG5vZGUsIHN0eWxlKTtcbiAgICByZXR1cm4gc3R5bGUuc2hlZXQ7XG59XG5mdW5jdGlvbiBhcHBlbmRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSkge1xuICAgIGlmIChpc19oeWRyYXRpbmcpIHtcbiAgICAgICAgaW5pdF9oeWRyYXRlKHRhcmdldCk7XG4gICAgICAgIGlmICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPT09IHVuZGVmaW5lZCkgfHwgKCh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCAhPT0gbnVsbCkgJiYgKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkLnBhcmVudE5vZGUgIT09IHRhcmdldCkpKSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IHRhcmdldC5maXJzdENoaWxkO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNraXAgbm9kZXMgb2YgdW5kZWZpbmVkIG9yZGVyaW5nXG4gICAgICAgIHdoaWxlICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgIT09IG51bGwpICYmICh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5jbGFpbV9vcmRlciA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZSAhPT0gdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQpIHtcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgaW5zZXJ0IGlmIHRoZSBvcmRlcmluZyBvZiB0aGlzIG5vZGUgc2hvdWxkIGJlIG1vZGlmaWVkIG9yIHRoZSBwYXJlbnQgbm9kZSBpcyBub3QgdGFyZ2V0XG4gICAgICAgICAgICBpZiAobm9kZS5jbGFpbV9vcmRlciAhPT0gdW5kZWZpbmVkIHx8IG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQgfHwgbm9kZS5uZXh0U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaW5zZXJ0KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCBhbmNob3IgfHwgbnVsbCk7XG59XG5mdW5jdGlvbiBpbnNlcnRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgaWYgKGlzX2h5ZHJhdGluZyAmJiAhYW5jaG9yKSB7XG4gICAgICAgIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQgfHwgbm9kZS5uZXh0U2libGluZyAhPSBhbmNob3IpIHtcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCBhbmNob3IgfHwgbnVsbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoKG5vZGUpIHtcbiAgICBpZiAobm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXN0cm95X2VhY2goaXRlcmF0aW9ucywgZGV0YWNoaW5nKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChpdGVyYXRpb25zW2ldKVxuICAgICAgICAgICAgaXRlcmF0aW9uc1tpXS5kKGRldGFjaGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XG59XG5mdW5jdGlvbiBlbGVtZW50X2lzKG5hbWUsIGlzKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSwgeyBpcyB9KTtcbn1cbmZ1bmN0aW9uIG9iamVjdF93aXRob3V0X3Byb3BlcnRpZXMob2JqLCBleGNsdWRlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgICAgICBpZiAoaGFzX3Byb3Aob2JqLCBrKVxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgJiYgZXhjbHVkZS5pbmRleE9mKGspID09PSAtMSkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGFyZ2V0W2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBzdmdfZWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBuYW1lKTtcbn1cbmZ1bmN0aW9uIHRleHQoZGF0YSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkYXRhKTtcbn1cbmZ1bmN0aW9uIHNwYWNlKCkge1xuICAgIHJldHVybiB0ZXh0KCcgJyk7XG59XG5mdW5jdGlvbiBlbXB0eSgpIHtcbiAgICByZXR1cm4gdGV4dCgnJyk7XG59XG5mdW5jdGlvbiBjb21tZW50KGNvbnRlbnQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KTtcbn1cbmZ1bmN0aW9uIGxpc3Rlbihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuICgpID0+IG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBwcmV2ZW50X2RlZmF1bHQoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBzdG9wX3Byb3BhZ2F0aW9uKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHN0b3BfaW1tZWRpYXRlX3Byb3BhZ2F0aW9uKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNlbGYoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcylcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cnVzdGVkKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChldmVudC5pc1RydXN0ZWQpXG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgZWxzZSBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKSAhPT0gdmFsdWUpXG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xufVxuLyoqXG4gKiBMaXN0IG9mIGF0dHJpYnV0ZXMgdGhhdCBzaG91bGQgYWx3YXlzIGJlIHNldCB0aHJvdWdoIHRoZSBhdHRyIG1ldGhvZCxcbiAqIGJlY2F1c2UgdXBkYXRpbmcgdGhlbSB0aHJvdWdoIHRoZSBwcm9wZXJ0eSBzZXR0ZXIgZG9lc24ndCB3b3JrIHJlbGlhYmx5LlxuICogSW4gdGhlIGV4YW1wbGUgb2YgYHdpZHRoYC9gaGVpZ2h0YCwgdGhlIHByb2JsZW0gaXMgdGhhdCB0aGUgc2V0dGVyIG9ubHlcbiAqIGFjY2VwdHMgbnVtZXJpYyB2YWx1ZXMsIGJ1dCB0aGUgYXR0cmlidXRlIGNhbiBhbHNvIGJlIHNldCB0byBhIHN0cmluZyBsaWtlIGA1MCVgLlxuICogSWYgdGhpcyBsaXN0IGJlY29tZXMgdG9vIGJpZywgcmV0aGluayB0aGlzIGFwcHJvYWNoLlxuICovXG5jb25zdCBhbHdheXNfc2V0X3Rocm91Z2hfc2V0X2F0dHJpYnV0ZSA9IFsnd2lkdGgnLCAnaGVpZ2h0J107XG5mdW5jdGlvbiBzZXRfYXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobm9kZS5fX3Byb3RvX18pO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXNba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgbm9kZS5zdHlsZS5jc3NUZXh0ID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ19fdmFsdWUnKSB7XG4gICAgICAgICAgICBub2RlLnZhbHVlID0gbm9kZVtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc2NyaXB0b3JzW2tleV0gJiYgZGVzY3JpcHRvcnNba2V5XS5zZXQgJiYgYWx3YXlzX3NldF90aHJvdWdoX3NldF9hdHRyaWJ1dGUuaW5kZXhPZihrZXkpID09PSAtMSkge1xuICAgICAgICAgICAgbm9kZVtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXR0cihub2RlLCBrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3ZnX2F0dHJpYnV0ZXMobm9kZSwgYXR0cmlidXRlcykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgYXR0cihub2RlLCBrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X2N1c3RvbV9lbGVtZW50X2RhdGFfbWFwKG5vZGUsIGRhdGFfbWFwKSB7XG4gICAgT2JqZWN0LmtleXMoZGF0YV9tYXApLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBzZXRfY3VzdG9tX2VsZW1lbnRfZGF0YShub2RlLCBrZXksIGRhdGFfbWFwW2tleV0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gc2V0X2N1c3RvbV9lbGVtZW50X2RhdGEobm9kZSwgcHJvcCwgdmFsdWUpIHtcbiAgICBpZiAocHJvcCBpbiBub2RlKSB7XG4gICAgICAgIG5vZGVbcHJvcF0gPSB0eXBlb2Ygbm9kZVtwcm9wXSA9PT0gJ2Jvb2xlYW4nICYmIHZhbHVlID09PSAnJyA/IHRydWUgOiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGF0dHIobm9kZSwgcHJvcCwgdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9keW5hbWljX2VsZW1lbnRfZGF0YSh0YWcpIHtcbiAgICByZXR1cm4gKC8tLy50ZXN0KHRhZykpID8gc2V0X2N1c3RvbV9lbGVtZW50X2RhdGFfbWFwIDogc2V0X2F0dHJpYnV0ZXM7XG59XG5mdW5jdGlvbiB4bGlua19hdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBub2RlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgYXR0cmlidXRlLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBnZXRfYmluZGluZ19ncm91cF92YWx1ZShncm91cCwgX192YWx1ZSwgY2hlY2tlZCkge1xuICAgIGNvbnN0IHZhbHVlID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGdyb3VwW2ldLmNoZWNrZWQpXG4gICAgICAgICAgICB2YWx1ZS5hZGQoZ3JvdXBbaV0uX192YWx1ZSk7XG4gICAgfVxuICAgIGlmICghY2hlY2tlZCkge1xuICAgICAgICB2YWx1ZS5kZWxldGUoX192YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5mcm9tKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGluaXRfYmluZGluZ19ncm91cChncm91cCkge1xuICAgIGxldCBfaW5wdXRzO1xuICAgIHJldHVybiB7XG4gICAgICAgIC8qIHB1c2ggKi8gcCguLi5pbnB1dHMpIHtcbiAgICAgICAgICAgIF9pbnB1dHMgPSBpbnB1dHM7XG4gICAgICAgICAgICBfaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gZ3JvdXAucHVzaChpbnB1dCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKiByZW1vdmUgKi8gcigpIHtcbiAgICAgICAgICAgIF9pbnB1dHMuZm9yRWFjaChpbnB1dCA9PiBncm91cC5zcGxpY2UoZ3JvdXAuaW5kZXhPZihpbnB1dCksIDEpKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBpbml0X2JpbmRpbmdfZ3JvdXBfZHluYW1pYyhncm91cCwgaW5kZXhlcykge1xuICAgIGxldCBfZ3JvdXAgPSBnZXRfYmluZGluZ19ncm91cChncm91cCk7XG4gICAgbGV0IF9pbnB1dHM7XG4gICAgZnVuY3Rpb24gZ2V0X2JpbmRpbmdfZ3JvdXAoZ3JvdXApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBncm91cCA9IGdyb3VwW2luZGV4ZXNbaV1dID0gZ3JvdXBbaW5kZXhlc1tpXV0gfHwgW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdyb3VwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwdXNoKCkge1xuICAgICAgICBfaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gX2dyb3VwLnB1c2goaW5wdXQpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgICBfaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gX2dyb3VwLnNwbGljZShfZ3JvdXAuaW5kZXhPZihpbnB1dCksIDEpKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLyogdXBkYXRlICovIHUobmV3X2luZGV4ZXMpIHtcbiAgICAgICAgICAgIGluZGV4ZXMgPSBuZXdfaW5kZXhlcztcbiAgICAgICAgICAgIGNvbnN0IG5ld19ncm91cCA9IGdldF9iaW5kaW5nX2dyb3VwKGdyb3VwKTtcbiAgICAgICAgICAgIGlmIChuZXdfZ3JvdXAgIT09IF9ncm91cCkge1xuICAgICAgICAgICAgICAgIHJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIF9ncm91cCA9IG5ld19ncm91cDtcbiAgICAgICAgICAgICAgICBwdXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8qIHB1c2ggKi8gcCguLi5pbnB1dHMpIHtcbiAgICAgICAgICAgIF9pbnB1dHMgPSBpbnB1dHM7XG4gICAgICAgICAgICBwdXNoKCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qIHJlbW92ZSAqLyByOiByZW1vdmVcbiAgICB9O1xufVxuZnVuY3Rpb24gdG9fbnVtYmVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAnJyA/IG51bGwgOiArdmFsdWU7XG59XG5mdW5jdGlvbiB0aW1lX3Jhbmdlc190b19hcnJheShyYW5nZXMpIHtcbiAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGFycmF5LnB1c2goeyBzdGFydDogcmFuZ2VzLnN0YXJ0KGkpLCBlbmQ6IHJhbmdlcy5lbmQoaSkgfSk7XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbn1cbmZ1bmN0aW9uIGNoaWxkcmVuKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShlbGVtZW50LmNoaWxkTm9kZXMpO1xufVxuZnVuY3Rpb24gaW5pdF9jbGFpbV9pbmZvKG5vZGVzKSB7XG4gICAgaWYgKG5vZGVzLmNsYWltX2luZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBub2Rlcy5jbGFpbV9pbmZvID0geyBsYXN0X2luZGV4OiAwLCB0b3RhbF9jbGFpbWVkOiAwIH07XG4gICAgfVxufVxuZnVuY3Rpb24gY2xhaW1fbm9kZShub2RlcywgcHJlZGljYXRlLCBwcm9jZXNzTm9kZSwgY3JlYXRlTm9kZSwgZG9udFVwZGF0ZUxhc3RJbmRleCA9IGZhbHNlKSB7XG4gICAgLy8gVHJ5IHRvIGZpbmQgbm9kZXMgaW4gYW4gb3JkZXIgc3VjaCB0aGF0IHdlIGxlbmd0aGVuIHRoZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2VcbiAgICBpbml0X2NsYWltX2luZm8obm9kZXMpO1xuICAgIGNvbnN0IHJlc3VsdE5vZGUgPSAoKCkgPT4ge1xuICAgICAgICAvLyBXZSBmaXJzdCB0cnkgdG8gZmluZCBhbiBlbGVtZW50IGFmdGVyIHRoZSBwcmV2aW91cyBvbmVcbiAgICAgICAgZm9yIChsZXQgaSA9IG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBwcm9jZXNzTm9kZShub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1tpXSA9IHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRvbnRVcGRhdGVMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0cnkgdG8gZmluZCBvbmUgYmVmb3JlXG4gICAgICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBzbyB0aGF0IHdlIGRvbid0IGdvIHRvbyBmYXIgYmFja1xuICAgICAgICBmb3IgKGxldCBpID0gbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4IC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHByb2Nlc3NOb2RlKG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzW2ldID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZG9udFVwZGF0ZUxhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHdlIHNwbGljZWQgYmVmb3JlIHRoZSBsYXN0X2luZGV4LCB3ZSBkZWNyZWFzZSBpdFxuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXgtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UgY2FuJ3QgZmluZCBhbnkgbWF0Y2hpbmcgbm9kZSwgd2UgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICByZXR1cm4gY3JlYXRlTm9kZSgpO1xuICAgIH0pKCk7XG4gICAgcmVzdWx0Tm9kZS5jbGFpbV9vcmRlciA9IG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZDtcbiAgICBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQgKz0gMTtcbiAgICByZXR1cm4gcmVzdWx0Tm9kZTtcbn1cbmZ1bmN0aW9uIGNsYWltX2VsZW1lbnRfYmFzZShub2RlcywgbmFtZSwgYXR0cmlidXRlcywgY3JlYXRlX2VsZW1lbnQpIHtcbiAgICByZXR1cm4gY2xhaW1fbm9kZShub2RlcywgKG5vZGUpID0+IG5vZGUubm9kZU5hbWUgPT09IG5hbWUsIChub2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG5vZGUuYXR0cmlidXRlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlID0gbm9kZS5hdHRyaWJ1dGVzW2pdO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZS5wdXNoKGF0dHJpYnV0ZS5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZW1vdmUuZm9yRWFjaCh2ID0+IG5vZGUucmVtb3ZlQXR0cmlidXRlKHYpKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LCAoKSA9PiBjcmVhdGVfZWxlbWVudChuYW1lKSk7XG59XG5mdW5jdGlvbiBjbGFpbV9lbGVtZW50KG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzKSB7XG4gICAgcmV0dXJuIGNsYWltX2VsZW1lbnRfYmFzZShub2RlcywgbmFtZSwgYXR0cmlidXRlcywgZWxlbWVudCk7XG59XG5mdW5jdGlvbiBjbGFpbV9zdmdfZWxlbWVudChub2RlcywgbmFtZSwgYXR0cmlidXRlcykge1xuICAgIHJldHVybiBjbGFpbV9lbGVtZW50X2Jhc2Uobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIHN2Z19lbGVtZW50KTtcbn1cbmZ1bmN0aW9uIGNsYWltX3RleHQobm9kZXMsIGRhdGEpIHtcbiAgICByZXR1cm4gY2xhaW1fbm9kZShub2RlcywgKG5vZGUpID0+IG5vZGUubm9kZVR5cGUgPT09IDMsIChub2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGFTdHIgPSAnJyArIGRhdGE7XG4gICAgICAgIGlmIChub2RlLmRhdGEuc3RhcnRzV2l0aChkYXRhU3RyKSkge1xuICAgICAgICAgICAgaWYgKG5vZGUuZGF0YS5sZW5ndGggIT09IGRhdGFTdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuc3BsaXRUZXh0KGRhdGFTdHIubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IGRhdGFTdHI7XG4gICAgICAgIH1cbiAgICB9LCAoKSA9PiB0ZXh0KGRhdGEpLCB0cnVlIC8vIFRleHQgbm9kZXMgc2hvdWxkIG5vdCB1cGRhdGUgbGFzdCBpbmRleCBzaW5jZSBpdCBpcyBsaWtlbHkgbm90IHdvcnRoIGl0IHRvIGVsaW1pbmF0ZSBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIGFjdHVhbCBlbGVtZW50c1xuICAgICk7XG59XG5mdW5jdGlvbiBjbGFpbV9zcGFjZShub2Rlcykge1xuICAgIHJldHVybiBjbGFpbV90ZXh0KG5vZGVzLCAnICcpO1xufVxuZnVuY3Rpb24gY2xhaW1fY29tbWVudChub2RlcywgZGF0YSkge1xuICAgIHJldHVybiBjbGFpbV9ub2RlKG5vZGVzLCAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gOCwgKG5vZGUpID0+IHtcbiAgICAgICAgbm9kZS5kYXRhID0gJycgKyBkYXRhO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sICgpID0+IGNvbW1lbnQoZGF0YSksIHRydWUpO1xufVxuZnVuY3Rpb24gZmluZF9jb21tZW50KG5vZGVzLCB0ZXh0LCBzdGFydCkge1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IG5vZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDggLyogY29tbWVudCBub2RlICovICYmIG5vZGUudGV4dENvbnRlbnQudHJpbSgpID09PSB0ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZXMubGVuZ3RoO1xufVxuZnVuY3Rpb24gY2xhaW1faHRtbF90YWcobm9kZXMsIGlzX3N2Zykge1xuICAgIC8vIGZpbmQgaHRtbCBvcGVuaW5nIHRhZ1xuICAgIGNvbnN0IHN0YXJ0X2luZGV4ID0gZmluZF9jb21tZW50KG5vZGVzLCAnSFRNTF9UQUdfU1RBUlQnLCAwKTtcbiAgICBjb25zdCBlbmRfaW5kZXggPSBmaW5kX2NvbW1lbnQobm9kZXMsICdIVE1MX1RBR19FTkQnLCBzdGFydF9pbmRleCk7XG4gICAgaWYgKHN0YXJ0X2luZGV4ID09PSBlbmRfaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdG1sVGFnSHlkcmF0aW9uKHVuZGVmaW5lZCwgaXNfc3ZnKTtcbiAgICB9XG4gICAgaW5pdF9jbGFpbV9pbmZvKG5vZGVzKTtcbiAgICBjb25zdCBodG1sX3RhZ19ub2RlcyA9IG5vZGVzLnNwbGljZShzdGFydF9pbmRleCwgZW5kX2luZGV4IC0gc3RhcnRfaW5kZXggKyAxKTtcbiAgICBkZXRhY2goaHRtbF90YWdfbm9kZXNbMF0pO1xuICAgIGRldGFjaChodG1sX3RhZ19ub2Rlc1todG1sX3RhZ19ub2Rlcy5sZW5ndGggLSAxXSk7XG4gICAgY29uc3QgY2xhaW1lZF9ub2RlcyA9IGh0bWxfdGFnX25vZGVzLnNsaWNlKDEsIGh0bWxfdGFnX25vZGVzLmxlbmd0aCAtIDEpO1xuICAgIGZvciAoY29uc3QgbiBvZiBjbGFpbWVkX25vZGVzKSB7XG4gICAgICAgIG4uY2xhaW1fb3JkZXIgPSBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQ7XG4gICAgICAgIG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZCArPSAxO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEh0bWxUYWdIeWRyYXRpb24oY2xhaW1lZF9ub2RlcywgaXNfc3ZnKTtcbn1cbmZ1bmN0aW9uIHNldF9kYXRhKHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0LmRhdGEgPT09IGRhdGEpXG4gICAgICAgIHJldHVybjtcbiAgICB0ZXh0LmRhdGEgPSBkYXRhO1xufVxuZnVuY3Rpb24gc2V0X2RhdGFfY29udGVudGVkaXRhYmxlKHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0Lndob2xlVGV4dCA9PT0gZGF0YSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHRleHQuZGF0YSA9IGRhdGE7XG59XG5mdW5jdGlvbiBzZXRfZGF0YV9tYXliZV9jb250ZW50ZWRpdGFibGUodGV4dCwgZGF0YSwgYXR0cl92YWx1ZSkge1xuICAgIGlmICh+Y29udGVudGVkaXRhYmxlX3RydXRoeV92YWx1ZXMuaW5kZXhPZihhdHRyX3ZhbHVlKSkge1xuICAgICAgICBzZXRfZGF0YV9jb250ZW50ZWRpdGFibGUodGV4dCwgZGF0YSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRfZGF0YSh0ZXh0LCBkYXRhKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfaW5wdXRfdmFsdWUoaW5wdXQsIHZhbHVlKSB7XG4gICAgaW5wdXQudmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF90eXBlKGlucHV0LCB0eXBlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaW5wdXQudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3R5bGUobm9kZSwga2V5LCB2YWx1ZSwgaW1wb3J0YW50KSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShrZXkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbm9kZS5zdHlsZS5zZXRQcm9wZXJ0eShrZXksIHZhbHVlLCBpbXBvcnRhbnQgPyAnaW1wb3J0YW50JyA6ICcnKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZWxlY3Rfb3B0aW9uKHNlbGVjdCwgdmFsdWUsIG1vdW50aW5nKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgaWYgKG9wdGlvbi5fX3ZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW1vdW50aW5nIHx8IHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2VsZWN0LnNlbGVjdGVkSW5kZXggPSAtMTsgLy8gbm8gb3B0aW9uIHNob3VsZCBiZSBzZWxlY3RlZFxuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdF9vcHRpb25zKHNlbGVjdCwgdmFsdWUpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdC5vcHRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdC5vcHRpb25zW2ldO1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB+dmFsdWUuaW5kZXhPZihvcHRpb24uX192YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2VsZWN0X3ZhbHVlKHNlbGVjdCkge1xuICAgIGNvbnN0IHNlbGVjdGVkX29wdGlvbiA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yKCc6Y2hlY2tlZCcpO1xuICAgIHJldHVybiBzZWxlY3RlZF9vcHRpb24gJiYgc2VsZWN0ZWRfb3B0aW9uLl9fdmFsdWU7XG59XG5mdW5jdGlvbiBzZWxlY3RfbXVsdGlwbGVfdmFsdWUoc2VsZWN0KSB7XG4gICAgcmV0dXJuIFtdLm1hcC5jYWxsKHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKCc6Y2hlY2tlZCcpLCBvcHRpb24gPT4gb3B0aW9uLl9fdmFsdWUpO1xufVxuLy8gdW5mb3J0dW5hdGVseSB0aGlzIGNhbid0IGJlIGEgY29uc3RhbnQgYXMgdGhhdCB3b3VsZG4ndCBiZSB0cmVlLXNoYWtlYWJsZVxuLy8gc28gd2UgY2FjaGUgdGhlIHJlc3VsdCBpbnN0ZWFkXG5sZXQgY3Jvc3NvcmlnaW47XG5mdW5jdGlvbiBpc19jcm9zc29yaWdpbigpIHtcbiAgICBpZiAoY3Jvc3NvcmlnaW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjcm9zc29yaWdpbiA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB2b2lkIHdpbmRvdy5wYXJlbnQuZG9jdW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjcm9zc29yaWdpbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNyb3Nzb3JpZ2luO1xufVxuZnVuY3Rpb24gYWRkX2lmcmFtZV9yZXNpemVfbGlzdGVuZXIobm9kZSwgZm4pIHtcbiAgICBjb25zdCBjb21wdXRlZF9zdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgaWYgKGNvbXB1dGVkX3N0eWxlLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB9XG4gICAgY29uc3QgaWZyYW1lID0gZWxlbWVudCgnaWZyYW1lJyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyAnICtcbiAgICAgICAgJ292ZXJmbG93OiBoaWRkZW47IGJvcmRlcjogMDsgb3BhY2l0eTogMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHotaW5kZXg6IC0xOycpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICBpZnJhbWUudGFiSW5kZXggPSAtMTtcbiAgICBjb25zdCBjcm9zc29yaWdpbiA9IGlzX2Nyb3Nzb3JpZ2luKCk7XG4gICAgbGV0IHVuc3Vic2NyaWJlO1xuICAgIGlmIChjcm9zc29yaWdpbikge1xuICAgICAgICBpZnJhbWUuc3JjID0gXCJkYXRhOnRleHQvaHRtbCw8c2NyaXB0Pm9ucmVzaXplPWZ1bmN0aW9uKCl7cGFyZW50LnBvc3RNZXNzYWdlKDAsJyonKX08L3NjcmlwdD5cIjtcbiAgICAgICAgdW5zdWJzY3JpYmUgPSBsaXN0ZW4od2luZG93LCAnbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gaWZyYW1lLmNvbnRlbnRXaW5kb3cpXG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZnJhbWUuc3JjID0gJ2Fib3V0OmJsYW5rJztcbiAgICAgICAgaWZyYW1lLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlID0gbGlzdGVuKGlmcmFtZS5jb250ZW50V2luZG93LCAncmVzaXplJywgZm4pO1xuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGFuIGluaXRpYWwgcmVzaXplIGV2ZW50IGlzIGZpcmVkIF9hZnRlcl8gdGhlIGlmcmFtZSBpcyBsb2FkZWQgKHdoaWNoIGlzIGFzeW5jaHJvbm91cylcbiAgICAgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vc3ZlbHRlanMvc3ZlbHRlL2lzc3Vlcy80MjMzXG4gICAgICAgICAgICBmbigpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhcHBlbmQobm9kZSwgaWZyYW1lKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodW5zdWJzY3JpYmUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZGV0YWNoKGlmcmFtZSk7XG4gICAgfTtcbn1cbmNvbnN0IHJlc2l6ZV9vYnNlcnZlcl9jb250ZW50X2JveCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgUmVzaXplT2JzZXJ2ZXJTaW5nbGV0b24oeyBib3g6ICdjb250ZW50LWJveCcgfSk7XG5jb25zdCByZXNpemVfb2JzZXJ2ZXJfYm9yZGVyX2JveCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgUmVzaXplT2JzZXJ2ZXJTaW5nbGV0b24oeyBib3g6ICdib3JkZXItYm94JyB9KTtcbmNvbnN0IHJlc2l6ZV9vYnNlcnZlcl9kZXZpY2VfcGl4ZWxfY29udGVudF9ib3ggPSAvKiBAX19QVVJFX18gKi8gbmV3IFJlc2l6ZU9ic2VydmVyU2luZ2xldG9uKHsgYm94OiAnZGV2aWNlLXBpeGVsLWNvbnRlbnQtYm94JyB9KTtcbmZ1bmN0aW9uIHRvZ2dsZV9jbGFzcyhlbGVtZW50LCBuYW1lLCB0b2dnbGUpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdFt0b2dnbGUgPyAnYWRkJyA6ICdyZW1vdmUnXShuYW1lKTtcbn1cbmZ1bmN0aW9uIGN1c3RvbV9ldmVudCh0eXBlLCBkZXRhaWwsIHsgYnViYmxlcyA9IGZhbHNlLCBjYW5jZWxhYmxlID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgY29uc3QgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGJ1YmJsZXMsIGNhbmNlbGFibGUsIGRldGFpbCk7XG4gICAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBxdWVyeV9zZWxlY3Rvcl9hbGwoc2VsZWN0b3IsIHBhcmVudCA9IGRvY3VtZW50LmJvZHkpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xufVxuZnVuY3Rpb24gaGVhZF9zZWxlY3Rvcihub2RlSWQsIGhlYWQpIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBsZXQgc3RhcnRlZCA9IDA7XG4gICAgZm9yIChjb25zdCBub2RlIG9mIGhlYWQuY2hpbGROb2Rlcykge1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBjb21tZW50IG5vZGUgKi8pIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnQgPSBub2RlLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChjb21tZW50ID09PSBgSEVBRF8ke25vZGVJZH1fRU5EYCkge1xuICAgICAgICAgICAgICAgIHN0YXJ0ZWQgLT0gMTtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1lbnQgPT09IGBIRUFEXyR7bm9kZUlkfV9TVEFSVGApIHtcbiAgICAgICAgICAgICAgICBzdGFydGVkICs9IDE7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RhcnRlZCA+IDApIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5jbGFzcyBIdG1sVGFnIHtcbiAgICBjb25zdHJ1Y3Rvcihpc19zdmcgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmlzX3N2ZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzX3N2ZyA9IGlzX3N2ZztcbiAgICAgICAgdGhpcy5lID0gdGhpcy5uID0gbnVsbDtcbiAgICB9XG4gICAgYyhodG1sKSB7XG4gICAgICAgIHRoaXMuaChodG1sKTtcbiAgICB9XG4gICAgbShodG1sLCB0YXJnZXQsIGFuY2hvciA9IG51bGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzX3N2ZylcbiAgICAgICAgICAgICAgICB0aGlzLmUgPSBzdmdfZWxlbWVudCh0YXJnZXQubm9kZU5hbWUpO1xuICAgICAgICAgICAgLyoqICM3MzY0ICB0YXJnZXQgZm9yIDx0ZW1wbGF0ZT4gbWF5IGJlIHByb3ZpZGVkIGFzICNkb2N1bWVudC1mcmFnbWVudCgxMSkgKi9cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmUgPSBlbGVtZW50KCh0YXJnZXQubm9kZVR5cGUgPT09IDExID8gJ1RFTVBMQVRFJyA6IHRhcmdldC5ub2RlTmFtZSkpO1xuICAgICAgICAgICAgdGhpcy50ID0gdGFyZ2V0LnRhZ05hbWUgIT09ICdURU1QTEFURScgPyB0YXJnZXQgOiB0YXJnZXQuY29udGVudDtcbiAgICAgICAgICAgIHRoaXMuYyhodG1sKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmkoYW5jaG9yKTtcbiAgICB9XG4gICAgaChodG1sKSB7XG4gICAgICAgIHRoaXMuZS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICB0aGlzLm4gPSBBcnJheS5mcm9tKHRoaXMuZS5ub2RlTmFtZSA9PT0gJ1RFTVBMQVRFJyA/IHRoaXMuZS5jb250ZW50LmNoaWxkTm9kZXMgOiB0aGlzLmUuY2hpbGROb2Rlcyk7XG4gICAgfVxuICAgIGkoYW5jaG9yKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpbnNlcnQodGhpcy50LCB0aGlzLm5baV0sIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcChodG1sKSB7XG4gICAgICAgIHRoaXMuZCgpO1xuICAgICAgICB0aGlzLmgoaHRtbCk7XG4gICAgICAgIHRoaXMuaSh0aGlzLmEpO1xuICAgIH1cbiAgICBkKCkge1xuICAgICAgICB0aGlzLm4uZm9yRWFjaChkZXRhY2gpO1xuICAgIH1cbn1cbmNsYXNzIEh0bWxUYWdIeWRyYXRpb24gZXh0ZW5kcyBIdG1sVGFnIHtcbiAgICBjb25zdHJ1Y3RvcihjbGFpbWVkX25vZGVzLCBpc19zdmcgPSBmYWxzZSkge1xuICAgICAgICBzdXBlcihpc19zdmcpO1xuICAgICAgICB0aGlzLmUgPSB0aGlzLm4gPSBudWxsO1xuICAgICAgICB0aGlzLmwgPSBjbGFpbWVkX25vZGVzO1xuICAgIH1cbiAgICBjKGh0bWwpIHtcbiAgICAgICAgaWYgKHRoaXMubCkge1xuICAgICAgICAgICAgdGhpcy5uID0gdGhpcy5sO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIuYyhodG1sKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpKGFuY2hvcikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaW5zZXJ0X2h5ZHJhdGlvbih0aGlzLnQsIHRoaXMubltpXSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGF0dHJpYnV0ZV90b19vYmplY3QoYXR0cmlidXRlcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmVzdWx0W2F0dHJpYnV0ZS5uYW1lXSA9IGF0dHJpYnV0ZS52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGdldF9jdXN0b21fZWxlbWVudHNfc2xvdHMoZWxlbWVudCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGVsZW1lbnQuY2hpbGROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgIHJlc3VsdFtub2RlLnNsb3QgfHwgJ2RlZmF1bHQnXSA9IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNvbnN0cnVjdF9zdmVsdGVfY29tcG9uZW50KGNvbXBvbmVudCwgcHJvcHMpIHtcbiAgICByZXR1cm4gbmV3IGNvbXBvbmVudChwcm9wcyk7XG59XG5cbi8vIHdlIG5lZWQgdG8gc3RvcmUgdGhlIGluZm9ybWF0aW9uIGZvciBtdWx0aXBsZSBkb2N1bWVudHMgYmVjYXVzZSBhIFN2ZWx0ZSBhcHBsaWNhdGlvbiBjb3VsZCBhbHNvIGNvbnRhaW4gaWZyYW1lc1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3N2ZWx0ZWpzL3N2ZWx0ZS9pc3N1ZXMvMzYyNFxuY29uc3QgbWFuYWdlZF9zdHlsZXMgPSBuZXcgTWFwKCk7XG5sZXQgYWN0aXZlID0gMDtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL3N0cmluZy1oYXNoL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5mdW5jdGlvbiBoYXNoKHN0cikge1xuICAgIGxldCBoYXNoID0gNTM4MTtcbiAgICBsZXQgaSA9IHN0ci5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpIF4gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgcmV0dXJuIGhhc2ggPj4+IDA7XG59XG5mdW5jdGlvbiBjcmVhdGVfc3R5bGVfaW5mb3JtYXRpb24oZG9jLCBub2RlKSB7XG4gICAgY29uc3QgaW5mbyA9IHsgc3R5bGVzaGVldDogYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQobm9kZSksIHJ1bGVzOiB7fSB9O1xuICAgIG1hbmFnZWRfc3R5bGVzLnNldChkb2MsIGluZm8pO1xuICAgIHJldHVybiBpbmZvO1xufVxuZnVuY3Rpb24gY3JlYXRlX3J1bGUobm9kZSwgYSwgYiwgZHVyYXRpb24sIGRlbGF5LCBlYXNlLCBmbiwgdWlkID0gMCkge1xuICAgIGNvbnN0IHN0ZXAgPSAxNi42NjYgLyBkdXJhdGlvbjtcbiAgICBsZXQga2V5ZnJhbWVzID0gJ3tcXG4nO1xuICAgIGZvciAobGV0IHAgPSAwOyBwIDw9IDE7IHAgKz0gc3RlcCkge1xuICAgICAgICBjb25zdCB0ID0gYSArIChiIC0gYSkgKiBlYXNlKHApO1xuICAgICAgICBrZXlmcmFtZXMgKz0gcCAqIDEwMCArIGAleyR7Zm4odCwgMSAtIHQpfX1cXG5gO1xuICAgIH1cbiAgICBjb25zdCBydWxlID0ga2V5ZnJhbWVzICsgYDEwMCUgeyR7Zm4oYiwgMSAtIGIpfX1cXG59YDtcbiAgICBjb25zdCBuYW1lID0gYF9fc3ZlbHRlXyR7aGFzaChydWxlKX1fJHt1aWR9YDtcbiAgICBjb25zdCBkb2MgPSBnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSk7XG4gICAgY29uc3QgeyBzdHlsZXNoZWV0LCBydWxlcyB9ID0gbWFuYWdlZF9zdHlsZXMuZ2V0KGRvYykgfHwgY3JlYXRlX3N0eWxlX2luZm9ybWF0aW9uKGRvYywgbm9kZSk7XG4gICAgaWYgKCFydWxlc1tuYW1lXSkge1xuICAgICAgICBydWxlc1tuYW1lXSA9IHRydWU7XG4gICAgICAgIHN0eWxlc2hlZXQuaW5zZXJ0UnVsZShgQGtleWZyYW1lcyAke25hbWV9ICR7cnVsZX1gLCBzdHlsZXNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxuICAgIGNvbnN0IGFuaW1hdGlvbiA9IG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnO1xuICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gYCR7YW5pbWF0aW9uID8gYCR7YW5pbWF0aW9ufSwgYCA6ICcnfSR7bmFtZX0gJHtkdXJhdGlvbn1tcyBsaW5lYXIgJHtkZWxheX1tcyAxIGJvdGhgO1xuICAgIGFjdGl2ZSArPSAxO1xuICAgIHJldHVybiBuYW1lO1xufVxuZnVuY3Rpb24gZGVsZXRlX3J1bGUobm9kZSwgbmFtZSkge1xuICAgIGNvbnN0IHByZXZpb3VzID0gKG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnKS5zcGxpdCgnLCAnKTtcbiAgICBjb25zdCBuZXh0ID0gcHJldmlvdXMuZmlsdGVyKG5hbWVcbiAgICAgICAgPyBhbmltID0+IGFuaW0uaW5kZXhPZihuYW1lKSA8IDAgLy8gcmVtb3ZlIHNwZWNpZmljIGFuaW1hdGlvblxuICAgICAgICA6IGFuaW0gPT4gYW5pbS5pbmRleE9mKCdfX3N2ZWx0ZScpID09PSAtMSAvLyByZW1vdmUgYWxsIFN2ZWx0ZSBhbmltYXRpb25zXG4gICAgKTtcbiAgICBjb25zdCBkZWxldGVkID0gcHJldmlvdXMubGVuZ3RoIC0gbmV4dC5sZW5ndGg7XG4gICAgaWYgKGRlbGV0ZWQpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5hbmltYXRpb24gPSBuZXh0LmpvaW4oJywgJyk7XG4gICAgICAgIGFjdGl2ZSAtPSBkZWxldGVkO1xuICAgICAgICBpZiAoIWFjdGl2ZSlcbiAgICAgICAgICAgIGNsZWFyX3J1bGVzKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYXJfcnVsZXMoKSB7XG4gICAgcmFmKCgpID0+IHtcbiAgICAgICAgaWYgKGFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbWFuYWdlZF9zdHlsZXMuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgb3duZXJOb2RlIH0gPSBpbmZvLnN0eWxlc2hlZXQ7XG4gICAgICAgICAgICAvLyB0aGVyZSBpcyBubyBvd25lck5vZGUgaWYgaXQgcnVucyBvbiBqc2RvbS5cbiAgICAgICAgICAgIGlmIChvd25lck5vZGUpXG4gICAgICAgICAgICAgICAgZGV0YWNoKG93bmVyTm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBtYW5hZ2VkX3N0eWxlcy5jbGVhcigpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVfYW5pbWF0aW9uKG5vZGUsIGZyb20sIGZuLCBwYXJhbXMpIHtcbiAgICBpZiAoIWZyb20pXG4gICAgICAgIHJldHVybiBub29wO1xuICAgIGNvbnN0IHRvID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAoZnJvbS5sZWZ0ID09PSB0by5sZWZ0ICYmIGZyb20ucmlnaHQgPT09IHRvLnJpZ2h0ICYmIGZyb20udG9wID09PSB0by50b3AgJiYgZnJvbS5ib3R0b20gPT09IHRvLmJvdHRvbSlcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgXG4gICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBzaG91bGQgdGhpcyBiZSBzZXBhcmF0ZWQgZnJvbSBkZXN0cnVjdHVyaW5nPyBPciBzdGFydC9lbmQgYWRkZWQgdG8gcHVibGljIGFwaSBhbmQgZG9jdW1lbnRhdGlvbj9cbiAgICBzdGFydDogc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXksIFxuICAgIC8vIEB0cy1pZ25vcmUgdG9kbzpcbiAgICBlbmQgPSBzdGFydF90aW1lICsgZHVyYXRpb24sIHRpY2sgPSBub29wLCBjc3MgfSA9IGZuKG5vZGUsIHsgZnJvbSwgdG8gfSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IHRydWU7XG4gICAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICBsZXQgbmFtZTtcbiAgICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgaWYgKGNzcykge1xuICAgICAgICAgICAgbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDAsIDEsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVsYXkpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBuYW1lKTtcbiAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgIGlmICghc3RhcnRlZCAmJiBub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ZWQgJiYgbm93ID49IGVuZCkge1xuICAgICAgICAgICAgdGljaygxLCAwKTtcbiAgICAgICAgICAgIHN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJ1bm5pbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRlZCkge1xuICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHN0YXJ0X3RpbWU7XG4gICAgICAgICAgICBjb25zdCB0ID0gMCArIDEgKiBlYXNpbmcocCAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIHN0YXJ0KCk7XG4gICAgdGljaygwLCAxKTtcbiAgICByZXR1cm4gc3RvcDtcbn1cbmZ1bmN0aW9uIGZpeF9wb3NpdGlvbihub2RlKSB7XG4gICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgIGlmIChzdHlsZS5wb3NpdGlvbiAhPT0gJ2Fic29sdXRlJyAmJiBzdHlsZS5wb3NpdGlvbiAhPT0gJ2ZpeGVkJykge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHN0eWxlO1xuICAgICAgICBjb25zdCBhID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIG5vZGUuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGFkZF90cmFuc2Zvcm0obm9kZSwgYSk7XG4gICAgfVxufVxuZnVuY3Rpb24gYWRkX3RyYW5zZm9ybShub2RlLCBhKSB7XG4gICAgY29uc3QgYiA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKGEubGVmdCAhPT0gYi5sZWZ0IHx8IGEudG9wICE9PSBiLnRvcCkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHN0eWxlLnRyYW5zZm9ybSA9PT0gJ25vbmUnID8gJycgOiBzdHlsZS50cmFuc2Zvcm07XG4gICAgICAgIG5vZGUuc3R5bGUudHJhbnNmb3JtID0gYCR7dHJhbnNmb3JtfSB0cmFuc2xhdGUoJHthLmxlZnQgLSBiLmxlZnR9cHgsICR7YS50b3AgLSBiLnRvcH1weClgO1xuICAgIH1cbn1cblxubGV0IGN1cnJlbnRfY29tcG9uZW50O1xuZnVuY3Rpb24gc2V0X2N1cnJlbnRfY29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIGN1cnJlbnRfY29tcG9uZW50ID0gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkge1xuICAgIGlmICghY3VycmVudF9jb21wb25lbnQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRnVuY3Rpb24gY2FsbGVkIG91dHNpZGUgY29tcG9uZW50IGluaXRpYWxpemF0aW9uJyk7XG4gICAgcmV0dXJuIGN1cnJlbnRfY29tcG9uZW50O1xufVxuLyoqXG4gKiBTY2hlZHVsZXMgYSBjYWxsYmFjayB0byBydW4gaW1tZWRpYXRlbHkgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgdXBkYXRlZCBhZnRlciBhbnkgc3RhdGUgY2hhbmdlLlxuICpcbiAqIFRoZSBmaXJzdCB0aW1lIHRoZSBjYWxsYmFjayBydW5zIHdpbGwgYmUgYmVmb3JlIHRoZSBpbml0aWFsIGBvbk1vdW50YFxuICpcbiAqIGh0dHBzOi8vc3ZlbHRlLmRldi9kb2NzI3J1bi10aW1lLXN2ZWx0ZS1iZWZvcmV1cGRhdGVcbiAqL1xuZnVuY3Rpb24gYmVmb3JlVXBkYXRlKGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuYmVmb3JlX3VwZGF0ZS5wdXNoKGZuKTtcbn1cbi8qKlxuICogVGhlIGBvbk1vdW50YCBmdW5jdGlvbiBzY2hlZHVsZXMgYSBjYWxsYmFjayB0byBydW4gYXMgc29vbiBhcyB0aGUgY29tcG9uZW50IGhhcyBiZWVuIG1vdW50ZWQgdG8gdGhlIERPTS5cbiAqIEl0IG11c3QgYmUgY2FsbGVkIGR1cmluZyB0aGUgY29tcG9uZW50J3MgaW5pdGlhbGlzYXRpb24gKGJ1dCBkb2Vzbid0IG5lZWQgdG8gbGl2ZSAqaW5zaWRlKiB0aGUgY29tcG9uZW50O1xuICogaXQgY2FuIGJlIGNhbGxlZCBmcm9tIGFuIGV4dGVybmFsIG1vZHVsZSkuXG4gKlxuICogYG9uTW91bnRgIGRvZXMgbm90IHJ1biBpbnNpZGUgYSBbc2VydmVyLXNpZGUgY29tcG9uZW50XSgvZG9jcyNydW4tdGltZS1zZXJ2ZXItc2lkZS1jb21wb25lbnQtYXBpKS5cbiAqXG4gKiBodHRwczovL3N2ZWx0ZS5kZXYvZG9jcyNydW4tdGltZS1zdmVsdGUtb25tb3VudFxuICovXG5mdW5jdGlvbiBvbk1vdW50KGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQub25fbW91bnQucHVzaChmbik7XG59XG4vKipcbiAqIFNjaGVkdWxlcyBhIGNhbGxiYWNrIHRvIHJ1biBpbW1lZGlhdGVseSBhZnRlciB0aGUgY29tcG9uZW50IGhhcyBiZWVuIHVwZGF0ZWQuXG4gKlxuICogVGhlIGZpcnN0IHRpbWUgdGhlIGNhbGxiYWNrIHJ1bnMgd2lsbCBiZSBhZnRlciB0aGUgaW5pdGlhbCBgb25Nb3VudGBcbiAqL1xuZnVuY3Rpb24gYWZ0ZXJVcGRhdGUoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5hZnRlcl91cGRhdGUucHVzaChmbik7XG59XG4vKipcbiAqIFNjaGVkdWxlcyBhIGNhbGxiYWNrIHRvIHJ1biBpbW1lZGlhdGVseSBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXG4gKlxuICogT3V0IG9mIGBvbk1vdW50YCwgYGJlZm9yZVVwZGF0ZWAsIGBhZnRlclVwZGF0ZWAgYW5kIGBvbkRlc3Ryb3lgLCB0aGlzIGlzIHRoZVxuICogb25seSBvbmUgdGhhdCBydW5zIGluc2lkZSBhIHNlcnZlci1zaWRlIGNvbXBvbmVudC5cbiAqXG4gKiBodHRwczovL3N2ZWx0ZS5kZXYvZG9jcyNydW4tdGltZS1zdmVsdGUtb25kZXN0cm95XG4gKi9cbmZ1bmN0aW9uIG9uRGVzdHJveShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX2Rlc3Ryb3kucHVzaChmbik7XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gZXZlbnQgZGlzcGF0Y2hlciB0aGF0IGNhbiBiZSB1c2VkIHRvIGRpc3BhdGNoIFtjb21wb25lbnQgZXZlbnRzXSgvZG9jcyN0ZW1wbGF0ZS1zeW50YXgtY29tcG9uZW50LWRpcmVjdGl2ZXMtb24tZXZlbnRuYW1lKS5cbiAqIEV2ZW50IGRpc3BhdGNoZXJzIGFyZSBmdW5jdGlvbnMgdGhhdCBjYW4gdGFrZSB0d28gYXJndW1lbnRzOiBgbmFtZWAgYW5kIGBkZXRhaWxgLlxuICpcbiAqIENvbXBvbmVudCBldmVudHMgY3JlYXRlZCB3aXRoIGBjcmVhdGVFdmVudERpc3BhdGNoZXJgIGNyZWF0ZSBhXG4gKiBbQ3VzdG9tRXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudCkuXG4gKiBUaGVzZSBldmVudHMgZG8gbm90IFtidWJibGVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvTGVhcm4vSmF2YVNjcmlwdC9CdWlsZGluZ19ibG9ja3MvRXZlbnRzI0V2ZW50X2J1YmJsaW5nX2FuZF9jYXB0dXJlKS5cbiAqIFRoZSBgZGV0YWlsYCBhcmd1bWVudCBjb3JyZXNwb25kcyB0byB0aGUgW0N1c3RvbUV2ZW50LmRldGFpbF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50L2RldGFpbClcbiAqIHByb3BlcnR5IGFuZCBjYW4gY29udGFpbiBhbnkgdHlwZSBvZiBkYXRhLlxuICpcbiAqIGh0dHBzOi8vc3ZlbHRlLmRldi9kb2NzI3J1bi10aW1lLXN2ZWx0ZS1jcmVhdGVldmVudGRpc3BhdGNoZXJcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRXZlbnREaXNwYXRjaGVyKCkge1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IGdldF9jdXJyZW50X2NvbXBvbmVudCgpO1xuICAgIHJldHVybiAodHlwZSwgZGV0YWlsLCB7IGNhbmNlbGFibGUgPSBmYWxzZSB9ID0ge30pID0+IHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gY29tcG9uZW50LiQkLmNhbGxiYWNrc1t0eXBlXTtcbiAgICAgICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICAgICAgLy8gVE9ETyBhcmUgdGhlcmUgc2l0dWF0aW9ucyB3aGVyZSBldmVudHMgY291bGQgYmUgZGlzcGF0Y2hlZFxuICAgICAgICAgICAgLy8gaW4gYSBzZXJ2ZXIgKG5vbi1ET00pIGVudmlyb25tZW50P1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBjdXN0b21fZXZlbnQodHlwZSwgZGV0YWlsLCB7IGNhbmNlbGFibGUgfSk7XG4gICAgICAgICAgICBjYWxsYmFja3Muc2xpY2UoKS5mb3JFYWNoKGZuID0+IHtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKGNvbXBvbmVudCwgZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuICogQXNzb2NpYXRlcyBhbiBhcmJpdHJhcnkgYGNvbnRleHRgIG9iamVjdCB3aXRoIHRoZSBjdXJyZW50IGNvbXBvbmVudCBhbmQgdGhlIHNwZWNpZmllZCBga2V5YFxuICogYW5kIHJldHVybnMgdGhhdCBvYmplY3QuIFRoZSBjb250ZXh0IGlzIHRoZW4gYXZhaWxhYmxlIHRvIGNoaWxkcmVuIG9mIHRoZSBjb21wb25lbnRcbiAqIChpbmNsdWRpbmcgc2xvdHRlZCBjb250ZW50KSB3aXRoIGBnZXRDb250ZXh0YC5cbiAqXG4gKiBMaWtlIGxpZmVjeWNsZSBmdW5jdGlvbnMsIHRoaXMgbXVzdCBiZSBjYWxsZWQgZHVyaW5nIGNvbXBvbmVudCBpbml0aWFsaXNhdGlvbi5cbiAqXG4gKiBodHRwczovL3N2ZWx0ZS5kZXYvZG9jcyNydW4tdGltZS1zdmVsdGUtc2V0Y29udGV4dFxuICovXG5mdW5jdGlvbiBzZXRDb250ZXh0KGtleSwgY29udGV4dCkge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuc2V0KGtleSwgY29udGV4dCk7XG4gICAgcmV0dXJuIGNvbnRleHQ7XG59XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgY29udGV4dCB0aGF0IGJlbG9uZ3MgdG8gdGhlIGNsb3Nlc3QgcGFyZW50IGNvbXBvbmVudCB3aXRoIHRoZSBzcGVjaWZpZWQgYGtleWAuXG4gKiBNdXN0IGJlIGNhbGxlZCBkdXJpbmcgY29tcG9uZW50IGluaXRpYWxpc2F0aW9uLlxuICpcbiAqIGh0dHBzOi8vc3ZlbHRlLmRldi9kb2NzI3J1bi10aW1lLXN2ZWx0ZS1nZXRjb250ZXh0XG4gKi9cbmZ1bmN0aW9uIGdldENvbnRleHQoa2V5KSB7XG4gICAgcmV0dXJuIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuZ2V0KGtleSk7XG59XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgd2hvbGUgY29udGV4dCBtYXAgdGhhdCBiZWxvbmdzIHRvIHRoZSBjbG9zZXN0IHBhcmVudCBjb21wb25lbnQuXG4gKiBNdXN0IGJlIGNhbGxlZCBkdXJpbmcgY29tcG9uZW50IGluaXRpYWxpc2F0aW9uLiBVc2VmdWwsIGZvciBleGFtcGxlLCBpZiB5b3VcbiAqIHByb2dyYW1tYXRpY2FsbHkgY3JlYXRlIGEgY29tcG9uZW50IGFuZCB3YW50IHRvIHBhc3MgdGhlIGV4aXN0aW5nIGNvbnRleHQgdG8gaXQuXG4gKlxuICogaHR0cHM6Ly9zdmVsdGUuZGV2L2RvY3MjcnVuLXRpbWUtc3ZlbHRlLWdldGFsbGNvbnRleHRzXG4gKi9cbmZ1bmN0aW9uIGdldEFsbENvbnRleHRzKCkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0O1xufVxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhIGdpdmVuIGBrZXlgIGhhcyBiZWVuIHNldCBpbiB0aGUgY29udGV4dCBvZiBhIHBhcmVudCBjb21wb25lbnQuXG4gKiBNdXN0IGJlIGNhbGxlZCBkdXJpbmcgY29tcG9uZW50IGluaXRpYWxpc2F0aW9uLlxuICpcbiAqIGh0dHBzOi8vc3ZlbHRlLmRldi9kb2NzI3J1bi10aW1lLXN2ZWx0ZS1oYXNjb250ZXh0XG4gKi9cbmZ1bmN0aW9uIGhhc0NvbnRleHQoa2V5KSB7XG4gICAgcmV0dXJuIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuaGFzKGtleSk7XG59XG4vLyBUT0RPIGZpZ3VyZSBvdXQgaWYgd2Ugc3RpbGwgd2FudCB0byBzdXBwb3J0XG4vLyBzaG9ydGhhbmQgZXZlbnRzLCBvciBpZiB3ZSB3YW50IHRvIGltcGxlbWVudFxuLy8gYSByZWFsIGJ1YmJsaW5nIG1lY2hhbmlzbVxuZnVuY3Rpb24gYnViYmxlKGNvbXBvbmVudCwgZXZlbnQpIHtcbiAgICBjb25zdCBjYWxsYmFja3MgPSBjb21wb25lbnQuJCQuY2FsbGJhY2tzW2V2ZW50LnR5cGVdO1xuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjYWxsYmFja3Muc2xpY2UoKS5mb3JFYWNoKGZuID0+IGZuLmNhbGwodGhpcywgZXZlbnQpKTtcbiAgICB9XG59XG5cbmNvbnN0IGRpcnR5X2NvbXBvbmVudHMgPSBbXTtcbmNvbnN0IGludHJvcyA9IHsgZW5hYmxlZDogZmFsc2UgfTtcbmNvbnN0IGJpbmRpbmdfY2FsbGJhY2tzID0gW107XG5sZXQgcmVuZGVyX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgZmx1c2hfY2FsbGJhY2tzID0gW107XG5jb25zdCByZXNvbHZlZF9wcm9taXNlID0gLyogQF9fUFVSRV9fICovIFByb21pc2UucmVzb2x2ZSgpO1xubGV0IHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIHNjaGVkdWxlX3VwZGF0ZSgpIHtcbiAgICBpZiAoIXVwZGF0ZV9zY2hlZHVsZWQpIHtcbiAgICAgICAgdXBkYXRlX3NjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgIHJlc29sdmVkX3Byb21pc2UudGhlbihmbHVzaCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdGljaygpIHtcbiAgICBzY2hlZHVsZV91cGRhdGUoKTtcbiAgICByZXR1cm4gcmVzb2x2ZWRfcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGFkZF9yZW5kZXJfY2FsbGJhY2soZm4pIHtcbiAgICByZW5kZXJfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gYWRkX2ZsdXNoX2NhbGxiYWNrKGZuKSB7XG4gICAgZmx1c2hfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxuLy8gZmx1c2goKSBjYWxscyBjYWxsYmFja3MgaW4gdGhpcyBvcmRlcjpcbi8vIDEuIEFsbCBiZWZvcmVVcGRhdGUgY2FsbGJhY2tzLCBpbiBvcmRlcjogcGFyZW50cyBiZWZvcmUgY2hpbGRyZW5cbi8vIDIuIEFsbCBiaW5kOnRoaXMgY2FsbGJhY2tzLCBpbiByZXZlcnNlIG9yZGVyOiBjaGlsZHJlbiBiZWZvcmUgcGFyZW50cy5cbi8vIDMuIEFsbCBhZnRlclVwZGF0ZSBjYWxsYmFja3MsIGluIG9yZGVyOiBwYXJlbnRzIGJlZm9yZSBjaGlsZHJlbi4gRVhDRVBUXG4vLyAgICBmb3IgYWZ0ZXJVcGRhdGVzIGNhbGxlZCBkdXJpbmcgdGhlIGluaXRpYWwgb25Nb3VudCwgd2hpY2ggYXJlIGNhbGxlZCBpblxuLy8gICAgcmV2ZXJzZSBvcmRlcjogY2hpbGRyZW4gYmVmb3JlIHBhcmVudHMuXG4vLyBTaW5jZSBjYWxsYmFja3MgbWlnaHQgdXBkYXRlIGNvbXBvbmVudCB2YWx1ZXMsIHdoaWNoIGNvdWxkIHRyaWdnZXIgYW5vdGhlclxuLy8gY2FsbCB0byBmbHVzaCgpLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGd1YXJkIGFnYWluc3QgdGhpczpcbi8vIDEuIER1cmluZyBiZWZvcmVVcGRhdGUsIGFueSB1cGRhdGVkIGNvbXBvbmVudHMgd2lsbCBiZSBhZGRlZCB0byB0aGVcbi8vICAgIGRpcnR5X2NvbXBvbmVudHMgYXJyYXkgYW5kIHdpbGwgY2F1c2UgYSByZWVudHJhbnQgY2FsbCB0byBmbHVzaCgpLiBCZWNhdXNlXG4vLyAgICB0aGUgZmx1c2ggaW5kZXggaXMga2VwdCBvdXRzaWRlIHRoZSBmdW5jdGlvbiwgdGhlIHJlZW50cmFudCBjYWxsIHdpbGwgcGlja1xuLy8gICAgdXAgd2hlcmUgdGhlIGVhcmxpZXIgY2FsbCBsZWZ0IG9mZiBhbmQgZ28gdGhyb3VnaCBhbGwgZGlydHkgY29tcG9uZW50cy4gVGhlXG4vLyAgICBjdXJyZW50X2NvbXBvbmVudCB2YWx1ZSBpcyBzYXZlZCBhbmQgcmVzdG9yZWQgc28gdGhhdCB0aGUgcmVlbnRyYW50IGNhbGwgd2lsbFxuLy8gICAgbm90IGludGVyZmVyZSB3aXRoIHRoZSBcInBhcmVudFwiIGZsdXNoKCkgY2FsbC5cbi8vIDIuIGJpbmQ6dGhpcyBjYWxsYmFja3MgY2Fubm90IHRyaWdnZXIgbmV3IGZsdXNoKCkgY2FsbHMuXG4vLyAzLiBEdXJpbmcgYWZ0ZXJVcGRhdGUsIGFueSB1cGRhdGVkIGNvbXBvbmVudHMgd2lsbCBOT1QgaGF2ZSB0aGVpciBhZnRlclVwZGF0ZVxuLy8gICAgY2FsbGJhY2sgY2FsbGVkIGEgc2Vjb25kIHRpbWU7IHRoZSBzZWVuX2NhbGxiYWNrcyBzZXQsIG91dHNpZGUgdGhlIGZsdXNoKClcbi8vICAgIGZ1bmN0aW9uLCBndWFyYW50ZWVzIHRoaXMgYmVoYXZpb3IuXG5jb25zdCBzZWVuX2NhbGxiYWNrcyA9IG5ldyBTZXQoKTtcbmxldCBmbHVzaGlkeCA9IDA7IC8vIERvICpub3QqIG1vdmUgdGhpcyBpbnNpZGUgdGhlIGZsdXNoKCkgZnVuY3Rpb25cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIC8vIERvIG5vdCByZWVudGVyIGZsdXNoIHdoaWxlIGRpcnR5IGNvbXBvbmVudHMgYXJlIHVwZGF0ZWQsIGFzIHRoaXMgY2FuXG4gICAgLy8gcmVzdWx0IGluIGFuIGluZmluaXRlIGxvb3AuIEluc3RlYWQsIGxldCB0aGUgaW5uZXIgZmx1c2ggaGFuZGxlIGl0LlxuICAgIC8vIFJlZW50cmFuY3kgaXMgb2sgYWZ0ZXJ3YXJkcyBmb3IgYmluZGluZ3MgZXRjLlxuICAgIGlmIChmbHVzaGlkeCAhPT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNhdmVkX2NvbXBvbmVudCA9IGN1cnJlbnRfY29tcG9uZW50O1xuICAgIGRvIHtcbiAgICAgICAgLy8gZmlyc3QsIGNhbGwgYmVmb3JlVXBkYXRlIGZ1bmN0aW9uc1xuICAgICAgICAvLyBhbmQgdXBkYXRlIGNvbXBvbmVudHNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdoaWxlIChmbHVzaGlkeCA8IGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gZGlydHlfY29tcG9uZW50c1tmbHVzaGlkeF07XG4gICAgICAgICAgICAgICAgZmx1c2hpZHgrKztcbiAgICAgICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICB1cGRhdGUoY29tcG9uZW50LiQkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gcmVzZXQgZGlydHkgc3RhdGUgdG8gbm90IGVuZCB1cCBpbiBhIGRlYWRsb2NrZWQgc3RhdGUgYW5kIHRoZW4gcmV0aHJvd1xuICAgICAgICAgICAgZGlydHlfY29tcG9uZW50cy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgZmx1c2hpZHggPSAwO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgICAgIGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgZmx1c2hpZHggPSAwO1xuICAgICAgICB3aGlsZSAoYmluZGluZ19jYWxsYmFja3MubGVuZ3RoKVxuICAgICAgICAgICAgYmluZGluZ19jYWxsYmFja3MucG9wKCkoKTtcbiAgICAgICAgLy8gdGhlbiwgb25jZSBjb21wb25lbnRzIGFyZSB1cGRhdGVkLCBjYWxsXG4gICAgICAgIC8vIGFmdGVyVXBkYXRlIGZ1bmN0aW9ucy4gVGhpcyBtYXkgY2F1c2VcbiAgICAgICAgLy8gc3Vic2VxdWVudCB1cGRhdGVzLi4uXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVuZGVyX2NhbGxiYWNrcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSByZW5kZXJfY2FsbGJhY2tzW2ldO1xuICAgICAgICAgICAgaWYgKCFzZWVuX2NhbGxiYWNrcy5oYXMoY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgLy8gLi4uc28gZ3VhcmQgYWdhaW5zdCBpbmZpbml0ZSBsb29wc1xuICAgICAgICAgICAgICAgIHNlZW5fY2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgfSB3aGlsZSAoZGlydHlfY29tcG9uZW50cy5sZW5ndGgpO1xuICAgIHdoaWxlIChmbHVzaF9jYWxsYmFja3MubGVuZ3RoKSB7XG4gICAgICAgIGZsdXNoX2NhbGxiYWNrcy5wb3AoKSgpO1xuICAgIH1cbiAgICB1cGRhdGVfc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgc2Vlbl9jYWxsYmFja3MuY2xlYXIoKTtcbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQoc2F2ZWRfY29tcG9uZW50KTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZSgkJCkge1xuICAgIGlmICgkJC5mcmFnbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAkJC51cGRhdGUoKTtcbiAgICAgICAgcnVuX2FsbCgkJC5iZWZvcmVfdXBkYXRlKTtcbiAgICAgICAgY29uc3QgZGlydHkgPSAkJC5kaXJ0eTtcbiAgICAgICAgJCQuZGlydHkgPSBbLTFdO1xuICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5wKCQkLmN0eCwgZGlydHkpO1xuICAgICAgICAkJC5hZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbiAgICB9XG59XG4vKipcbiAqIFVzZWZ1bCBmb3IgZXhhbXBsZSB0byBleGVjdXRlIHJlbWFpbmluZyBgYWZ0ZXJVcGRhdGVgIGNhbGxiYWNrcyBiZWZvcmUgZXhlY3V0aW5nIGBkZXN0cm95YC5cbiAqL1xuZnVuY3Rpb24gZmx1c2hfcmVuZGVyX2NhbGxiYWNrcyhmbnMpIHtcbiAgICBjb25zdCBmaWx0ZXJlZCA9IFtdO1xuICAgIGNvbnN0IHRhcmdldHMgPSBbXTtcbiAgICByZW5kZXJfY2FsbGJhY2tzLmZvckVhY2goKGMpID0+IGZucy5pbmRleE9mKGMpID09PSAtMSA/IGZpbHRlcmVkLnB1c2goYykgOiB0YXJnZXRzLnB1c2goYykpO1xuICAgIHRhcmdldHMuZm9yRWFjaCgoYykgPT4gYygpKTtcbiAgICByZW5kZXJfY2FsbGJhY2tzID0gZmlsdGVyZWQ7XG59XG5cbmxldCBwcm9taXNlO1xuZnVuY3Rpb24gd2FpdCgpIHtcbiAgICBpZiAoIXByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoKG5vZGUsIGRpcmVjdGlvbiwga2luZCkge1xuICAgIG5vZGUuZGlzcGF0Y2hFdmVudChjdXN0b21fZXZlbnQoYCR7ZGlyZWN0aW9uID8gJ2ludHJvJyA6ICdvdXRybyd9JHtraW5kfWApKTtcbn1cbmNvbnN0IG91dHJvaW5nID0gbmV3IFNldCgpO1xubGV0IG91dHJvcztcbmZ1bmN0aW9uIGdyb3VwX291dHJvcygpIHtcbiAgICBvdXRyb3MgPSB7XG4gICAgICAgIHI6IDAsXG4gICAgICAgIGM6IFtdLFxuICAgICAgICBwOiBvdXRyb3MgLy8gcGFyZW50IGdyb3VwXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNoZWNrX291dHJvcygpIHtcbiAgICBpZiAoIW91dHJvcy5yKSB7XG4gICAgICAgIHJ1bl9hbGwob3V0cm9zLmMpO1xuICAgIH1cbiAgICBvdXRyb3MgPSBvdXRyb3MucDtcbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb25faW4oYmxvY2ssIGxvY2FsKSB7XG4gICAgaWYgKGJsb2NrICYmIGJsb2NrLmkpIHtcbiAgICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgICAgYmxvY2suaShsb2NhbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdHJhbnNpdGlvbl9vdXQoYmxvY2ssIGxvY2FsLCBkZXRhY2gsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGJsb2NrICYmIGJsb2NrLm8pIHtcbiAgICAgICAgaWYgKG91dHJvaW5nLmhhcyhibG9jaykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIG91dHJvaW5nLmFkZChibG9jayk7XG4gICAgICAgIG91dHJvcy5jLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGlmIChkZXRhY2gpXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLmQoMSk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGJsb2NrLm8obG9jYWwpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cbn1cbmNvbnN0IG51bGxfdHJhbnNpdGlvbiA9IHsgZHVyYXRpb246IDAgfTtcbmZ1bmN0aW9uIGNyZWF0ZV9pbl90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMpIHtcbiAgICBjb25zdCBvcHRpb25zID0geyBkaXJlY3Rpb246ICdpbicgfTtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zLCBvcHRpb25zKTtcbiAgICBsZXQgcnVubmluZyA9IGZhbHNlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBsZXQgdGFzaztcbiAgICBsZXQgdWlkID0gMDtcbiAgICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdvKCkge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAwLCAxLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzLCB1aWQrKyk7XG4gICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBub3coKSArIGRlbGF5O1xuICAgICAgICBjb25zdCBlbmRfdGltZSA9IHN0YXJ0X3RpbWUgKyBkdXJhdGlvbjtcbiAgICAgICAgaWYgKHRhc2spXG4gICAgICAgICAgICB0YXNrLmFib3J0KCk7XG4gICAgICAgIHJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIHRydWUsICdzdGFydCcpKTtcbiAgICAgICAgdGFzayA9IGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBlbmRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDEsIDApO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCB0cnVlLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlYXNpbmcoKG5vdyAtIHN0YXJ0X3RpbWUpIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVubmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQoKSB7XG4gICAgICAgICAgICBpZiAoc3RhcnRlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUpO1xuICAgICAgICAgICAgaWYgKGlzX2Z1bmN0aW9uKGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICBjb25maWcgPSBjb25maWcob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oZ28pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52YWxpZGF0ZSgpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHsgZGlyZWN0aW9uOiAnb3V0JyB9O1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMsIG9wdGlvbnMpO1xuICAgIGxldCBydW5uaW5nID0gdHJ1ZTtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWU7XG4gICAgY29uc3QgZ3JvdXAgPSBvdXRyb3M7XG4gICAgZ3JvdXAuciArPSAxO1xuICAgIGZ1bmN0aW9uIGdvKCkge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAxLCAwLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXk7XG4gICAgICAgIGNvbnN0IGVuZF90aW1lID0gc3RhcnRfdGltZSArIGR1cmF0aW9uO1xuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnc3RhcnQnKSk7XG4gICAgICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBlbmRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBmYWxzZSwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS0tZ3JvdXAucikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB3aWxsIHJlc3VsdCBpbiBgZW5kKClgIGJlaW5nIGNhbGxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIGRvbid0IG5lZWQgdG8gY2xlYW4gdXAgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuX2FsbChncm91cC5jKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZWFzaW5nKChub3cgLSBzdGFydF90aW1lKSAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGljaygxIC0gdCwgdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICB3YWl0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBjb25maWcgPSBjb25maWcob3B0aW9ucyk7XG4gICAgICAgICAgICBnbygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGdvKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGVuZChyZXNldCkge1xuICAgICAgICAgICAgaWYgKHJlc2V0ICYmIGNvbmZpZy50aWNrKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLnRpY2soMSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfYmlkaXJlY3Rpb25hbF90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMsIGludHJvKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHsgZGlyZWN0aW9uOiAnYm90aCcgfTtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zLCBvcHRpb25zKTtcbiAgICBsZXQgdCA9IGludHJvID8gMCA6IDE7XG4gICAgbGV0IHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgbGV0IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lID0gbnVsbDtcbiAgICBmdW5jdGlvbiBjbGVhcl9hbmltYXRpb24oKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdChwcm9ncmFtLCBkdXJhdGlvbikge1xuICAgICAgICBjb25zdCBkID0gKHByb2dyYW0uYiAtIHQpO1xuICAgICAgICBkdXJhdGlvbiAqPSBNYXRoLmFicyhkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGE6IHQsXG4gICAgICAgICAgICBiOiBwcm9ncmFtLmIsXG4gICAgICAgICAgICBkLFxuICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICBzdGFydDogcHJvZ3JhbS5zdGFydCxcbiAgICAgICAgICAgIGVuZDogcHJvZ3JhbS5zdGFydCArIGR1cmF0aW9uLFxuICAgICAgICAgICAgZ3JvdXA6IHByb2dyYW0uZ3JvdXBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ28oYikge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBjb25zdCBwcm9ncmFtID0ge1xuICAgICAgICAgICAgc3RhcnQ6IG5vdygpICsgZGVsYXksXG4gICAgICAgICAgICBiXG4gICAgICAgIH07XG4gICAgICAgIGlmICghYikge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgIHByb2dyYW0uZ3JvdXAgPSBvdXRyb3M7XG4gICAgICAgICAgICBvdXRyb3MuciArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5uaW5nX3Byb2dyYW0gfHwgcGVuZGluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICBwZW5kaW5nX3Byb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhbiBpbnRybywgYW5kIHRoZXJlJ3MgYSBkZWxheSwgd2UgbmVlZCB0byBkb1xuICAgICAgICAgICAgLy8gYW4gaW5pdGlhbCB0aWNrIGFuZC9vciBhcHBseSBDU1MgYW5pbWF0aW9uIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCB0LCBiLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiKVxuICAgICAgICAgICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBpbml0KHByb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgYiwgJ3N0YXJ0JykpO1xuICAgICAgICAgICAgbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nX3Byb2dyYW0gJiYgbm93ID4gcGVuZGluZ19wcm9ncmFtLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocGVuZGluZ19wcm9ncmFtLCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnc3RhcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIHJ1bm5pbmdfcHJvZ3JhbS5iLCBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24sIDAsIGVhc2luZywgY29uZmlnLmNzcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5lbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2sodCA9IHJ1bm5pbmdfcHJvZ3JhbS5iLCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBydW5uaW5nX3Byb2dyYW0uYiwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSBkb25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbS5iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGludHJvIFx1MjAxNCB3ZSBjYW4gdGlkeSB1cCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG91dHJvIFx1MjAxNCBuZWVkcyB0byBiZSBjb29yZGluYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIS0tcnVubmluZ19wcm9ncmFtLmdyb3VwLnIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW5fYWxsKHJ1bm5pbmdfcHJvZ3JhbS5ncm91cC5jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vdyA+PSBydW5uaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBub3cgLSBydW5uaW5nX3Byb2dyYW0uc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ID0gcnVubmluZ19wcm9ncmFtLmEgKyBydW5uaW5nX3Byb2dyYW0uZCAqIGVhc2luZyhwIC8gcnVubmluZ19wcm9ncmFtLmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhIShydW5uaW5nX3Byb2dyYW0gfHwgcGVuZGluZ19wcm9ncmFtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJ1bihiKSB7XG4gICAgICAgICAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICAgICAgICAgIHdhaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBjb25maWcob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGdvKGIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ28oYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVuZCgpIHtcbiAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGhhbmRsZV9wcm9taXNlKHByb21pc2UsIGluZm8pIHtcbiAgICBjb25zdCB0b2tlbiA9IGluZm8udG9rZW4gPSB7fTtcbiAgICBmdW5jdGlvbiB1cGRhdGUodHlwZSwgaW5kZXgsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGluZm8udG9rZW4gIT09IHRva2VuKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpbmZvLnJlc29sdmVkID0gdmFsdWU7XG4gICAgICAgIGxldCBjaGlsZF9jdHggPSBpbmZvLmN0eDtcbiAgICAgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjaGlsZF9jdHggPSBjaGlsZF9jdHguc2xpY2UoKTtcbiAgICAgICAgICAgIGNoaWxkX2N0eFtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmxvY2sgPSB0eXBlICYmIChpbmZvLmN1cnJlbnQgPSB0eXBlKShjaGlsZF9jdHgpO1xuICAgICAgICBsZXQgbmVlZHNfZmx1c2ggPSBmYWxzZTtcbiAgICAgICAgaWYgKGluZm8uYmxvY2spIHtcbiAgICAgICAgICAgIGlmIChpbmZvLmJsb2Nrcykge1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2tzLmZvckVhY2goKGJsb2NrLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpbmRleCAmJiBibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBfb3V0cm9zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uX291dChibG9jaywgMSwgMSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLmJsb2Nrc1tpXSA9PT0gYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5ibG9ja3NbaV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tfb3V0cm9zKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2suZCgxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJsb2NrLmMoKTtcbiAgICAgICAgICAgIHRyYW5zaXRpb25faW4oYmxvY2ssIDEpO1xuICAgICAgICAgICAgYmxvY2subShpbmZvLm1vdW50KCksIGluZm8uYW5jaG9yKTtcbiAgICAgICAgICAgIG5lZWRzX2ZsdXNoID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpbmZvLmJsb2NrID0gYmxvY2s7XG4gICAgICAgIGlmIChpbmZvLmJsb2NrcylcbiAgICAgICAgICAgIGluZm8uYmxvY2tzW2luZGV4XSA9IGJsb2NrO1xuICAgICAgICBpZiAobmVlZHNfZmx1c2gpIHtcbiAgICAgICAgICAgIGZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzX3Byb21pc2UocHJvbWlzZSkpIHtcbiAgICAgICAgY29uc3QgY3VycmVudF9jb21wb25lbnQgPSBnZXRfY3VycmVudF9jb21wb25lbnQoKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjdXJyZW50X2NvbXBvbmVudCk7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby50aGVuLCAxLCBpbmZvLnZhbHVlLCB2YWx1ZSk7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjdXJyZW50X2NvbXBvbmVudCk7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby5jYXRjaCwgMiwgaW5mby5lcnJvciwgZXJyb3IpO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICAgICAgaWYgKCFpbmZvLmhhc0NhdGNoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBpZiB3ZSBwcmV2aW91c2x5IGhhZCBhIHRoZW4vY2F0Y2ggYmxvY2ssIGRlc3Ryb3kgaXRcbiAgICAgICAgaWYgKGluZm8uY3VycmVudCAhPT0gaW5mby5wZW5kaW5nKSB7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby5wZW5kaW5nLCAwKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoaW5mby5jdXJyZW50ICE9PSBpbmZvLnRoZW4pIHtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnRoZW4sIDEsIGluZm8udmFsdWUsIHByb21pc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5mby5yZXNvbHZlZCA9IHByb21pc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlX2F3YWl0X2Jsb2NrX2JyYW5jaChpbmZvLCBjdHgsIGRpcnR5KSB7XG4gICAgY29uc3QgY2hpbGRfY3R4ID0gY3R4LnNsaWNlKCk7XG4gICAgY29uc3QgeyByZXNvbHZlZCB9ID0gaW5mbztcbiAgICBpZiAoaW5mby5jdXJyZW50ID09PSBpbmZvLnRoZW4pIHtcbiAgICAgICAgY2hpbGRfY3R4W2luZm8udmFsdWVdID0gcmVzb2x2ZWQ7XG4gICAgfVxuICAgIGlmIChpbmZvLmN1cnJlbnQgPT09IGluZm8uY2F0Y2gpIHtcbiAgICAgICAgY2hpbGRfY3R4W2luZm8uZXJyb3JdID0gcmVzb2x2ZWQ7XG4gICAgfVxuICAgIGluZm8uYmxvY2sucChjaGlsZF9jdHgsIGRpcnR5KTtcbn1cblxuZnVuY3Rpb24gZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZCgxKTtcbiAgICBsb29rdXAuZGVsZXRlKGJsb2NrLmtleSk7XG59XG5mdW5jdGlvbiBvdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgdHJhbnNpdGlvbl9vdXQoYmxvY2ssIDEsIDEsICgpID0+IHtcbiAgICAgICAgbG9va3VwLmRlbGV0ZShibG9jay5rZXkpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZml4X2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5mKCk7XG4gICAgZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKTtcbn1cbmZ1bmN0aW9uIGZpeF9hbmRfb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmYoKTtcbiAgICBvdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZV9rZXllZF9lYWNoKG9sZF9ibG9ja3MsIGRpcnR5LCBnZXRfa2V5LCBkeW5hbWljLCBjdHgsIGxpc3QsIGxvb2t1cCwgbm9kZSwgZGVzdHJveSwgY3JlYXRlX2VhY2hfYmxvY2ssIG5leHQsIGdldF9jb250ZXh0KSB7XG4gICAgbGV0IG8gPSBvbGRfYmxvY2tzLmxlbmd0aDtcbiAgICBsZXQgbiA9IGxpc3QubGVuZ3RoO1xuICAgIGxldCBpID0gbztcbiAgICBjb25zdCBvbGRfaW5kZXhlcyA9IHt9O1xuICAgIHdoaWxlIChpLS0pXG4gICAgICAgIG9sZF9pbmRleGVzW29sZF9ibG9ja3NbaV0ua2V5XSA9IGk7XG4gICAgY29uc3QgbmV3X2Jsb2NrcyA9IFtdO1xuICAgIGNvbnN0IG5ld19sb29rdXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgZGVsdGFzID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHVwZGF0ZXMgPSBbXTtcbiAgICBpID0gbjtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkX2N0eCA9IGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSk7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IGJsb2NrID0gbG9va3VwLmdldChrZXkpO1xuICAgICAgICBpZiAoIWJsb2NrKSB7XG4gICAgICAgICAgICBibG9jayA9IGNyZWF0ZV9lYWNoX2Jsb2NrKGtleSwgY2hpbGRfY3R4KTtcbiAgICAgICAgICAgIGJsb2NrLmMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkeW5hbWljKSB7XG4gICAgICAgICAgICAvLyBkZWZlciB1cGRhdGVzIHVudGlsIGFsbCB0aGUgRE9NIHNodWZmbGluZyBpcyBkb25lXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goKCkgPT4gYmxvY2sucChjaGlsZF9jdHgsIGRpcnR5KSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV3X2xvb2t1cC5zZXQoa2V5LCBuZXdfYmxvY2tzW2ldID0gYmxvY2spO1xuICAgICAgICBpZiAoa2V5IGluIG9sZF9pbmRleGVzKVxuICAgICAgICAgICAgZGVsdGFzLnNldChrZXksIE1hdGguYWJzKGkgLSBvbGRfaW5kZXhlc1trZXldKSk7XG4gICAgfVxuICAgIGNvbnN0IHdpbGxfbW92ZSA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBkaWRfbW92ZSA9IG5ldyBTZXQoKTtcbiAgICBmdW5jdGlvbiBpbnNlcnQoYmxvY2spIHtcbiAgICAgICAgdHJhbnNpdGlvbl9pbihibG9jaywgMSk7XG4gICAgICAgIGJsb2NrLm0obm9kZSwgbmV4dCk7XG4gICAgICAgIGxvb2t1cC5zZXQoYmxvY2sua2V5LCBibG9jayk7XG4gICAgICAgIG5leHQgPSBibG9jay5maXJzdDtcbiAgICAgICAgbi0tO1xuICAgIH1cbiAgICB3aGlsZSAobyAmJiBuKSB7XG4gICAgICAgIGNvbnN0IG5ld19ibG9jayA9IG5ld19ibG9ja3NbbiAtIDFdO1xuICAgICAgICBjb25zdCBvbGRfYmxvY2sgPSBvbGRfYmxvY2tzW28gLSAxXTtcbiAgICAgICAgY29uc3QgbmV3X2tleSA9IG5ld19ibG9jay5rZXk7XG4gICAgICAgIGNvbnN0IG9sZF9rZXkgPSBvbGRfYmxvY2sua2V5O1xuICAgICAgICBpZiAobmV3X2Jsb2NrID09PSBvbGRfYmxvY2spIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgIG5leHQgPSBuZXdfYmxvY2suZmlyc3Q7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgICAgICBuLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIW5ld19sb29rdXAuaGFzKG9sZF9rZXkpKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgb2xkIGJsb2NrXG4gICAgICAgICAgICBkZXN0cm95KG9sZF9ibG9jaywgbG9va3VwKTtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbG9va3VwLmhhcyhuZXdfa2V5KSB8fCB3aWxsX21vdmUuaGFzKG5ld19rZXkpKSB7XG4gICAgICAgICAgICBpbnNlcnQobmV3X2Jsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaWRfbW92ZS5oYXMob2xkX2tleSkpIHtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWx0YXMuZ2V0KG5ld19rZXkpID4gZGVsdGFzLmdldChvbGRfa2V5KSkge1xuICAgICAgICAgICAgZGlkX21vdmUuYWRkKG5ld19rZXkpO1xuICAgICAgICAgICAgaW5zZXJ0KG5ld19ibG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3aWxsX21vdmUuYWRkKG9sZF9rZXkpO1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdoaWxlIChvLS0pIHtcbiAgICAgICAgY29uc3Qgb2xkX2Jsb2NrID0gb2xkX2Jsb2Nrc1tvXTtcbiAgICAgICAgaWYgKCFuZXdfbG9va3VwLmhhcyhvbGRfYmxvY2sua2V5KSlcbiAgICAgICAgICAgIGRlc3Ryb3kob2xkX2Jsb2NrLCBsb29rdXApO1xuICAgIH1cbiAgICB3aGlsZSAobilcbiAgICAgICAgaW5zZXJ0KG5ld19ibG9ja3NbbiAtIDFdKTtcbiAgICBydW5fYWxsKHVwZGF0ZXMpO1xuICAgIHJldHVybiBuZXdfYmxvY2tzO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfZWFjaF9rZXlzKGN0eCwgbGlzdCwgZ2V0X2NvbnRleHQsIGdldF9rZXkpIHtcbiAgICBjb25zdCBrZXlzID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRfa2V5KGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSkpO1xuICAgICAgICBpZiAoa2V5cy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaGF2ZSBkdXBsaWNhdGUga2V5cyBpbiBhIGtleWVkIGVhY2gnKTtcbiAgICAgICAgfVxuICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0X3NwcmVhZF91cGRhdGUobGV2ZWxzLCB1cGRhdGVzKSB7XG4gICAgY29uc3QgdXBkYXRlID0ge307XG4gICAgY29uc3QgdG9fbnVsbF9vdXQgPSB7fTtcbiAgICBjb25zdCBhY2NvdW50ZWRfZm9yID0geyAkJHNjb3BlOiAxIH07XG4gICAgbGV0IGkgPSBsZXZlbHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY29uc3QgbyA9IGxldmVsc1tpXTtcbiAgICAgICAgY29uc3QgbiA9IHVwZGF0ZXNbaV07XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG4pKVxuICAgICAgICAgICAgICAgICAgICB0b19udWxsX291dFtrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFjY291bnRlZF9mb3Jba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVba2V5XSA9IG5ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXZlbHNbaV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbykge1xuICAgICAgICAgICAgICAgIGFjY291bnRlZF9mb3Jba2V5XSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdG9fbnVsbF9vdXQpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIHVwZGF0ZSkpXG4gICAgICAgICAgICB1cGRhdGVba2V5XSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZTtcbn1cbmZ1bmN0aW9uIGdldF9zcHJlYWRfb2JqZWN0KHNwcmVhZF9wcm9wcykge1xuICAgIHJldHVybiB0eXBlb2Ygc3ByZWFkX3Byb3BzID09PSAnb2JqZWN0JyAmJiBzcHJlYWRfcHJvcHMgIT09IG51bGwgPyBzcHJlYWRfcHJvcHMgOiB7fTtcbn1cblxuY29uc3QgX2Jvb2xlYW5fYXR0cmlidXRlcyA9IFtcbiAgICAnYWxsb3dmdWxsc2NyZWVuJyxcbiAgICAnYWxsb3dwYXltZW50cmVxdWVzdCcsXG4gICAgJ2FzeW5jJyxcbiAgICAnYXV0b2ZvY3VzJyxcbiAgICAnYXV0b3BsYXknLFxuICAgICdjaGVja2VkJyxcbiAgICAnY29udHJvbHMnLFxuICAgICdkZWZhdWx0JyxcbiAgICAnZGVmZXInLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2Zvcm1ub3ZhbGlkYXRlJyxcbiAgICAnaGlkZGVuJyxcbiAgICAnaW5lcnQnLFxuICAgICdpc21hcCcsXG4gICAgJ2xvb3AnLFxuICAgICdtdWx0aXBsZScsXG4gICAgJ211dGVkJyxcbiAgICAnbm9tb2R1bGUnLFxuICAgICdub3ZhbGlkYXRlJyxcbiAgICAnb3BlbicsXG4gICAgJ3BsYXlzaW5saW5lJyxcbiAgICAncmVhZG9ubHknLFxuICAgICdyZXF1aXJlZCcsXG4gICAgJ3JldmVyc2VkJyxcbiAgICAnc2VsZWN0ZWQnXG5dO1xuLyoqXG4gKiBMaXN0IG9mIEhUTUwgYm9vbGVhbiBhdHRyaWJ1dGVzIChlLmcuIGA8aW5wdXQgZGlzYWJsZWQ+YCkuXG4gKiBTb3VyY2U6IGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZGljZXMuaHRtbFxuICovXG5jb25zdCBib29sZWFuX2F0dHJpYnV0ZXMgPSBuZXcgU2V0KFsuLi5fYm9vbGVhbl9hdHRyaWJ1dGVzXSk7XG5cbi8qKiByZWdleCBvZiBhbGwgaHRtbCB2b2lkIGVsZW1lbnQgbmFtZXMgKi9cbmNvbnN0IHZvaWRfZWxlbWVudF9uYW1lcyA9IC9eKD86YXJlYXxiYXNlfGJyfGNvbHxjb21tYW5kfGVtYmVkfGhyfGltZ3xpbnB1dHxrZXlnZW58bGlua3xtZXRhfHBhcmFtfHNvdXJjZXx0cmFja3x3YnIpJC87XG5mdW5jdGlvbiBpc192b2lkKG5hbWUpIHtcbiAgICByZXR1cm4gdm9pZF9lbGVtZW50X25hbWVzLnRlc3QobmFtZSkgfHwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSAnIWRvY3R5cGUnO1xufVxuXG5jb25zdCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciA9IC9bXFxzJ1wiPi89XFx1e0ZERDB9LVxcdXtGREVGfVxcdXtGRkZFfVxcdXtGRkZGfVxcdXsxRkZGRX1cXHV7MUZGRkZ9XFx1ezJGRkZFfVxcdXsyRkZGRn1cXHV7M0ZGRkV9XFx1ezNGRkZGfVxcdXs0RkZGRX1cXHV7NEZGRkZ9XFx1ezVGRkZFfVxcdXs1RkZGRn1cXHV7NkZGRkV9XFx1ezZGRkZGfVxcdXs3RkZGRX1cXHV7N0ZGRkZ9XFx1ezhGRkZFfVxcdXs4RkZGRn1cXHV7OUZGRkV9XFx1ezlGRkZGfVxcdXtBRkZGRX1cXHV7QUZGRkZ9XFx1e0JGRkZFfVxcdXtCRkZGRn1cXHV7Q0ZGRkV9XFx1e0NGRkZGfVxcdXtERkZGRX1cXHV7REZGRkZ9XFx1e0VGRkZFfVxcdXtFRkZGRn1cXHV7RkZGRkV9XFx1e0ZGRkZGfVxcdXsxMEZGRkV9XFx1ezEwRkZGRn1dL3U7XG4vLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNhdHRyaWJ1dGVzLTJcbi8vIGh0dHBzOi8vaW5mcmEuc3BlYy53aGF0d2cub3JnLyNub25jaGFyYWN0ZXJcbmZ1bmN0aW9uIHNwcmVhZChhcmdzLCBhdHRyc190b19hZGQpIHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LmFzc2lnbih7fSwgLi4uYXJncyk7XG4gICAgaWYgKGF0dHJzX3RvX2FkZCkge1xuICAgICAgICBjb25zdCBjbGFzc2VzX3RvX2FkZCA9IGF0dHJzX3RvX2FkZC5jbGFzc2VzO1xuICAgICAgICBjb25zdCBzdHlsZXNfdG9fYWRkID0gYXR0cnNfdG9fYWRkLnN0eWxlcztcbiAgICAgICAgaWYgKGNsYXNzZXNfdG9fYWRkKSB7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcy5jbGFzcyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyA9IGNsYXNzZXNfdG9fYWRkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyArPSAnICcgKyBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3R5bGVzX3RvX2FkZCkge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuc3R5bGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuc3R5bGUgPSBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKHN0eWxlc190b19hZGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5zdHlsZSA9IHN0eWxlX29iamVjdF90b19zdHJpbmcobWVyZ2Vfc3NyX3N0eWxlcyhhdHRyaWJ1dGVzLnN0eWxlLCBzdHlsZXNfdG9fYWRkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgIGlmIChpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3Rlci50ZXN0KG5hbWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHN0ciArPSAnICcgKyBuYW1lO1xuICAgICAgICBlbHNlIGlmIChib29sZWFuX2F0dHJpYnV0ZXMuaGFzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgICAgICBzdHIgKz0gJyAnICsgbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzdHIgKz0gYCAke25hbWV9PVwiJHt2YWx1ZX1cImA7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gbWVyZ2Vfc3NyX3N0eWxlcyhzdHlsZV9hdHRyaWJ1dGUsIHN0eWxlX2RpcmVjdGl2ZSkge1xuICAgIGNvbnN0IHN0eWxlX29iamVjdCA9IHt9O1xuICAgIGZvciAoY29uc3QgaW5kaXZpZHVhbF9zdHlsZSBvZiBzdHlsZV9hdHRyaWJ1dGUuc3BsaXQoJzsnKSkge1xuICAgICAgICBjb25zdCBjb2xvbl9pbmRleCA9IGluZGl2aWR1YWxfc3R5bGUuaW5kZXhPZignOicpO1xuICAgICAgICBjb25zdCBuYW1lID0gaW5kaXZpZHVhbF9zdHlsZS5zbGljZSgwLCBjb2xvbl9pbmRleCkudHJpbSgpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGluZGl2aWR1YWxfc3R5bGUuc2xpY2UoY29sb25faW5kZXggKyAxKS50cmltKCk7XG4gICAgICAgIGlmICghbmFtZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBzdHlsZV9vYmplY3RbbmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBuYW1lIGluIHN0eWxlX2RpcmVjdGl2ZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHN0eWxlX2RpcmVjdGl2ZVtuYW1lXTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBzdHlsZV9vYmplY3RbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzdHlsZV9vYmplY3RbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlX29iamVjdDtcbn1cbmNvbnN0IEFUVFJfUkVHRVggPSAvWyZcIl0vZztcbmNvbnN0IENPTlRFTlRfUkVHRVggPSAvWyY8XS9nO1xuLyoqXG4gKiBOb3RlOiB0aGlzIG1ldGhvZCBpcyBwZXJmb3JtYW5jZSBzZW5zaXRpdmUgYW5kIGhhcyBiZWVuIG9wdGltaXplZFxuICogaHR0cHM6Ly9naXRodWIuY29tL3N2ZWx0ZWpzL3N2ZWx0ZS9wdWxsLzU3MDFcbiAqL1xuZnVuY3Rpb24gZXNjYXBlKHZhbHVlLCBpc19hdHRyID0gZmFsc2UpIHtcbiAgICBjb25zdCBzdHIgPSBTdHJpbmcodmFsdWUpO1xuICAgIGNvbnN0IHBhdHRlcm4gPSBpc19hdHRyID8gQVRUUl9SRUdFWCA6IENPTlRFTlRfUkVHRVg7XG4gICAgcGF0dGVybi5sYXN0SW5kZXggPSAwO1xuICAgIGxldCBlc2NhcGVkID0gJyc7XG4gICAgbGV0IGxhc3QgPSAwO1xuICAgIHdoaWxlIChwYXR0ZXJuLnRlc3Qoc3RyKSkge1xuICAgICAgICBjb25zdCBpID0gcGF0dGVybi5sYXN0SW5kZXggLSAxO1xuICAgICAgICBjb25zdCBjaCA9IHN0cltpXTtcbiAgICAgICAgZXNjYXBlZCArPSBzdHIuc3Vic3RyaW5nKGxhc3QsIGkpICsgKGNoID09PSAnJicgPyAnJmFtcDsnIDogKGNoID09PSAnXCInID8gJyZxdW90OycgOiAnJmx0OycpKTtcbiAgICAgICAgbGFzdCA9IGkgKyAxO1xuICAgIH1cbiAgICByZXR1cm4gZXNjYXBlZCArIHN0ci5zdWJzdHJpbmcobGFzdCk7XG59XG5mdW5jdGlvbiBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlKHZhbHVlKSB7XG4gICAgLy8ga2VlcCBib29sZWFucywgbnVsbCwgYW5kIHVuZGVmaW5lZCBmb3IgdGhlIHNha2Ugb2YgYHNwcmVhZGBcbiAgICBjb25zdCBzaG91bGRfZXNjYXBlID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jyk7XG4gICAgcmV0dXJuIHNob3VsZF9lc2NhcGUgPyBlc2NhcGUodmFsdWUsIHRydWUpIDogdmFsdWU7XG59XG5mdW5jdGlvbiBlc2NhcGVfb2JqZWN0KG9iaikge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICByZXN1bHRba2V5XSA9IGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUob2JqW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZWFjaChpdGVtcywgZm4pIHtcbiAgICBsZXQgc3RyID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBzdHIgKz0gZm4oaXRlbXNbaV0sIGkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuY29uc3QgbWlzc2luZ19jb21wb25lbnQgPSB7XG4gICAgJCRyZW5kZXI6ICgpID0+ICcnXG59O1xuZnVuY3Rpb24gdmFsaWRhdGVfY29tcG9uZW50KGNvbXBvbmVudCwgbmFtZSkge1xuICAgIGlmICghY29tcG9uZW50IHx8ICFjb21wb25lbnQuJCRyZW5kZXIpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdzdmVsdGU6Y29tcG9uZW50JylcbiAgICAgICAgICAgIG5hbWUgKz0gJyB0aGlzPXsuLi59JztcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGA8JHtuYW1lfT4gaXMgbm90IGEgdmFsaWQgU1NSIGNvbXBvbmVudC4gWW91IG1heSBuZWVkIHRvIHJldmlldyB5b3VyIGJ1aWxkIGNvbmZpZyB0byBlbnN1cmUgdGhhdCBkZXBlbmRlbmNpZXMgYXJlIGNvbXBpbGVkLCByYXRoZXIgdGhhbiBpbXBvcnRlZCBhcyBwcmUtY29tcGlsZWQgbW9kdWxlcy4gT3RoZXJ3aXNlIHlvdSBtYXkgbmVlZCB0byBmaXggYSA8JHtuYW1lfT4uYCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiBkZWJ1ZyhmaWxlLCBsaW5lLCBjb2x1bW4sIHZhbHVlcykge1xuICAgIGNvbnNvbGUubG9nKGB7QGRlYnVnfSAke2ZpbGUgPyBmaWxlICsgJyAnIDogJyd9KCR7bGluZX06JHtjb2x1bW59KWApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmxvZyh2YWx1ZXMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICByZXR1cm4gJyc7XG59XG5sZXQgb25fZGVzdHJveTtcbmZ1bmN0aW9uIGNyZWF0ZV9zc3JfY29tcG9uZW50KGZuKSB7XG4gICAgZnVuY3Rpb24gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzLCBjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICAgICAgY29uc3QgJCQgPSB7XG4gICAgICAgICAgICBvbl9kZXN0cm95LFxuICAgICAgICAgICAgY29udGV4dDogbmV3IE1hcChjb250ZXh0IHx8IChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pKSxcbiAgICAgICAgICAgIC8vIHRoZXNlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZGlzY2FyZGVkXG4gICAgICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBjYWxsYmFja3M6IGJsYW5rX29iamVjdCgpXG4gICAgICAgIH07XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudCh7ICQkIH0pO1xuICAgICAgICBjb25zdCBodG1sID0gZm4ocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzKTtcbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHBhcmVudF9jb21wb25lbnQpO1xuICAgICAgICByZXR1cm4gaHRtbDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyOiAocHJvcHMgPSB7fSwgeyAkJHNsb3RzID0ge30sIGNvbnRleHQgPSBuZXcgTWFwKCkgfSA9IHt9KSA9PiB7XG4gICAgICAgICAgICBvbl9kZXN0cm95ID0gW107XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7IHRpdGxlOiAnJywgaGVhZDogJycsIGNzczogbmV3IFNldCgpIH07XG4gICAgICAgICAgICBjb25zdCBodG1sID0gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywge30sICQkc2xvdHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgcnVuX2FsbChvbl9kZXN0cm95KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaHRtbCxcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogQXJyYXkuZnJvbShyZXN1bHQuY3NzKS5tYXAoY3NzID0+IGNzcy5jb2RlKS5qb2luKCdcXG4nKSxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBudWxsIC8vIFRPRE9cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhlYWQ6IHJlc3VsdC50aXRsZSArIHJlc3VsdC5oZWFkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAkJHJlbmRlclxuICAgIH07XG59XG5mdW5jdGlvbiBhZGRfYXR0cmlidXRlKG5hbWUsIHZhbHVlLCBib29sZWFuKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwgfHwgKGJvb2xlYW4gJiYgIXZhbHVlKSlcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIGNvbnN0IGFzc2lnbm1lbnQgPSAoYm9vbGVhbiAmJiB2YWx1ZSA9PT0gdHJ1ZSkgPyAnJyA6IGA9XCIke2VzY2FwZSh2YWx1ZSwgdHJ1ZSl9XCJgO1xuICAgIHJldHVybiBgICR7bmFtZX0ke2Fzc2lnbm1lbnR9YDtcbn1cbmZ1bmN0aW9uIGFkZF9jbGFzc2VzKGNsYXNzZXMpIHtcbiAgICByZXR1cm4gY2xhc3NlcyA/IGAgY2xhc3M9XCIke2NsYXNzZXN9XCJgIDogJyc7XG59XG5mdW5jdGlvbiBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKHN0eWxlX29iamVjdCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzdHlsZV9vYmplY3QpXG4gICAgICAgIC5maWx0ZXIoa2V5ID0+IHN0eWxlX29iamVjdFtrZXldKVxuICAgICAgICAubWFwKGtleSA9PiBgJHtrZXl9OiAke2VzY2FwZV9hdHRyaWJ1dGVfdmFsdWUoc3R5bGVfb2JqZWN0W2tleV0pfTtgKVxuICAgICAgICAuam9pbignICcpO1xufVxuZnVuY3Rpb24gYWRkX3N0eWxlcyhzdHlsZV9vYmplY3QpIHtcbiAgICBjb25zdCBzdHlsZXMgPSBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKHN0eWxlX29iamVjdCk7XG4gICAgcmV0dXJuIHN0eWxlcyA/IGAgc3R5bGU9XCIke3N0eWxlc31cImAgOiAnJztcbn1cblxuZnVuY3Rpb24gYmluZChjb21wb25lbnQsIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgaW5kZXggPSBjb21wb25lbnQuJCQucHJvcHNbbmFtZV07XG4gICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29tcG9uZW50LiQkLmJvdW5kW2luZGV4XSA9IGNhbGxiYWNrO1xuICAgICAgICBjYWxsYmFjayhjb21wb25lbnQuJCQuY3R4W2luZGV4XSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlX2NvbXBvbmVudChibG9jaykge1xuICAgIGJsb2NrICYmIGJsb2NrLmMoKTtcbn1cbmZ1bmN0aW9uIGNsYWltX2NvbXBvbmVudChibG9jaywgcGFyZW50X25vZGVzKSB7XG4gICAgYmxvY2sgJiYgYmxvY2subChwYXJlbnRfbm9kZXMpO1xufVxuZnVuY3Rpb24gbW91bnRfY29tcG9uZW50KGNvbXBvbmVudCwgdGFyZ2V0LCBhbmNob3IsIGN1c3RvbUVsZW1lbnQpIHtcbiAgICBjb25zdCB7IGZyYWdtZW50LCBhZnRlcl91cGRhdGUgfSA9IGNvbXBvbmVudC4kJDtcbiAgICBmcmFnbWVudCAmJiBmcmFnbWVudC5tKHRhcmdldCwgYW5jaG9yKTtcbiAgICBpZiAoIWN1c3RvbUVsZW1lbnQpIHtcbiAgICAgICAgLy8gb25Nb3VudCBoYXBwZW5zIGJlZm9yZSB0aGUgaW5pdGlhbCBhZnRlclVwZGF0ZVxuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld19vbl9kZXN0cm95ID0gY29tcG9uZW50LiQkLm9uX21vdW50Lm1hcChydW4pLmZpbHRlcihpc19mdW5jdGlvbik7XG4gICAgICAgICAgICAvLyBpZiB0aGUgY29tcG9uZW50IHdhcyBkZXN0cm95ZWQgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIC8vIGl0IHdpbGwgdXBkYXRlIHRoZSBgJCQub25fZGVzdHJveWAgcmVmZXJlbmNlIHRvIGBudWxsYC5cbiAgICAgICAgICAgIC8vIHRoZSBkZXN0cnVjdHVyZWQgb25fZGVzdHJveSBtYXkgc3RpbGwgcmVmZXJlbmNlIHRvIHRoZSBvbGQgYXJyYXlcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQuJCQub25fZGVzdHJveSkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC4kJC5vbl9kZXN0cm95LnB1c2goLi4ubmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRWRnZSBjYXNlIC0gY29tcG9uZW50IHdhcyBkZXN0cm95ZWQgaW1tZWRpYXRlbHksXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBsaWtlbHkgYXMgYSByZXN1bHQgb2YgYSBiaW5kaW5nIGluaXRpYWxpc2luZ1xuICAgICAgICAgICAgICAgIHJ1bl9hbGwobmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LiQkLm9uX21vdW50ID0gW107XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfY29tcG9uZW50KGNvbXBvbmVudCwgZGV0YWNoaW5nKSB7XG4gICAgY29uc3QgJCQgPSBjb21wb25lbnQuJCQ7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIGZsdXNoX3JlbmRlcl9jYWxsYmFja3MoJCQuYWZ0ZXJfdXBkYXRlKTtcbiAgICAgICAgcnVuX2FsbCgkJC5vbl9kZXN0cm95KTtcbiAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQuZChkZXRhY2hpbmcpO1xuICAgICAgICAvLyBUT0RPIG51bGwgb3V0IG90aGVyIHJlZnMsIGluY2x1ZGluZyBjb21wb25lbnQuJCQgKGJ1dCBuZWVkIHRvXG4gICAgICAgIC8vIHByZXNlcnZlIGZpbmFsIHN0YXRlPylcbiAgICAgICAgJCQub25fZGVzdHJveSA9ICQkLmZyYWdtZW50ID0gbnVsbDtcbiAgICAgICAgJCQuY3R4ID0gW107XG4gICAgfVxufVxuZnVuY3Rpb24gbWFrZV9kaXJ0eShjb21wb25lbnQsIGkpIHtcbiAgICBpZiAoY29tcG9uZW50LiQkLmRpcnR5WzBdID09PSAtMSkge1xuICAgICAgICBkaXJ0eV9jb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICAgICAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gICAgICAgIGNvbXBvbmVudC4kJC5kaXJ0eS5maWxsKDApO1xuICAgIH1cbiAgICBjb21wb25lbnQuJCQuZGlydHlbKGkgLyAzMSkgfCAwXSB8PSAoMSA8PCAoaSAlIDMxKSk7XG59XG5mdW5jdGlvbiBpbml0KGNvbXBvbmVudCwgb3B0aW9ucywgaW5zdGFuY2UsIGNyZWF0ZV9mcmFnbWVudCwgbm90X2VxdWFsLCBwcm9wcywgYXBwZW5kX3N0eWxlcywgZGlydHkgPSBbLTFdKSB7XG4gICAgY29uc3QgcGFyZW50X2NvbXBvbmVudCA9IGN1cnJlbnRfY29tcG9uZW50O1xuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgIGNvbnN0ICQkID0gY29tcG9uZW50LiQkID0ge1xuICAgICAgICBmcmFnbWVudDogbnVsbCxcbiAgICAgICAgY3R4OiBbXSxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIHVwZGF0ZTogbm9vcCxcbiAgICAgICAgbm90X2VxdWFsLFxuICAgICAgICBib3VuZDogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIC8vIGxpZmVjeWNsZVxuICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgIG9uX2Rlc3Ryb3k6IFtdLFxuICAgICAgICBvbl9kaXNjb25uZWN0OiBbXSxcbiAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgIGNvbnRleHQ6IG5ldyBNYXAob3B0aW9ucy5jb250ZXh0IHx8IChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pKSxcbiAgICAgICAgLy8gZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIGNhbGxiYWNrczogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIGRpcnR5LFxuICAgICAgICBza2lwX2JvdW5kOiBmYWxzZSxcbiAgICAgICAgcm9vdDogb3B0aW9ucy50YXJnZXQgfHwgcGFyZW50X2NvbXBvbmVudC4kJC5yb290XG4gICAgfTtcbiAgICBhcHBlbmRfc3R5bGVzICYmIGFwcGVuZF9zdHlsZXMoJCQucm9vdCk7XG4gICAgbGV0IHJlYWR5ID0gZmFsc2U7XG4gICAgJCQuY3R4ID0gaW5zdGFuY2VcbiAgICAgICAgPyBpbnN0YW5jZShjb21wb25lbnQsIG9wdGlvbnMucHJvcHMgfHwge30sIChpLCByZXQsIC4uLnJlc3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVzdC5sZW5ndGggPyByZXN0WzBdIDogcmV0O1xuICAgICAgICAgICAgaWYgKCQkLmN0eCAmJiBub3RfZXF1YWwoJCQuY3R4W2ldLCAkJC5jdHhbaV0gPSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQkLnNraXBfYm91bmQgJiYgJCQuYm91bmRbaV0pXG4gICAgICAgICAgICAgICAgICAgICQkLmJvdW5kW2ldKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVhZHkpXG4gICAgICAgICAgICAgICAgICAgIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0pXG4gICAgICAgIDogW107XG4gICAgJCQudXBkYXRlKCk7XG4gICAgcmVhZHkgPSB0cnVlO1xuICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgLy8gYGZhbHNlYCBhcyBhIHNwZWNpYWwgY2FzZSBvZiBubyBET00gY29tcG9uZW50XG4gICAgJCQuZnJhZ21lbnQgPSBjcmVhdGVfZnJhZ21lbnQgPyBjcmVhdGVfZnJhZ21lbnQoJCQuY3R4KSA6IGZhbHNlO1xuICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICBpZiAob3B0aW9ucy5oeWRyYXRlKSB7XG4gICAgICAgICAgICBzdGFydF9oeWRyYXRpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gY2hpbGRyZW4ob3B0aW9ucy50YXJnZXQpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50Lmwobm9kZXMpO1xuICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChkZXRhY2gpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pbnRybylcbiAgICAgICAgICAgIHRyYW5zaXRpb25faW4oY29tcG9uZW50LiQkLmZyYWdtZW50KTtcbiAgICAgICAgbW91bnRfY29tcG9uZW50KGNvbXBvbmVudCwgb3B0aW9ucy50YXJnZXQsIG9wdGlvbnMuYW5jaG9yLCBvcHRpb25zLmN1c3RvbUVsZW1lbnQpO1xuICAgICAgICBlbmRfaHlkcmF0aW5nKCk7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgfVxuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbn1cbmxldCBTdmVsdGVFbGVtZW50O1xuaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFN2ZWx0ZUVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9uX21vdW50IH0gPSB0aGlzLiQkO1xuICAgICAgICAgICAgdGhpcy4kJC5vbl9kaXNjb25uZWN0ID0gb25fbW91bnQubWFwKHJ1bikuZmlsdGVyKGlzX2Z1bmN0aW9uKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLiQkLnNsb3R0ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy4kJC5zbG90dGVkW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyLCBfb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzW2F0dHJdID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBydW5fYWxsKHRoaXMuJCQub25fZGlzY29ubmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgJGRlc3Ryb3koKSB7XG4gICAgICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICAgICAgICB9XG4gICAgICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgLy8gVE9ETyBzaG91bGQgdGhpcyBkZWxlZ2F0ZSB0byBhZGRFdmVudExpc3RlbmVyP1xuICAgICAgICAgICAgaWYgKCFpc19mdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9vcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSB8fCAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gPSBbXSkpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgJHNldCgkJHByb3BzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kJHNldCAmJiAhaXNfZW1wdHkoJCRwcm9wcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuJCRzZXQoJCRwcm9wcyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBTdmVsdGUgY29tcG9uZW50cy4gVXNlZCB3aGVuIGRldj1mYWxzZS5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50IHtcbiAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgZGVzdHJveV9jb21wb25lbnQodGhpcywgMSk7XG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICAgIH1cbiAgICAkb24odHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCFpc19mdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgIHJldHVybiBub29wO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSB8fCAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gPSBbXSkpO1xuICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgICRzZXQoJCRwcm9wcykge1xuICAgICAgICBpZiAodGhpcy4kJHNldCAmJiAhaXNfZW1wdHkoJCRwcm9wcykpIHtcbiAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLiQkc2V0KCQkcHJvcHMpO1xuICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoX2Rldih0eXBlLCBkZXRhaWwpIHtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbV9ldmVudCh0eXBlLCBPYmplY3QuYXNzaWduKHsgdmVyc2lvbjogJzMuNTkuMicgfSwgZGV0YWlsKSwgeyBidWJibGVzOiB0cnVlIH0pKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9kZXYodGFyZ2V0LCBub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSB9KTtcbiAgICBhcHBlbmQodGFyZ2V0LCBub2RlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9oeWRyYXRpb25fZGV2KHRhcmdldCwgbm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUgfSk7XG4gICAgYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2Rldih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUsIGFuY2hvciB9KTtcbiAgICBpbnNlcnQodGFyZ2V0LCBub2RlLCBhbmNob3IpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2h5ZHJhdGlvbl9kZXYodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlLCBhbmNob3IgfSk7XG4gICAgaW5zZXJ0X2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUsIGFuY2hvcik7XG59XG5mdW5jdGlvbiBkZXRhY2hfZGV2KG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZScsIHsgbm9kZSB9KTtcbiAgICBkZXRhY2gobm9kZSk7XG59XG5mdW5jdGlvbiBkZXRhY2hfYmV0d2Vlbl9kZXYoYmVmb3JlLCBhZnRlcikge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcgJiYgYmVmb3JlLm5leHRTaWJsaW5nICE9PSBhZnRlcikge1xuICAgICAgICBkZXRhY2hfZGV2KGJlZm9yZS5uZXh0U2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2JlZm9yZV9kZXYoYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2hfYWZ0ZXJfZGV2KGJlZm9yZSkge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxpc3Rlbl9kZXYobm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMsIGhhc19wcmV2ZW50X2RlZmF1bHQsIGhhc19zdG9wX3Byb3BhZ2F0aW9uLCBoYXNfc3RvcF9pbW1lZGlhdGVfcHJvcGFnYXRpb24pIHtcbiAgICBjb25zdCBtb2RpZmllcnMgPSBvcHRpb25zID09PSB0cnVlID8gWydjYXB0dXJlJ10gOiBvcHRpb25zID8gQXJyYXkuZnJvbShPYmplY3Qua2V5cyhvcHRpb25zKSkgOiBbXTtcbiAgICBpZiAoaGFzX3ByZXZlbnRfZGVmYXVsdClcbiAgICAgICAgbW9kaWZpZXJzLnB1c2goJ3ByZXZlbnREZWZhdWx0Jyk7XG4gICAgaWYgKGhhc19zdG9wX3Byb3BhZ2F0aW9uKVxuICAgICAgICBtb2RpZmllcnMucHVzaCgnc3RvcFByb3BhZ2F0aW9uJyk7XG4gICAgaWYgKGhhc19zdG9wX2ltbWVkaWF0ZV9wcm9wYWdhdGlvbilcbiAgICAgICAgbW9kaWZpZXJzLnB1c2goJ3N0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbicpO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NQWRkRXZlbnRMaXN0ZW5lcicsIHsgbm9kZSwgZXZlbnQsIGhhbmRsZXIsIG1vZGlmaWVycyB9KTtcbiAgICBjb25zdCBkaXNwb3NlID0gbGlzdGVuKG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZUV2ZW50TGlzdGVuZXInLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgICAgIGRpc3Bvc2UoKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cl9kZXYobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NUmVtb3ZlQXR0cmlidXRlJywgeyBub2RlLCBhdHRyaWJ1dGUgfSk7XG4gICAgZWxzZVxuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldEF0dHJpYnV0ZScsIHsgbm9kZSwgYXR0cmlidXRlLCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIHByb3BfZGV2KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIG5vZGVbcHJvcGVydHldID0gdmFsdWU7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXRQcm9wZXJ0eScsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gZGF0YXNldF9kZXYobm9kZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgbm9kZS5kYXRhc2V0W3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0RGF0YXNldCcsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gc2V0X2RhdGFfZGV2KHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0LmRhdGEgPT09IGRhdGEpXG4gICAgICAgIHJldHVybjtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldERhdGEnLCB7IG5vZGU6IHRleHQsIGRhdGEgfSk7XG4gICAgdGV4dC5kYXRhID0gZGF0YTtcbn1cbmZ1bmN0aW9uIHNldF9kYXRhX2NvbnRlbnRlZGl0YWJsZV9kZXYodGV4dCwgZGF0YSkge1xuICAgIGRhdGEgPSAnJyArIGRhdGE7XG4gICAgaWYgKHRleHQud2hvbGVUZXh0ID09PSBkYXRhKVxuICAgICAgICByZXR1cm47XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXREYXRhJywgeyBub2RlOiB0ZXh0LCBkYXRhIH0pO1xuICAgIHRleHQuZGF0YSA9IGRhdGE7XG59XG5mdW5jdGlvbiBzZXRfZGF0YV9tYXliZV9jb250ZW50ZWRpdGFibGVfZGV2KHRleHQsIGRhdGEsIGF0dHJfdmFsdWUpIHtcbiAgICBpZiAofmNvbnRlbnRlZGl0YWJsZV90cnV0aHlfdmFsdWVzLmluZGV4T2YoYXR0cl92YWx1ZSkpIHtcbiAgICAgICAgc2V0X2RhdGFfY29udGVudGVkaXRhYmxlX2Rldih0ZXh0LCBkYXRhKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNldF9kYXRhX2Rldih0ZXh0LCBkYXRhKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9lYWNoX2FyZ3VtZW50KGFyZykge1xuICAgIGlmICh0eXBlb2YgYXJnICE9PSAnc3RyaW5nJyAmJiAhKGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiAnbGVuZ3RoJyBpbiBhcmcpKSB7XG4gICAgICAgIGxldCBtc2cgPSAneyNlYWNofSBvbmx5IGl0ZXJhdGVzIG92ZXIgYXJyYXktbGlrZSBvYmplY3RzLic7XG4gICAgICAgIGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIGFyZyAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gYXJnKSB7XG4gICAgICAgICAgICBtc2cgKz0gJyBZb3UgY2FuIHVzZSBhIHNwcmVhZCB0byBjb252ZXJ0IHRoaXMgaXRlcmFibGUgaW50byBhbiBhcnJheS4nO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX3Nsb3RzKG5hbWUsIHNsb3QsIGtleXMpIHtcbiAgICBmb3IgKGNvbnN0IHNsb3Rfa2V5IG9mIE9iamVjdC5rZXlzKHNsb3QpKSB7XG4gICAgICAgIGlmICghfmtleXMuaW5kZXhPZihzbG90X2tleSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgPCR7bmFtZX0+IHJlY2VpdmVkIGFuIHVuZXhwZWN0ZWQgc2xvdCBcIiR7c2xvdF9rZXl9XCIuYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9keW5hbWljX2VsZW1lbnQodGFnKSB7XG4gICAgY29uc3QgaXNfc3RyaW5nID0gdHlwZW9mIHRhZyA9PT0gJ3N0cmluZyc7XG4gICAgaWYgKHRhZyAmJiAhaXNfc3RyaW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignPHN2ZWx0ZTplbGVtZW50PiBleHBlY3RzIFwidGhpc1wiIGF0dHJpYnV0ZSB0byBiZSBhIHN0cmluZy4nKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV92b2lkX2R5bmFtaWNfZWxlbWVudCh0YWcpIHtcbiAgICBpZiAodGFnICYmIGlzX3ZvaWQodGFnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYDxzdmVsdGU6ZWxlbWVudCB0aGlzPVwiJHt0YWd9XCI+IGlzIHNlbGYtY2xvc2luZyBhbmQgY2Fubm90IGhhdmUgY29udGVudC5gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb25zdHJ1Y3Rfc3ZlbHRlX2NvbXBvbmVudF9kZXYoY29tcG9uZW50LCBwcm9wcykge1xuICAgIGNvbnN0IGVycm9yX21lc3NhZ2UgPSAndGhpcz17Li4ufSBvZiA8c3ZlbHRlOmNvbXBvbmVudD4gc2hvdWxkIHNwZWNpZnkgYSBTdmVsdGUgY29tcG9uZW50Lic7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgY29tcG9uZW50KHByb3BzKTtcbiAgICAgICAgaWYgKCFpbnN0YW5jZS4kJCB8fCAhaW5zdGFuY2UuJHNldCB8fCAhaW5zdGFuY2UuJG9uIHx8ICFpbnN0YW5jZS4kZGVzdHJveSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yX21lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IGVycjtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJyAmJiBtZXNzYWdlLmluZGV4T2YoJ2lzIG5vdCBhIGNvbnN0cnVjdG9yJykgIT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JfbWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIFN2ZWx0ZSBjb21wb25lbnRzIHdpdGggc29tZSBtaW5vciBkZXYtZW5oYW5jZW1lbnRzLiBVc2VkIHdoZW4gZGV2PXRydWUuXG4gKi9cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudERldiBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgKCFvcHRpb25zLnRhcmdldCAmJiAhb3B0aW9ucy4kJGlubGluZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIid0YXJnZXQnIGlzIGEgcmVxdWlyZWQgb3B0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgICRkZXN0cm95KCkge1xuICAgICAgICBzdXBlci4kZGVzdHJveSgpO1xuICAgICAgICB0aGlzLiRkZXN0cm95ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdDb21wb25lbnQgd2FzIGFscmVhZHkgZGVzdHJveWVkJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICB9O1xuICAgIH1cbiAgICAkY2FwdHVyZV9zdGF0ZSgpIHsgfVxuICAgICRpbmplY3Rfc3RhdGUoKSB7IH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyB0byBjcmVhdGUgc3Ryb25nbHkgdHlwZWQgU3ZlbHRlIGNvbXBvbmVudHMuXG4gKiBUaGlzIG9ubHkgZXhpc3RzIGZvciB0eXBpbmcgcHVycG9zZXMgYW5kIHNob3VsZCBiZSB1c2VkIGluIGAuZC50c2AgZmlsZXMuXG4gKlxuICogIyMjIEV4YW1wbGU6XG4gKlxuICogWW91IGhhdmUgY29tcG9uZW50IGxpYnJhcnkgb24gbnBtIGNhbGxlZCBgY29tcG9uZW50LWxpYnJhcnlgLCBmcm9tIHdoaWNoXG4gKiB5b3UgZXhwb3J0IGEgY29tcG9uZW50IGNhbGxlZCBgTXlDb21wb25lbnRgLiBGb3IgU3ZlbHRlK1R5cGVTY3JpcHQgdXNlcnMsXG4gKiB5b3Ugd2FudCB0byBwcm92aWRlIHR5cGluZ3MuIFRoZXJlZm9yZSB5b3UgY3JlYXRlIGEgYGluZGV4LmQudHNgOlxuICogYGBgdHNcbiAqIGltcG9ydCB7IFN2ZWx0ZUNvbXBvbmVudFR5cGVkIH0gZnJvbSBcInN2ZWx0ZVwiO1xuICogZXhwb3J0IGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50VHlwZWQ8e2Zvbzogc3RyaW5nfT4ge31cbiAqIGBgYFxuICogVHlwaW5nIHRoaXMgbWFrZXMgaXQgcG9zc2libGUgZm9yIElERXMgbGlrZSBWUyBDb2RlIHdpdGggdGhlIFN2ZWx0ZSBleHRlbnNpb25cbiAqIHRvIHByb3ZpZGUgaW50ZWxsaXNlbnNlIGFuZCB0byB1c2UgdGhlIGNvbXBvbmVudCBsaWtlIHRoaXMgaW4gYSBTdmVsdGUgZmlsZVxuICogd2l0aCBUeXBlU2NyaXB0OlxuICogYGBgc3ZlbHRlXG4gKiA8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICogXHRpbXBvcnQgeyBNeUNvbXBvbmVudCB9IGZyb20gXCJjb21wb25lbnQtbGlicmFyeVwiO1xuICogPC9zY3JpcHQ+XG4gKiA8TXlDb21wb25lbnQgZm9vPXsnYmFyJ30gLz5cbiAqIGBgYFxuICpcbiAqICMjIyMgV2h5IG5vdCBtYWtlIHRoaXMgcGFydCBvZiBgU3ZlbHRlQ29tcG9uZW50KERldilgP1xuICogQmVjYXVzZVxuICogYGBgdHNcbiAqIGNsYXNzIEFTdWJjbGFzc09mU3ZlbHRlQ29tcG9uZW50IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50PHtmb286IHN0cmluZ30+IHt9XG4gKiBjb25zdCBjb21wb25lbnQ6IHR5cGVvZiBTdmVsdGVDb21wb25lbnQgPSBBU3ViY2xhc3NPZlN2ZWx0ZUNvbXBvbmVudDtcbiAqIGBgYFxuICogd2lsbCB0aHJvdyBhIHR5cGUgZXJyb3IsIHNvIHdlIG5lZWQgdG8gc2VwYXJhdGUgdGhlIG1vcmUgc3RyaWN0bHkgdHlwZWQgY2xhc3MuXG4gKi9cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudFR5cGVkIGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50RGV2IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxvb3BfZ3VhcmQodGltZW91dCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHN0YXJ0ID4gdGltZW91dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmZpbml0ZSBsb29wIGRldGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgeyBIdG1sVGFnLCBIdG1sVGFnSHlkcmF0aW9uLCBSZXNpemVPYnNlcnZlclNpbmdsZXRvbiwgU3ZlbHRlQ29tcG9uZW50LCBTdmVsdGVDb21wb25lbnREZXYsIFN2ZWx0ZUNvbXBvbmVudFR5cGVkLCBTdmVsdGVFbGVtZW50LCBhY3Rpb25fZGVzdHJveWVyLCBhZGRfYXR0cmlidXRlLCBhZGRfY2xhc3NlcywgYWRkX2ZsdXNoX2NhbGxiYWNrLCBhZGRfaWZyYW1lX3Jlc2l6ZV9saXN0ZW5lciwgYWRkX2xvY2F0aW9uLCBhZGRfcmVuZGVyX2NhbGxiYWNrLCBhZGRfc3R5bGVzLCBhZGRfdHJhbnNmb3JtLCBhZnRlclVwZGF0ZSwgYXBwZW5kLCBhcHBlbmRfZGV2LCBhcHBlbmRfZW1wdHlfc3R5bGVzaGVldCwgYXBwZW5kX2h5ZHJhdGlvbiwgYXBwZW5kX2h5ZHJhdGlvbl9kZXYsIGFwcGVuZF9zdHlsZXMsIGFzc2lnbiwgYXR0ciwgYXR0cl9kZXYsIGF0dHJpYnV0ZV90b19vYmplY3QsIGJlZm9yZVVwZGF0ZSwgYmluZCwgYmluZGluZ19jYWxsYmFja3MsIGJsYW5rX29iamVjdCwgYnViYmxlLCBjaGVja19vdXRyb3MsIGNoaWxkcmVuLCBjbGFpbV9jb21tZW50LCBjbGFpbV9jb21wb25lbnQsIGNsYWltX2VsZW1lbnQsIGNsYWltX2h0bWxfdGFnLCBjbGFpbV9zcGFjZSwgY2xhaW1fc3ZnX2VsZW1lbnQsIGNsYWltX3RleHQsIGNsZWFyX2xvb3BzLCBjb21tZW50LCBjb21wb25lbnRfc3Vic2NyaWJlLCBjb21wdXRlX3Jlc3RfcHJvcHMsIGNvbXB1dGVfc2xvdHMsIGNvbnN0cnVjdF9zdmVsdGVfY29tcG9uZW50LCBjb25zdHJ1Y3Rfc3ZlbHRlX2NvbXBvbmVudF9kZXYsIGNvbnRlbnRlZGl0YWJsZV90cnV0aHlfdmFsdWVzLCBjcmVhdGVFdmVudERpc3BhdGNoZXIsIGNyZWF0ZV9hbmltYXRpb24sIGNyZWF0ZV9iaWRpcmVjdGlvbmFsX3RyYW5zaXRpb24sIGNyZWF0ZV9jb21wb25lbnQsIGNyZWF0ZV9pbl90cmFuc2l0aW9uLCBjcmVhdGVfb3V0X3RyYW5zaXRpb24sIGNyZWF0ZV9zbG90LCBjcmVhdGVfc3NyX2NvbXBvbmVudCwgY3VycmVudF9jb21wb25lbnQsIGN1c3RvbV9ldmVudCwgZGF0YXNldF9kZXYsIGRlYnVnLCBkZXN0cm95X2Jsb2NrLCBkZXN0cm95X2NvbXBvbmVudCwgZGVzdHJveV9lYWNoLCBkZXRhY2gsIGRldGFjaF9hZnRlcl9kZXYsIGRldGFjaF9iZWZvcmVfZGV2LCBkZXRhY2hfYmV0d2Vlbl9kZXYsIGRldGFjaF9kZXYsIGRpcnR5X2NvbXBvbmVudHMsIGRpc3BhdGNoX2RldiwgZWFjaCwgZWxlbWVudCwgZWxlbWVudF9pcywgZW1wdHksIGVuZF9oeWRyYXRpbmcsIGVzY2FwZSwgZXNjYXBlX2F0dHJpYnV0ZV92YWx1ZSwgZXNjYXBlX29iamVjdCwgZXhjbHVkZV9pbnRlcm5hbF9wcm9wcywgZml4X2FuZF9kZXN0cm95X2Jsb2NrLCBmaXhfYW5kX291dHJvX2FuZF9kZXN0cm95X2Jsb2NrLCBmaXhfcG9zaXRpb24sIGZsdXNoLCBmbHVzaF9yZW5kZXJfY2FsbGJhY2tzLCBnZXRBbGxDb250ZXh0cywgZ2V0Q29udGV4dCwgZ2V0X2FsbF9kaXJ0eV9mcm9tX3Njb3BlLCBnZXRfYmluZGluZ19ncm91cF92YWx1ZSwgZ2V0X2N1cnJlbnRfY29tcG9uZW50LCBnZXRfY3VzdG9tX2VsZW1lbnRzX3Nsb3RzLCBnZXRfcm9vdF9mb3Jfc3R5bGUsIGdldF9zbG90X2NoYW5nZXMsIGdldF9zcHJlYWRfb2JqZWN0LCBnZXRfc3ByZWFkX3VwZGF0ZSwgZ2V0X3N0b3JlX3ZhbHVlLCBnbG9iYWxzLCBncm91cF9vdXRyb3MsIGhhbmRsZV9wcm9taXNlLCBoYXNDb250ZXh0LCBoYXNfcHJvcCwgaGVhZF9zZWxlY3RvciwgaWRlbnRpdHksIGluaXQsIGluaXRfYmluZGluZ19ncm91cCwgaW5pdF9iaW5kaW5nX2dyb3VwX2R5bmFtaWMsIGluc2VydCwgaW5zZXJ0X2RldiwgaW5zZXJ0X2h5ZHJhdGlvbiwgaW5zZXJ0X2h5ZHJhdGlvbl9kZXYsIGludHJvcywgaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIsIGlzX2NsaWVudCwgaXNfY3Jvc3NvcmlnaW4sIGlzX2VtcHR5LCBpc19mdW5jdGlvbiwgaXNfcHJvbWlzZSwgaXNfdm9pZCwgbGlzdGVuLCBsaXN0ZW5fZGV2LCBsb29wLCBsb29wX2d1YXJkLCBtZXJnZV9zc3Jfc3R5bGVzLCBtaXNzaW5nX2NvbXBvbmVudCwgbW91bnRfY29tcG9uZW50LCBub29wLCBub3RfZXF1YWwsIG5vdywgbnVsbF90b19lbXB0eSwgb2JqZWN0X3dpdGhvdXRfcHJvcGVydGllcywgb25EZXN0cm95LCBvbk1vdW50LCBvbmNlLCBvdXRyb19hbmRfZGVzdHJveV9ibG9jaywgcHJldmVudF9kZWZhdWx0LCBwcm9wX2RldiwgcXVlcnlfc2VsZWN0b3JfYWxsLCByYWYsIHJlc2l6ZV9vYnNlcnZlcl9ib3JkZXJfYm94LCByZXNpemVfb2JzZXJ2ZXJfY29udGVudF9ib3gsIHJlc2l6ZV9vYnNlcnZlcl9kZXZpY2VfcGl4ZWxfY29udGVudF9ib3gsIHJ1biwgcnVuX2FsbCwgc2FmZV9ub3RfZXF1YWwsIHNjaGVkdWxlX3VwZGF0ZSwgc2VsZWN0X211bHRpcGxlX3ZhbHVlLCBzZWxlY3Rfb3B0aW9uLCBzZWxlY3Rfb3B0aW9ucywgc2VsZWN0X3ZhbHVlLCBzZWxmLCBzZXRDb250ZXh0LCBzZXRfYXR0cmlidXRlcywgc2V0X2N1cnJlbnRfY29tcG9uZW50LCBzZXRfY3VzdG9tX2VsZW1lbnRfZGF0YSwgc2V0X2N1c3RvbV9lbGVtZW50X2RhdGFfbWFwLCBzZXRfZGF0YSwgc2V0X2RhdGFfY29udGVudGVkaXRhYmxlLCBzZXRfZGF0YV9jb250ZW50ZWRpdGFibGVfZGV2LCBzZXRfZGF0YV9kZXYsIHNldF9kYXRhX21heWJlX2NvbnRlbnRlZGl0YWJsZSwgc2V0X2RhdGFfbWF5YmVfY29udGVudGVkaXRhYmxlX2Rldiwgc2V0X2R5bmFtaWNfZWxlbWVudF9kYXRhLCBzZXRfaW5wdXRfdHlwZSwgc2V0X2lucHV0X3ZhbHVlLCBzZXRfbm93LCBzZXRfcmFmLCBzZXRfc3RvcmVfdmFsdWUsIHNldF9zdHlsZSwgc2V0X3N2Z19hdHRyaWJ1dGVzLCBzcGFjZSwgc3BsaXRfY3NzX3VuaXQsIHNwcmVhZCwgc3JjX3VybF9lcXVhbCwgc3RhcnRfaHlkcmF0aW5nLCBzdG9wX2ltbWVkaWF0ZV9wcm9wYWdhdGlvbiwgc3RvcF9wcm9wYWdhdGlvbiwgc3Vic2NyaWJlLCBzdmdfZWxlbWVudCwgdGV4dCwgdGljaywgdGltZV9yYW5nZXNfdG9fYXJyYXksIHRvX251bWJlciwgdG9nZ2xlX2NsYXNzLCB0cmFuc2l0aW9uX2luLCB0cmFuc2l0aW9uX291dCwgdHJ1c3RlZCwgdXBkYXRlX2F3YWl0X2Jsb2NrX2JyYW5jaCwgdXBkYXRlX2tleWVkX2VhY2gsIHVwZGF0ZV9zbG90LCB1cGRhdGVfc2xvdF9iYXNlLCB2YWxpZGF0ZV9jb21wb25lbnQsIHZhbGlkYXRlX2R5bmFtaWNfZWxlbWVudCwgdmFsaWRhdGVfZWFjaF9hcmd1bWVudCwgdmFsaWRhdGVfZWFjaF9rZXlzLCB2YWxpZGF0ZV9zbG90cywgdmFsaWRhdGVfc3RvcmUsIHZhbGlkYXRlX3ZvaWRfZHluYW1pY19lbGVtZW50LCB4bGlua19hdHRyIH07XG4iLCAiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG5cblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1Jcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UsIFN1cHByZXNzZWRFcnJvciwgU3ltYm9sLCBJdGVyYXRvciAqL1xuXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcbiAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcbiAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn1cblxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xuICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xuICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHQ7XG4gIH1cbiAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xuICB2YXIgdCA9IHt9O1xuICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgIHRbcF0gPSBzW3BdO1xuICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxuICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcbiAgICAgIH1cbiAgcmV0dXJuIHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xuICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fZXNEZWNvcmF0ZShjdG9yLCBkZXNjcmlwdG9ySW4sIGRlY29yYXRvcnMsIGNvbnRleHRJbiwgaW5pdGlhbGl6ZXJzLCBleHRyYUluaXRpYWxpemVycykge1xuICBmdW5jdGlvbiBhY2NlcHQoZikgeyBpZiAoZiAhPT0gdm9pZCAwICYmIHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGdW5jdGlvbiBleHBlY3RlZFwiKTsgcmV0dXJuIGY7IH1cbiAgdmFyIGtpbmQgPSBjb250ZXh0SW4ua2luZCwga2V5ID0ga2luZCA9PT0gXCJnZXR0ZXJcIiA/IFwiZ2V0XCIgOiBraW5kID09PSBcInNldHRlclwiID8gXCJzZXRcIiA6IFwidmFsdWVcIjtcbiAgdmFyIHRhcmdldCA9ICFkZXNjcmlwdG9ySW4gJiYgY3RvciA/IGNvbnRleHRJbltcInN0YXRpY1wiXSA/IGN0b3IgOiBjdG9yLnByb3RvdHlwZSA6IG51bGw7XG4gIHZhciBkZXNjcmlwdG9yID0gZGVzY3JpcHRvckluIHx8ICh0YXJnZXQgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgY29udGV4dEluLm5hbWUpIDoge30pO1xuICB2YXIgXywgZG9uZSA9IGZhbHNlO1xuICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGNvbnRleHQgPSB7fTtcbiAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluKSBjb250ZXh0W3BdID0gcCA9PT0gXCJhY2Nlc3NcIiA/IHt9IDogY29udGV4dEluW3BdO1xuICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4uYWNjZXNzKSBjb250ZXh0LmFjY2Vzc1twXSA9IGNvbnRleHRJbi5hY2Nlc3NbcF07XG4gICAgICBjb250ZXh0LmFkZEluaXRpYWxpemVyID0gZnVuY3Rpb24gKGYpIHsgaWYgKGRvbmUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIGluaXRpYWxpemVycyBhZnRlciBkZWNvcmF0aW9uIGhhcyBjb21wbGV0ZWRcIik7IGV4dHJhSW5pdGlhbGl6ZXJzLnB1c2goYWNjZXB0KGYgfHwgbnVsbCkpOyB9O1xuICAgICAgdmFyIHJlc3VsdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShraW5kID09PSBcImFjY2Vzc29yXCIgPyB7IGdldDogZGVzY3JpcHRvci5nZXQsIHNldDogZGVzY3JpcHRvci5zZXQgfSA6IGRlc2NyaXB0b3Jba2V5XSwgY29udGV4dCk7XG4gICAgICBpZiAoa2luZCA9PT0gXCJhY2Nlc3NvclwiKSB7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmdldCkpIGRlc2NyaXB0b3IuZ2V0ID0gXztcbiAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuc2V0KSkgZGVzY3JpcHRvci5zZXQgPSBfO1xuICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5pbml0KSkgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChfID0gYWNjZXB0KHJlc3VsdCkpIHtcbiAgICAgICAgICBpZiAoa2luZCA9PT0gXCJmaWVsZFwiKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcbiAgICAgICAgICBlbHNlIGRlc2NyaXB0b3Jba2V5XSA9IF87XG4gICAgICB9XG4gIH1cbiAgaWYgKHRhcmdldCkgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgY29udGV4dEluLm5hbWUsIGRlc2NyaXB0b3IpO1xuICBkb25lID0gdHJ1ZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3J1bkluaXRpYWxpemVycyh0aGlzQXJnLCBpbml0aWFsaXplcnMsIHZhbHVlKSB7XG4gIHZhciB1c2VWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGluaXRpYWxpemVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFsdWUgPSB1c2VWYWx1ZSA/IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcsIHZhbHVlKSA6IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcpO1xuICB9XG4gIHJldHVybiB1c2VWYWx1ZSA/IHZhbHVlIDogdm9pZCAwO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fcHJvcEtleSh4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gXCJzeW1ib2xcIiA/IHggOiBcIlwiLmNvbmNhdCh4KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3NldEZ1bmN0aW9uTmFtZShmLCBuYW1lLCBwcmVmaXgpIHtcbiAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN5bWJvbFwiKSBuYW1lID0gbmFtZS5kZXNjcmlwdGlvbiA/IFwiW1wiLmNvbmNhdChuYW1lLmRlc2NyaXB0aW9uLCBcIl1cIikgOiBcIlwiO1xuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGYsIFwibmFtZVwiLCB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHByZWZpeCA/IFwiXCIuY29uY2F0KHByZWZpeCwgXCIgXCIsIG5hbWUpIDogbmFtZSB9KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XG4gIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xuICByZXR1cm4gZy5uZXh0ID0gdmVyYigwKSwgZ1tcInRocm93XCJdID0gdmVyYigxKSwgZ1tcInJldHVyblwiXSA9IHZlcmIoMiksIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgfVxufVxuXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgb1trMl0gPSBtW2tdO1xufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xuICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XG4gIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XG4gIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xuICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XG4gICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcbiAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XG4gICAgICB9XG4gIH07XG4gIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XG4gIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcbiAgaWYgKCFtKSByZXR1cm4gbztcbiAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XG4gIHRyeSB7XG4gICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcbiAgfVxuICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cbiAgZmluYWxseSB7XG4gICAgICB0cnkge1xuICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xuICAgICAgfVxuICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XG4gIH1cbiAgcmV0dXJuIGFyO1xufVxuXG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcbiAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXG4gICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XG4gIHJldHVybiBhcjtcbn1cblxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XG4gIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xuICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXG4gICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcbiAgICAgICAgICByW2tdID0gYVtqXTtcbiAgcmV0dXJuIHI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XG4gIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICB9XG4gIH1cbiAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcbiAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xuICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xuICByZXR1cm4gaSA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBBc3luY0l0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBBc3luY0l0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpLCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIsIGF3YWl0UmV0dXJuKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xuICBmdW5jdGlvbiBhd2FpdFJldHVybihmKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZiwgcmVqZWN0KTsgfTsgfVxuICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaWYgKGdbbl0pIHsgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgaWYgKGYpIGlbbl0gPSBmKGlbbl0pOyB9IH1cbiAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxuICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cbiAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxuICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XG4gIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xuICB2YXIgaSwgcDtcbiAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcbiAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogZmFsc2UgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xuICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xuICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XG4gIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cbiAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcbiAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cbiAgcmV0dXJuIGNvb2tlZDtcbn07XG5cbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gIG9bXCJkZWZhdWx0XCJdID0gdjtcbn07XG5cbnZhciBvd25LZXlzID0gZnVuY3Rpb24obykge1xuICBvd25LZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgfHwgZnVuY3Rpb24gKG8pIHtcbiAgICB2YXIgYXIgPSBbXTtcbiAgICBmb3IgKHZhciBrIGluIG8pIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgaykpIGFyW2FyLmxlbmd0aF0gPSBrO1xuICAgIHJldHVybiBhcjtcbiAgfTtcbiAgcmV0dXJuIG93bktleXMobyk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xuICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICB2YXIgcmVzdWx0ID0ge307XG4gIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayA9IG93bktleXMobW9kKSwgaSA9IDA7IGkgPCBrLmxlbmd0aDsgaSsrKSBpZiAoa1tpXSAhPT0gXCJkZWZhdWx0XCIpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwga1tpXSk7XG4gIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XG4gIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xuICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XG4gIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XG4gIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcbiAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xuICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRJbihzdGF0ZSwgcmVjZWl2ZXIpIHtcbiAgaWYgKHJlY2VpdmVyID09PSBudWxsIHx8ICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlY2VpdmVyICE9PSBcImZ1bmN0aW9uXCIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHVzZSAnaW4nIG9wZXJhdG9yIG9uIG5vbi1vYmplY3RcIik7XG4gIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnYsIHZhbHVlLCBhc3luYykge1xuICBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWQuXCIpO1xuICAgIHZhciBkaXNwb3NlLCBpbm5lcjtcbiAgICBpZiAoYXN5bmMpIHtcbiAgICAgIGlmICghU3ltYm9sLmFzeW5jRGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0Rpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xuICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5hc3luY0Rpc3Bvc2VdO1xuICAgIH1cbiAgICBpZiAoZGlzcG9zZSA9PT0gdm9pZCAwKSB7XG4gICAgICBpZiAoIVN5bWJvbC5kaXNwb3NlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmRpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xuICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5kaXNwb3NlXTtcbiAgICAgIGlmIChhc3luYykgaW5uZXIgPSBkaXNwb3NlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRpc3Bvc2UgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBub3QgZGlzcG9zYWJsZS5cIik7XG4gICAgaWYgKGlubmVyKSBkaXNwb3NlID0gZnVuY3Rpb24oKSB7IHRyeSB7IGlubmVyLmNhbGwodGhpcyk7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpOyB9IH07XG4gICAgZW52LnN0YWNrLnB1c2goeyB2YWx1ZTogdmFsdWUsIGRpc3Bvc2U6IGRpc3Bvc2UsIGFzeW5jOiBhc3luYyB9KTtcbiAgfVxuICBlbHNlIGlmIChhc3luYykge1xuICAgIGVudi5zdGFjay5wdXNoKHsgYXN5bmM6IHRydWUgfSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG52YXIgX1N1cHByZXNzZWRFcnJvciA9IHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xuICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2Rpc3Bvc2VSZXNvdXJjZXMoZW52KSB7XG4gIGZ1bmN0aW9uIGZhaWwoZSkge1xuICAgIGVudi5lcnJvciA9IGVudi5oYXNFcnJvciA/IG5ldyBfU3VwcHJlc3NlZEVycm9yKGUsIGVudi5lcnJvciwgXCJBbiBlcnJvciB3YXMgc3VwcHJlc3NlZCBkdXJpbmcgZGlzcG9zYWwuXCIpIDogZTtcbiAgICBlbnYuaGFzRXJyb3IgPSB0cnVlO1xuICB9XG4gIHZhciByLCBzID0gMDtcbiAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICB3aGlsZSAociA9IGVudi5zdGFjay5wb3AoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFyLmFzeW5jICYmIHMgPT09IDEpIHJldHVybiBzID0gMCwgZW52LnN0YWNrLnB1c2gociksIFByb21pc2UucmVzb2x2ZSgpLnRoZW4obmV4dCk7XG4gICAgICAgIGlmIChyLmRpc3Bvc2UpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gci5kaXNwb3NlLmNhbGwoci52YWx1ZSk7XG4gICAgICAgICAgaWYgKHIuYXN5bmMpIHJldHVybiBzIHw9IDIsIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4obmV4dCwgZnVuY3Rpb24oZSkgeyBmYWlsKGUpOyByZXR1cm4gbmV4dCgpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHMgfD0gMTtcbiAgICAgIH1cbiAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGZhaWwoZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzID09PSAxKSByZXR1cm4gZW52Lmhhc0Vycm9yID8gUHJvbWlzZS5yZWplY3QoZW52LmVycm9yKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIGlmIChlbnYuaGFzRXJyb3IpIHRocm93IGVudi5lcnJvcjtcbiAgfVxuICByZXR1cm4gbmV4dCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19yZXdyaXRlUmVsYXRpdmVJbXBvcnRFeHRlbnNpb24ocGF0aCwgcHJlc2VydmVKc3gpIHtcbiAgaWYgKHR5cGVvZiBwYXRoID09PSBcInN0cmluZ1wiICYmIC9eXFwuXFwuP1xcLy8udGVzdChwYXRoKSkge1xuICAgICAgcmV0dXJuIHBhdGgucmVwbGFjZSgvXFwuKHRzeCkkfCgoPzpcXC5kKT8pKCg/OlxcLlteLi9dKz8pPylcXC4oW2NtXT8pdHMkL2ksIGZ1bmN0aW9uIChtLCB0c3gsIGQsIGV4dCwgY20pIHtcbiAgICAgICAgICByZXR1cm4gdHN4ID8gcHJlc2VydmVKc3ggPyBcIi5qc3hcIiA6IFwiLmpzXCIgOiBkICYmICghZXh0IHx8ICFjbSkgPyBtIDogKGQgKyBleHQgKyBcIi5cIiArIGNtLnRvTG93ZXJDYXNlKCkgKyBcImpzXCIpO1xuICAgICAgfSk7XG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgX19leHRlbmRzLFxuICBfX2Fzc2lnbixcbiAgX19yZXN0LFxuICBfX2RlY29yYXRlLFxuICBfX3BhcmFtLFxuICBfX2VzRGVjb3JhdGUsXG4gIF9fcnVuSW5pdGlhbGl6ZXJzLFxuICBfX3Byb3BLZXksXG4gIF9fc2V0RnVuY3Rpb25OYW1lLFxuICBfX21ldGFkYXRhLFxuICBfX2F3YWl0ZXIsXG4gIF9fZ2VuZXJhdG9yLFxuICBfX2NyZWF0ZUJpbmRpbmcsXG4gIF9fZXhwb3J0U3RhcixcbiAgX192YWx1ZXMsXG4gIF9fcmVhZCxcbiAgX19zcHJlYWQsXG4gIF9fc3ByZWFkQXJyYXlzLFxuICBfX3NwcmVhZEFycmF5LFxuICBfX2F3YWl0LFxuICBfX2FzeW5jR2VuZXJhdG9yLFxuICBfX2FzeW5jRGVsZWdhdG9yLFxuICBfX2FzeW5jVmFsdWVzLFxuICBfX21ha2VUZW1wbGF0ZU9iamVjdCxcbiAgX19pbXBvcnRTdGFyLFxuICBfX2ltcG9ydERlZmF1bHQsXG4gIF9fY2xhc3NQcml2YXRlRmllbGRHZXQsXG4gIF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXG4gIF9fY2xhc3NQcml2YXRlRmllbGRJbixcbiAgX19hZGREaXNwb3NhYmxlUmVzb3VyY2UsXG4gIF9fZGlzcG9zZVJlc291cmNlcyxcbiAgX19yZXdyaXRlUmVsYXRpdmVJbXBvcnRFeHRlbnNpb24sXG59O1xuIiwgIjxzY3JpcHQgbGFuZz1cInRzXCI+XG4gICAgaW1wb3J0IHsgY3JlYXRlRXZlbnREaXNwYXRjaGVyLCBvbk1vdW50LCBvbkRlc3Ryb3ksIHRpY2sgfSBmcm9tIFwic3ZlbHRlXCI7XG4gICAgaW1wb3J0IHR5cGUgeyBEZWNrLCBGbGFzaGNhcmQgfSBmcm9tIFwiLi4vZGF0YWJhc2UvdHlwZXNcIjtcbiAgICBpbXBvcnQgdHlwZSB7IEZsYXNoY2FyZHNTZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xuICAgIGltcG9ydCB7IEZTUlMsIHR5cGUgUmF0aW5nTGFiZWwgfSBmcm9tIFwiLi4vYWxnb3JpdGhtL2ZzcnNcIjtcbiAgICBpbXBvcnQgdHlwZSB7XG4gICAgICAgIFNjaGVkdWxlcixcbiAgICAgICAgU2NoZWR1bGluZ1ByZXZpZXcsXG4gICAgICAgIFNlc3Npb25Qcm9ncmVzcyxcbiAgICB9IGZyb20gXCIuLi9zZXJ2aWNlcy9TY2hlZHVsZXJcIjtcbiAgICBpbXBvcnQgeyB5aWVsZFRvVUkgfSBmcm9tIFwiQC91dGlscy91aVwiO1xuXG4gICAgZXhwb3J0IGxldCBkZWNrOiBEZWNrO1xuICAgIGV4cG9ydCBsZXQgaW5pdGlhbENhcmQ6IEZsYXNoY2FyZCB8IG51bGwgPSBudWxsO1xuICAgIGV4cG9ydCBsZXQgb25SZXZpZXc6IChcbiAgICAgICAgY2FyZDogRmxhc2hjYXJkLFxuICAgICAgICByYXRpbmc6IFJhdGluZ0xhYmVsLFxuICAgICAgICB0aW1lRWxhcHNlZD86IG51bWJlcixcbiAgICApID0+IFByb21pc2U8dm9pZD47XG4gICAgZXhwb3J0IGxldCByZW5kZXJNYXJrZG93bjogKGNvbnRlbnQ6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KSA9PiB2b2lkO1xuICAgIGV4cG9ydCBsZXQgc2V0dGluZ3M6IEZsYXNoY2FyZHNTZXR0aW5ncztcbiAgICBleHBvcnQgbGV0IHNjaGVkdWxlcjogU2NoZWR1bGVyO1xuICAgIGV4cG9ydCBsZXQgb25DYXJkUmV2aWV3ZWQ6XG4gICAgICAgIHwgKChyZXZpZXdlZENhcmQ6IEZsYXNoY2FyZCkgPT4gUHJvbWlzZTx2b2lkPilcbiAgICAgICAgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBkaXNwYXRjaCA9IGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpO1xuXG4gICAgbGV0IHNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICBsZXQgaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgbGV0IHJldmlld0ZpbmlzaGVkID0gZmFsc2U7XG4gICAgbGV0IGZyb250RWw6IEhUTUxFbGVtZW50O1xuICAgIGxldCBiYWNrRWw6IEhUTUxFbGVtZW50O1xuICAgIGxldCBzY2hlZHVsaW5nSW5mbzogU2NoZWR1bGluZ1ByZXZpZXcgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgcmV2aWV3ZWRDb3VudCA9IDA7XG4gICAgbGV0IGNhcmRTdGFydFRpbWU6IG51bWJlciA9IDA7XG4gICAgbGV0IGN1cnJlbnRDYXJkOiBGbGFzaGNhcmQgfCBudWxsID0gaW5pdGlhbENhcmQ7XG4gICAgbGV0IHNlc3Npb25JZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IHNlc3Npb25Qcm9ncmVzczogU2Vzc2lvblByb2dyZXNzIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvLyBTZXNzaW9uIHRpbWVyIHZhcmlhYmxlc1xuICAgIGxldCBzZXNzaW9uU3RhcnRUaW1lOiBudW1iZXIgPSAwO1xuICAgIGxldCBzZXNzaW9uVGltZVJlbWFpbmluZzogbnVtYmVyID0gMDtcbiAgICBsZXQgc2Vzc2lvblRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuXG4gICAgLy8gVHJhY2sgbGFzdCBldmVudCB0byBwcmV2ZW50IGRvdWJsZSBleGVjdXRpb25cbiAgICBsZXQgbGFzdEV2ZW50VGltZSA9IDA7XG4gICAgbGV0IGxhc3RFdmVudFR5cGUgPSBcIlwiO1xuXG4gICAgJDogcHJvZ3Jlc3MgPSBzZXNzaW9uUHJvZ3Jlc3MgPyBzZXNzaW9uUHJvZ3Jlc3MucHJvZ3Jlc3MgOiAwO1xuICAgICQ6IHRpbWVSZW1haW5pbmdEaXNwbGF5ID0gZm9ybWF0VGltZVJlbWFpbmluZyhzZXNzaW9uVGltZVJlbWFpbmluZyk7XG5cbiAgICBvbk1vdW50KGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSByZXZpZXcgc2Vzc2lvblxuICAgICAgICBzZXNzaW9uSWQgPSBhd2FpdCBzY2hlZHVsZXIuc3RhcnRGcmVzaFNlc3Npb24oXG4gICAgICAgICAgICBkZWNrLmlkLFxuICAgICAgICAgICAgbmV3IERhdGUoKSxcbiAgICAgICAgICAgIHNldHRpbmdzLnJldmlldy5zZXNzaW9uRHVyYXRpb24sXG4gICAgICAgICk7XG4gICAgICAgIHNjaGVkdWxlci5zZXRDdXJyZW50U2Vzc2lvbihzZXNzaW9uSWQpO1xuICAgICAgICBzZXNzaW9uUHJvZ3Jlc3MgPSBhd2FpdCBzY2hlZHVsZXIuZ2V0U2Vzc2lvblByb2dyZXNzKHNlc3Npb25JZCk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBzZXNzaW9uIHRpbWVyXG4gICAgICAgIHN0YXJ0U2Vzc2lvblRpbWVyKCk7XG5cbiAgICAgICAgLy8gSWYgbm8gaW5pdGlhbCBjYXJkIHByb3ZpZGVkLCBnZXQgdGhlIGZpcnN0IGNhcmQgZnJvbSBzY2hlZHVsZXJcbiAgICAgICAgaWYgKCFjdXJyZW50Q2FyZCkge1xuICAgICAgICAgICAgY3VycmVudENhcmQgPSBhd2FpdCBzY2hlZHVsZXIuZ2V0TmV4dChuZXcgRGF0ZSgpLCBkZWNrLmlkLCB7XG4gICAgICAgICAgICAgICAgYWxsb3dOZXc6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZCkge1xuICAgICAgICAgICAgYXdhaXQgbG9hZENhcmQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGVuZFJldmlldygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGtleWRvd24gZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUtleWRvd24pO1xuICAgIH0pO1xuXG4gICAgYXN5bmMgZnVuY3Rpb24gbG9hZENhcmQoKSB7XG4gICAgICAgIGlmICghY3VycmVudENhcmQpIHJldHVybjtcblxuICAgICAgICBzaG93QW5zd2VyID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzY2hlZHVsaW5nSW5mbyA9IGF3YWl0IHNjaGVkdWxlci5wcmV2aWV3KGN1cnJlbnRDYXJkLmlkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHNjaGVkdWxpbmcgcHJldmlldzpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgc2NoZWR1bGluZ0luZm8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNhcmRTdGFydFRpbWUgPSBEYXRlLm5vdygpOyAvLyBUcmFjayB3aGVuIGNhcmQgaXMgZGlzcGxheWVkXG5cbiAgICAgICAgLy8gUmVuZGVyIGZyb250IHNpZGVcbiAgICAgICAgaWYgKGZyb250RWwpIHtcbiAgICAgICAgICAgIGZyb250RWwuZW1wdHkoKTtcbiAgICAgICAgICAgIHJlbmRlck1hcmtkb3duKGN1cnJlbnRDYXJkLmZyb250LCBmcm9udEVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByZS1yZW5kZXIgYmFjayBzaWRlIGJ1dCBrZWVwIGl0IGhpZGRlblxuICAgICAgICAvLyBVc2UgdGljaygpIHRvIGVuc3VyZSBET00gaXMgdXBkYXRlZCBiZWZvcmUgcmVuZGVyaW5nXG4gICAgICAgIHRpY2soKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChiYWNrRWwgJiYgY3VycmVudENhcmQpIHtcbiAgICAgICAgICAgICAgICBiYWNrRWwuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICByZW5kZXJNYXJrZG93bihjdXJyZW50Q2FyZC5iYWNrLCBiYWNrRWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXZlYWxBbnN3ZXIoKSB7XG4gICAgICAgIHNob3dBbnN3ZXIgPSB0cnVlO1xuICAgICAgICAvLyBFbnN1cmUgYmFjayBlbGVtZW50IGlzIHJlbmRlcmVkIGFmdGVyIHNob3dBbnN3ZXIgYmVjb21lcyB0cnVlXG4gICAgICAgIHRpY2soKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChiYWNrRWwgJiYgY3VycmVudENhcmQpIHtcbiAgICAgICAgICAgICAgICBiYWNrRWwuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICByZW5kZXJNYXJrZG93bihjdXJyZW50Q2FyZC5iYWNrLCBiYWNrRWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBoYW5kbGVSZXZpZXcocmF0aW5nOiBSYXRpbmdMYWJlbCkge1xuICAgICAgICBpZiAoIWN1cnJlbnRDYXJkIHx8IGlzTG9hZGluZykgcmV0dXJuO1xuXG4gICAgICAgIGlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0aW1lRWxhcHNlZCA9IERhdGUubm93KCkgLSBjYXJkU3RhcnRUaW1lO1xuICAgICAgICAgICAgYXdhaXQgb25SZXZpZXcoY3VycmVudENhcmQsIHJhdGluZywgdGltZUVsYXBzZWQpO1xuICAgICAgICAgICAgcmV2aWV3ZWRDb3VudCsrO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgc2Vzc2lvbiBwcm9ncmVzcyBhZnRlciByZXZpZXdcbiAgICAgICAgICAgIGlmIChzZXNzaW9uSWQpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uUHJvZ3Jlc3MgPSBhd2FpdCBzY2hlZHVsZXIuZ2V0U2Vzc2lvblByb2dyZXNzKHNlc3Npb25JZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgc3RhdHMgcmVmcmVzaCBhZnRlciBlYWNoIGNhcmQgcmV2aWV3XG4gICAgICAgICAgICBpZiAob25DYXJkUmV2aWV3ZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBvbkNhcmRSZXZpZXdlZChjdXJyZW50Q2FyZCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgeWllbGRUb1VJKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgbmV4dCBjYXJkIGZyb20gdGhlIHNjaGVkdWxlclxuICAgICAgICAgICAgY3VycmVudENhcmQgPSBhd2FpdCBzY2hlZHVsZXIuZ2V0TmV4dChuZXcgRGF0ZSgpLCBkZWNrLmlkLCB7XG4gICAgICAgICAgICAgICAgYWxsb3dOZXc6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHlpZWxkVG9VSSgpO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudENhcmQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2FkQ2FyZCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBlbmRSZXZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXZpZXdpbmcgY2FyZDpcIiwgZXJyb3IpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRJbnRlcnZhbERpc3BsYXkobWludXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKG1pbnV0ZXMgPCA2MCkge1xuICAgICAgICAgICAgcmV0dXJuIGAke01hdGgucm91bmQobWludXRlcyl9bWA7XG4gICAgICAgIH0gZWxzZSBpZiAobWludXRlcyA8IDE0NDApIHtcbiAgICAgICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5yb3VuZChtaW51dGVzIC8gNjApO1xuICAgICAgICAgICAgcmV0dXJuIGAke2hvdXJzfWhgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGF5cyA9IE1hdGgucm91bmQobWludXRlcyAvIDE0NDApO1xuICAgICAgICAgICAgcmV0dXJuIGAke2RheXN9ZGA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVLZXlkb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcpIHJldHVybjtcblxuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSBcImtleWJvYXJkXCI7XG5cbiAgICAgICAgLy8gUHJldmVudCBkb3VibGUgZXhlY3V0aW9uIHdpdGhpbiAxMDBtcyAoc2FtZSBhcyB0b3VjaCBwcm90ZWN0aW9uKVxuICAgICAgICBpZiAobm93IC0gbGFzdEV2ZW50VGltZSA8IDEwMCAmJiBsYXN0RXZlbnRUeXBlID09PSBldmVudFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2hvd0Fuc3dlciAmJiBldmVudC5rZXkgPT09IFwiIFwiKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGFzdEV2ZW50VGltZSA9IG5vdztcbiAgICAgICAgICAgIGxhc3RFdmVudFR5cGUgPSBldmVudFR5cGU7XG4gICAgICAgICAgICByZXZlYWxBbnN3ZXIoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzaG93QW5zd2VyKSB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgdGltaW5nIGJlZm9yZSBoYW5kbGluZyByZXZpZXdcbiAgICAgICAgICAgIGxhc3RFdmVudFRpbWUgPSBub3c7XG4gICAgICAgICAgICBsYXN0RXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCIxXCI6XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVJldmlldyhcImFnYWluXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiMlwiOlxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVSZXZpZXcoXCJoYXJkXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiM1wiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCIgXCI6XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVJldmlldyhcImdvb2RcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCI0XCI6XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVJldmlldyhcImVhc3lcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gcmF0ZSh2OiAxIHwgMiB8IDMgfCA0KSB7XG4gICAgICAgIGlmICh2ID09PSAxKSBhd2FpdCBoYW5kbGVSZXZpZXcoXCJhZ2FpblwiKTtcbiAgICAgICAgZWxzZSBpZiAodiA9PT0gMikgYXdhaXQgaGFuZGxlUmV2aWV3KFwiaGFyZFwiKTtcbiAgICAgICAgZWxzZSBpZiAodiA9PT0gMykgYXdhaXQgaGFuZGxlUmV2aWV3KFwiZ29vZFwiKTtcbiAgICAgICAgZWxzZSBpZiAodiA9PT0gNCkgYXdhaXQgaGFuZGxlUmV2aWV3KFwiZWFzeVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBvblNob3dBbnN3ZXIgPSBhc3luYyAoZTogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV2ZWFsQW5zd2VyKCk7XG4gICAgICAgIGF3YWl0IHlpZWxkVG9VSSgpO1xuICAgIH07XG5cbiAgICBjb25zdCBvblJhdGluZyA9IGFzeW5jIChlOiBQb2ludGVyRXZlbnQsIHY6IDEgfCAyIHwgMyB8IDQpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhd2FpdCByYXRlKHYpO1xuICAgICAgICBhd2FpdCB5aWVsZFRvVUkoKTtcbiAgICB9O1xuXG4gICAgb25EZXN0cm95KGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gQ2xlYW4gdXAga2V5ZG93biBldmVudCBsaXN0ZW5lclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5ZG93bik7XG5cbiAgICAgICAgLy8gQ2xlYW4gdXAgc2Vzc2lvbiB0aW1lclxuICAgICAgICBpZiAoc2Vzc2lvblRpbWVyKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHNlc3Npb25UaW1lcik7XG4gICAgICAgICAgICBzZXNzaW9uVGltZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV2aWV3IHNlc3Npb24gY29tcGxldGVcbiAgICAgICAgYXdhaXQgZW5kUmV2aWV3KCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBlbmRSZXZpZXcgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmIChyZXZpZXdGaW5pc2hlZCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIENsZWFuIHVwIHNlc3Npb24gdGltZXJcbiAgICAgICAgaWYgKHNlc3Npb25UaW1lcikge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzZXNzaW9uVGltZXIpO1xuICAgICAgICAgICAgc2Vzc2lvblRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVuZCB0aGUgcmV2aWV3IHNlc3Npb25cbiAgICAgICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgICAgICAgYXdhaXQgc2NoZWR1bGVyLmVuZFJldmlld1Nlc3Npb24oc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIHNjaGVkdWxlci5zZXRDdXJyZW50U2Vzc2lvbihudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpc3BhdGNoKFwiY29tcGxldGVcIiwge1xuICAgICAgICAgICAgcmVhc29uOiBcImVuZC1yZXZpZXdcIixcbiAgICAgICAgICAgIHJldmlld2VkOiBzZXNzaW9uUHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICA/IHNlc3Npb25Qcm9ncmVzcy5kb25lVW5pcXVlXG4gICAgICAgICAgICAgICAgOiByZXZpZXdlZENvdW50LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV2aWV3RmluaXNoZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzdGFydFNlc3Npb25UaW1lcigpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkR1cmF0aW9uTXMgPSBzZXR0aW5ncy5yZXZpZXcuc2Vzc2lvbkR1cmF0aW9uICogNjAgKiAxMDAwOyAvLyBDb252ZXJ0IG1pbnV0ZXMgdG8gbWlsbGlzZWNvbmRzXG4gICAgICAgIHNlc3Npb25TdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBzZXNzaW9uVGltZVJlbWFpbmluZyA9IHNlc3Npb25EdXJhdGlvbk1zO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aW1lciBldmVyeSBzZWNvbmRcbiAgICAgICAgc2Vzc2lvblRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxhcHNlZCA9IERhdGUubm93KCkgLSBzZXNzaW9uU3RhcnRUaW1lO1xuICAgICAgICAgICAgc2Vzc2lvblRpbWVSZW1haW5pbmcgPSBNYXRoLm1heCgwLCBzZXNzaW9uRHVyYXRpb25NcyAtIGVsYXBzZWQpO1xuXG4gICAgICAgICAgICAvLyBBdXRvLWNsb3NlIHdoZW4gdGltZSBpcyB1cFxuICAgICAgICAgICAgaWYgKHNlc3Npb25UaW1lUmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICAgICAgICBlbmRSZXZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9ybWF0VGltZVJlbWFpbmluZyhtczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgdG90YWxTZWNvbmRzID0gTWF0aC5jZWlsKG1zIC8gMTAwMCk7XG4gICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDYwKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IHRvdGFsU2Vjb25kcyAlIDYwO1xuICAgICAgICByZXR1cm4gYCR7bWludXRlc306JHtzZWNvbmRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfWA7XG4gICAgfVxuXG4gICAgJDogaWYgKGN1cnJlbnRDYXJkKSB7XG4gICAgICAgIGxvYWRDYXJkKCk7XG4gICAgfVxuPC9zY3JpcHQ+XG5cbjxkaXYgY2xhc3M9XCJkZWNrcy1yZXZpZXctbW9kYWxcIj5cbiAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbW9kYWwtaGVhZGVyXCI+XG4gICAgICAgIDxoMz5SZXZpZXcgU2Vzc2lvbiAtIHtkZWNrLm5hbWV9PC9oMz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWhlYWRlci1zdGF0c1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXByb2dyZXNzLWluZm9cIj5cbiAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICA+UmV2aWV3ZWQ6IHtzZXNzaW9uUHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2Vzc2lvblByb2dyZXNzLmRvbmVVbmlxdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmV2aWV3ZWRDb3VudH08L3NwYW5cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZWNrcy1yZW1haW5pbmdcIlxuICAgICAgICAgICAgICAgICAgICA+KHtzZXNzaW9uUHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYCR7c2Vzc2lvblByb2dyZXNzLmdvYWxUb3RhbCAtIHNlc3Npb25Qcm9ncmVzcy5kb25lVW5pcXVlfSByZW1haW5pbmdgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGN1cnJlbnRDYXJkXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJNb3JlIGNhcmRzIGF2YWlsYWJsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJTZXNzaW9uIGNvbXBsZXRlXCJ9KTwvc3BhblxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXRpbWVyLWRpc3BsYXlcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRlY2tzLXRpbWVyLWxhYmVsXCI+VGltZSBSZW1haW5pbmc6PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGVja3MtdGltZXItdmFsdWVcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzczpkZWNrcy10aW1lci13YXJuaW5nPXtzZXNzaW9uVGltZVJlbWFpbmluZyA8IDYwMDAwfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge3RpbWVSZW1haW5pbmdEaXNwbGF5fVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIHsjaWYgc2V0dGluZ3M/LnJldmlldz8uc2hvd1Byb2dyZXNzICE9PSBmYWxzZX1cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXJldmlldy1wcm9ncmVzcy1iYXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1wcm9ncmVzcy1maWxsXCIgc3R5bGU9XCJ3aWR0aDoge3Byb2dyZXNzfSVcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgey9pZn1cblxuICAgIHsjaWYgY3VycmVudENhcmR9XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1jYXJkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1xdWVzdGlvbi1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRlY2tzLWNhcmQtc2lkZSBkZWNrcy1mcm9udFwiXG4gICAgICAgICAgICAgICAgICAgIGJpbmQ6dGhpcz17ZnJvbnRFbH1cbiAgICAgICAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWFuc3dlci1zZWN0aW9uXCIgY2xhc3M6aGlkZGVuPXshc2hvd0Fuc3dlcn0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXNlcGFyYXRvclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJkZWNrcy1jYXJkLXNpZGUgZGVja3MtYmFja1wiXG4gICAgICAgICAgICAgICAgICAgIGJpbmQ6dGhpcz17YmFja0VsfVxuICAgICAgICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtYWN0aW9uLWJ1dHRvbnNcIj5cbiAgICAgICAgICAgIHsjaWYgIXNob3dBbnN3ZXJ9XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRlY2tzLXNob3ctYW5zd2VyLWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgIG9uOnBvaW50ZXJ1cD17YXN5bmMgKGUpID0+IGF3YWl0IG9uU2hvd0Fuc3dlcihlKX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJ0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjtcIlxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPlNob3cgQW5zd2VyPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRlY2tzLXNob3J0Y3V0XCI+U3BhY2U8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICB7L2lmfVxuXG4gICAgICAgICAgICB7I2lmIHNob3dBbnN3ZXIgJiYgc2NoZWR1bGluZ0luZm99XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWRpZmZpY3VsdHktYnV0dG9uc1wiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRlY2tzLWRpZmZpY3VsdHktYnV0dG9uIGRlY2tzLWFnYWluIGRlY2tzLXJhdGUtYnRuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbjpwb2ludGVydXA9e2FzeW5jIChlKSA9PiBhd2FpdCBvblJhdGluZyhlLCAxKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwidG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtYnV0dG9uLWxhYmVsXCI+QWdhaW48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1pbnRlcnZhbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJbnRlcnZhbERpc3BsYXkoc2NoZWR1bGluZ0luZm8uYWdhaW4uaW50ZXJ2YWwpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc2hvcnRjdXRcIj4xPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGVja3MtZGlmZmljdWx0eS1idXR0b24gZGVja3MtaGFyZCBkZWNrcy1yYXRlLWJ0blwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbjpwb2ludGVydXA9e2FzeW5jIChlKSA9PiBhd2FpdCBvblJhdGluZyhlLCAyKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwidG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWJ1dHRvbi1sYWJlbFwiPkhhcmQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1pbnRlcnZhbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRJbnRlcnZhbERpc3BsYXkoc2NoZWR1bGluZ0luZm8uaGFyZC5pbnRlcnZhbCl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zaG9ydGN1dFwiPjI8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJkZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbiBkZWNrcy1nb29kIGRlY2tzLXJhdGUtYnRuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uOnBvaW50ZXJ1cD17YXN5bmMgKGUpID0+IGF3YWl0IG9uUmF0aW5nKGUsIDMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtYnV0dG9uLWxhYmVsXCI+R29vZDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWludGVydmFsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldEludGVydmFsRGlzcGxheShzY2hlZHVsaW5nSW5mby5nb29kLmludGVydmFsKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXNob3J0Y3V0XCI+MzwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRlY2tzLWRpZmZpY3VsdHktYnV0dG9uIGRlY2tzLWVhc3kgZGVja3MtcmF0ZS1idG5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgb246cG9pbnRlcnVwPXthc3luYyAoZSkgPT4gYXdhaXQgb25SYXRpbmcoZSwgNCl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1idXR0b24tbGFiZWxcIj5FYXN5PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtaW50ZXJ2YWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0SW50ZXJ2YWxEaXNwbGF5KHNjaGVkdWxpbmdJbmZvLmVhc3kuaW50ZXJ2YWwpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc2hvcnRjdXRcIj40PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgey9pZn1cbiAgICAgICAgPC9kaXY+XG4gICAgezplbHNlfVxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtZW1wdHktc3RhdGVcIj5cbiAgICAgICAgICAgIDxwPk5vIGNhcmRzIHRvIHJldmlldzwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgey9pZn1cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgLmRlY2tzLXJldmlldy1tb2RhbCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGhlaWdodDogOTglO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIH1cblxuICAgIC5kZWNrcy1tb2RhbC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgcGFkZGluZzogMTZweCAyMHB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIH1cblxuICAgIC5kZWNrcy1tb2RhbC1oZWFkZXIgaDMge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICB9XG5cbiAgICAuZGVja3MtaGVhZGVyLXN0YXRzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIGdhcDogMTJweDtcbiAgICB9XG5cbiAgICAuZGVja3MtcHJvZ3Jlc3MtaW5mbyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLXRpbWVyLWRpc3BsYXkge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgIH1cblxuICAgIC5kZWNrcy10aW1lci1sYWJlbCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB9XG5cbiAgICAuZGVja3MtdGltZXItdmFsdWUge1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xuICAgIH1cblxuICAgIC5kZWNrcy10aW1lci12YWx1ZS5kZWNrcy10aW1lci13YXJuaW5nIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgIH1cblxuICAgIC5kZWNrcy1yZW1haW5pbmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgfVxuXG4gICAgLmRlY2tzLXJldmlldy1wcm9ncmVzcy1iYXIge1xuICAgICAgICBoZWlnaHQ6IDRweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgfVxuXG4gICAgLmRlY2tzLXByb2dyZXNzLWZpbGwge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3MgZWFzZTtcbiAgICB9XG5cbiAgICAuZGVja3MtY2FyZC1jb250ZW50IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICAgICAgICBwYWRkaW5nOiAzMnB4IDE2cHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICAgICAgZ2FwOiAyNHB4O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICB9XG5cbiAgICAuZGVja3MtcXVlc3Rpb24tc2VjdGlvbixcbiAgICAuZGVja3MtYW5zd2VyLXNlY3Rpb24ge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgfVxuXG4gICAgLmRlY2tzLWNhcmQtc2lkZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDI0cHg7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDEwMHB4O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWF4LXdpZHRoOiA2MDBweDtcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO1xuICAgIH1cblxuICAgIC5kZWNrcy1jYXJkLXNpZGUuZGVja3MtZnJvbnQge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICB9XG5cbiAgICAuZGVja3MtY2FyZC1zaWRlLmRlY2tzLWJhY2sge1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgfVxuXG4gICAgLmRlY2tzLWFuc3dlci1zZWN0aW9uIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIH1cblxuICAgIC5kZWNrcy1hbnN3ZXItc2VjdGlvbi5oaWRkZW4ge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cblxuICAgIC5kZWNrcy1zZXBhcmF0b3Ige1xuICAgICAgICBoZWlnaHQ6IDFweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBtYXJnaW46IDE2cHggYXV0bztcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG1heC13aWR0aDogNjAwcHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWFjdGlvbi1idXR0b25zIHtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIH1cblxuICAgIC5kZWNrcy1zaG93LWFuc3dlci1idXR0b24ge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWF4LXdpZHRoOiA0MDBweDtcbiAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgIHBhZGRpbmc6IDEycHggMjRweDtcbiAgICAgICAgbWluLWhlaWdodDogNDRweDtcbiAgICAgICAgbWluLXdpZHRoOiA0NHB4O1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG8gIWltcG9ydGFudDtcbiAgICAgICAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgbWluLWhlaWdodDogNDhweDtcbiAgICAgICAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XG4gICAgICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTtcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgfVxuXG4gICAgLmRlY2tzLXNob3ctYW5zd2VyLWJ1dHRvbjpob3ZlcixcbiAgICAuZGVja3Mtc2hvdy1hbnN3ZXItYnV0dG9uOmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgfVxuXG4gICAgLmRlY2tzLXNob3J0Y3V0IHtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBvcGFjaXR5OiAwLjg7XG4gICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgICBtYXJnaW4tbGVmdDogOHB4O1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRpZmZpY3VsdHktYnV0dG9ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgZmxleC13cmFwOiBub3dyYXA7XG4gICAgICAgIHBhZGRpbmc6IDAgMTBweDtcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG1heC13aWR0aDogNjAwcHg7XG4gICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIH1cblxuICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbixcbiAgICAuZGVja3MtcmF0ZS1idG4ge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBtaW4td2lkdGg6IDQ0cHg7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDQ0cHg7XG4gICAgICAgIHBhZGRpbmc6IDEycHggOHB4O1xuICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0byAhaW1wb3J0YW50O1xuICAgICAgICB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbiAhaW1wb3J0YW50O1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHotaW5kZXg6IDEwO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgb3BhY2l0eTogMSAhaW1wb3J0YW50O1xuICAgICAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG4gICAgICAgIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTtcbiAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICB9XG5cbiAgICAuZGVja3MtZGlmZmljdWx0eS1idXR0b246aG92ZXIsXG4gICAgLmRlY2tzLWRpZmZpY3VsdHktYnV0dG9uOmFjdGl2ZSB7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbiAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRpZmZpY3VsdHktYnV0dG9uOmRpc2FibGVkIHtcbiAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICAgICAgICB0cmFuc2Zvcm06IG5vbmU7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRpZmZpY3VsdHktYnV0dG9uLmRlY2tzLWFnYWluIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiAjZTc0YzNjO1xuICAgIH1cblxuICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbi5kZWNrcy1hZ2Fpbjpob3ZlcixcbiAgICAuZGVja3MtZGlmZmljdWx0eS1idXR0b24uZGVja3MtYWdhaW46YWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogI2U3NGMzYztcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgIH1cblxuICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbi5kZWNrcy1oYXJkIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiAjZjM5YzEyO1xuICAgIH1cblxuICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbi5kZWNrcy1oYXJkOmhvdmVyLFxuICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbi5kZWNrcy1oYXJkOmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6ICNmMzljMTI7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICB9XG5cbiAgICAuZGVja3MtZGlmZmljdWx0eS1idXR0b24uZGVja3MtZ29vZCB7XG4gICAgICAgIGJvcmRlci1jb2xvcjogIzI3YWU2MDtcbiAgICB9XG5cbiAgICAuZGVja3MtZGlmZmljdWx0eS1idXR0b24uZGVja3MtZ29vZDpob3ZlcixcbiAgICAuZGVja3MtZGlmZmljdWx0eS1idXR0b24uZGVja3MtZ29vZDphY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjMjdhZTYwO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRpZmZpY3VsdHktYnV0dG9uLmRlY2tzLWVhc3kge1xuICAgICAgICBib3JkZXItY29sb3I6ICMzNDk4ZGI7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRpZmZpY3VsdHktYnV0dG9uLmRlY2tzLWVhc3k6aG92ZXIsXG4gICAgLmRlY2tzLWRpZmZpY3VsdHktYnV0dG9uLmRlY2tzLWVhc3k6YWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogIzM0OThkYjtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgIH1cblxuICAgIC5kZWNrcy1idXR0b24tbGFiZWwge1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWludGVydmFsIHtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRpZmZpY3VsdHktYnV0dG9uOmhvdmVyIC5kZWNrcy1pbnRlcnZhbCB7XG4gICAgICAgIGNvbG9yOiBpbmhlcml0O1xuICAgIH1cblxuICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbiAuZGVja3Mtc2hvcnRjdXQge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMnB4O1xuICAgICAgICByaWdodDogMnB4O1xuICAgICAgICBmb250LXNpemU6IDlweDtcbiAgICAgICAgcGFkZGluZzogMXB4IDNweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICAgIG9wYWNpdHk6IDAuNztcbiAgICB9XG5cbiAgICAuZGVja3MtZW1wdHktc3RhdGUge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogMzJweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIH1cblxuICAgIC8qIE1hcmtkb3duIGNvbnRlbnQgc3R5bGluZyAqL1xuICAgIDpnbG9iYWwoLmNhcmQtc2lkZSBoMSksXG4gICAgOmdsb2JhbCguY2FyZC1zaWRlIGgyKSxcbiAgICA6Z2xvYmFsKC5jYXJkLXNpZGUgaDMpLFxuICAgIDpnbG9iYWwoLmNhcmQtc2lkZSBoNCksXG4gICAgOmdsb2JhbCguY2FyZC1zaWRlIGg1KSxcbiAgICA6Z2xvYmFsKC5jYXJkLXNpZGUgaDYpIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICB9XG5cbiAgICA6Z2xvYmFsKC5jYXJkLXNpZGUgcCkge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgIH1cblxuICAgIDpnbG9iYWwoLmNhcmQtc2lkZSBwOmxhc3QtY2hpbGQpIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICB9XG5cbiAgICA6Z2xvYmFsKC5jYXJkLXNpZGUgPiAqOmZpcnN0LWNoaWxkKSB7XG4gICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgfVxuXG4gICAgOmdsb2JhbCguY2FyZC1zaWRlIHVsKSxcbiAgICA6Z2xvYmFsKC5jYXJkLXNpZGUgb2wpIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAyNHB4O1xuICAgIH1cblxuICAgIDpnbG9iYWwoLmNhcmQtc2lkZSBjb2RlKSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvZGUtYmFja2dyb3VuZCk7XG4gICAgICAgIHBhZGRpbmc6IDJweCA0cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICB9XG5cbiAgICA6Z2xvYmFsKC5jYXJkLXNpZGUgcHJlKSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvZGUtYmFja2dyb3VuZCk7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIH1cblxuICAgIDpnbG9iYWwoLmNhcmQtc2lkZSBibG9ja3F1b3RlKSB7XG4gICAgICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgdmFyKC0tYmxvY2txdW90ZS1ib3JkZXIpO1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IDE2cHg7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAwO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB9XG5cbiAgICAvKiBNb2JpbGUgcmVzcG9uc2l2ZSBzdHlsZXMgKi9cbiAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAgICAgLmRlY2tzLXJldmlldy1tb2RhbCB7XG4gICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogZW52KHNhZmUtYXJlYS1pbnNldC1ib3R0b20pO1xuICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiBlbnYoc2FmZS1hcmVhLWluc2V0LWxlZnQpO1xuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogZW52KHNhZmUtYXJlYS1pbnNldC1yaWdodCk7XG4gICAgICAgICAgICBwYWRkaW5nLXRvcDogZW52KHNhZmUtYXJlYS1pbnNldC10b3ApO1xuICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICAgIC8qd2lkdGg6IDkwdnc7Ki9cbiAgICAgICAgICAgIC8qaGVpZ2h0OiA5MHZoOyovXG4gICAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XG4gICAgICAgIH1cbiAgICAgICAgLmRlY2tzLW1vZGFsLWhlYWRlciB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtbW9kYWwtaGVhZGVyIGgzIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1jYXJkLWNvbnRlbnQge1xuICAgICAgICAgICAgcGFkZGluZzogMjBweCAxMnB4O1xuICAgICAgICAgICAgZ2FwOiAyMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWNhcmQtc2lkZSB7XG4gICAgICAgICAgICBwYWRkaW5nOiAyMHB4IDE2cHg7XG4gICAgICAgICAgICBtYXgtd2lkdGg6IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtY2FyZC1zaWRlLmRlY2tzLWZyb250IHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1jYXJkLXNpZGUuZGVja3MtYmFjayB7XG4gICAgICAgICAgICBmb250LXNpemU6IDE1cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtYWN0aW9uLWJ1dHRvbnMge1xuICAgICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1zaG93LWFuc3dlci1idXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogMTRweCAyNHB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogNDRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbnMge1xuICAgICAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAwIDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbiB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDZweDtcbiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDQ4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtYnV0dG9uLWxhYmVsIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1pbnRlcnZhbCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtaGVhZGVyLXN0YXRzIHtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLXRpbWVyLWRpc3BsYXkge1xuICAgICAgICAgICAgYWxpZ24tc2VsZjogZmxleC1lbmQ7XG4gICAgICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcbiAgICAgICAgLmRlY2tzLXRpbWVyLWRpc3BsYXkge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLXByb2dyZXNzLWluZm8ge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypAbWVkaWEgKG1heC13aWR0aDogNTAwcHgpIHtcbiAgICAgICAgLm1vZGFsLWhlYWRlciB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDEycHg7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5tb2RhbC1oZWFkZXIgaDMge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLXByb2dyZXNzLWluZm8ge1xuICAgICAgICAgICAgYWxpZ24tc2VsZjogZmxleC1lbmQ7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtY2FyZC1jb250ZW50IHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDE2cHggOHB4O1xuICAgICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWNhcmQtc2lkZSB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxNnB4IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtY2FyZC1zaWRlLmRlY2tzLWZyb250IHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1jYXJkLXNpZGUuZGVja3MtYmFjayB7XG4gICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtYWN0aW9uLWJ1dHRvbnMge1xuICAgICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1zaG93LWFuc3dlci1idXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogMTJweCAyMHB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNXB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogNTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbnMge1xuICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAwIDVweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbiB7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHggNHB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogNDBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1idXR0b24tbGFiZWwge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWludGVydmFsIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbiAuZGVja3Mtc2hvcnRjdXQge1xuICAgICAgICAgICAgZm9udC1zaXplOiA4cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxcHggMnB4O1xuICAgICAgICB9XG4gICAgfSovXG5cbiAgICAvKiBNb2JpbGUgbW9kYWwgb3ZlcmxheSBwcm90ZWN0aW9uIC0gQmxvY2tlciAjMyAqL1xuICAgIC5kZWNrcy1yZXZpZXctbW9kYWwge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgIH1cblxuICAgIC8qIFByZXZlbnQgZm9ybSBzdWJtaXNzaW9uIGlzc3VlcyAtIEJsb2NrZXIgIzUgKi9cbiAgICAvKiBObyBzdWJtaXQgYnV0dG9ucyBwcmVzZW50IGluIHRoaXMgbW9kYWwgKi9cblxuICAgIC8qIE92ZXJyaWRlIE9ic2lkaWFuIG1vYmlsZSBDU1MgaW50ZXJmZXJlbmNlIC0gQmxvY2tlciAjMTIgKi9cbiAgICAuZGVja3MtcmF0ZS1idG4sXG4gICAgLmRlY2tzLWRpZmZpY3VsdHktYnV0dG9uLFxuICAgIC5kZWNrcy1zaG93LWFuc3dlci1idXR0b24ge1xuICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0byAhaW1wb3J0YW50O1xuICAgICAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7XG4gICAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uICFpbXBvcnRhbnQ7XG4gICAgICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7XG4gICAgICAgIHotaW5kZXg6IDEwICFpbXBvcnRhbnQ7XG4gICAgfVxuXG4gICAgLyogRGlzYWJsZWQgc3RhdGUgb3ZlcnJpZGUgLSBCbG9ja2VyICM0ICovXG4gICAgLmRlY2tzLXJhdGUtYnRuOmRpc2FibGVkLFxuICAgIC5kZWNrcy1kaWZmaWN1bHR5LWJ1dHRvbjpkaXNhYmxlZCxcbiAgICAuZGVja3Mtc2hvdy1hbnN3ZXItYnV0dG9uOmRpc2FibGVkIHtcbiAgICAgICAgb3BhY2l0eTogMC42ICFpbXBvcnRhbnQ7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgIGN1cnNvcjogbm90LWFsbG93ZWQgIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICAvKiBGb2N1cyB0cmFwIGNvbXBhdGliaWxpdHkgLSBCbG9ja2VyICM4ICovXG4gICAgLmRlY2tzLWFjdGlvbi1idXR0b25zIHtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgei1pbmRleDogNTtcbiAgICB9XG5cbiAgICAvKiBQcmV2ZW50IHBhcmVudCBldmVudCBibG9ja2luZyAtIEJsb2NrZXIgIzcgKi9cbiAgICAuZGVja3MtZGlmZmljdWx0eS1idXR0b25zIHtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgei1pbmRleDogNTtcbiAgICB9XG5cbiAgICAvKiBNb2JpbGUgcmVzcG9uc2l2ZSBzdHlsZXMgKi9cbiAgICAvKkBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgICAgICAuZGVja3MtcmV2aWV3LW1vZGFsIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDE2cHggMTJweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5tb2RhbC1oZWFkZXIgaDMge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLnByb2dyZXNzLWluZm8ge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jYXJkLWZyb250LFxuICAgICAgICAuY2FyZC1iYWNrIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDE2cHggMTJweDtcbiAgICAgICAgICAgIG1hcmdpbjogMTJweCAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLmRpZmZpY3VsdHktYnV0dG9ucyB7XG4gICAgICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDAgOHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRpZmZpY3VsdHktYnV0dG9uLFxuICAgICAgICAucmF0ZS1idG4ge1xuICAgICAgICAgICAgcGFkZGluZzogMTBweCA2cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiA0NHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLnNob3J0Y3V0IHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDFweCA0cHg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcbiAgICAgICAgLnJldmlldy1tb2RhbCB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDhweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5tb2RhbC1oZWFkZXIgaDMge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLnByb2dyZXNzLWluZm8ge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLmNhcmQtZnJvbnQsXG4gICAgICAgIC5jYXJkLWJhY2sge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNXB4O1xuICAgICAgICAgICAgcGFkZGluZzogMTJweCA4cHg7XG4gICAgICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kaWZmaWN1bHR5LWJ1dHRvbnMge1xuICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAwIDRweDtcbiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kaWZmaWN1bHR5LWJ1dHRvbixcbiAgICAgICAgLnJhdGUtYnRuIHtcbiAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICBtaW4td2lkdGg6IGNhbGMoMjUlIC0gM3B4KTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweCA0cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiA0MHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLnNob3J0Y3V0IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7IC8qIEhpZGUgc2hvcnRjdXRzIG9uIHNtYWxsIHNjcmVlbnNcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBtZWRpYSAobWF4LXdpZHRoOiAzOTBweCkge1xuICAgICAgICAucmV2aWV3LW1vZGFsIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweCA0cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAubW9kYWwtaGVhZGVyIGgzIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wcm9ncmVzcy1pbmZvIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jYXJkLWZyb250LFxuICAgICAgICAuY2FyZC1iYWNrIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggNnB4O1xuICAgICAgICAgICAgbWFyZ2luOiA4cHggMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kaWZmaWN1bHR5LWJ1dHRvbixcbiAgICAgICAgLnJhdGUtYnRuIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDZweCAycHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiAzNnB4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogTW9iaWxlIHNhZmUgYXJlYSBhbmQgdmlld3BvcnQgb3B0aW1pemF0aW9ucyAqL1xuICAgIC8qQG1lZGlhIHNjcmVlbiBhbmQgKG1heC1oZWlnaHQ6IDYwMHB4KSB7XG4gICAgICAgIC5yZXZpZXctbW9kYWwge1xuICAgICAgICAgICAgbWF4LWhlaWdodDogOTB2aDtcbiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cblxuICAgICAgICAuYWN0aW9uLWJ1dHRvbnMge1xuICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IGNhbGMoMjBweCArIGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tKSk7XG4gICAgICAgIH1cbiAgICB9Ki9cblxuICAgIC8qIE1vYmlsZSBrZXlib2FyZCBhbmQgc2FmZSBhcmVhIHByb3RlY3Rpb24gLSBCbG9ja2VyICM5ICovXG4gICAgLmRlY2tzLWFjdGlvbi1idXR0b25zIHtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IGNhbGMoMjBweCArIGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tKSk7XG4gICAgICAgIHBhZGRpbmctbGVmdDogZW52KHNhZmUtYXJlYS1pbnNldC1sZWZ0KTtcbiAgICAgICAgcGFkZGluZy1yaWdodDogZW52KHNhZmUtYXJlYS1pbnNldC1yaWdodCk7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgIH1cblxuICAgIC8qXG4gICAgQG1lZGlhIChvcmllbnRhdGlvbjogbGFuZHNjYXBlKSBhbmQgKG1heC1oZWlnaHQ6IDUwMHB4KSB7XG4gICAgICAgIC5hY3Rpb24tYnV0dG9ucyB7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiBjYWxjKDhweCArIGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tKSk7XG4gICAgICAgIH1cblxuICAgICAgICAuZGlmZmljdWx0eS1idXR0b24sXG4gICAgICAgIC5yYXRlLWJ0biB7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiA0MHB4O1xuICAgICAgICAgICAgcGFkZGluZzogOHB4IDRweDtcbiAgICAgICAgfVxuICAgIH0qL1xuXG4gICAgLyogTW9iaWxlIHNhZmUgYXJlYSBpbnNldHMgLSBCbG9ja2VyICM5ICovXG4gICAgLmRlY2tzLXJldmlldy1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiBlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSk7XG4gICAgICAgIHBhZGRpbmctbGVmdDogZW52KHNhZmUtYXJlYS1pbnNldC1sZWZ0KTtcbiAgICAgICAgcGFkZGluZy1yaWdodDogZW52KHNhZmUtYXJlYS1pbnNldC1yaWdodCk7XG4gICAgICAgIHBhZGRpbmctdG9wOiBlbnYoc2FmZS1hcmVhLWluc2V0LXRvcCk7XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgIC8qbWF4LXdpZHRoOiAxMDB2dzsqL1xuICAgICAgICAvKm1heC1oZWlnaHQ6IDEwMHZoOyovXG4gICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcbiAgICB9XG5cbiAgICAvKiBBZGRpdGlvbmFsIG1vYmlsZSBvcHRpbWl6YXRpb25zICovXG4gICAgLypAbWVkaWEgKGhvdmVyOiBub25lKSBhbmQgKHBvaW50ZXI6IGNvYXJzZSkge1xuICAgICAgICAucmF0ZS1idG4sXG4gICAgICAgIC5kaWZmaWN1bHR5LWJ1dHRvbixcbiAgICAgICAgLnNob3ctYW5zd2VyLWJ1dHRvbiB7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiA0OHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICBtaW4td2lkdGg6IDQ4cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgICAgICAgfVxuICAgIH0qL1xuXG4gICAgLypAbWVkaWEgKG1heC13aWR0aDogMzkwcHgpIHtcbiAgICAgICAgLm1vZGFsLWhlYWRlciB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgIH1cblxuICAgICAgICAubW9kYWwtaGVhZGVyIGgzIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wcm9ncmVzcy1pbmZvIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jYXJkLWNvbnRlbnQge1xuICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogMTUwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuY2FyZC1zaWRlIHtcbiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDEyMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmNhcmQtc2lkZS5mcm9udCB7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiAxMjBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jYXJkLXNpZGUuYmFjayB7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiAxMjBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hY3Rpb24tYnV0dG9ucyB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogY2FsYygxMnB4ICsgZW52KHNhZmUtYXJlYS1pbnNldC1ib3R0b20pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5zaG93LWFuc3dlci1idXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogMTBweCAxNnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRpZmZpY3VsdHktYnV0dG9ucyB7XG4gICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDAgNHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRpZmZpY3VsdHktYnV0dG9uIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweCA0cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuYnV0dG9uLWxhYmVsIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5pbnRlcnZhbCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGlmZmljdWx0eS1idXR0b24gLnNob3J0Y3V0IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICB9Ki9cblxuICAgIC8qQG1lZGlhIChtYXgtd2lkdGg6IDM4MHB4KSB7XG4gICAgICAgIC5jYXJkLWNvbnRlbnQge1xuICAgICAgICAgICAgbWluLWhlaWdodDogMTIwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGlmZmljdWx0eS1idXR0b25zIHtcbiAgICAgICAgICAgIGdhcDogMnB4O1xuICAgICAgICAgICAgcGFkZGluZzogMCAycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGlmZmljdWx0eS1idXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogNnB4IDJweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hY3Rpb24tYnV0dG9ucyB7XG4gICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogY2FsYygxMnB4ICsgZW52KHNhZmUtYXJlYS1pbnNldC1ib3R0b20pKTtcbiAgICAgICAgfVxuICAgIH0qL1xuPC9zdHlsZT5cbiIsICJpbXBvcnQgeyBNb2RhbCwgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBEYXRhYmFzZVNlcnZpY2UgfSBmcm9tIFwiLi4vZGF0YWJhc2UvRGF0YWJhc2VTZXJ2aWNlXCI7XG5pbXBvcnQgU3RhdGlzdGljc1VJIGZyb20gXCIuL1N0YXRpc3RpY3NVSS5zdmVsdGVcIjtcblxuZXhwb3J0IGNsYXNzIFN0YXRpc3RpY3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBkYjogRGF0YWJhc2VTZXJ2aWNlO1xuICBwcml2YXRlIGRlY2tGaWx0ZXI/OiBzdHJpbmc7XG4gIHByaXZhdGUgY29tcG9uZW50OiBTdGF0aXN0aWNzVUkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZXNpemVIYW5kbGVyPzogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZGI6IERhdGFiYXNlU2VydmljZSwgZGVja0ZpbHRlcj86IHN0cmluZykge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5kYiA9IGRiO1xuICAgIHRoaXMuZGVja0ZpbHRlciA9IGRlY2tGaWx0ZXI7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAvLyBBZGQgQ1NTIGNsYXNzZXMgZm9yIHN0eWxpbmdcbiAgICBjb25zdCBtb2RhbEVsID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xuICAgIGlmIChtb2RhbEVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgIG1vZGFsRWwuYWRkQ2xhc3MoXCJkZWNrcy1tb2RhbFwiKTtcbiAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHtcbiAgICAgICAgbW9kYWxFbC5hZGRDbGFzcyhcImRlY2tzLW1vZGFsLW1vYmlsZVwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vZGFsRWwucmVtb3ZlQ2xhc3MoXCJkZWNrcy1tb2RhbC1tb2JpbGVcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXJFbC5hZGRDbGFzcyhcImRlY2tzLXN0YXRpc3RpY3MtbW9kYWwtY29udGFpbmVyXCIpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcyhcImRlY2tzLXN0YXRpc3RpY3MtbW9kYWwtY29udGVudFwiKTtcblxuICAgIC8vIE1vdW50IFN2ZWx0ZSBjb21wb25lbnRcbiAgICAvLyBDcmVhdGUgdGhlIFN2ZWx0ZSBjb21wb25lbnRcbiAgICB0aGlzLmNvbXBvbmVudCA9IG5ldyBTdGF0aXN0aWNzVUkoe1xuICAgICAgdGFyZ2V0OiBjb250ZW50RWwsXG4gICAgICBwcm9wczoge1xuICAgICAgICBkYjogdGhpcy5kYixcbiAgICAgICAgZGVja0ZpbHRlcjogdGhpcy5kZWNrRmlsdGVyLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIExpc3RlbiB0byBjb21wb25lbnQgZXZlbnRzXG4gICAgdGhpcy5jb21wb25lbnQuJG9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIHdpbmRvdyByZXNpemUgZm9yIG1vYmlsZSBhZGFwdGF0aW9uXG4gICAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xuICAgICAgaWYgKG1vZGFsRWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gNzY4KSB7XG4gICAgICAgICAgbW9kYWxFbC5hZGRDbGFzcyhcImRlY2tzLW1vZGFsLW1vYmlsZVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb2RhbEVsLnJlbW92ZUNsYXNzKFwiZGVja3MtbW9kYWwtbW9iaWxlXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVJlc2l6ZSk7XG5cbiAgICAvLyBTdG9yZSByZXNpemUgaGFuZGxlciBmb3IgY2xlYW51cFxuICAgIHRoaXMucmVzaXplSGFuZGxlciA9IGhhbmRsZVJlc2l6ZTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAvLyBDbGVhbiB1cCByZXNpemUgaGFuZGxlclxuICAgIGlmICh0aGlzLnJlc2l6ZUhhbmRsZXIpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplSGFuZGxlcik7XG4gICAgICB0aGlzLnJlc2l6ZUhhbmRsZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gRGVzdHJveSBTdmVsdGUgY29tcG9uZW50XG4gICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XG4gICAgICB0aGlzLmNvbXBvbmVudC4kZGVzdHJveSgpO1xuICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xuICAgIH1cblxuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCAiPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgICBpbXBvcnQgeyBvbk1vdW50LCBvbkRlc3Ryb3kgfSBmcm9tIFwic3ZlbHRlXCI7XG5cbiAgICBleHBvcnQgbGV0IGdldFJldmlld0NvdW50czogKGRheXM6IG51bWJlcikgPT4gUHJvbWlzZTxNYXA8c3RyaW5nLCBudW1iZXI+PjtcblxuICAgIGxldCByZXZpZXdDb3VudHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgIGxldCBkYXlzOiBBcnJheTx7IGRhdGU6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgZGF5T2ZXZWVrOiBudW1iZXIgfT4gPSBbXTtcbiAgICBsZXQgd2Vla3M6IEFycmF5PFxuICAgICAgICBBcnJheTx7IGRhdGU6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgZGF5T2ZXZWVrOiBudW1iZXIgfT5cbiAgICA+ID0gW107XG4gICAgbGV0IG1heENvdW50ID0gMDtcbiAgICBsZXQgaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICBsZXQgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgbGV0IG1heFdlZWtzID0gNTI7IC8vIERlZmF1bHQgdG8gZnVsbCB5ZWFyXG4gICAgbGV0IGNvbnRhaW5lcldpZHRoID0gMDtcbiAgICBsZXQgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG5cbiAgICAvLyBUcmFjayBsYXN0IGV2ZW50IHRvIHByZXZlbnQgZG91YmxlIGV4ZWN1dGlvblxuICAgIGxldCBsYXN0RXZlbnRUaW1lID0gMDtcbiAgICBsZXQgbGFzdEV2ZW50VHlwZSA9IFwiXCI7XG5cbiAgICBjb25zdCBtb250aHMgPSBbXG4gICAgICAgIFwiSmFuXCIsXG4gICAgICAgIFwiRmViXCIsXG4gICAgICAgIFwiTWFyXCIsXG4gICAgICAgIFwiQXByXCIsXG4gICAgICAgIFwiTWF5XCIsXG4gICAgICAgIFwiSnVuXCIsXG4gICAgICAgIFwiSnVsXCIsXG4gICAgICAgIFwiQXVnXCIsXG4gICAgICAgIFwiU2VwXCIsXG4gICAgICAgIFwiT2N0XCIsXG4gICAgICAgIFwiTm92XCIsXG4gICAgICAgIFwiRGVjXCIsXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlRGF5cygpIHtcbiAgICAgICAgLy8gQWx3YXlzIHNob3cgZnVsbCB5ZWFyIGZyb20gSmFudWFyeSAxIHRvIERlY2VtYmVyIDMxXG4gICAgICAgIGNvbnN0IHllYXJTdGFydCA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCAwLCAxKTsgLy8gSmFudWFyeSAxc3RcbiAgICAgICAgY29uc3QgeWVhckVuZCA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCAxMSwgMzEpOyAvLyBEZWNlbWJlciAzMXN0XG5cbiAgICAgICAgLy8gU3RhcnQgZnJvbSBTdW5kYXkgb2YgdGhlIHdlZWsgY29udGFpbmluZyBKYW51YXJ5IDFzdFxuICAgICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSh5ZWFyU3RhcnQpO1xuICAgICAgICBjb25zdCBzdGFydERheU9mV2VlayA9IHN0YXJ0RGF0ZS5nZXREYXkoKTtcbiAgICAgICAgc3RhcnREYXRlLnNldERhdGUoc3RhcnREYXRlLmdldERhdGUoKSAtIHN0YXJ0RGF5T2ZXZWVrKTtcblxuICAgICAgICAvLyBFbmQgb24gU2F0dXJkYXkgb2YgdGhlIHdlZWsgY29udGFpbmluZyBEZWNlbWJlciAzMXN0XG4gICAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSh5ZWFyRW5kKTtcbiAgICAgICAgY29uc3QgZW5kRGF5T2ZXZWVrID0gZW5kRGF0ZS5nZXREYXkoKTtcbiAgICAgICAgZW5kRGF0ZS5zZXREYXRlKGVuZERhdGUuZ2V0RGF0ZSgpICsgKDYgLSBlbmREYXlPZldlZWspKTtcblxuICAgICAgICBjb25zdCBkYXlzQXJyYXk6IEFycmF5PHtcbiAgICAgICAgICAgIGRhdGU6IHN0cmluZztcbiAgICAgICAgICAgIGNvdW50OiBudW1iZXI7XG4gICAgICAgICAgICBkYXlPZldlZWs6IG51bWJlcjtcbiAgICAgICAgfT4gPSBbXTtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgY29tcGxldGUgd2Vla3MgYnV0IG9ubHkgaW5jbHVkZSBkYXlzIHdpdGhpbiB0aGUgc2VsZWN0ZWQgeWVhclxuICAgICAgICB3aGlsZSAoY3VycmVudCA8PSBlbmREYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gY3VycmVudC50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlWWVhciA9IGN1cnJlbnQuZ2V0RnVsbFllYXIoKTtcblxuICAgICAgICAgICAgLy8gT25seSBpbmNsdWRlIGRheXMgdGhhdCBiZWxvbmcgdG8gdGhlIHNlbGVjdGVkIHllYXJcbiAgICAgICAgICAgIGlmIChjdXJyZW50RGF0ZVllYXIgPT09IGN1cnJlbnRZZWFyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSByZXZpZXdDb3VudHMuZ2V0KGRhdGVTdHIpIHx8IDA7XG5cbiAgICAgICAgICAgICAgICBkYXlzQXJyYXkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGVTdHIsXG4gICAgICAgICAgICAgICAgICAgIGNvdW50LFxuICAgICAgICAgICAgICAgICAgICBkYXlPZldlZWs6IGN1cnJlbnQuZ2V0RGF5KCksXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPiBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICBtYXhDb3VudCA9IGNvdW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHBsYWNlaG9sZGVyIGZvciBkYXlzIG91dHNpZGUgdGhlIHllYXIgdG8gbWFpbnRhaW4gZ3JpZCBzdHJ1Y3R1cmVcbiAgICAgICAgICAgICAgICBkYXlzQXJyYXkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGVTdHIsXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICBkYXlPZldlZWs6IGN1cnJlbnQuZ2V0RGF5KCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1cnJlbnQuc2V0RGF0ZShjdXJyZW50LmdldERhdGUoKSArIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF5cyA9IGRheXNBcnJheTtcblxuICAgICAgICAvLyBHcm91cCBpbnRvIHdlZWtzXG4gICAgICAgIHdlZWtzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF5cy5sZW5ndGg7IGkgKz0gNykge1xuICAgICAgICAgICAgd2Vla3MucHVzaChkYXlzLnNsaWNlKGksIGkgKyA3KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRJbnRlbnNpdHlDbGFzcyhjb3VudDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGNvdW50ID09PSAwKSByZXR1cm4gXCJkZWNrcy1pbnRlbnNpdHktMFwiO1xuICAgICAgICBjb25zdCBpbnRlbnNpdHkgPSBNYXRoLm1pbihNYXRoLmNlaWwoKGNvdW50IC8gbWF4Q291bnQpICogNCksIDQpO1xuICAgICAgICByZXR1cm4gYGRlY2tzLWludGVuc2l0eS0ke2ludGVuc2l0eX1gO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZVN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoXCJlbi1VU1wiLCB7XG4gICAgICAgICAgICB3ZWVrZGF5OiBcImxvbmdcIixcbiAgICAgICAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgICAgICAgbW9udGg6IFwibG9uZ1wiLFxuICAgICAgICAgICAgZGF5OiBcIm51bWVyaWNcIixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNUb2RheShkYXRlU3RyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xuICAgICAgICByZXR1cm4gZGF0ZVN0ciA9PT0gdG9kYXk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TW9udGhzRGF0YSgpOiBBcnJheTx7XG4gICAgICAgIG1vbnRoOiBzdHJpbmc7XG4gICAgICAgIHdlZWtzOiBBcnJheTxBcnJheTx7IGRhdGU6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgZGF5T2ZXZWVrOiBudW1iZXIgfT4+O1xuICAgIH0+IHtcbiAgICAgICAgaWYgKHdlZWtzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xuXG4gICAgICAgIGNvbnN0IG1vbnRoc0RhdGE6IEFycmF5PHtcbiAgICAgICAgICAgIG1vbnRoOiBzdHJpbmc7XG4gICAgICAgICAgICB3ZWVrczogQXJyYXk8XG4gICAgICAgICAgICAgICAgQXJyYXk8eyBkYXRlOiBzdHJpbmc7IGNvdW50OiBudW1iZXI7IGRheU9mV2VlazogbnVtYmVyIH0+XG4gICAgICAgICAgICA+O1xuICAgICAgICB9PiA9IFtdO1xuICAgICAgICBsZXQgY3VycmVudE1vbnRoID0gLTE7XG4gICAgICAgIGxldCBjdXJyZW50TW9udGhXZWVrczogQXJyYXk8XG4gICAgICAgICAgICBBcnJheTx7IGRhdGU6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgZGF5T2ZXZWVrOiBudW1iZXIgfT5cbiAgICAgICAgPiA9IFtdO1xuXG4gICAgICAgIHdlZWtzLmZvckVhY2goKHdlZWspID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0RGF5ID0gd2Vla1swXTtcbiAgICAgICAgICAgIGlmIChmaXJzdERheSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShmaXJzdERheS5kYXRlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXG4gICAgICAgICAgICAgICAgLy8gT25seSBwcm9jZXNzIHdlZWtzIHdpdGhpbiB0aGUgc2VsZWN0ZWQgeWVhclxuICAgICAgICAgICAgICAgIGlmICh5ZWFyID09PSBjdXJyZW50WWVhcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9udGggIT09IGN1cnJlbnRNb250aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSBwcmV2aW91cyBtb250aCBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TW9udGggIT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE1vbnRoV2Vla3MubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhzRGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IG1vbnRoc1tjdXJyZW50TW9udGhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWVrczogY3VycmVudE1vbnRoV2Vla3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0IG5ldyBtb250aFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE1vbnRoID0gbW9udGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TW9udGhXZWVrcyA9IFt3ZWVrXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB3ZWVrIHRvIGN1cnJlbnQgbW9udGhcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRNb250aFdlZWtzLnB1c2god2Vlayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIERvbid0IGZvcmdldCB0aGUgbGFzdCBtb250aFxuICAgICAgICBpZiAoY3VycmVudE1vbnRoICE9PSAtMSAmJiBjdXJyZW50TW9udGhXZWVrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtb250aHNEYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgIG1vbnRoOiBtb250aHNbY3VycmVudE1vbnRoXSxcbiAgICAgICAgICAgICAgICB3ZWVrczogY3VycmVudE1vbnRoV2Vla3MsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtb250aHNEYXRhO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZU1heFdlZWtzKHdpZHRoOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHdpZHRoID09PSAwKSByZXR1cm4gMjA7IC8vIE5vdCB5ZXQgcmVuZGVyZWRcblxuICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IHdpZHRoIC0gNTA7IC8vIEFjY291bnQgZm9yIHBhZGRpbmcgYW5kIGRheSBsYWJlbHNcbiAgICAgICAgY29uc3Qgd2Vla1dpZHRoID0gMTI7IC8vIDEwcHggc3F1YXJlICsgMnB4IGdhcFxuICAgICAgICBjb25zdCBjYWxjdWxhdGVkV2Vla3MgPSBNYXRoLmZsb29yKGF2YWlsYWJsZVdpZHRoIC8gd2Vla1dpZHRoKTtcblxuICAgICAgICAvLyBFbnN1cmUgd2Ugc2hvdyBhdCBsZWFzdCA4IHdlZWtzICgyIG1vbnRocykgYW5kIGF0IG1vc3QgNTIgd2Vla3MgKDEgeWVhcilcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGNhbGN1bGF0ZWRXZWVrcywgOCksIDUyKTtcbiAgICB9XG5cbiAgICAvLyBSZWFjdGl2ZSBzdGF0ZW1lbnQgdG8gdXBkYXRlIG1heFdlZWtzIHdoZW4gY29udGFpbmVyIHdpZHRoIGNoYW5nZXNcbiAgICAkOiBpZiAoY29udGFpbmVyV2lkdGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG5ld01heFdlZWtzID0gY2FsY3VsYXRlTWF4V2Vla3MoY29udGFpbmVyV2lkdGgpO1xuICAgICAgICBpZiAobmV3TWF4V2Vla3MgIT09IG1heFdlZWtzKSB7XG4gICAgICAgICAgICBtYXhXZWVrcyA9IG5ld01heFdlZWtzO1xuICAgICAgICAgICAgLy8gUmVmcmVzaCB3aXRoIG5ldyB3ZWVrIGNvdW50XG4gICAgICAgICAgICByZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVDb250YWluZXJXaWR0aCgpIHtcbiAgICAgICAgaWYgKGNvbnRhaW5lckVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lcldpZHRoID0gY29udGFpbmVyRWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5hdmlnYXRlWWVhcihkaXJlY3Rpb246IFwicHJldlwiIHwgXCJuZXh0XCIpIHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJwcmV2XCIpIHtcbiAgICAgICAgICAgIGN1cnJlbnRZZWFyLS07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50WWVhcisrO1xuICAgICAgICB9XG4gICAgICAgIGdlbmVyYXRlRGF5cygpO1xuICAgICAgICByZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlVG91Y2hDbGljayhjYWxsYmFjazogKCkgPT4gdm9pZCwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IGV2ZW50LnR5cGU7XG5cbiAgICAgICAgLy8gUHJldmVudCBkb3VibGUgZXhlY3V0aW9uIHdpdGhpbiAxMDBtc1xuICAgICAgICBpZiAobm93IC0gbGFzdEV2ZW50VGltZSA8IDEwMCAmJiBsYXN0RXZlbnRUeXBlICE9PSBldmVudFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxhc3RFdmVudFRpbWUgPSBub3c7XG4gICAgICAgIGxhc3RFdmVudFR5cGUgPSBldmVudFR5cGU7XG5cbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBleHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgICAgICAgaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEZldGNoIGZ1bGwgeWVhciBkYXRhICgzNjUtMzY2IGRheXMpXG4gICAgICAgICAgICByZXZpZXdDb3VudHMgPSBhd2FpdCBnZXRSZXZpZXdDb3VudHMoMzY2KTtcbiAgICAgICAgICAgIG1heENvdW50ID0gMDtcbiAgICAgICAgICAgIGdlbmVyYXRlRGF5cygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2FkIHJldmlldyBjb3VudHM6XCIsIGVycm9yKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Nb3VudCgoKSA9PiB7XG4gICAgICAgIC8vIEluaXRpYWwgc2V0dXAgd2l0aCBwcm9wZXIgdGltaW5nXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdXBkYXRlQ29udGFpbmVyV2lkdGgoKTtcbiAgICAgICAgICAgIHJlZnJlc2goKTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICB9KTtcbjwvc2NyaXB0PlxuXG48ZGl2IGNsYXNzPVwiZGVja3MtaGVhdG1hcC1jb250YWluZXJcIiBiaW5kOnRoaXM9e2NvbnRhaW5lckVsZW1lbnR9PlxuICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1oZWF0bWFwLWhlYWRlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtaGVhZGVyLWxlZnRcIj5cbiAgICAgICAgICAgIDxoND5SZXZpZXcgQWN0aXZpdHk8L2g0PlxuICAgICAgICAgICAgeyNpZiAhaXNMb2FkaW5nfVxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGVja3MtdG90YWwtcmV2aWV3c1wiPlxuICAgICAgICAgICAgICAgICAgICB7QXJyYXkuZnJvbShyZXZpZXdDb3VudHMudmFsdWVzKCkpLnJlZHVjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIChzdW0sIGNvdW50KSA9PiBzdW0gKyBjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgICl9IHJldmlld3NcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICB7L2lmfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXllYXItbmF2aWdhdGlvblwiPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZGVja3MtbmF2LWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgb246Y2xpY2s9eyhlKSA9PlxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVUb3VjaENsaWNrKCgpID0+IG5hdmlnYXRlWWVhcihcInByZXZcIiksIGUpfVxuICAgICAgICAgICAgICAgIG9uOnRvdWNoZW5kPXsoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlVG91Y2hDbGljaygoKSA9PiBuYXZpZ2F0ZVllYXIoXCJwcmV2XCIpLCBlKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTJcIlxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxMlwiXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTUuNDEgNy40MUwxNCA2bC02IDYgNiA2IDEuNDEtMS40MUwxMC44MyAxMnpcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRlY2tzLWN1cnJlbnQteWVhclwiPntjdXJyZW50WWVhcn08L3NwYW4+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJkZWNrcy1uYXYtYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBvbjpjbGljaz17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVRvdWNoQ2xpY2soKCkgPT4gbmF2aWdhdGVZZWFyKFwibmV4dFwiKSwgZSl9XG4gICAgICAgICAgICAgICAgb246dG91Y2hlbmQ9eyhlKSA9PlxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVUb3VjaENsaWNrKCgpID0+IG5hdmlnYXRlWWVhcihcIm5leHRcIiksIGUpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIxMlwiXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjEyXCJcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk0xMCA2TDguNTkgNy40MSAxMy4xNyAxMmwtNC41OCA0LjU5TDEwIDE4bDYtNnpcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgeyNpZiBpc0xvYWRpbmd9XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1sb2FkaW5nXCI+TG9hZGluZy4uLjwvZGl2PlxuICAgIHs6ZWxzZX1cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWhlYXRtYXBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tb250aHMtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgeyNlYWNoIGdldE1vbnRoc0RhdGEoKSBhcyB7IG1vbnRoLCB3ZWVrczogbW9udGhXZWVrcyB9fVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbW9udGgtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbW9udGgtbGFiZWxcIj57bW9udGh9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbW9udGgtZ3JpZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjZWFjaCBtb250aFdlZWtzIGFzIHdlZWt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy13ZWVrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2VhY2ggd2VlayBhcyBkYXl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0Bjb25zdCBkYXlZZWFyID0gbmV3IERhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheS5kYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkuZ2V0RnVsbFllYXIoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGVja3MtZGF5IHtnZXRJbnRlbnNpdHlDbGFzcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheS5jb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczpkZWNrcy10b2RheT17aXNUb2RheShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheS5kYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczpvdXRzaWRlLXllYXI9e2RheVllYXIgIT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50WWVhcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJ7ZGF5LmNvdW50fSByZXZpZXdzIG9uIHtmb3JtYXREYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5LmRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvZWFjaH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWxlZ2VuZFwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJkZWNrcy1sZWdlbmQtbGFiZWxcIj5MZXNzPC9zcGFuPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWxlZ2VuZC1jb2xvcnNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbGVnZW5kLXNxdWFyZSBkZWNrcy1pbnRlbnNpdHktMFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1sZWdlbmQtc3F1YXJlIGRlY2tzLWludGVuc2l0eS0xXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWxlZ2VuZC1zcXVhcmUgZGVja3MtaW50ZW5zaXR5LTJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbGVnZW5kLXNxdWFyZSBkZWNrcy1pbnRlbnNpdHktM1wiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1sZWdlbmQtc3F1YXJlIGRlY2tzLWludGVuc2l0eS00XCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGVja3MtbGVnZW5kLWxhYmVsXCI+TW9yZTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgey9pZn1cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgLmRlY2tzLWhlYXRtYXAtY29udGFpbmVyIHtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uO1xuICAgICAgICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7XG4gICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgfVxuXG4gICAgLmRlY2tzLWhlYXRtYXAtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG5cbiAgICAuZGVja3MtaGVhZGVyLWxlZnQge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICB9XG5cbiAgICAuZGVja3MteWVhci1uYXZpZ2F0aW9uIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLW5hdi1idXR0b24ge1xuICAgICAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgIG1pbi13aWR0aDogMzJweDtcbiAgICAgICAgbWluLWhlaWdodDogMzJweDtcbiAgICAgICAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XG4gICAgICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTtcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgfVxuXG4gICAgLmRlY2tzLW5hdi1idXR0b246aG92ZXIsXG4gICAgLmRlY2tzLW5hdi1idXR0b246YWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXItaG92ZXIpO1xuICAgIH1cblxuICAgIC5kZWNrcy1jdXJyZW50LXllYXIge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIG1pbi13aWR0aDogNDBweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIH1cblxuICAgIC5kZWNrcy1oZWF0bWFwLWhlYWRlciBoNCB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIH1cblxuICAgIC5kZWNrcy10b3RhbC1yZXZpZXdzIHtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgfVxuXG4gICAgLmRlY2tzLWxvYWRpbmcge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgIH1cblxuICAgIC5kZWNrcy1oZWF0bWFwIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBtYXJnaW4tdG9wOiAxMnB4O1xuICAgICAgICBvdmVyZmxvdy14OiBhdXRvO1xuICAgICAgICBvdmVyZmxvdy15OiBoaWRkZW47XG4gICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgLypqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsqL1xuICAgIH1cblxuICAgIC5kZWNrcy1tb250aHMtY29udGFpbmVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAycHg7XG4gICAgICAgIG1pbi13aWR0aDogZml0LWNvbnRlbnQ7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICAgIH1cblxuICAgIC5kZWNrcy1tb250aC1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9udGgtZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMnB4O1xuICAgIH1cblxuICAgIC5kZWNrcy1tb250aC1sYWJlbHMge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGhlaWdodDogMTJweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMnB4O1xuICAgICAgICBtYXJnaW4tbGVmdDogMThweDtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9udGgtbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDlweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIH1cblxuICAgIC5kYXktbGFiZWxzIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAtMThweDtcbiAgICAgICAgdG9wOiAxNnB4O1xuICAgIH1cblxuICAgIC5kYXktbGFiZWwge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGZvbnQtc2l6ZTogOXB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIHdpZHRoOiAxNnB4O1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICB9XG5cbiAgICAuZGVja3Mtd2VlayB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogMnB4O1xuICAgIH1cblxuICAgIC5kZWNrcy1kYXkge1xuICAgICAgICB3aWR0aDogMTBweDtcbiAgICAgICAgaGVpZ2h0OiAxMHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMXMgZWFzZTtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRheTpob3ZlciB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4zKTtcbiAgICAgICAgb3V0bGluZTogMXB4IHNvbGlkIHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB6LWluZGV4OiAxMDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIH1cblxuICAgIC5kZWNrcy1kYXkuZGVja3MtdG9kYXkge1xuICAgICAgICBvdXRsaW5lOiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgb3V0bGluZS1vZmZzZXQ6IDFweDtcbiAgICB9XG5cbiAgICAuZGF5LnRvZGF5OmhvdmVyIHtcbiAgICAgICAgb3V0bGluZTogMnB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIG91dGxpbmUtb2Zmc2V0OiAxcHg7XG4gICAgfVxuXG4gICAgLyogSW50ZW5zaXR5IGNvbG9ycyAtIEdpdEh1YiBzdHlsZSAqL1xuICAgIC5kZWNrcy1pbnRlbnNpdHktMCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICB9XG5cbiAgICAuZGVja3MtaW50ZW5zaXR5LTEge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMGU0NDI5O1xuICAgIH1cblxuICAgIC5kZWNrcy1pbnRlbnNpdHktMiB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDZkMzI7XG4gICAgfVxuXG4gICAgLmRlY2tzLWludGVuc2l0eS0zIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI2YTY0MTtcbiAgICB9XG5cbiAgICAuZGVja3MtaW50ZW5zaXR5LTQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzlkMzUzO1xuICAgIH1cblxuICAgIC5kZWNrcy1sZWdlbmQge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiAzcHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDZweDtcbiAgICB9XG5cbiAgICAuZGVja3MtbGVnZW5kLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiA4cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB9XG5cbiAgICAuZGVja3MtbGVnZW5kLWNvbG9ycyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMnB4O1xuICAgIH1cblxuICAgIC5kZWNrcy1sZWdlbmQtc3F1YXJlIHtcbiAgICAgICAgd2lkdGg6IDEwcHg7XG4gICAgICAgIGhlaWdodDogMTBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgIH1cblxuICAgIC5kZWNrcy1kYXkub3V0c2lkZS15ZWFyIHtcbiAgICAgICAgb3BhY2l0eTogMC4zO1xuICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB9XG5cbiAgICAvKiBDdXN0b20gc2Nyb2xsYmFyIHN0eWxpbmcgKi9cbiAgICAuZGVja3MtaGVhdG1hcDo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgICBoZWlnaHQ6IDhweDtcbiAgICB9XG5cbiAgICAuZGVja3MtaGVhdG1hcDo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWhlYXRtYXA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWhlYXRtYXA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgfVxuXG4gICAgLyogTW9iaWxlIHJlc3BvbnNpdmUgc3R5bGVzICovXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgICAgIC5kZWNrcy1oZWF0bWFwLWNvbnRhaW5lciB7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtaGVhdG1hcC1oZWFkZXIge1xuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICAgICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtaGVhZGVyLWxlZnQgaDQge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MteWVhci1uYXZpZ2F0aW9uIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLW5hdi1idXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICAgICAgd2lkdGg6IDQ0cHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDQ0cHg7XG4gICAgICAgICAgICBtaW4td2lkdGg6IDQ0cHg7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiA0NHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWRheS1sYWJlbHMge1xuICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kYXktbGFiZWwge1xuICAgICAgICAgICAgZm9udC1zaXplOiA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtbW9udGhzLWNvbnRhaW5lciB7XG4gICAgICAgICAgICBnYXA6IDJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1tb250aC1sYWJlbCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDlweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1oZWF0bWFwOjotd2Via2l0LXNjcm9sbGJhciB7XG4gICAgICAgICAgICBoZWlnaHQ6IDRweDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xuICAgICAgICAuZGVja3MtaGVhdG1hcC1jb250YWluZXIge1xuICAgICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWhlYXRtYXAtaGVhZGVyIGg0IHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy10b3RhbC1yZXZpZXdzIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1jdXJyZW50LXllYXIge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1uYXYtYnV0dG9uIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgICAgICAgaGVpZ2h0OiA0MHB4O1xuICAgICAgICAgICAgbWluLXdpZHRoOiA0MHB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogNDBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1uYXYtYnV0dG9uIHN2ZyB7XG4gICAgICAgICAgICB3aWR0aDogMTRweDtcbiAgICAgICAgICAgIGhlaWdodDogMTRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1tb250aC1sYWJlbCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDhweDtcbiAgICAgICAgICAgIG1pbi13aWR0aDogNDBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kYXktbGFiZWwge1xuICAgICAgICAgICAgZm9udC1zaXplOiA3cHg7XG4gICAgICAgICAgICB3aWR0aDogMTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kYXktbGFiZWxzIHtcbiAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtbW9udGgtY29udGFpbmVyIHtcbiAgICAgICAgICAgIGdhcDogMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLW1vbnRoLWdyaWQge1xuICAgICAgICAgICAgZ2FwOiAxcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtbGVnZW5kIHtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1sZWdlbmQtbGFiZWwge1xuICAgICAgICAgICAgZm9udC1zaXplOiA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtbGVnZW5kLXNxdWFyZSB7XG4gICAgICAgICAgICB3aWR0aDogOHB4O1xuICAgICAgICAgICAgaGVpZ2h0OiA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGF5IHtcbiAgICAgICAgICAgIHdpZHRoOiA4cHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDhweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDFweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy13ZWVrIHtcbiAgICAgICAgICAgIGdhcDogMXB4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDM5MHB4KSB7XG4gICAgICAgIC8qIGlQaG9uZSAxMiBQcm8gYW5kIHNpbWlsYXIgMzkwcHggd2lkdGggcGhvbmVzICovXG4gICAgICAgIC5kZWNrcy1oZWF0bWFwLWNvbnRhaW5lciB7XG4gICAgICAgICAgICBwYWRkaW5nOiA2cHg7XG4gICAgICAgICAgICBtYXgtd2lkdGg6IDM5MHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWhlYXRtYXAtaGVhZGVyIHtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1oZWF0bWFwLWhlYWRlciBoNCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtdG90YWwtcmV2aWV3cyB7XG4gICAgICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtY3VycmVudC15ZWFyIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICAgIG1pbi13aWR0aDogMzBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1uYXYtYnV0dG9uIHtcbiAgICAgICAgICAgIHdpZHRoOiAyNHB4O1xuICAgICAgICAgICAgaGVpZ2h0OiAyNHB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogMjRweDtcbiAgICAgICAgICAgIG1pbi13aWR0aDogMjRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1uYXYtYnV0dG9uIHN2ZyB7XG4gICAgICAgICAgICB3aWR0aDogOHB4O1xuICAgICAgICAgICAgaGVpZ2h0OiA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtbW9udGgtbGFiZWwge1xuICAgICAgICAgICAgZm9udC1zaXplOiA3cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGF5LWxhYmVsIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogN3B4O1xuICAgICAgICAgICAgd2lkdGg6IDEwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGF5LWxhYmVscyB7XG4gICAgICAgICAgICBsZWZ0OiAtMTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kYXkge1xuICAgICAgICAgICAgd2lkdGg6IDdweDtcbiAgICAgICAgICAgIGhlaWdodDogN3B4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWxlZ2VuZC1zcXVhcmUge1xuICAgICAgICAgICAgd2lkdGg6IDdweDtcbiAgICAgICAgICAgIGhlaWdodDogN3B4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWxlZ2VuZC1sYWJlbCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy13ZWVrIHtcbiAgICAgICAgICAgIGdhcDogMXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWhlYXRtYXAtZ3JpZCB7XG4gICAgICAgICAgICBnYXA6IDFweDtcbiAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1oZWF0bWFwIHtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgfVxuICAgIH1cbjwvc3R5bGU+XG4iLCAiPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgICBpbXBvcnQgeyBvbk1vdW50LCBjcmVhdGVFdmVudERpc3BhdGNoZXIsIHRpY2sgfSBmcm9tIFwic3ZlbHRlXCI7XG4gICAgaW1wb3J0IHsgQnV0dG9uQ29tcG9uZW50LCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG4gICAgaW1wb3J0IFJldmlld0hlYXRtYXAgZnJvbSBcIi4vUmV2aWV3SGVhdG1hcC5zdmVsdGVcIjtcbiAgICBpbXBvcnQgdHlwZSB7IFN0YXRpc3RpY3MgfSBmcm9tIFwiLi4vZGF0YWJhc2UvdHlwZXNcIjtcbiAgICBpbXBvcnQgdHlwZSB7IERhdGFiYXNlU2VydmljZSB9IGZyb20gXCIuLi9kYXRhYmFzZS9EYXRhYmFzZVNlcnZpY2VcIjtcblxuICAgIGV4cG9ydCBsZXQgZGI6IERhdGFiYXNlU2VydmljZTtcbiAgICBleHBvcnQgbGV0IGRlY2tGaWx0ZXI6IHN0cmluZyA9IFwiYWxsXCI7XG5cbiAgICBjb25zdCBkaXNwYXRjaCA9IGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpO1xuXG4gICAgbGV0IGxvYWRpbmcgPSB0cnVlO1xuICAgIGxldCBzdGF0aXN0aWNzOiBTdGF0aXN0aWNzIHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IHNlbGVjdGVkRGVja0ZpbHRlciA9IGRlY2tGaWx0ZXI7IC8vIFwiYWxsXCIsIFwidGFnOnRhZ25hbWVcIiwgb3IgXCJkZWNrOmRlY2tpZFwiXG4gICAgbGV0IHNlbGVjdGVkVGltZWZyYW1lID0gXCIxMm1vbnRoc1wiOyAvLyBcIjEybW9udGhzXCIgb3IgXCJhbGxcIlxuICAgIGxldCBhdmFpbGFibGVEZWNrczogYW55W10gPSBbXTtcbiAgICBsZXQgYXZhaWxhYmxlVGFnczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgaGVhdG1hcENvbXBvbmVudDogUmV2aWV3SGVhdG1hcDtcbiAgICBsZXQgZGVja0ZpbHRlckNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgbGV0IHRpbWVmcmFtZUZpbHRlckNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgICAvLyBUcmFjayBsYXN0IGV2ZW50IHRvIHByZXZlbnQgZG91YmxlIGV4ZWN1dGlvblxuICAgIGxldCBsYXN0RXZlbnRUaW1lID0gMDtcbiAgICBsZXQgbGFzdEV2ZW50VHlwZSA9IFwiXCI7XG5cbiAgICAvLyBEZXJpdmVkIHN0YXRpc3RpY3MgLSBjb21wdXRlZCBhZnRlciBsb2FkaW5nXG4gICAgbGV0IHRvZGF5U3RhdHM6IGFueSA9IG51bGw7XG4gICAgbGV0IHdlZWtTdGF0czogYW55ID0gbnVsbDtcbiAgICBsZXQgbW9udGhTdGF0czogYW55ID0gbnVsbDtcbiAgICBsZXQgeWVhclN0YXRzOiBhbnkgPSBudWxsO1xuXG4gICAgb25Nb3VudChhc3luYyAoKSA9PiB7XG4gICAgICAgIGxvYWRpbmcgPSB0cnVlO1xuICAgICAgICBhd2FpdCBsb2FkRGVja3NBbmRUYWdzKCk7XG4gICAgICAgIGF3YWl0IGxvYWRTdGF0aXN0aWNzKCk7XG5cbiAgICAgICAgLy8gTW91bnQgZmlsdGVyIGNvbXBvbmVudHMgYWZ0ZXIgZGF0YSBpcyBsb2FkZWRcbiAgICAgICAgdGljaygpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgbW91bnRGaWx0ZXJDb21wb25lbnRzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gbW91bnRGaWx0ZXJDb21wb25lbnRzKCkge1xuICAgICAgICAvLyBEZWNrIGZpbHRlciBkcm9wZG93blxuICAgICAgICBpZiAoZGVja0ZpbHRlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoZGVja0ZpbHRlckNvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlNlbGVjdCBEZWNrKHMpOlwiKVxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcImRlY2tzLWRlY2stZmlsdGVyLWNvbnRhaW5lclwiKVxuICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKFwiYWxsXCIsIFwiQWxsIERlY2tzXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZVRhZ3MuZm9yRWFjaCgodGFnKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oYHRhZzoke3RhZ31gLCBgVGFnOiAke3RhZ31gKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlRGVja3MuZm9yRWFjaCgoZGVjaykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKGBkZWNrOiR7ZGVjay5pZH1gLCBkZWNrLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUoc2VsZWN0ZWREZWNrRmlsdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRGVja0ZpbHRlciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRmlsdGVyQ2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGltZWZyYW1lIGZpbHRlciBkcm9wZG93blxuICAgICAgICBpZiAodGltZWZyYW1lRmlsdGVyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyh0aW1lZnJhbWVGaWx0ZXJDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJUaW1lZnJhbWU6XCIpXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwiZGVja3MtdGltZWZyYW1lLWZpbHRlci1jb250YWluZXJcIilcbiAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIjEybW9udGhzXCIsIFwiTGFzdCAxMiBNb250aHNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJhbGxcIiwgXCJBbGwgSGlzdG9yeVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHNlbGVjdGVkVGltZWZyYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRUaW1lZnJhbWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVGaWx0ZXJDaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBsb2FkRGVja3NBbmRUYWdzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXZhaWxhYmxlRGVja3MgPSBhd2FpdCBkYi5nZXRBbGxEZWNrcygpO1xuICAgICAgICAgICAgYXZhaWxhYmxlVGFncyA9IFtcbiAgICAgICAgICAgICAgICAuLi5uZXcgU2V0KGF2YWlsYWJsZURlY2tzLm1hcCgoZGVjaykgPT4gZGVjay50YWcpKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyBkZWNrcyBhbmQgdGFnczpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlVG91Y2hDbGljayhjYWxsYmFjazogKCkgPT4gdm9pZCwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IGV2ZW50LnR5cGU7XG5cbiAgICAgICAgLy8gUHJldmVudCBkb3VibGUgZXhlY3V0aW9uIHdpdGhpbiAxMDBtc1xuICAgICAgICBpZiAobm93IC0gbGFzdEV2ZW50VGltZSA8IDEwMCAmJiBsYXN0RXZlbnRUeXBlICE9PSBldmVudFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxhc3RFdmVudFRpbWUgPSBub3c7XG4gICAgICAgIGxhc3RFdmVudFR5cGUgPSBldmVudFR5cGU7XG5cbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBsb2FkU3RhdGlzdGljcygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN0YXRpc3RpY3MgPSBhd2FpdCBkYi5nZXRPdmVyYWxsU3RhdGlzdGljcyhcbiAgICAgICAgICAgICAgICBzZWxlY3RlZERlY2tGaWx0ZXIsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRUaW1lZnJhbWUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBDb21wdXRlIGRlcml2ZWQgc3RhdGlzdGljcyBvbmNlIGRhdGEgaXMgbG9hZGVkXG4gICAgICAgICAgICB0b2RheVN0YXRzID0gZ2V0VG9kYXlTdGF0cygpO1xuICAgICAgICAgICAgd2Vla1N0YXRzID0gZ2V0VGltZWZyYW1lU3RhdHMoNyk7XG4gICAgICAgICAgICBtb250aFN0YXRzID0gZ2V0VGltZWZyYW1lU3RhdHMoMzApO1xuICAgICAgICAgICAgeWVhclN0YXRzID0gZ2V0VGltZWZyYW1lU3RhdHMoMzY1KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIHN0YXRpc3RpY3M6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHN0YXRpc3RpY3MgPSB7XG4gICAgICAgICAgICAgICAgZGFpbHlTdGF0czogW10sXG4gICAgICAgICAgICAgICAgY2FyZFN0YXRzOiB7IG5ldzogMCwgcmV2aWV3OiAwLCBtYXR1cmU6IDAgfSxcbiAgICAgICAgICAgICAgICBhbnN3ZXJCdXR0b25zOiB7IGFnYWluOiAwLCBoYXJkOiAwLCBnb29kOiAwLCBlYXN5OiAwIH0sXG4gICAgICAgICAgICAgICAgcmV0ZW50aW9uUmF0ZTogMCxcbiAgICAgICAgICAgICAgICBpbnRlcnZhbHM6IFtdLFxuICAgICAgICAgICAgICAgIGZvcmVjYXN0OiBbXSxcbiAgICAgICAgICAgICAgICBhdmVyYWdlUGFjZTogMCxcbiAgICAgICAgICAgICAgICB0b3RhbFJldmlld1RpbWU6IDAsXG4gICAgICAgICAgICB9IGFzIFN0YXRpc3RpY3M7XG5cbiAgICAgICAgICAgIC8vIFNldCBlbXB0eSBkZXJpdmVkIHN0YXRzIG9uIGVycm9yXG4gICAgICAgICAgICB0b2RheVN0YXRzID0gbnVsbDtcbiAgICAgICAgICAgIHdlZWtTdGF0cyA9IG51bGw7XG4gICAgICAgICAgICBtb250aFN0YXRzID0gbnVsbDtcbiAgICAgICAgICAgIHllYXJTdGF0cyA9IG51bGw7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBsb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBoYW5kbGVGaWx0ZXJDaGFuZ2UoKSB7XG4gICAgICAgIGF3YWl0IGxvYWRTdGF0aXN0aWNzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVTdHJpbmcpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcm1hdFRpbWUoc2Vjb25kczogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MCk7XG4gICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihtaW51dGVzIC8gNjApO1xuICAgICAgICBpZiAoaG91cnMgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7aG91cnN9aCAke21pbnV0ZXMgJSA2MH1tYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7bWludXRlc31tYDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb3JtYXRQYWNlKHNlY29uZHM6IG51bWJlcikge1xuICAgICAgICBpZiAoc2Vjb25kcyA8IDYwKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7c2Vjb25kcy50b0ZpeGVkKDEpfXNgO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ1NlY29uZHMgPSBNYXRoLnJvdW5kKHNlY29uZHMgJSA2MCk7XG4gICAgICAgIHJldHVybiBgJHttaW51dGVzfW0gJHtyZW1haW5pbmdTZWNvbmRzfXNgO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFRvZGF5U3RhdHMoKSB7XG4gICAgICAgIGlmICghc3RhdGlzdGljcz8uZGFpbHlTdGF0cyB8fCBzdGF0aXN0aWNzLmRhaWx5U3RhdHMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcbiAgICAgICAgLy8gRmlyc3QgdHJ5IHRvIGZpbmQgdG9kYXkncyBzdGF0cywgaWYgbm90IGF2YWlsYWJsZSB1c2UgdGhlIG1vc3QgcmVjZW50XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBzdGF0aXN0aWNzLmRhaWx5U3RhdHMuZmluZCgoZGF5KSA9PiBkYXkuZGF0ZSA9PT0gdG9kYXkpIHx8XG4gICAgICAgICAgICBzdGF0aXN0aWNzLmRhaWx5U3RhdHNbMF0gfHxcbiAgICAgICAgICAgIG51bGxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRUaW1lZnJhbWVTdGF0cyhkYXlzOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKCFzdGF0aXN0aWNzPy5kYWlseVN0YXRzKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJldmlld3M6IDAsXG4gICAgICAgICAgICAgICAgdGltZVNwZW50OiAwLFxuICAgICAgICAgICAgICAgIG5ld0NhcmRzOiAwLFxuICAgICAgICAgICAgICAgIGxlYXJuaW5nQ2FyZHM6IDAsXG4gICAgICAgICAgICAgICAgcmV2aWV3Q2FyZHM6IDAsXG4gICAgICAgICAgICAgICAgY29ycmVjdFJhdGU6IDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1dG9mZkRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjdXRvZmZEYXRlLnNldERhdGUoY3V0b2ZmRGF0ZS5nZXREYXRlKCkgLSBkYXlzKTtcbiAgICAgICAgY29uc3QgY3V0b2ZmU3RyID0gY3V0b2ZmRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcblxuICAgICAgICBjb25zdCBmaWx0ZXJlZFN0YXRzID0gc3RhdGlzdGljcy5kYWlseVN0YXRzLmZpbHRlcihcbiAgICAgICAgICAgIChkYXkpID0+IGRheS5kYXRlID49IGN1dG9mZlN0cixcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoZmlsdGVyZWRTdGF0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmV2aWV3czogMCxcbiAgICAgICAgICAgICAgICB0aW1lU3BlbnQ6IDAsXG4gICAgICAgICAgICAgICAgbmV3Q2FyZHM6IDAsXG4gICAgICAgICAgICAgICAgbGVhcm5pbmdDYXJkczogMCxcbiAgICAgICAgICAgICAgICByZXZpZXdDYXJkczogMCxcbiAgICAgICAgICAgICAgICBjb3JyZWN0UmF0ZTogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmlsdGVyZWRTdGF0cy5yZWR1Y2UoXG4gICAgICAgICAgICAoYWNjLCBkYXkpID0+ICh7XG4gICAgICAgICAgICAgICAgcmV2aWV3czogYWNjLnJldmlld3MgKyBkYXkucmV2aWV3cyxcbiAgICAgICAgICAgICAgICB0aW1lU3BlbnQ6IGFjYy50aW1lU3BlbnQgKyBkYXkudGltZVNwZW50LFxuICAgICAgICAgICAgICAgIG5ld0NhcmRzOiBhY2MubmV3Q2FyZHMgKyBkYXkubmV3Q2FyZHMsXG4gICAgICAgICAgICAgICAgbGVhcm5pbmdDYXJkczogMCwgLy8gTm8gbGVhcm5pbmcgY2FyZHMgaW4gcHVyZSBGU1JTXG4gICAgICAgICAgICAgICAgcmV2aWV3Q2FyZHM6IGFjYy5yZXZpZXdDYXJkcyArIGRheS5yZXZpZXdDYXJkcyxcbiAgICAgICAgICAgICAgICBjb3JyZWN0UmF0ZTpcbiAgICAgICAgICAgICAgICAgICAgYWNjLnJldmlld3MgKyBkYXkucmV2aWV3cyA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKGFjYy5jb3JyZWN0UmF0ZSAqIGFjYy5yZXZpZXdzICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheS5jb3JyZWN0UmF0ZSAqIGRheS5yZXZpZXdzKSAvXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChhY2MucmV2aWV3cyArIGRheS5yZXZpZXdzKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV2aWV3czogMCxcbiAgICAgICAgICAgICAgICB0aW1lU3BlbnQ6IDAsXG4gICAgICAgICAgICAgICAgbmV3Q2FyZHM6IDAsXG4gICAgICAgICAgICAgICAgbGVhcm5pbmdDYXJkczogMCxcbiAgICAgICAgICAgICAgICByZXZpZXdDYXJkczogMCxcbiAgICAgICAgICAgICAgICBjb3JyZWN0UmF0ZTogMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlQXZlcmFnZUVhc2UoKSB7XG4gICAgICAgIGlmICghc3RhdGlzdGljcz8uYW5zd2VyQnV0dG9ucykgcmV0dXJuIFwiMC4wMFwiO1xuICAgICAgICBjb25zdCB7IGFnYWluLCBoYXJkLCBnb29kLCBlYXN5IH0gPSBzdGF0aXN0aWNzLmFuc3dlckJ1dHRvbnM7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gYWdhaW4gKyBoYXJkICsgZ29vZCArIGVhc3k7XG4gICAgICAgIGlmICh0b3RhbCA9PT0gMCkgcmV0dXJuIFwiMC4wMFwiO1xuICAgICAgICAvLyBNYXAgYnV0dG9ucyB0byB2YWx1ZXM6IEFnYWluPTEsIEhhcmQ9MiwgR29vZD0zLCBFYXN5PTRcbiAgICAgICAgY29uc3Qgd2VpZ2h0ZWRTdW0gPSBhZ2FpbiAqIDEgKyBoYXJkICogMiArIGdvb2QgKiAzICsgZWFzeSAqIDQ7XG4gICAgICAgIHJldHVybiAod2VpZ2h0ZWRTdW0gLyB0b3RhbCkudG9GaXhlZCgyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVBdmVyYWdlSW50ZXJ2YWwoKSB7XG4gICAgICAgIGlmICghc3RhdGlzdGljcz8uaW50ZXJ2YWxzIHx8IHN0YXRpc3RpY3MuaW50ZXJ2YWxzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBsZXQgdG90YWxJbnRlcnZhbCA9IDA7XG4gICAgICAgIGxldCB0b3RhbENhcmRzID0gMDtcblxuICAgICAgICBzdGF0aXN0aWNzLmludGVydmFscy5mb3JFYWNoKChpbnRlcnZhbCkgPT4ge1xuICAgICAgICAgICAgLy8gQ29udmVydCBpbnRlcnZhbCBzdHJpbmcgdG8gbWludXRlc1xuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWxTdHIgPSBpbnRlcnZhbC5pbnRlcnZhbDtcbiAgICAgICAgICAgIGxldCBtaW51dGVzID0gMDtcblxuICAgICAgICAgICAgaWYgKGludGVydmFsU3RyLmVuZHNXaXRoKFwiaFwiKSkge1xuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludChpbnRlcnZhbFN0cikgKiA2MDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW50ZXJ2YWxTdHIuZW5kc1dpdGgoXCJkXCIpKSB7XG4gICAgICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KGludGVydmFsU3RyKSAqIDE0NDA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGludGVydmFsU3RyLmVuZHNXaXRoKFwibVwiKSkge1xuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludChpbnRlcnZhbFN0cikgKiA0MzIwMDsgLy8gbW9udGhzXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRvdGFsSW50ZXJ2YWwgKz0gbWludXRlcyAqIGludGVydmFsLmNvdW50O1xuICAgICAgICAgICAgdG90YWxDYXJkcyArPSBpbnRlcnZhbC5jb3VudDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRvdGFsQ2FyZHMgPT09IDApIHJldHVybiAwO1xuICAgICAgICBjb25zdCBhdmdNaW51dGVzID0gdG90YWxJbnRlcnZhbCAvIHRvdGFsQ2FyZHM7XG5cbiAgICAgICAgLy8gQ29udmVydCBiYWNrIHRvIGRheXMgZm9yIGRpc3BsYXlcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoYXZnTWludXRlcyAvIDE0NDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldER1ZVRvZGF5KCkge1xuICAgICAgICBpZiAoIXN0YXRpc3RpY3M/LmZvcmVjYXN0IHx8IHN0YXRpc3RpY3MuZm9yZWNhc3QubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xuICAgICAgICBjb25zdCB0b2RheUZvcmVjYXN0ID0gc3RhdGlzdGljcy5mb3JlY2FzdC5maW5kKFxuICAgICAgICAgICAgKGRheSkgPT4gZGF5LmRhdGUgPT09IHRvZGF5LFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdG9kYXlGb3JlY2FzdCA/IHRvZGF5Rm9yZWNhc3QuZHVlQ291bnQgOiAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldER1ZVRvbW9ycm93KCkge1xuICAgICAgICBpZiAoIXN0YXRpc3RpY3M/LmZvcmVjYXN0IHx8IHN0YXRpc3RpY3MuZm9yZWNhc3QubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcbiAgICAgICAgY29uc3QgdG9tb3Jyb3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0b21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpO1xuICAgICAgICBjb25zdCB0b21vcnJvd1N0ciA9IHRvbW9ycm93LnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xuICAgICAgICBjb25zdCB0b21vcnJvd0ZvcmVjYXN0ID0gc3RhdGlzdGljcy5mb3JlY2FzdC5maW5kKFxuICAgICAgICAgICAgKGRheSkgPT4gZGF5LmRhdGUgPT09IHRvbW9ycm93U3RyLFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdG9tb3Jyb3dGb3JlY2FzdCA/IHRvbW9ycm93Rm9yZWNhc3QuZHVlQ291bnQgOiAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUJhckhlaWdodChkdWVDb3VudDogbnVtYmVyLCBtYXhEdWVDb3VudDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgYmFySGVpZ2h0ID0gNDAwOyAvLyBNYXhpbXVtIGhlaWdodCBpbiBwaXhlbHMgKGxlYXZpbmcgcm9vbSBpbiAxNTBweCBjb250YWluZXIpXG5cbiAgICAgICAgaWYgKG1heER1ZUNvdW50ID09PSAwKSByZXR1cm4gMDtcblxuICAgICAgICBjb25zdCBwcm9wb3J0aW9uID0gZHVlQ291bnQgLyBtYXhEdWVDb3VudDtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHByb3BvcnRpb24gKiBiYXJIZWlnaHQgLSA4MCwgMTApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE1hdHVyaXR5UmF0aW8oKSB7XG4gICAgICAgIGlmICghc3RhdGlzdGljcz8uY2FyZFN0YXRzKSByZXR1cm4gXCIwLjBcIjtcbiAgICAgICAgY29uc3QgeyBuZXc6IG5ld0NhcmRzLCByZXZpZXcsIG1hdHVyZSB9ID0gc3RhdGlzdGljcy5jYXJkU3RhdHM7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gbmV3Q2FyZHMgKyAocmV2aWV3IHx8IDApICsgbWF0dXJlO1xuICAgICAgICBpZiAodG90YWwgPT09IDApIHJldHVybiBcIjAuMFwiO1xuICAgICAgICByZXR1cm4gKChtYXR1cmUgLyB0b3RhbCkgKiAxMDApLnRvRml4ZWQoMSk7XG4gICAgfVxuPC9zY3JpcHQ+XG5cbjxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0aXN0aWNzLWNvbnRhaW5lclwiPlxuICAgIDxoMiBjbGFzcz1cImRlY2tzLXN0YXRpc3RpY3MtbW9kYWwtdGl0bGVcIj5PdmVycmFsbCBTdGF0aXN0aWNzPC9oMj5cbiAgICB7I2lmIGxvYWRpbmd9XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1sb2FkaW5nXCI+TG9hZGluZyBzdGF0aXN0aWNzLi4uPC9kaXY+XG4gICAgezplbHNlIGlmICFzdGF0aXN0aWNzfVxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtZXJyb3JcIj5cbiAgICAgICAgICAgIDxwPkZhaWxlZCB0byBsb2FkIHN0YXRpc3RpY3M8L3A+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJkZWNrcy1yZXRyeS1idXR0b25cIlxuICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoZSkgPT4gaGFuZGxlVG91Y2hDbGljayhsb2FkU3RhdGlzdGljcywgZSl9XG4gICAgICAgICAgICAgICAgb246dG91Y2hlbmQ9eyhlKSA9PiBoYW5kbGVUb3VjaENsaWNrKGxvYWRTdGF0aXN0aWNzLCBlKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBSZXRyeVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgIHs6ZWxzZX1cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWZpbHRlcnNcIj5cbiAgICAgICAgICAgIDxkaXYgYmluZDp0aGlzPXtkZWNrRmlsdGVyQ29udGFpbmVyfT48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgYmluZDp0aGlzPXt0aW1lZnJhbWVGaWx0ZXJDb250YWluZXJ9PjwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdHNcIj5cbiAgICAgICAgICAgIDwhLS0gQ3VycmVudCBTdGF0dXMgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdHMtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxoMz5DdXJyZW50IFN0YXR1czwvaDM+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXRzLWdyaWRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3RhdGlzdGljcz8uY2FyZFN0YXRzPy5uZXcgfHwgMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIj5OZXcgQ2FyZHM8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LXZhbHVlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTGVhcm5pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3RhdGlzdGljcz8uY2FyZFN0YXRzPy5yZXZpZXcgfHwgMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIj5SZXZpZXc8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3N0YXRpc3RpY3M/LmNhcmRTdGF0cz8ubWF0dXJlIHx8IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWxhYmVsXCI+TWF0dXJlPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1jYXJkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC12YWx1ZVwiPntnZXREdWVUb2RheSgpfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIj5EdWUgVG9kYXk8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSBQYWNlIFN0YXRpc3RpY3MgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdHMtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxoMz5SZXZpZXcgUGFjZTwvaDM+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXRzLWdyaWRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3RhdGlzdGljcz8uYXZlcmFnZVBhY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBmb3JtYXRQYWNlKHN0YXRpc3RpY3MuYXZlcmFnZVBhY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJOL0FcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIj5BdmVyYWdlIHBlciBDYXJkPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1jYXJkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdGF0aXN0aWNzPy50b3RhbFJldmlld1RpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBmb3JtYXRUaW1lKHN0YXRpc3RpY3MudG90YWxSZXZpZXdUaW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiTi9BXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWxhYmVsXCI+VG90YWwgUmV2aWV3IFRpbWU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSBUb2RheSdzIFN0YXRpc3RpY3MgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdHMtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxoMz5Ub2RheSdzIFN0YXRpc3RpY3M8L2gzPlxuICAgICAgICAgICAgICAgIHsjaWYgdG9kYXlTdGF0c31cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXRzLWdyaWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dG9kYXlTdGF0cy5yZXZpZXdzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWxhYmVsXCI+Q2FyZHMgU3R1ZGllZDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1jYXJkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdFRpbWUodG9kYXlTdGF0cy50aW1lU3BlbnQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWxhYmVsXCI+VGltZSBTcGVudDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxoND5CcmVha2Rvd24gYnkgQ2FyZCBUeXBlPC9oND5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXRzLWdyaWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dG9kYXlTdGF0cy5uZXdDYXJkc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1sYWJlbFwiPk5ldyBDYXJkczwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1jYXJkXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LXZhbHVlXCI+MDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWxhYmVsXCI+TGVhcm5pbmc8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0b2RheVN0YXRzLnJldmlld0NhcmRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWxhYmVsXCI+UmV2aWV3PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtbm8tZGF0YS1tZXNzYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5ObyByZXZpZXdzIHRvZGF5IHlldC48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImRlY2tzLWhlbHAtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0IHJldmlld2luZyBmbGFzaGNhcmRzIHRvIHNlZSB5b3VyIGRhaWx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGlzdGljcyBoZXJlIVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gV2Vlay9Nb250aC9ZZWFyIFN0YXRpc3RpY3MgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdHMtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxoMz5UaGlzIFdlZWs8L2gzPlxuICAgICAgICAgICAgICAgIHsjaWYgd2Vla1N0YXRzICYmIHdlZWtTdGF0cy5yZXZpZXdzID4gMH1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXRzLWdyaWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7d2Vla1N0YXRzLnJldmlld3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIj5DYXJkcyBTdHVkaWVkPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0VGltZSh3ZWVrU3RhdHMudGltZVNwZW50KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1sYWJlbFwiPlRpbWUgU3BlbnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3ZWVrU3RhdHMuY29ycmVjdFJhdGUudG9GaXhlZCgxKX0lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIj5TdWNjZXNzIFJhdGU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1uby1kYXRhLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPk5vIHJldmlld3MgdGhpcyB3ZWVrIHlldC48L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHsvaWZ9XG5cbiAgICAgICAgICAgICAgICA8aDM+VGhpcyBNb250aDwvaDM+XG4gICAgICAgICAgICAgICAgeyNpZiBtb250aFN0YXRzICYmIG1vbnRoU3RhdHMucmV2aWV3cyA+IDB9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0cy1ncmlkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1jYXJkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21vbnRoU3RhdHMucmV2aWV3c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1sYWJlbFwiPkNhcmRzIFN0dWRpZWQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRUaW1lKG1vbnRoU3RhdHMudGltZVNwZW50KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1sYWJlbFwiPlRpbWUgU3BlbnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb250aFN0YXRzLmNvcnJlY3RSYXRlLnRvRml4ZWQoMSl9JVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWxhYmVsXCI+U3VjY2VzcyBSYXRlPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtbm8tZGF0YS1tZXNzYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5ObyByZXZpZXdzIHRoaXMgbW9udGggeWV0LjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgey9pZn1cblxuICAgICAgICAgICAgICAgIDxoMz5UaGlzIFllYXI8L2gzPlxuICAgICAgICAgICAgICAgIHsjaWYgeWVhclN0YXRzICYmIHllYXJTdGF0cy5yZXZpZXdzID4gMH1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXRzLWdyaWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eWVhclN0YXRzLnJldmlld3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIj5DYXJkcyBTdHVkaWVkPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0VGltZSh5ZWFyU3RhdHMudGltZVNwZW50KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1sYWJlbFwiPlRpbWUgU3BlbnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt5ZWFyU3RhdHMuY29ycmVjdFJhdGUudG9GaXhlZCgxKX0lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIj5TdWNjZXNzIFJhdGU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1uby1kYXRhLW1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPk5vIHJldmlld3MgdGhpcyB5ZWFyIHlldC48L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSBEZWNrIFN0YXRpc3RpY3MgJiBNZXRyaWNzIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICA8aDM+RGVjayBTdGF0aXN0aWNzICYgTWV0cmljczwvaDM+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpY3MtZ3JpZFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbWV0cmljLWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tZXRyaWMtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KHN0YXRpc3RpY3M/LnJldGVudGlvblJhdGUgfHwgMCkudG9GaXhlZCgxKX0lXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tZXRyaWMtbGFiZWxcIj5SZXRlbnRpb24gUmF0ZTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICUgb2YgcmV2aWV3cyBhbnN3ZXJlZCBjb3JyZWN0bHkgKGV4Y2x1ZGluZyBcIkFnYWluXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tZXRyaWMtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjYWxjdWxhdGVBdmVyYWdlRWFzZSgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbWV0cmljLWxhYmVsXCI+QXZlcmFnZSBFYXNlPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbWV0cmljLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVhbiBvZiBlYXNlIGJ1dHRvbiB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbWV0cmljLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NhbGN1bGF0ZUF2ZXJhZ2VJbnRlcnZhbCgpfWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy1sYWJlbFwiPkF2ZyBJbnRlcnZhbDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lYW4gaW50ZXJ2YWwgb2YgYWxsIHJldmlldyBjYXJkc1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbWV0cmljLWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tZXRyaWMtdmFsdWVcIj57Z2V0RHVlVG9kYXkoKX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tZXRyaWMtbGFiZWxcIj5EdWUgVG9kYXk8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tZXRyaWMtZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXIgb2YgY2FyZHMgZHVlIHRvZGF5XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tZXRyaWMtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy12YWx1ZVwiPntnZXREdWVUb21vcnJvdygpfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy1sYWJlbFwiPkR1ZSBUb21vcnJvdzwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlciBvZiBjYXJkcyBkdWUgdG9tb3Jyb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbWV0cmljLXZhbHVlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy1sYWJlbFwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMZWFybmluZyBDYXJkc1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJkZWNrcy1tZXRyaWMtZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlciBvZiBjYXJkcyBpbiB0aGUgbGVhcm5pbmcgcXVldWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy1jYXJkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbWV0cmljLXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldE1hdHVyaXR5UmF0aW8oKX0lXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tZXRyaWMtbGFiZWxcIj5NYXR1cml0eSBSYXRpbzwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW1ldHJpYy1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdHVyZSBjYXJkcyDDtyB0b3RhbCBjYXJkc1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbWV0cmljLWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tZXRyaWMtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KHN0YXRpc3RpY3M/LmNhcmRTdGF0cz8ubmV3IHx8IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0YXRpc3RpY3M/LmNhcmRTdGF0cz8ucmV2aWV3IHx8IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0YXRpc3RpY3M/LmNhcmRTdGF0cz8ubWF0dXJlIHx8IDApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbWV0cmljLWxhYmVsXCI+VG90YWwgQ2FyZHM8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tZXRyaWMtZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGwgY2FyZHMgaW4gY29sbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGg0PkNhcmQgU3RhdHVzIEJyZWFrZG93bjwvaDQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXRzLWdyaWRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3RhdGlzdGljcz8uY2FyZFN0YXRzPy5uZXcgfHwgMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIj5OZXcgQ2FyZHM8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWNhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LXZhbHVlXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTGVhcm5pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtY2FyZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3RhdGlzdGljcz8uY2FyZFN0YXRzPy5tYXR1cmUgfHwgMH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtbGFiZWxcIj5NYXR1cmU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSBBbnN3ZXIgQnV0dG9uIFVzYWdlIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXRzLXNlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICA8aDM+QW5zd2VyIEJ1dHRvbiBVc2FnZTwvaDM+XG4gICAgICAgICAgICAgICAgeyNpZiBzdGF0aXN0aWNzPy5hbnN3ZXJCdXR0b25zICYmIChzdGF0aXN0aWNzLmFuc3dlckJ1dHRvbnMuYWdhaW4gPiAwIHx8IHN0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5oYXJkID4gMCB8fCBzdGF0aXN0aWNzLmFuc3dlckJ1dHRvbnMuZ29vZCA+IDAgfHwgc3RhdGlzdGljcy5hbnN3ZXJCdXR0b25zLmVhc3kgPiAwKX1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWJ1dHRvbi1zdGF0c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWJ1dHRvbi1iYXIgZGVja3MtYWdhaW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtYnV0dG9uLWxhYmVsXCI+QWdhaW48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtYnV0dG9uLWNvdW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdGF0aXN0aWNzLmFuc3dlckJ1dHRvbnMuYWdhaW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWJ1dHRvbi1wZXJjZW50YWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RhdGlzdGljcy5hbnN3ZXJCdXR0b25zLmFnYWluIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RhdGlzdGljcy5hbnN3ZXJCdXR0b25zLmFnYWluICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGlzdGljcy5hbnN3ZXJCdXR0b25zLmhhcmQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLmFuc3dlckJ1dHRvbnMuZ29vZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5lYXN5KSkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9GaXhlZCgxKX0lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1idXR0b24tYmFyIGRlY2tzLWhhcmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtYnV0dG9uLWxhYmVsXCI+SGFyZDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1idXR0b24tY291bnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3N0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5oYXJkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1idXR0b24tcGVyY2VudGFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5oYXJkIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RhdGlzdGljcy5hbnN3ZXJCdXR0b25zLmFnYWluICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGlzdGljcy5hbnN3ZXJCdXR0b25zLmhhcmQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLmFuc3dlckJ1dHRvbnMuZ29vZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5lYXN5KSkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9GaXhlZCgxKX0lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1idXR0b24tYmFyIGRlY2tzLWdvb2RcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtYnV0dG9uLWxhYmVsXCI+R29vZDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1idXR0b24tY291bnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3N0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5nb29kfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1idXR0b24tcGVyY2VudGFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5nb29kIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RhdGlzdGljcy5hbnN3ZXJCdXR0b25zLmFnYWluICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGlzdGljcy5hbnN3ZXJCdXR0b25zLmhhcmQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLmFuc3dlckJ1dHRvbnMuZ29vZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5lYXN5KSkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9GaXhlZCgxKX0lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1idXR0b24tYmFyIGRlY2tzLWVhc3lcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtYnV0dG9uLWxhYmVsXCI+RWFzeTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1idXR0b24tY291bnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3N0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5lYXN5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1idXR0b24tcGVyY2VudGFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5lYXN5IC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RhdGlzdGljcy5hbnN3ZXJCdXR0b25zLmFnYWluICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGlzdGljcy5hbnN3ZXJCdXR0b25zLmhhcmQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLmFuc3dlckJ1dHRvbnMuZ29vZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpc3RpY3MuYW5zd2VyQnV0dG9ucy5lYXN5KSkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9GaXhlZCgxKX0lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtbm8tZGF0YS1tZXNzYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5ObyBhbnN3ZXIgYnV0dG9uIGRhdGEgYXZhaWxhYmxlIHlldC48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImRlY2tzLWhlbHAtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbXBsZXRlIHNvbWUgcmV2aWV3cyB0byBzZWUgYW5zd2VyIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpc3RpY3MuXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSBGb3JlY2FzdCAtLT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0cy1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgPGgzPlJldmlldyBMb2FkIEZvcmVjYXN0PC9oMz5cbiAgICAgICAgICAgICAgICB7I2lmIHN0YXRpc3RpY3M/LmZvcmVjYXN0ICYmIHN0YXRpc3RpY3MuZm9yZWNhc3QubGVuZ3RoID4gMCAmJiBzdGF0aXN0aWNzLmZvcmVjYXN0LnNvbWUoKGRheSkgPT4gZGF5LmR1ZUNvdW50ID4gMCl9XG4gICAgICAgICAgICAgICAgICAgIHtAY29uc3QgZmlsdGVyZWRGb3JlY2FzdCA9IHN0YXRpc3RpY3MuZm9yZWNhc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGRheSkgPT4gZGF5LmR1ZUNvdW50ID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZSgwLCAyMCl9XG4gICAgICAgICAgICAgICAgICAgIHtAY29uc3QgbWF4RHVlQ291bnQgPSBNYXRoLm1heChcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZpbHRlcmVkRm9yZWNhc3QubWFwKChkYXkpID0+IGRheS5kdWVDb3VudCksXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1mb3JlY2FzdC1jaGFydFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyNlYWNoIGZpbHRlcmVkRm9yZWNhc3QgYXMgZGF5LCBpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGNvbnN0IG9yaWdpbmFsSW5kZXggPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aXN0aWNzLmZvcmVjYXN0LmluZGV4T2YoZGF5KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGVja3MtZm9yZWNhc3QtYmFyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJ7b3JpZ2luYWxJbmRleCA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnVG9kYXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG9yaWdpbmFsSW5kZXggPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnVG9tb3Jyb3cnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYERheSAke29yaWdpbmFsSW5kZXh9IChpbiAke29yaWdpbmFsSW5kZXh9IGRheXMpYH06IHtkYXkuZHVlQ291bnR9IGNhcmR7ZGF5LmR1ZUNvdW50ICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ30gZHVlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGVja3MtYmFyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwiaGVpZ2h0OiB7Y2FsY3VsYXRlQmFySGVpZ2h0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheS5kdWVDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhEdWVDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9cHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1iYXItbGFiZWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcmlnaW5hbEluZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWJhci12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RheS5kdWVDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImRlY2tzLWZvcmVjYXN0LW5vdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNob3dpbmcgZGF5cyB3aXRoIHNjaGVkdWxlZCByZXZpZXdzIGJhc2VkIG9uIEZTUlNcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFscy5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLW5vLWRhdGEtbWVzc2FnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+Tm8gdXBjb21pbmcgcmV2aWV3cyBzY2hlZHVsZWQuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJkZWNrcy1oZWxwLXRleHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGQgZmxhc2hjYXJkcyB0byB5b3VyIGRlY2tzIHRvIHNlZSBmdXR1cmUgcmV2aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWNhc3RzLlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gUmV2aWV3IEhlYXRtYXAgLS0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdHMtc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgIDxoMz5SZXZpZXcgSGVhdG1hcDwvaDM+XG4gICAgICAgICAgICAgICAgPHA+RGFpbHkgcmV2aWV3IGFjdGl2aXR5IG92ZXIgdGltZTwvcD5cbiAgICAgICAgICAgICAgICA8UmV2aWV3SGVhdG1hcFxuICAgICAgICAgICAgICAgICAgICBiaW5kOnRoaXM9e2hlYXRtYXBDb21wb25lbnR9XG4gICAgICAgICAgICAgICAgICAgIGdldFJldmlld0NvdW50cz17YXN5bmMgKGRheXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBkYi5nZXRSZXZpZXdDb3VudHNCeURhdGUoZGF5cyk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtbW9kYWwtYWN0aW9uc1wiPlxuICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vd3d3LmJ1eW1lYWNvZmZlZS5jb20vZHNjaGVyZGlsMFwiPlxuICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgc3JjPVwiaHR0cHM6Ly9jZG4uYnV5bWVhY29mZmVlLmNvbS9idXR0b25zL3YyL2RlZmF1bHQteWVsbG93LnBuZ1wiXG4gICAgICAgICAgICAgICAgICAgIGFsdD1cIkJ1eSBNZSBBIENvZmZlZVwiXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjQwXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9hPlxuXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJkZWNrcy1jbG9zZS1idXR0b25cIlxuICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoZSkgPT4gaGFuZGxlVG91Y2hDbGljaygoKSA9PiBkaXNwYXRjaChcImNsb3NlXCIpLCBlKX1cbiAgICAgICAgICAgICAgICBvbjp0b3VjaGVuZD17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVRvdWNoQ2xpY2soKCkgPT4gZGlzcGF0Y2goXCJjbG9zZVwiKSwgZSl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ2xvc2VcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICB7L2lmfVxuPC9kaXY+XG57I2lmIGZhbHNlfVxuICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJkZWNrcy1kZWNrLWZpbHRlci1jb250YWluZXIgZGVja3MtdGltZWZyYW1lLWZpbHRlci1jb250YWluZXJcIlxuICAgID48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiZGVja3MtZGVjay1maWx0ZXItY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zZXR0aW5nLWl0ZW0tY29udHJvbFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWRyb3Bkb3duXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2Plxuey9pZn1cblxuPHN0eWxlPlxuICAgIC5kZWNrcy1zdGF0aXN0aWNzLWNvbnRhaW5lciB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LWludGVyZmFjZSk7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIH1cblxuICAgIC5kZWNrcy1zdGF0cyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG92ZXJmbG93OiBzY3JvbGw7XG4gICAgfVxuXG4gICAgLmRlY2tzLWxvYWRpbmcsXG4gICAgLmRlY2tzLWVycm9yIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiA0MHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgfVxuXG4gICAgLmRlY2tzLWZpbHRlcnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDI0cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDI0cHg7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB9XG5cbiAgICAuZGVja3MtZmlsdGVycyA+IGRpdiB7XG4gICAgICAgIG1pbi13aWR0aDogMjAwcHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLXN0YXRzLXNlY3Rpb24ge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAzMnB4O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogMjRweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICB9XG5cbiAgICAuZGVja3Mtc3RhdHMtc2VjdGlvbjpsYXN0LW9mLXR5cGUge1xuICAgICAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgIH1cblxuICAgIC5kZWNrcy1zdGF0cy1zZWN0aW9uIGgzIHtcbiAgICAgICAgbWFyZ2luOiAwIDAgMjBweCAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgfVxuXG4gICAgLmRlY2tzLXN0YXRzLXNlY3Rpb24gaDQge1xuICAgICAgICBtYXJnaW46IDI0cHggMCAxMnB4IDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICB9XG5cbiAgICAuZGVja3Mtc3RhdHMtZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMTUwcHgsIDFmcikpO1xuICAgICAgICBnYXA6IDE2cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLXN0YXQtY2FyZCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgbWluLWhlaWdodDogODBweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgfVxuXG4gICAgLmRlY2tzLXN0YXQtdmFsdWUge1xuICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICB9XG5cbiAgICAuZGVja3Mtc3RhdC1sYWJlbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogMC41cHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLW1ldHJpY3MtZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjAwcHgsIDFmcikpO1xuICAgICAgICBnYXA6IDE2cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDI0cHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLW1ldHJpYy1jYXJkIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgbWluLWhlaWdodDogMTAwcHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLW1ldHJpYy12YWx1ZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjhweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgIH1cblxuICAgIC5kZWNrcy1tZXRyaWMtbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICB9XG5cbiAgICAuZGVja3MtbWV0cmljLWRlc2NyaXB0aW9uIHtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjM7XG4gICAgfVxuXG4gICAgLmRlY2tzLWZvcmVjYXN0LWNoYXJ0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGhlaWdodDogNDAwcHg7XG4gICAgICAgIG92ZXJmbG93LXg6IGF1dG87XG4gICAgICAgIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIH1cblxuICAgIC5kZWNrcy1mb3JlY2FzdC1iYXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgbWluLXdpZHRoOiA0MHB4O1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICB9XG5cbiAgICAuZGVja3MtYmFyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICB3aWR0aDogMjRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7XG4gICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4ycztcbiAgICB9XG5cbiAgICAuZGVja3MtYmFyLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgfVxuXG4gICAgLmRlY2tzLWJhci12YWx1ZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICB9XG5cbiAgICAuZGVja3MtZm9yZWNhc3Qtbm90ZSB7XG4gICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG5cbiAgICAuZGVja3MtYnV0dG9uLXN0YXRzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiAxMnB4O1xuICAgIH1cblxuICAgIC5kZWNrcy1idXR0b24tYmFyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgfVxuXG4gICAgLmRlY2tzLWJ1dHRvbi1iYXIuZGVja3MtYWdhaW4ge1xuICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICNlZjQ0NDQ7XG4gICAgfVxuXG4gICAgLmRlY2tzLWJ1dHRvbi1iYXIuZGVja3MtaGFyZCB7XG4gICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2Y5NzMxNjtcbiAgICB9XG5cbiAgICAuZGVja3MtYnV0dG9uLWJhci5kZWNrcy1nb29kIHtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMjJjNTVlO1xuICAgIH1cblxuICAgIC5kZWNrcy1idXR0b24tYmFyLmRlY2tzLWVhc3kge1xuICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICMzYjgyZjY7XG4gICAgfVxuXG4gICAgLmRlY2tzLWJ1dHRvbi1sYWJlbCB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgfVxuXG4gICAgLmRlY2tzLWJ1dHRvbi1jb3VudCB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICB9XG5cbiAgICAuZGVja3MtYnV0dG9uLXBlcmNlbnRhZ2Uge1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9kYWwtYWN0aW9ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDI0cHg7XG4gICAgICAgIHBhZGRpbmc6IDE2cHggMjBweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICBtYXJnaW4tbGVmdDogLTIwcHg7XG4gICAgICAgIG1hcmdpbi1yaWdodDogLTIwcHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWNsb3NlLWJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICBtaW4taGVpZ2h0OiA0NHB4O1xuICAgICAgICBtaW4td2lkdGg6IDgwcHg7XG4gICAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uO1xuICAgICAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7XG4gICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIH1cblxuICAgIC5kZWNrcy1jbG9zZS1idXR0b246aG92ZXIsXG4gICAgLmRlY2tzLWNsb3NlLWJ1dHRvbjphY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xuICAgIH1cblxuICAgIC5kZWNrcy1mb3JlY2FzdC1iYXIge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB9XG5cbiAgICAuZGVja3MtZm9yZWNhc3QtYmFyOmhvdmVyIC5kZWNrcy1iYXIge1xuICAgICAgICBvcGFjaXR5OiAwLjg7XG4gICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlO1xuICAgIH1cblxuICAgIC5kZWNrcy1uby1kYXRhLW1lc3NhZ2Uge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHBhZGRpbmc6IDI0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgfVxuXG4gICAgLmRlY2tzLW5vLWRhdGEtbWVzc2FnZSBwIHtcbiAgICAgICAgbWFyZ2luOiAwIDAgOHB4IDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB9XG5cbiAgICAuZGVja3MtaGVscC10ZXh0IHtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWZhaW50KSAhaW1wb3J0YW50O1xuICAgICAgICBtYXJnaW46IDAgIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICAuZGVja3MtcmV0cnktYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMTJweDtcbiAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDQ0cHg7XG4gICAgICAgIG1pbi13aWR0aDogODBweDtcbiAgICAgICAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XG4gICAgICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTtcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgfVxuXG4gICAgLmRlY2tzLXJldHJ5LWJ1dHRvbjpob3ZlcixcbiAgICAuZGVja3MtcmV0cnktYnV0dG9uOmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgfVxuXG4gICAgLyogTW9iaWxlIHJlc3BvbnNpdmUgc3R5bGVzICovXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgICAgIC5kZWNrcy1zdGF0aXN0aWNzLWNvbnRhaW5lciB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWZpbHRlcnMge1xuICAgICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZmlsdGVycyA+IGRpdiB7XG4gICAgICAgICAgICBtaW4td2lkdGg6IHVuc2V0O1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3Mtc3RhdHMtZ3JpZCB7XG4gICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDEyMHB4LCAxZnIpKTtcbiAgICAgICAgICAgIGdhcDogMTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1zdGF0LWNhcmQge1xuICAgICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDcwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3Mtc3RhdC12YWx1ZSB7XG4gICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtbWV0cmljcy1ncmlkIHtcbiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICAgICAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLW1ldHJpYy1jYXJkIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiA4MHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLW1ldHJpYy12YWx1ZSB7XG4gICAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZm9yZWNhc3QtY2hhcnQge1xuICAgICAgICAgICAgaGVpZ2h0OiAzMDBweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZm9yZWNhc3QtYmFyIHtcbiAgICAgICAgICAgIG1pbi13aWR0aDogMzJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1iYXIge1xuICAgICAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtYmFyLWxhYmVsLFxuICAgICAgICAuZGVja3MtYmFyLXZhbHVlIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1idXR0b24tYmFyIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMTJweDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1idXR0b24tY291bnQge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLW1vZGFsLWFjdGlvbnMge1xuICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4O1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IC0xMnB4O1xuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAtMTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1jbG9zZS1idXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogMTJweCAyNHB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogNDRweDsgLyogVG91Y2gtZnJpZW5kbHkgc2l6ZSAqL1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7XG4gICAgICAgIC5kZWNrcy1zdGF0aXN0aWNzLWNvbnRhaW5lciB7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZmlsdGVycyB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLXN0YXRzLWdyaWQge1xuICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTtcbiAgICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLXN0YXQtY2FyZCB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogNjBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1zdGF0LXZhbHVlIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1zdGF0LWxhYmVsIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1tZXRyaWMtY2FyZCB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLW1ldHJpYy12YWx1ZSB7XG4gICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZm9yZWNhc3QtY2hhcnQge1xuICAgICAgICAgICAgaGVpZ2h0OiAyNTBweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1mb3JlY2FzdC1iYXIge1xuICAgICAgICAgICAgbWluLXdpZHRoOiAyOHB4O1xuICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtYmFyIHtcbiAgICAgICAgICAgIHdpZHRoOiAxNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWJhci1sYWJlbCxcbiAgICAgICAgLmRlY2tzLWJhci12YWx1ZSB7XG4gICAgICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtbW9kYWwtYWN0aW9ucyB7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtOHB4O1xuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAtOHB4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDM5MHB4KSB7XG4gICAgICAgIC5kZWNrcy10aW1lZnJhbWUtZmlsdGVyLWNvbnRhaW5lciB7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWRlY2stZmlsdGVyLWNvbnRhaW5lciB7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogTW9iaWxlIHJlc3BvbnNpdmUgc3R5bGVzICovXG4gICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgICAgICAgICAgLmRlY2tzLXN0YXRpc3RpY3MtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZGVja3MtZmlsdGVycyB7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBnYXA6IDE2cHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmRlY2tzLXN0YXRzLWdyaWQge1xuICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMTIwcHgsIDFmcikpO1xuICAgICAgICAgICAgICAgIGdhcDogMTJweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmRlY2tzLXN0YXQtY2FyZCB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiA3MHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZGVja3Mtc3RhdC12YWx1ZSB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZGVja3Mtc3RhdC1sYWJlbCB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZGVja3MtbWV0cmljcy1ncmlkIHtcbiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcbiAgICAgICAgICAgICAgICBnYXA6IDEycHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5kZWNrcy1tZXRyaWMtY2FyZCB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiA4MHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZGVja3MtbWV0cmljLXZhbHVlIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5kZWNrcy1tZXRyaWMtbGFiZWwge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmRlY2tzLW1ldHJpYy1kZXNjcmlwdGlvbiB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZGVja3MtZm9yZWNhc3QtY2hhcnQge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMzAwcHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmRlY2tzLWZvcmVjYXN0LWJhciB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAzMnB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZGVja3MtYmFyIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmRlY2tzLWJhci1sYWJlbCxcbiAgICAgICAgICAgIC5kZWNrcy1iYXItdmFsdWUge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmRlY2tzLWJ1dHRvbi1iYXIge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMTJweDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmRlY2tzLWJ1dHRvbi1sYWJlbCB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZGVja3MtYnV0dG9uLWNvdW50IHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5kZWNrcy1idXR0b24tcGVyY2VudGFnZSB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZGVja3Mtbm8tZGF0YS1tZXNzYWdlIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuZGVja3MtaGVscC10ZXh0IHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5kZWNrcy1jbG9zZS1idXR0b24ge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEycHggMjBweDtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNDRweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbjwvc3R5bGU+XG4iLCAiaW1wb3J0IHsgTW9kYWwsIFBsYXRmb3JtIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSB7IERlY2ssIERlY2tDb25maWcgfSBmcm9tIFwiLi4vZGF0YWJhc2UvdHlwZXNcIjtcbmltcG9ydCB0eXBlIHsgRGF0YWJhc2VTZXJ2aWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlL0RhdGFiYXNlU2VydmljZVwiO1xuaW1wb3J0IHR5cGUgeyBEZWNrU3luY2hyb25pemVyIH0gZnJvbSBcIi4uL3NlcnZpY2VzL0RlY2tTeW5jaHJvbml6ZXJcIjtcbmltcG9ydCB7IHlpZWxkVG9VSSB9IGZyb20gXCIuLi91dGlscy91aVwiO1xuaW1wb3J0IERlY2tDb25maWdVSSBmcm9tIFwiLi9EZWNrQ29uZmlnVUkuc3ZlbHRlXCI7XG5cbmV4cG9ydCBjbGFzcyBEZWNrQ29uZmlnTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgZGVjazogRGVjaztcbiAgcHJpdmF0ZSBkYjogRGF0YWJhc2VTZXJ2aWNlO1xuICBwcml2YXRlIGRlY2tTeW5jaHJvbml6ZXI6IERlY2tTeW5jaHJvbml6ZXI7XG4gIHByaXZhdGUgb25SZWZyZXNoU3RhdHM6IChkZWNrSWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgcHJpdmF0ZSBjb25maWc6IERlY2tDb25maWc7XG4gIHByaXZhdGUgY29tcG9uZW50OiBEZWNrQ29uZmlnVUkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZXNpemVIYW5kbGVyPzogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IGFueSxcbiAgICBkZWNrOiBEZWNrLFxuICAgIGRiOiBEYXRhYmFzZVNlcnZpY2UsXG4gICAgZGVja1N5bmNocm9uaXplcjogRGVja1N5bmNocm9uaXplcixcbiAgICBvblJlZnJlc2hTdGF0czogKGRlY2tJZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+LFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuZGVjayA9IGRlY2s7XG4gICAgdGhpcy5kYiA9IGRiO1xuICAgIHRoaXMuZGVja1N5bmNocm9uaXplciA9IGRlY2tTeW5jaHJvbml6ZXI7XG4gICAgdGhpcy5vblJlZnJlc2hTdGF0cyA9IG9uUmVmcmVzaFN0YXRzO1xuICAgIHRoaXMuY29uZmlnID0geyAuLi5kZWNrLmNvbmZpZyB9O1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgLy8gQWRkIG1vYmlsZS1zcGVjaWZpYyBjbGFzc2VzXG4gICAgY29uc3QgbW9kYWxFbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcbiAgICBpZiAobW9kYWxFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICBtb2RhbEVsLmFkZENsYXNzKFwiZGVja3MtbW9kYWxcIik7XG4gICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gNzY4KSB7XG4gICAgICAgIG1vZGFsRWwuYWRkQ2xhc3MoXCJkZWNrcy1tb2RhbC1tb2JpbGVcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb2RhbEVsLnJlbW92ZUNsYXNzKFwiZGVja3MtbW9kYWwtbW9iaWxlXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1vZGFsIHRpdGxlXG4gICAgY29udGVudEVsLmFkZENsYXNzKFwiZGVja3MtZGVjay1jb25maWctY29udGFpbmVyXCIpO1xuXG4gICAgLy8gTW91bnQgU3ZlbHRlIGNvbXBvbmVudFxuICAgIHRoaXMuY29tcG9uZW50ID0gbmV3IERlY2tDb25maWdVSSh7XG4gICAgICB0YXJnZXQ6IGNvbnRlbnRFbCxcbiAgICAgIHByb3BzOiB7XG4gICAgICAgIGRlY2s6IHRoaXMuZGVjayxcbiAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBMaXN0ZW4gdG8gY29tcG9uZW50IGV2ZW50c1xuICAgIHRoaXMuY29tcG9uZW50LiRvbihcInNhdmVcIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZVNhdmUoZXZlbnQuZGV0YWlsKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29tcG9uZW50LiRvbihcImNhbmNlbFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbXBvbmVudC4kb24oXCJjb25maWdDaGFuZ2VcIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNvbmZpZyA9IGV2ZW50LmRldGFpbDtcbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSB3aW5kb3cgcmVzaXplIGZvciBtb2JpbGUgYWRhcHRhdGlvblxuICAgIGNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG1vZGFsRWwgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XG4gICAgICBpZiAobW9kYWxFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHtcbiAgICAgICAgICBtb2RhbEVsLmFkZENsYXNzKFwiZGVja3MtbW9kYWwtbW9iaWxlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1vZGFsRWwucmVtb3ZlQ2xhc3MoXCJkZWNrcy1tb2RhbC1tb2JpbGVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlUmVzaXplKTtcblxuICAgIC8vIFN0b3JlIHJlc2l6ZSBoYW5kbGVyIGZvciBjbGVhbnVwXG4gICAgdGhpcy5yZXNpemVIYW5kbGVyID0gaGFuZGxlUmVzaXplO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTYXZlKGNvbmZpZzogRGVja0NvbmZpZykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZURlY2tDb25maWcodGhpcy5kZWNrLmlkLCBjb25maWcpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2F2aW5nIGRlY2sgY29uZmlndXJhdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgLy8gQ291bGQgYWRkIGEgbm90aWNlIGhlcmUgaWYgbmVlZGVkXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVEZWNrQ29uZmlnKFxuICAgIGRlY2tJZDogc3RyaW5nLFxuICAgIGNvbmZpZzogUGFydGlhbDxEZWNrQ29uZmlnPixcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVmFsaWRhdGUgcHJvZmlsZSBhbmQgcmVxdWVzdFJldGVudGlvbiBpZiBwcm92aWRlZFxuICAgIGlmIChcbiAgICAgIGNvbmZpZy5mc3JzPy5wcm9maWxlICYmXG4gICAgICAhW1wiSU5URU5TSVZFXCIsIFwiU1RBTkRBUkRcIl0uaW5jbHVkZXMoY29uZmlnLmZzcnMucHJvZmlsZSlcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwcm9maWxlOiAke2NvbmZpZy5mc3JzLnByb2ZpbGV9YCk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5mc3JzPy5yZXF1ZXN0UmV0ZW50aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHJyID0gY29uZmlnLmZzcnMucmVxdWVzdFJldGVudGlvbjtcbiAgICAgIGlmIChyciA8PSAwLjUgfHwgcnIgPj0gMC45OTUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGByZXF1ZXN0UmV0ZW50aW9uIG11c3QgYmUgaW4gcmFuZ2UgKDAuNSwgMC45OTUpLCBnb3QgJHtycn1gLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCBjdXJyZW50IGNvbmZpZyBhbmQgbWVyZ2Ugd2l0aCB1cGRhdGVzXG4gICAgY29uc3QgZGVja3MgPSBhd2FpdCB0aGlzLmRiLmdldEFsbERlY2tzKCk7XG4gICAgY29uc3QgZGVjayA9IGRlY2tzLmZpbmQoKGQpID0+IGQuaWQgPT09IGRlY2tJZCk7XG4gICAgaWYgKCFkZWNrKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERlY2sgbm90IGZvdW5kOiAke2RlY2tJZH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Q29uZmlnID0gZGVjay5jb25maWc7XG5cbiAgICAvLyBDaGVjayBpZiBoZWFkZXIgbGV2ZWwgaXMgY2hhbmdpbmdcbiAgICBjb25zdCBoZWFkZXJMZXZlbENoYW5nZWQgPVxuICAgICAgY29uZmlnLmhlYWRlckxldmVsICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIGNvbmZpZy5oZWFkZXJMZXZlbCAhPT0gY3VycmVudENvbmZpZy5oZWFkZXJMZXZlbDtcblxuICAgIGNvbnN0IHVwZGF0ZWRDb25maWcgPSB7XG4gICAgICAuLi5jdXJyZW50Q29uZmlnLFxuICAgICAgLi4uY29uZmlnLFxuICAgICAgZnNyczoge1xuICAgICAgICAuLi5jdXJyZW50Q29uZmlnLmZzcnMsXG4gICAgICAgIC4uLmNvbmZpZy5mc3JzLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgYXdhaXQgdGhpcy5kYi51cGRhdGVEZWNrKGRlY2tJZCwgeyBjb25maWc6IHVwZGF0ZWRDb25maWcgfSk7XG5cbiAgICAvLyBJZiBoZWFkZXIgbGV2ZWwgY2hhbmdlZCwgZm9yY2UgcmVzeW5jIHRoZSBkZWNrIHRvIGNsZWFuIHVwIG9sZCBmbGFzaGNhcmRzXG4gICAgaWYgKGhlYWRlckxldmVsQ2hhbmdlZCkge1xuICAgICAgY29uc3QgdXBkYXRlZERlY2sgPSBhd2FpdCB0aGlzLmRiLmdldERlY2tCeUlkKGRlY2tJZCk7XG4gICAgICBpZiAodXBkYXRlZERlY2spIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYEhlYWRlciBsZXZlbCBjaGFuZ2VkIGZvciBkZWNrICR7dXBkYXRlZERlY2submFtZX0sIGZvcmNpbmcgcmVzeW5jYCxcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgeWllbGRUb1VJKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVja1N5bmNocm9uaXplci5zeW5jRGVjayh1cGRhdGVkRGVjay5maWxlcGF0aCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVmcmVzaCBzdGF0cyBmb3IgdGhpcyBkZWNrIHNpbmNlIGNvbmZpZyBjaGFuZ2VzIGNhbiBhZmZlY3QgZGlzcGxheWVkIHN0YXRzXG4gICAgYXdhaXQgdGhpcy5vblJlZnJlc2hTdGF0cyhkZWNrSWQpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgIC8vIENsZWFuIHVwIHJlc2l6ZSBoYW5kbGVyXG4gICAgaWYgKHRoaXMucmVzaXplSGFuZGxlcikge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemVIYW5kbGVyKTtcbiAgICAgIHRoaXMucmVzaXplSGFuZGxlciA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBEZXN0cm95IFN2ZWx0ZSBjb21wb25lbnRcbiAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50LiRkZXN0cm95KCk7XG4gICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsICI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICAgIGltcG9ydCB7IGNyZWF0ZUV2ZW50RGlzcGF0Y2hlciwgb25Nb3VudCB9IGZyb20gXCJzdmVsdGVcIjtcbiAgICBpbXBvcnQgeyBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG4gICAgaW1wb3J0IHR5cGUgeyBEZWNrLCBEZWNrQ29uZmlnLCBSZXZpZXdPcmRlciB9IGZyb20gXCIuLi9kYXRhYmFzZS90eXBlc1wiO1xuICAgIGltcG9ydCB0eXBlIHsgRlNSU1Byb2ZpbGUgfSBmcm9tIFwiLi4vYWxnb3JpdGhtL2ZzcnMtd2VpZ2h0c1wiO1xuXG4gICAgZXhwb3J0IGxldCBkZWNrOiBEZWNrO1xuICAgIGV4cG9ydCBsZXQgY29uZmlnOiBEZWNrQ29uZmlnO1xuXG4gICAgY29uc3QgZGlzcGF0Y2ggPSBjcmVhdGVFdmVudERpc3BhdGNoZXI8e1xuICAgICAgICBzYXZlOiBEZWNrQ29uZmlnO1xuICAgICAgICBjYW5jZWw6IHZvaWQ7XG4gICAgICAgIGNvbmZpZ0NoYW5nZTogRGVja0NvbmZpZztcbiAgICB9PigpO1xuXG4gICAgbGV0IG5ld0NhcmRzTGltaXQgPSBjb25maWcubmV3Q2FyZHNQZXJEYXk7XG4gICAgbGV0IHJldmlld0NhcmRzTGltaXQgPSBjb25maWcucmV2aWV3Q2FyZHNQZXJEYXk7XG4gICAgbGV0IGVuYWJsZU5ld0NhcmRzTGltaXQgPSBjb25maWcuaGFzTmV3Q2FyZHNMaW1pdEVuYWJsZWQ7XG4gICAgbGV0IGVuYWJsZVJldmlld0NhcmRzTGltaXQgPSBjb25maWcuaGFzUmV2aWV3Q2FyZHNMaW1pdEVuYWJsZWQ7XG4gICAgbGV0IHJldmlld09yZGVyOiBSZXZpZXdPcmRlciA9IGNvbmZpZy5yZXZpZXdPcmRlcjtcbiAgICBsZXQgaGVhZGVyTGV2ZWwgPSBjb25maWcuaGVhZGVyTGV2ZWw7XG4gICAgbGV0IHJlcXVlc3RSZXRlbnRpb24gPSBjb25maWcuZnNycy5yZXF1ZXN0UmV0ZW50aW9uO1xuICAgIGxldCBwcm9maWxlOiBGU1JTUHJvZmlsZSA9IGNvbmZpZy5mc3JzLnByb2ZpbGU7XG4gICAgbGV0IHNhdmluZyA9IGZhbHNlO1xuICAgIGxldCBuZXdDYXJkc0xpbWl0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBsZXQgZW5hYmxlTmV3Q2FyZHNDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIGxldCByZXZpZXdDYXJkc0xpbWl0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBsZXQgZW5hYmxlUmV2aWV3Q2FyZHNDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIGxldCBlbmFibGVSZXZpZXdDYXJkc0xpbWl0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBsZXQgcmV2aWV3T3JkZXJDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIGxldCBoZWFkZXJMZXZlbENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgbGV0IHJlcXVlc3RSZXRlbnRpb25Db250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIGxldCBwcm9maWxlQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBsZXQgZnNyc1Jlc2V0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcblxuICAgIC8vIFRyYWNrIGxhc3QgZXZlbnQgdG8gcHJldmVudCBkb3VibGUgZXhlY3V0aW9uXG4gICAgbGV0IGxhc3RFdmVudFRpbWUgPSAwO1xuICAgIGxldCBsYXN0RXZlbnRUeXBlID0gXCJcIjtcblxuICAgIC8vIFJlYWN0aXZlIHN0YXRlbWVudCB0byB1cGRhdGUgY29uZmlnIHdoZW4gdmFsdWVzIGNoYW5nZVxuICAgICQ6IHtcbiAgICAgICAgY29uc3QgbmV3Q29uZmlnID0ge1xuICAgICAgICAgICAgaGFzTmV3Q2FyZHNMaW1pdEVuYWJsZWQ6IGVuYWJsZU5ld0NhcmRzTGltaXQsXG4gICAgICAgICAgICBuZXdDYXJkc1BlckRheTogTnVtYmVyKG5ld0NhcmRzTGltaXQpIHx8IDIwLFxuICAgICAgICAgICAgaGFzUmV2aWV3Q2FyZHNMaW1pdEVuYWJsZWQ6IGVuYWJsZVJldmlld0NhcmRzTGltaXQsXG4gICAgICAgICAgICByZXZpZXdDYXJkc1BlckRheTogTnVtYmVyKHJldmlld0NhcmRzTGltaXQpIHx8IDEwMCxcbiAgICAgICAgICAgIHJldmlld09yZGVyLFxuICAgICAgICAgICAgaGVhZGVyTGV2ZWw6IE51bWJlcihoZWFkZXJMZXZlbCkgfHwgMixcbiAgICAgICAgICAgIGZzcnM6IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0UmV0ZW50aW9uOiBOdW1iZXIocmVxdWVzdFJldGVudGlvbikgfHwgMC45LFxuICAgICAgICAgICAgICAgIHByb2ZpbGU6IHByb2ZpbGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBkaXNwYXRjaChcImNvbmZpZ0NoYW5nZVwiLCBuZXdDb25maWcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZVNhdmUoKSB7XG4gICAgICAgIHNhdmluZyA9IHRydWU7XG4gICAgICAgIGNvbnN0IGZpbmFsQ29uZmlnOiBEZWNrQ29uZmlnID0ge1xuICAgICAgICAgICAgaGFzTmV3Q2FyZHNMaW1pdEVuYWJsZWQ6IGVuYWJsZU5ld0NhcmRzTGltaXQsXG4gICAgICAgICAgICBuZXdDYXJkc1BlckRheTogTnVtYmVyKG5ld0NhcmRzTGltaXQpIHx8IDIwLFxuICAgICAgICAgICAgaGFzUmV2aWV3Q2FyZHNMaW1pdEVuYWJsZWQ6IGVuYWJsZVJldmlld0NhcmRzTGltaXQsXG4gICAgICAgICAgICByZXZpZXdDYXJkc1BlckRheTogTnVtYmVyKHJldmlld0NhcmRzTGltaXQpIHx8IDEwMCxcbiAgICAgICAgICAgIHJldmlld09yZGVyLFxuICAgICAgICAgICAgaGVhZGVyTGV2ZWw6IE51bWJlcihoZWFkZXJMZXZlbCkgfHwgMixcbiAgICAgICAgICAgIGZzcnM6IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0UmV0ZW50aW9uOiBOdW1iZXIocmVxdWVzdFJldGVudGlvbikgfHwgMC45LFxuICAgICAgICAgICAgICAgIHByb2ZpbGU6IHByb2ZpbGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBkaXNwYXRjaChcInNhdmVcIiwgZmluYWxDb25maWcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZVRvdWNoQ2xpY2soY2FsbGJhY2s6ICgpID0+IHZvaWQsIGV2ZW50OiBFdmVudCkge1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSBldmVudC50eXBlO1xuXG4gICAgICAgIC8vIFByZXZlbnQgZG91YmxlIGV4ZWN1dGlvbiB3aXRoaW4gMTAwbXNcbiAgICAgICAgaWYgKG5vdyAtIGxhc3RFdmVudFRpbWUgPCAxMDAgJiYgbGFzdEV2ZW50VHlwZSAhPT0gZXZlbnRUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0RXZlbnRUaW1lID0gbm93O1xuICAgICAgICBsYXN0RXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuXG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlQ2FuY2VsKCkge1xuICAgICAgICBkaXNwYXRjaChcImNhbmNlbFwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVLZXlkb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIiAmJiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSkge1xuICAgICAgICAgICAgaGFuZGxlU2F2ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Nb3VudCgoKSA9PiB7XG4gICAgICAgIC8vIEVuYWJsZSBOZXcgQ2FyZHMgTGltaXQgVG9nZ2xlXG4gICAgICAgIGlmIChlbmFibGVOZXdDYXJkc0NvbnRhaW5lcikge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoZW5hYmxlTmV3Q2FyZHNDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJFbmFibGUgTmV3IENhcmRzIExpbWl0XCIpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgICAgIFwiTGltaXQgaG93IG1hbnkgbmV3IGNhcmRzIChuZXZlciBzZWVuIGJlZm9yZSkgY2FuIGJlIHNob3duIHBlciBkYXlcIixcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUoZW5hYmxlTmV3Q2FyZHNMaW1pdCkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVOZXdDYXJkc0xpbWl0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBOZXcgQ2FyZHMgTGltaXQgSW5wdXRcbiAgICAgICAgaWYgKG5ld0NhcmRzTGltaXRDb250YWluZXIpIHtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKG5ld0NhcmRzTGltaXRDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJOZXcgQ2FyZHMgcGVyIERheVwiKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiTWF4aW11bSBudW1iZXIgb2YgbmV3IGNhcmRzIHRvIGludHJvZHVjZSBwZXIgZGF5XCIpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjIwXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobmV3Q2FyZHNMaW1pdC50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkgJiYgbnVtID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q2FyZHNMaW1pdCA9IG51bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW5hYmxlIFJldmlldyBDYXJkcyBMaW1pdCBUb2dnbGVcbiAgICAgICAgaWYgKGVuYWJsZVJldmlld0NhcmRzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhlbmFibGVSZXZpZXdDYXJkc0NvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkVuYWJsZSBSZXZpZXcgQ2FyZHMgTGltaXRcIilcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgICAgICAgICAgXCJMaW1pdCBob3cgbWFueSByZXZpZXcgY2FyZHMgKGR1ZSBmb3IgcmVwZXRpdGlvbikgY2FuIGJlIHNob3duIHBlciBkYXlcIixcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShlbmFibGVSZXZpZXdDYXJkc0xpbWl0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZVJldmlld0NhcmRzTGltaXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXZpZXcgQ2FyZHMgTGltaXQgSW5wdXRcbiAgICAgICAgaWYgKHJldmlld0NhcmRzTGltaXRDb250YWluZXIpIHtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJldmlld0NhcmRzTGltaXRDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJSZXZpZXcgQ2FyZHMgcGVyIERheVwiKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiTWF4aW11bSBudW1iZXIgb2YgcmV2aWV3IGNhcmRzIHRvIHNob3cgcGVyIGRheVwiKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCIxMDBcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShyZXZpZXdDYXJkc0xpbWl0LnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdDYXJkc0xpbWl0ID0gbnVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXZpZXcgT3JkZXIgRHJvcGRvd25cbiAgICAgICAgaWYgKHJldmlld09yZGVyQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhyZXZpZXdPcmRlckNvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlJldmlldyBPcmRlclwiKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgICAgICBcIk9yZGVyIGluIHdoaWNoIHJldmlldyBjYXJkcyBhcmUgcHJlc2VudGVkIGR1cmluZyBzdHVkeVwiLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImR1ZS1kYXRlXCIsIFwiT2xkZXN0IGR1ZSBmaXJzdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInJhbmRvbVwiLCBcIlJhbmRvbSBvcmRlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHJldmlld09yZGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZTogUmV2aWV3T3JkZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdPcmRlciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhlYWRlciBMZXZlbCBEcm9wZG93blxuICAgICAgICBpZiAoaGVhZGVyTGV2ZWxDb250YWluZXIpIHtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGhlYWRlckxldmVsQ29udGFpbmVyKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiSGVhZGVyIExldmVsIGZvciBGbGFzaGNhcmRzXCIpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgICAgIFwiV2hpY2ggaGVhZGVyIGxldmVsIHRvIHVzZSBmb3IgaGVhZGVyLXBhcmFncmFwaCBmbGFzaGNhcmRzXCIsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiMVwiLCBcIkgxICgjKVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIjJcIiwgXCJIMiAoIyMpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiM1wiLCBcIkgzICgjIyMpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiNFwiLCBcIkg0ICgjIyMjKVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIjVcIiwgXCJINSAoIyMjIyMpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiNlwiLCBcIkg2ICgjIyMjIyMpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoaGVhZGVyTGV2ZWwudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJMZXZlbCA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGU1JTIFNldHRpbmdzXG4gICAgICAgIGlmIChyZXF1ZXN0UmV0ZW50aW9uQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhyZXF1ZXN0UmV0ZW50aW9uQ29udGFpbmVyKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiUmVxdWVzdCBSZXRlbnRpb25cIilcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIlRhcmdldCByZWNhbGwgcmF0ZSBmb3IgcmV2aWV3cyAoMC41LTAuOTk1KVwiKVxuICAgICAgICAgICAgICAgIC5hZGRTbGlkZXIoKHNsaWRlcikgPT5cbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAuNSwgMC45OTUsIDAuMDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUocmVxdWVzdFJldGVudGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFJldGVudGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9maWxlQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhwcm9maWxlQ29udGFpbmVyKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiRlNSUyBQcm9maWxlXCIpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgICAgIFwiSU5URU5TSVZFOiBTdWItZGF5IGludGVydmFscyAoMW0vNW0vMTBtLzFkKS4gU1RBTkRBUkQ6IERheS1iYXNlZCBpbnRlcnZhbHMgKOKJpTEgZGF5IG1pbmltdW0pXCIsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiSU5URU5TSVZFXCIsIFwiSW50ZW5zaXZlIChTdWItZGF5KVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIlNUQU5EQVJEXCIsIFwiU3RhbmRhcmQgKERheS1iYXNlZClcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShwcm9maWxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBcIklOVEVOU0lWRVwiIHx8IHZhbHVlID09PSBcIlNUQU5EQVJEXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnNyc1Jlc2V0Q29udGFpbmVyKSB7XG4gICAgICAgICAgICBuZXcgU2V0dGluZyhmc3JzUmVzZXRDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJSZXNldCBGU1JTIFNldHRpbmdzXCIpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJSZXNldCBhbGwgRlNSUyBwYXJhbWV0ZXJzIHRvIGRlZmF1bHQgdmFsdWVzXCIpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJSZXNldCB0byBEZWZhdWx0c1wiKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoXCJSZXNldCB0byBEZWZhdWx0c1wiKS5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RSZXRlbnRpb24gPSAwLjk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlID0gXCJTVEFOREFSRFwiO1xuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSk7XG48L3NjcmlwdD5cblxuPHN2ZWx0ZTp3aW5kb3cgb246a2V5ZG93bj17aGFuZGxlS2V5ZG93bn0gLz5cblxuPGRpdiBjbGFzcz1cImRlY2tzLWRlY2stY29uZmlnLXVpXCI+XG4gICAgPGgyIGNsYXNzPVwiXCI+Q29uZmlndXJlIERlY2s6IHtkZWNrLm5hbWV9PC9oMj5cbiAgICA8IS0tIERlY2sgSW5mb3JtYXRpb24gU2VjdGlvbiAtLT5cbiAgICA8ZGl2IGNsYXNzPVwiZGVja3MtZGVjay1pbmZvLXNlY3Rpb25cIj5cbiAgICAgICAgPGgzPkRlY2sgSW5mb3JtYXRpb248L2gzPlxuICAgICAgICA8dWwgY2xhc3M9XCJkZWNrcy1kZWNrLWluZm8tbGlzdFwiPlxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+TmFtZTo8L3N0cm9uZz4ge2RlY2submFtZX08L2xpPlxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+VGFnOjwvc3Ryb25nPiB7ZGVjay50YWd9PC9saT5cbiAgICAgICAgICAgIDxsaT48c3Ryb25nPkZpbGU6PC9zdHJvbmc+IHtkZWNrLmZpbGVwYXRofTwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgPC9kaXY+XG5cbiAgICA8IS0tIFNldHRpbmdzIFNlY3Rpb24gLS0+XG4gICAgPGRpdiBjbGFzcz1cImRlY2tzLWRlY2stc2V0dGluZ3Mtc2VjdGlvblwiPlxuICAgICAgICA8aDM+RGFpbHkgQ2FyZCBMaW1pdHM8L2gzPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uLWdsb2JhbFwiPlxuICAgICAgICAgICAgTmV3IGNhcmRzIGFyZSBzdWJqZWN0IHRvIGRhaWx5IGxpbWl0cyB3aGVuIGVuYWJsZWQuXG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDwhLS0gT2JzaWRpYW4gTmF0aXZlIENvbXBvbmVudHMgLS0+XG4gICAgICAgIDxkaXYgYmluZDp0aGlzPXtlbmFibGVOZXdDYXJkc0NvbnRhaW5lcn0+PC9kaXY+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICAgIGJpbmQ6dGhpcz17bmV3Q2FyZHNMaW1pdENvbnRhaW5lcn1cbiAgICAgICAgICAgIGNsYXNzOmRpc2FibGVkPXshZW5hYmxlTmV3Q2FyZHNMaW1pdH1cbiAgICAgICAgPjwvZGl2PlxuICAgICAgICA8ZGl2IGJpbmQ6dGhpcz17ZW5hYmxlUmV2aWV3Q2FyZHNDb250YWluZXJ9PjwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBiaW5kOnRoaXM9e3Jldmlld0NhcmRzTGltaXRDb250YWluZXJ9XG4gICAgICAgICAgICBjbGFzczpkaXNhYmxlZD17IWVuYWJsZVJldmlld0NhcmRzTGltaXR9XG4gICAgICAgID48L2Rpdj5cbiAgICAgICAgPGRpdiBiaW5kOnRoaXM9e3Jldmlld09yZGVyQ29udGFpbmVyfT48L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDwhLS0gUGFyc2luZyBTZXR0aW5ncyAtLT5cbiAgICA8ZGl2IGNsYXNzPVwiZGVja3MtZGVjay1zZXR0aW5ncy1zZWN0aW9uXCI+XG4gICAgICAgIDxoMz5QYXJzaW5nIFNldHRpbmdzPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXNldHRpbmctaXRlbS1kZXNjcmlwdGlvbi1nbG9iYWxcIj5cbiAgICAgICAgICAgIENvbmZpZ3VyZSBob3cgZmxhc2hjYXJkcyBhcmUgcGFyc2VkIGZyb20geW91ciBub3RlcyBmb3IgdGhpcyBkZWNrLlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGJpbmQ6dGhpcz17aGVhZGVyTGV2ZWxDb250YWluZXJ9PjwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPCEtLSBGU1JTIEFsZ29yaXRobSBTZXR0aW5ncyAtLT5cbiAgICA8ZGl2IGNsYXNzPVwiZGVja3MtZGVjay1zZXR0aW5ncy1zZWN0aW9uXCI+XG4gICAgICAgIDxoMz5GU1JTIEFsZ29yaXRobSBTZXR0aW5nczwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24tZ2xvYmFsXCI+XG4gICAgICAgICAgICBUaGVzZSBzZXR0aW5ncyBjb250cm9sIHRoZSBzcGFjZWQgcmVwZXRpdGlvbiBhbGdvcml0aG0gZm9yIHRoaXNcbiAgICAgICAgICAgIGRlY2suXG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgYmluZDp0aGlzPXtyZXF1ZXN0UmV0ZW50aW9uQ29udGFpbmVyfT48L2Rpdj5cbiAgICAgICAgPGRpdiBiaW5kOnRoaXM9e3Byb2ZpbGVDb250YWluZXJ9PjwvZGl2PlxuICAgICAgICA8ZGl2IGJpbmQ6dGhpcz17ZnNyc1Jlc2V0Q29udGFpbmVyfT48L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDwhLS0gQWN0aW9uIEJ1dHRvbnMgLS0+XG4gICAgPGRpdiBjbGFzcz1cImRlY2tzLW1vZGFsLWZvb3RlclwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzcz1cIm1vZC1jdGFcIlxuICAgICAgICAgICAgb246Y2xpY2s9eyhlKSA9PiBoYW5kbGVUb3VjaENsaWNrKGhhbmRsZVNhdmUsIGUpfVxuICAgICAgICAgICAgb246dG91Y2hlbmQ9eyhlKSA9PiBoYW5kbGVUb3VjaENsaWNrKGhhbmRsZVNhdmUsIGUpfVxuICAgICAgICAgICAgZGlzYWJsZWQ9e3NhdmluZ31cbiAgICAgICAgPlxuICAgICAgICAgICAge3NhdmluZyA/IFwiU2F2aW5nLi4uXCIgOiBcIlNhdmVcIn1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uOmNsaWNrPXsoZSkgPT4gaGFuZGxlVG91Y2hDbGljayhoYW5kbGVDYW5jZWwsIGUpfVxuICAgICAgICAgICAgb246dG91Y2hlbmQ9eyhlKSA9PiBoYW5kbGVUb3VjaENsaWNrKGhhbmRsZUNhbmNlbCwgZSl9XG4gICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nfT5DYW5jZWw8L2J1dHRvblxuICAgICAgICA+XG4gICAgPC9kaXY+XG48L2Rpdj5cblxuPHN0eWxlPlxuICAgIC5kZWNrcy1kZWNrLWNvbmZpZy11aSB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRlY2staW5mby1zZWN0aW9uIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjRweDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICB9XG5cbiAgICAuZGVja3MtZGVjay1pbmZvLXNlY3Rpb24gaDMge1xuICAgICAgICBtYXJnaW46IDAgMCAxMnB4IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRlY2staW5mby1saXN0IHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIH1cblxuICAgIC5kZWNrcy1kZWNrLWluZm8tbGlzdCBsaSB7XG4gICAgICAgIG1hcmdpbjogMCAwIDhweCAwO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRlY2staW5mby1saXN0IGxpOmxhc3QtY2hpbGQge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgIH1cblxuICAgIC5kZWNrcy1kZWNrLWluZm8tbGlzdCBzdHJvbmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIH1cblxuICAgIC5kZWNrcy1kZWNrLXNldHRpbmdzLXNlY3Rpb24ge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyNHB4O1xuICAgIH1cblxuICAgIC5kZWNrcy1kZWNrLXNldHRpbmdzLXNlY3Rpb24gaDMge1xuICAgICAgICBtYXJnaW46IDAgMCAxNnB4IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgfVxuXG4gICAgLmRlY2tzLXNldHRpbmctaXRlbS1kZXNjcmlwdGlvbi1nbG9iYWwge1xuICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgfVxuXG4gICAgLyogRGlzYWJsZWQgc3RhdGUgZm9yIE9ic2lkaWFuIFNldHRpbmcgY29udGFpbmVycyAqL1xuICAgIC5kaXNhYmxlZCB7XG4gICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgfVxuXG4gICAgLmRlY2tzLW1vZGFsLWZvb3RlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIGdhcDogMTJweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMjRweDtcbiAgICAgICAgcGFkZGluZy10b3A6IDE2cHg7XG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgfVxuXG4gICAgLmRlY2tzLW1vZGFsLWZvb3RlciBidXR0b24ge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICAgICAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XG4gICAgICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTtcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDQ0cHg7XG4gICAgICAgIG1pbi13aWR0aDogODBweDtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9kYWwtZm9vdGVyIGJ1dHRvbjpob3Zlcjpub3QoOmRpc2FibGVkKSxcbiAgICAuZGVja3MtbW9kYWwtZm9vdGVyIGJ1dHRvbjphY3RpdmU6bm90KDpkaXNhYmxlZCkge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9kYWwtZm9vdGVyIGJ1dHRvbjpkaXNhYmxlZCB7XG4gICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9kYWwtZm9vdGVyIGJ1dHRvbi5tb2QtY3RhIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIH1cblxuICAgIC5kZWNrcy1tb2RhbC1mb290ZXIgYnV0dG9uLm1vZC1jdGE6aG92ZXI6bm90KDpkaXNhYmxlZCksXG4gICAgLmRlY2tzLW1vZGFsLWZvb3RlciBidXR0b24ubW9kLWN0YTphY3RpdmU6bm90KDpkaXNhYmxlZCkge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgfVxuXG4gICAgLmRlY2tzLW1vZGFsLWZvb3RlciBidXR0b246Zm9jdXMge1xuICAgICAgICBvdXRsaW5lOiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgICB9XG5cbiAgICAvKiBNb2JpbGUgcmVzcG9uc2l2ZSBzdHlsZXMgKi9cbiAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAgICAgLmRlY2tzLWRlY2staW5mby1zZWN0aW9uIHtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWRlY2staW5mby1zZWN0aW9uIGgzIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWRlY2stc2V0dGluZ3Mtc2VjdGlvbiBoMyB7XG4gICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1tb2RhbC1mb290ZXIge1xuICAgICAgICAgICAgcGFkZGluZy10b3A6IDIwcHg7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7XG4gICAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1tb2RhbC1mb290ZXIgYnV0dG9uIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogNDRweDsgLyogVG91Y2gtZnJpZW5kbHkgKi9cbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xuICAgICAgICAuZGVja3MtZGVjay1pbmZvLXNlY3Rpb24ge1xuICAgICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kZWNrLWluZm8tbGlzdCBsaSB7XG4gICAgICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1zZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24tZ2xvYmFsIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NWVtO1xuICAgICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1tb2RhbC1mb290ZXIgYnV0dG9uIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDE0cHggMjBweDtcbiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDUycHg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAbWVkaWEgKG1heC13aWR0aDogMzkwcHgpIHtcbiAgICAgICAgLyogaVBob25lIDEyIFBybyBhbmQgc2ltaWxhciAzOTBweCB3aWR0aCBwaG9uZXMgKi9cbiAgICAgICAgLmRlY2tzLWRlY2stY29uZmlnLXVpIHtcbiAgICAgICAgICAgIG1heC13aWR0aDogMzkwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGVjay1pbmZvLXNlY3Rpb24ge1xuICAgICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kZWNrLWluZm8tc2VjdGlvbiBoMyB7XG4gICAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWRlY2staW5mby1saXN0IGxpIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGVjay1zZXR0aW5ncy1zZWN0aW9uIGgzIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3Mtc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uLWdsb2JhbCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDAuN2VtO1xuICAgICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLW1vZGFsLWZvb3RlciB7XG4gICAgICAgICAgICBwYWRkaW5nLXRvcDogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1tb2RhbC1mb290ZXIgYnV0dG9uIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEycHggMTZweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgIH1cbjwvc3R5bGU+XG4iLCAiaW1wb3J0IHsgTW9kYWwsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBEZWNrLCBBbmtpRXhwb3J0Q29uZmlnIH0gZnJvbSBcIi4uL2RhdGFiYXNlL3R5cGVzXCI7XG5pbXBvcnQgdHlwZSB7IERhdGFiYXNlU2VydmljZSB9IGZyb20gXCIuLi9kYXRhYmFzZS9EYXRhYmFzZVNlcnZpY2VcIjtcbmltcG9ydCBBbmtpRXhwb3J0VUkgZnJvbSBcIi4vQW5raUV4cG9ydFVJLnN2ZWx0ZVwiO1xuXG5leHBvcnQgY2xhc3MgQW5raUV4cG9ydE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIGRlY2s6IERlY2s7XG4gIHByaXZhdGUgZGI6IERhdGFiYXNlU2VydmljZTtcbiAgcHJpdmF0ZSBjb21wb25lbnQ6IEFua2lFeHBvcnRVSSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlc2l6ZUhhbmRsZXI/OiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogYW55LCBkZWNrOiBEZWNrLCBkYjogRGF0YWJhc2VTZXJ2aWNlKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLmRlY2sgPSBkZWNrO1xuICAgIHRoaXMuZGIgPSBkYjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgIC8vIEFkZCBtb2JpbGUtc3BlY2lmaWMgY2xhc3Nlc1xuICAgIGNvbnN0IG1vZGFsRWwgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XG4gICAgaWYgKG1vZGFsRWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiB3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHtcbiAgICAgIG1vZGFsRWwuYWRkQ2xhc3MoXCJkZWNrcy1tb2RhbFwiKTtcbiAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHtcbiAgICAgICAgbW9kYWxFbC5hZGRDbGFzcyhcImRlY2tzLW1vZGFsLW1vYmlsZVwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vZGFsRWwucmVtb3ZlQ2xhc3MoXCJkZWNrcy1tb2RhbC1tb2JpbGVcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIENTUyBjbGFzcyBmb3Igc3R5bGluZ1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcyhcImRlY2tzLWFua2ktZXhwb3J0LWNvbnRhaW5lclwiKTtcblxuICAgIC8vIE1vdW50IFN2ZWx0ZSBjb21wb25lbnRcbiAgICB0aGlzLmNvbXBvbmVudCA9IG5ldyBBbmtpRXhwb3J0VUkoe1xuICAgICAgdGFyZ2V0OiBjb250ZW50RWwsXG4gICAgICBwcm9wczoge1xuICAgICAgICBkZWNrOiB0aGlzLmRlY2ssXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gTGlzdGVuIHRvIGNvbXBvbmVudCBldmVudHNcbiAgICB0aGlzLmNvbXBvbmVudC4kb24oXCJleHBvcnRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZUV4cG9ydChldmVudC5kZXRhaWwpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb21wb25lbnQuJG9uKFwiY2FuY2VsXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSB3aW5kb3cgcmVzaXplIGZvciBtb2JpbGUgYWRhcHRhdGlvblxuICAgIGNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG1vZGFsRWwgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XG4gICAgICBpZiAobW9kYWxFbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHtcbiAgICAgICAgICBtb2RhbEVsLmFkZENsYXNzKFwiZGVja3MtbW9kYWwtbW9iaWxlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1vZGFsRWwucmVtb3ZlQ2xhc3MoXCJkZWNrcy1tb2RhbC1tb2JpbGVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlUmVzaXplKTtcblxuICAgIC8vIFN0b3JlIHJlc2l6ZSBoYW5kbGVyIGZvciBjbGVhbnVwXG4gICAgdGhpcy5yZXNpemVIYW5kbGVyID0gaGFuZGxlUmVzaXplO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVFeHBvcnQoY29uZmlnOiBBbmtpRXhwb3J0Q29uZmlnKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBmbGFzaGNhcmRzIGZvciB0aGlzIGRlY2tcbiAgICAgIGNvbnN0IGZsYXNoY2FyZHMgPSBhd2FpdCB0aGlzLmRiLmdldEZsYXNoY2FyZHNCeURlY2sodGhpcy5kZWNrLmlkKTtcblxuICAgICAgaWYgKGZsYXNoY2FyZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJObyBmbGFzaGNhcmRzIGZvdW5kIGluIHRoaXMgZGVjayB0byBleHBvcnRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gR2VuZXJhdGUgQW5raSBwYWNrYWdlIGZvcm1hdFxuICAgICAgY29uc3QgYW5raURhdGEgPSB0aGlzLmdlbmVyYXRlQW5raURhdGEoZmxhc2hjYXJkcywgY29uZmlnKTtcblxuICAgICAgLy8gQ3JlYXRlIGFuZCBkb3dubG9hZCBmaWxlXG4gICAgICBhd2FpdCB0aGlzLmRvd25sb2FkQW5raUZpbGUoYW5raURhdGEsIGNvbmZpZy5hbmtpRGVja05hbWUpO1xuXG4gICAgICBuZXcgTm90aWNlKFxuICAgICAgICBgU3VjY2Vzc2Z1bGx5IGV4cG9ydGVkICR7Zmxhc2hjYXJkcy5sZW5ndGh9IGZsYXNoY2FyZHMgdG8gQW5raSBmb3JtYXRgLFxuICAgICAgKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGV4cG9ydGluZyB0byBBbmtpOlwiLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGV4cG9ydCBkZWNrIHRvIEFua2kgZm9ybWF0XCIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVBbmtpRGF0YShcbiAgICBmbGFzaGNhcmRzOiBhbnlbXSxcbiAgICBjb25maWc6IEFua2lFeHBvcnRDb25maWcsXG4gICk6IHN0cmluZyB7XG4gICAgLy8gQ3JlYXRlIEFua2ktY29tcGF0aWJsZSBmb3JtYXQgd2l0aCBjb25maWd1cmFibGUgc2VwYXJhdG9yc1xuICAgIGNvbnN0IGhlYWRlcnMgPSBbXCJGcm9udFwiLCBcIkJhY2tcIl07XG4gICAgY29uc3Qgcm93cyA9IFtoZWFkZXJzLmpvaW4oY29uZmlnLnNlcGFyYXRvcildO1xuXG4gICAgZmxhc2hjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICBjb25zdCBmcm9udCA9IHRoaXMuc2FuaXRpemVGb3JBbmtpKGNhcmQuZnJvbnQsIGNvbmZpZy5zZXBhcmF0b3IpO1xuICAgICAgY29uc3QgYmFjayA9IHRoaXMuc2FuaXRpemVGb3JBbmtpKGNhcmQuYmFjaywgY29uZmlnLnNlcGFyYXRvcik7XG5cbiAgICAgIHJvd3MucHVzaChbZnJvbnQsIGJhY2tdLmpvaW4oY29uZmlnLnNlcGFyYXRvcikpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJvd3Muam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIHByaXZhdGUgc2FuaXRpemVGb3JBbmtpKHRleHQ6IHN0cmluZywgc2VwYXJhdG9yOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFJlbW92ZSBtYXJrZG93biBmb3JtYXR0aW5nIGFuZCBlc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzXG4gICAgbGV0IHNhbml0aXplZCA9IHRleHRcbiAgICAgIC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCBcIjxiPiQxPC9iPlwiKSAvLyBCb2xkXG4gICAgICAucmVwbGFjZSgvXFwqKC4qPylcXCovZywgXCI8aT4kMTwvaT5cIikgLy8gSXRhbGljXG4gICAgICAucmVwbGFjZSgvYCguKj8pYC9nLCBcIjxjb2RlPiQxPC9jb2RlPlwiKSAvLyBDb2RlXG4gICAgICAucmVwbGFjZSgvXFxuL2csIFwiPGJyPlwiKSAvLyBSZXBsYWNlIG5ld2xpbmVzIHdpdGggSFRNTCBicmVha3NcbiAgICAgIC50cmltKCk7XG5cbiAgICAvLyBFc2NhcGUgdGhlIGZpZWxkIHNlcGFyYXRvclxuICAgIGlmIChzZXBhcmF0b3IgPT09IFwiXFx0XCIpIHtcbiAgICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHQvZywgXCIgXCIpOyAvLyBSZXBsYWNlIHRhYnMgd2l0aCBzcGFjZXNcbiAgICB9IGVsc2Uge1xuICAgICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnJlcGxhY2UoXG4gICAgICAgIG5ldyBSZWdFeHAoYFxcXFwke3NlcGFyYXRvcn1gLCBcImdcIiksXG4gICAgICAgIGBcXFxcJHtzZXBhcmF0b3J9YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNhbml0aXplZDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZG93bmxvYWRBbmtpRmlsZShkYXRhOiBzdHJpbmcsIGRlY2tOYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBmaWxlTmFtZSA9IGAke2RlY2tOYW1lLnJlcGxhY2UoL1teYS16QS1aMC05LV9dL2csIFwiX1wiKX1fZXhwb3J0LnR4dGA7XG5cbiAgICAvLyBDcmVhdGUgYmxvYiBhbmQgZG93bmxvYWRcbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7IHR5cGU6IFwidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04XCIgfSk7XG4gICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBsaW5rLmhyZWYgPSB1cmw7XG4gICAgbGluay5kb3dubG9hZCA9IGZpbGVOYW1lO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgbGluay5jbGljaygpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7XG5cbiAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgLy8gQ2xlYW4gdXAgcmVzaXplIGhhbmRsZXJcbiAgICBpZiAodGhpcy5yZXNpemVIYW5kbGVyKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLnJlc2l6ZUhhbmRsZXIpO1xuICAgICAgdGhpcy5yZXNpemVIYW5kbGVyID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIERlc3Ryb3kgU3ZlbHRlIGNvbXBvbmVudFxuICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xuICAgICAgdGhpcy5jb21wb25lbnQuJGRlc3Ryb3koKTtcbiAgICAgIHRoaXMuY29tcG9uZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwgIjxzY3JpcHQgbGFuZz1cInRzXCI+XG4gICAgaW1wb3J0IHsgY3JlYXRlRXZlbnREaXNwYXRjaGVyLCBvbk1vdW50IH0gZnJvbSBcInN2ZWx0ZVwiO1xuICAgIGltcG9ydCB7IFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbiAgICBpbXBvcnQgdHlwZSB7IERlY2ssIEFua2lFeHBvcnRDb25maWcgfSBmcm9tIFwiLi4vZGF0YWJhc2UvdHlwZXNcIjtcbiAgICBpbXBvcnQgdHlwZSBEZWNrc1BsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuXG4gICAgZXhwb3J0IGxldCBkZWNrOiBEZWNrO1xuXG4gICAgY29uc3QgZGlzcGF0Y2ggPSBjcmVhdGVFdmVudERpc3BhdGNoZXI8e1xuICAgICAgICBleHBvcnQ6IEFua2lFeHBvcnRDb25maWc7XG4gICAgICAgIGNhbmNlbDogdm9pZDtcbiAgICB9PigpO1xuXG4gICAgbGV0IGFua2lEZWNrTmFtZSA9IGRlY2submFtZTtcbiAgICBsZXQgc2VwYXJhdG9yID0gXCJ0YWJcIjtcbiAgICBsZXQgZXhwb3J0aW5nID0gZmFsc2U7XG5cbiAgICAvLyBDb250YWluZXIgcmVmZXJlbmNlcyBmb3IgT2JzaWRpYW4gU2V0dGluZ3NcbiAgICBsZXQgZGVja05hbWVDb250YWluZXI6IEhUTUxFbGVtZW50O1xuXG4gICAgLy8gVHJhY2sgbGFzdCBldmVudCB0byBwcmV2ZW50IGRvdWJsZSBleGVjdXRpb25cbiAgICBsZXQgbGFzdEV2ZW50VGltZSA9IDA7XG4gICAgbGV0IGxhc3RFdmVudFR5cGUgPSBcIlwiO1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlRXhwb3J0KCkge1xuICAgICAgICBleHBvcnRpbmcgPSB0cnVlO1xuXG4gICAgICAgIC8vIE1hcCBzZXBhcmF0b3Igc2VsZWN0aW9uIHRvIGFjdHVhbCBjaGFyYWN0ZXJcbiAgICAgICAgY29uc3Qgc2VwYXJhdG9yTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgICAgICAgdGFiOiBcIlxcdFwiLFxuICAgICAgICAgICAgc2VtaWNvbG9uOiBcIjtcIixcbiAgICAgICAgICAgIGNvbG9uOiBcIjpcIixcbiAgICAgICAgICAgIHBpcGU6IFwifFwiLFxuICAgICAgICAgICAgY29tbWE6IFwiLFwiLFxuICAgICAgICAgICAgc3BhY2U6IFwiIFwiLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNvbmZpZzogQW5raUV4cG9ydENvbmZpZyA9IHtcbiAgICAgICAgICAgIGFua2lEZWNrTmFtZTogYW5raURlY2tOYW1lLnRyaW0oKSB8fCBkZWNrLm5hbWUsXG4gICAgICAgICAgICBzZXBhcmF0b3I6IHNlcGFyYXRvck1hcFtzZXBhcmF0b3JdIHx8IFwiXFx0XCIsXG4gICAgICAgIH07XG5cbiAgICAgICAgZGlzcGF0Y2goXCJleHBvcnRcIiwgY29uZmlnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVUb3VjaENsaWNrKGNhbGxiYWNrOiAoKSA9PiB2b2lkLCBldmVudDogRXZlbnQpIHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZXZlbnRUeXBlID0gZXZlbnQudHlwZTtcblxuICAgICAgICAvLyBQcmV2ZW50IGRvdWJsZSBleGVjdXRpb24gd2l0aGluIDEwMG1zXG4gICAgICAgIGlmIChub3cgLSBsYXN0RXZlbnRUaW1lIDwgMTAwICYmIGxhc3RFdmVudFR5cGUgIT09IGV2ZW50VHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdEV2ZW50VGltZSA9IG5vdztcbiAgICAgICAgbGFzdEV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcblxuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUNhbmNlbCgpIHtcbiAgICAgICAgZGlzcGF0Y2goXCJjYW5jZWxcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIgJiYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkpIHtcbiAgICAgICAgICAgIGhhbmRsZUV4cG9ydCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Nb3VudChhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIEFua2kgRGVjayBOYW1lXG4gICAgICAgIGlmIChkZWNrTmFtZUNvbnRhaW5lcikge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoZGVja05hbWVDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJBbmtpIERlY2sgTmFtZVwiKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgICAgICBcIk5hbWUgb2YgdGhlIGRlY2sgaW4gQW5raSB3aGVyZSBjYXJkcyB3aWxsIGJlIGltcG9ydGVkXCIsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJFbnRlciBkZWNrIG5hbWUuLi5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShhbmtpRGVja05hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5raURlY2tOYW1lID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSk7XG48L3NjcmlwdD5cblxuPHN2ZWx0ZTp3aW5kb3cgb246a2V5ZG93bj17aGFuZGxlS2V5ZG93bn0gLz5cblxuPGRpdiBjbGFzcz1cImRlY2tzLWFua2ktZXhwb3J0LXVpXCI+XG4gICAgPGgyIGNsYXNzPVwiXCI+RXhwb3J0IHRvIEFua2k6IHtkZWNrLm5hbWV9YDwvaDI+XG4gICAgPCEtLSBEZWNrIEluZm9ybWF0aW9uIFNlY3Rpb24gLS0+XG4gICAgPGRpdiBjbGFzcz1cImRlY2tzLWRlY2staW5mby1zZWN0aW9uXCI+XG4gICAgICAgIDxoMz5FeHBvcnQgSW5mb3JtYXRpb248L2gzPlxuICAgICAgICA8dWwgY2xhc3M9XCJkZWNrcy1kZWNrLWluZm8tbGlzdFwiPlxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+U291cmNlIERlY2s6PC9zdHJvbmc+IHtkZWNrLm5hbWV9PC9saT5cbiAgICAgICAgICAgIDxsaT48c3Ryb25nPlNvdXJjZSBUYWc6PC9zdHJvbmc+IHtkZWNrLnRhZ308L2xpPlxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+U291cmNlIEZpbGU6PC9zdHJvbmc+IHtkZWNrLmZpbGVwYXRofTwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgPC9kaXY+XG5cbiAgICA8IS0tIEV4cG9ydCBJbnN0cnVjdGlvbnMgLS0+XG4gICAgPGRpdiBjbGFzcz1cImRlY2tzLWluc3RydWN0aW9ucy1zZWN0aW9uXCI+XG4gICAgICAgIDxoMz5Ib3cgdG8gSW1wb3J0PC9oMz5cbiAgICAgICAgPG9sIGNsYXNzPVwiZGVja3MtaW5zdHJ1Y3Rpb25zLWxpc3RcIj5cbiAgICAgICAgICAgIDxsaT5UaGlzIHdpbGwgZG93bmxvYWQgYSB0ZXh0IGZpbGUgY29tcGF0aWJsZSB3aXRoIEFua2k8L2xpPlxuICAgICAgICAgICAgPGxpPk9wZW4gQW5raSBhbmQgZ28gdG8gPHN0cm9uZz5GaWxlIOKGkiBJbXBvcnQ8L3N0cm9uZz48L2xpPlxuICAgICAgICAgICAgPGxpPlNlbGVjdCB0aGUgZG93bmxvYWRlZCBmaWxlPC9saT5cbiAgICAgICAgICAgIDxsaT5DaG9vc2UgeW91ciB0YXJnZXQgZGVjayBhbmQgaW1wb3J0IHNldHRpbmdzPC9saT5cbiAgICAgICAgICAgIDxsaT5DbGljayA8c3Ryb25nPkltcG9ydDwvc3Ryb25nPiB0byBhZGQgdGhlIGNhcmRzPC9saT5cbiAgICAgICAgPC9vbD5cbiAgICA8L2Rpdj5cblxuICAgIDwhLS0gRXhwb3J0IFNldHRpbmdzIFNlY3Rpb24gLS0+XG4gICAgPGRpdiBjbGFzcz1cImRlY2tzLWV4cG9ydC1zZXR0aW5ncy1zZWN0aW9uXCI+XG4gICAgICAgIDxoMz5FeHBvcnQgU2V0dGluZ3M8L2gzPlxuXG4gICAgICAgIDwhLS0gT2JzaWRpYW4gTmF0aXZlIENvbXBvbmVudHMgLS0+XG4gICAgICAgIDxkaXYgYmluZDp0aGlzPXtkZWNrTmFtZUNvbnRhaW5lcn0+PC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8IS0tIEFjdGlvbiBCdXR0b25zIC0tPlxuICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1tb2RhbC1mb290ZXJcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3M9XCJtb2QtY3RhXCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXsoZSkgPT4gaGFuZGxlVG91Y2hDbGljayhoYW5kbGVFeHBvcnQsIGUpfVxuICAgICAgICAgICAgb246dG91Y2hlbmQ9eyhlKSA9PiBoYW5kbGVUb3VjaENsaWNrKGhhbmRsZUV4cG9ydCwgZSl9XG4gICAgICAgICAgICBkaXNhYmxlZD17ZXhwb3J0aW5nIHx8ICFhbmtpRGVja05hbWUudHJpbSgpfVxuICAgICAgICA+XG4gICAgICAgICAgICB7ZXhwb3J0aW5nID8gXCJFeHBvcnRpbmcuLi5cIiA6IFwiRXhwb3J0IHRvIEFua2lcIn1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uOmNsaWNrPXsoZSkgPT4gaGFuZGxlVG91Y2hDbGljayhoYW5kbGVDYW5jZWwsIGUpfVxuICAgICAgICAgICAgb246dG91Y2hlbmQ9eyhlKSA9PiBoYW5kbGVUb3VjaENsaWNrKGhhbmRsZUNhbmNlbCwgZSl9XG4gICAgICAgICAgICBkaXNhYmxlZD17ZXhwb3J0aW5nfT5DYW5jZWw8L2J1dHRvblxuICAgICAgICA+XG4gICAgPC9kaXY+XG48L2Rpdj5cblxuPHN0eWxlPlxuICAgIC5kZWNrcy1hbmtpLWV4cG9ydC11aSB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRlY2staW5mby1zZWN0aW9uIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjRweDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICB9XG5cbiAgICAuZGVja3MtZGVjay1pbmZvLXNlY3Rpb24gaDMge1xuICAgICAgICBtYXJnaW46IDAgMCAxNnB4IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRlY2staW5mby1saXN0IHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIH1cblxuICAgIC5kZWNrcy1kZWNrLWluZm8tbGlzdCBsaSB7XG4gICAgICAgIG1hcmdpbjogMCAwIDhweCAwO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRlY2staW5mby1saXN0IHN0cm9uZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgfVxuXG4gICAgLmRlY2tzLWluc3RydWN0aW9ucy1zZWN0aW9uIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjRweDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICB9XG5cbiAgICAuZGVja3MtaW5zdHJ1Y3Rpb25zLXNlY3Rpb24gaDMge1xuICAgICAgICBtYXJnaW46IDAgMCAxNnB4IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgfVxuXG4gICAgLmRlY2tzLWluc3RydWN0aW9ucy1saXN0IHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWluc3RydWN0aW9ucy1saXN0IGxpIHtcbiAgICAgICAgbWFyZ2luOiAwIDAgOHB4IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICB9XG5cbiAgICAuZGVja3MtZXhwb3J0LXNldHRpbmdzLXNlY3Rpb24ge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyNHB4O1xuICAgIH1cblxuICAgIC5kZWNrcy1leHBvcnQtc2V0dGluZ3Mtc2VjdGlvbiBoMyB7XG4gICAgICAgIG1hcmdpbjogMCAwIDE2cHggMDtcbiAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9kYWwtZm9vdGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgICBwYWRkaW5nLXRvcDogMjRweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMjRweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9kYWwtZm9vdGVyIGJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjtcbiAgICAgICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgbWluLWhlaWdodDogNDRweDtcbiAgICAgICAgbWluLXdpZHRoOiAxMDBweDtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9kYWwtZm9vdGVyIGJ1dHRvbjpob3Zlcjpub3QoOmRpc2FibGVkKSxcbiAgICAuZGVja3MtbW9kYWwtZm9vdGVyIGJ1dHRvbjphY3RpdmU6bm90KDpkaXNhYmxlZCkge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9kYWwtZm9vdGVyIGJ1dHRvbjpkaXNhYmxlZCB7XG4gICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbiAgICB9XG5cbiAgICAuZGVja3MtbW9kYWwtZm9vdGVyIGJ1dHRvbi5tb2QtY3RhIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIH1cblxuICAgIC5kZWNrcy1tb2RhbC1mb290ZXIgYnV0dG9uLm1vZC1jdGE6aG92ZXI6bm90KDpkaXNhYmxlZCksXG4gICAgLmRlY2tzLW1vZGFsLWZvb3RlciBidXR0b24ubW9kLWN0YTphY3RpdmU6bm90KDpkaXNhYmxlZCkge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgfVxuXG4gICAgLmRlY2tzLW1vZGFsLWZvb3RlciBidXR0b246Zm9jdXMge1xuICAgICAgICBvdXRsaW5lOiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgICB9XG5cbiAgICAvKiBNb2JpbGUgcmVzcG9uc2l2ZSBzdHlsZXMgKi9cbiAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAgICAgLmRlY2tzLWRlY2staW5mby1zZWN0aW9uLFxuICAgICAgICAuZGVja3MtaW5zdHJ1Y3Rpb25zLXNlY3Rpb24ge1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGVjay1pbmZvLXNlY3Rpb24gaDMsXG4gICAgICAgIC5kZWNrcy1pbnN0cnVjdGlvbnMtc2VjdGlvbiBoMyxcbiAgICAgICAgLmRlY2tzLWV4cG9ydC1zZXR0aW5ncy1zZWN0aW9uIGgzIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLW1vZGFsLWZvb3RlciB7XG4gICAgICAgICAgICBwYWRkaW5nLXRvcDogMjBweDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW4tcmV2ZXJzZTtcbiAgICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLW1vZGFsLWZvb3RlciBidXR0b24ge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiA0NHB4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7XG4gICAgICAgIC5kZWNrcy1kZWNrLWluZm8tc2VjdGlvbixcbiAgICAgICAgLmRlY2tzLWluc3RydWN0aW9ucy1zZWN0aW9uIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGVjay1pbmZvLWxpc3QgbGkge1xuICAgICAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtaW5zdHJ1Y3Rpb25zLWxpc3Qge1xuICAgICAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtbW9kYWwtZm9vdGVyIGJ1dHRvbiB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxNHB4IDIwcHg7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiA1MnB4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDM5MHB4KSB7XG4gICAgICAgIC5kZWNrcy1hbmtpLWV4cG9ydC11aSB7XG4gICAgICAgICAgICBtYXgtd2lkdGg6IDM5MHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWRlY2staW5mby1zZWN0aW9uLFxuICAgICAgICAuZGVja3MtaW5zdHJ1Y3Rpb25zLXNlY3Rpb24ge1xuICAgICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kZWNrLWluZm8tc2VjdGlvbiBoMyxcbiAgICAgICAgLmRlY2tzLWluc3RydWN0aW9ucy1zZWN0aW9uIGgzIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGVjay1pbmZvLWxpc3QgbGkge1xuICAgICAgICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1pbnN0cnVjdGlvbnMtbGlzdCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWV4cG9ydC1zZXR0aW5ncy1zZWN0aW9uIGgzIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtbW9kYWwtZm9vdGVyIHtcbiAgICAgICAgICAgIHBhZGRpbmctdG9wOiAxNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLW1vZGFsLWZvb3RlciBidXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgfVxuPC9zdHlsZT5cbiIsICI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICAgIGltcG9ydCB7IG9uTW91bnQsIG9uRGVzdHJveSB9IGZyb20gXCJzdmVsdGVcIjtcbiAgICBpbXBvcnQgeyB3cml0YWJsZSB9IGZyb20gXCJzdmVsdGUvc3RvcmVcIjtcbiAgICBpbXBvcnQgdHlwZSB7IERlY2ssIERlY2tTdGF0cywgRGVja0NvbmZpZyB9IGZyb20gXCIuLi9kYXRhYmFzZS90eXBlc1wiO1xuXG4gICAgaW1wb3J0IFJldmlld0hlYXRtYXAgZnJvbSBcIi4vUmV2aWV3SGVhdG1hcC5zdmVsdGVcIjtcbiAgICBpbXBvcnQgeyBEZWNrQ29uZmlnTW9kYWwgfSBmcm9tIFwiLi9EZWNrQ29uZmlnTW9kYWxcIjtcbiAgICBpbXBvcnQgeyBBbmtpRXhwb3J0TW9kYWwgfSBmcm9tIFwiLi9BbmtpRXhwb3J0TW9kYWxcIjtcblxuICAgIGxldCBkZWNrczogRGVja1tdID0gW107XG4gICAgbGV0IGFsbERlY2tzOiBEZWNrW10gPSBbXTtcbiAgICBsZXQgc3RhdHMgPSBuZXcgTWFwPHN0cmluZywgRGVja1N0YXRzPigpO1xuICAgIGxldCBmaWx0ZXJUZXh0ID0gXCJcIjtcbiAgICBsZXQgaGVhdG1hcENvbXBvbmVudDogYW55O1xuICAgIGxldCBzaG93U3VnZ2VzdGlvbnMgPSBmYWxzZTtcbiAgICBsZXQgYXZhaWxhYmxlVGFnczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgZmlsdGVyZWRTdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgaW5wdXRGb2N1c2VkID0gZmFsc2U7XG4gICAgbGV0IGFjdGl2ZURyb3Bkb3duOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIGxldCBhY3RpdmVEcm9wZG93bkRlY2tJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IGRyb3Bkb3duRXZlbnRMaXN0ZW5lcnM6IHtcbiAgICAgICAgY2xpY2s/OiAoZTogRXZlbnQpID0+IHZvaWQ7XG4gICAgICAgIHNjcm9sbD86ICgpID0+IHZvaWQ7XG4gICAgICAgIHJlc2l6ZT86ICgpID0+IHZvaWQ7XG4gICAgfSA9IHt9O1xuXG4gICAgZXhwb3J0IGxldCBvbkRlY2tDbGljazogKGRlY2s6IERlY2spID0+IHZvaWQ7XG4gICAgZXhwb3J0IGxldCBvblJlZnJlc2g6ICgpID0+IHZvaWQ7XG4gICAgZXhwb3J0IGxldCBvbkZvcmNlUmVmcmVzaERlY2s6IChkZWNrSWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgICBleHBvcnQgbGV0IGdldFJldmlld0NvdW50czogKGRheXM6IG51bWJlcikgPT4gUHJvbWlzZTxNYXA8c3RyaW5nLCBudW1iZXI+PjtcbiAgICBleHBvcnQgbGV0IG9uT3BlblN0YXRpc3RpY3M6ICgpID0+IHZvaWQ7XG4gICAgZXhwb3J0IGxldCBnZXRTdHVkeVN0YXRzOiAoKCkgPT4gUHJvbWlzZTxhbnk+KSB8IG51bGwgPSBudWxsO1xuICAgIGV4cG9ydCBsZXQgZ2V0RGF0YWJhc2U6ICgpID0+IGFueTtcbiAgICBleHBvcnQgbGV0IGdldERlY2tTeW5jaHJvbml6ZXI6ICgpID0+IGFueTtcbiAgICBleHBvcnQgbGV0IHBsdWdpbjogYW55ID0gbnVsbDsgLy8gVE9ETzogUmVmYWN0b3IgdG8gcGFzcyBzcGVjaWZpYyBmdW5jdGlvbnMgaW5zdGVhZCBvZiB3aG9sZSBwbHVnaW5cblxuICAgIGxldCBpc1JlZnJlc2hpbmcgPSBmYWxzZTtcbiAgICBsZXQgaXNVcGRhdGluZ1N0YXRzID0gZmFsc2U7XG4gICAgbGV0IHN0dWR5U3RhdHMgPSB7XG4gICAgICAgIHRvdGFsSG91cnM6IDAsXG4gICAgICAgIHBhc3RNb250aEhvdXJzOiAwLFxuICAgICAgICBwYXN0V2Vla0hvdXJzOiAwLFxuICAgICAgICB0b2RheUNhcmRzOiAwLFxuICAgICAgICB0b2RheUhvdXJzOiAwLFxuICAgICAgICB0b2RheVBhY2VTZWNvbmRzOiAwLFxuICAgIH07XG5cbiAgICAvLyBUcmFjayBsYXN0IGV2ZW50IHRvIHByZXZlbnQgZG91YmxlIGV4ZWN1dGlvblxuICAgIGxldCBsYXN0RXZlbnRUaW1lID0gMDtcbiAgICBsZXQgbGFzdEV2ZW50VHlwZSA9IFwiXCI7XG5cbiAgICBmdW5jdGlvbiBnZXREZWNrU3RhdHMoZGVja0lkOiBzdHJpbmcpOiBEZWNrU3RhdHMge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgc3RhdHMuZ2V0KGRlY2tJZCkgPz8ge1xuICAgICAgICAgICAgICAgIGRlY2tJZCxcbiAgICAgICAgICAgICAgICBuZXdDb3VudDogMCxcbiAgICAgICAgICAgICAgICBkdWVDb3VudDogMCxcbiAgICAgICAgICAgICAgICB0b3RhbENvdW50OiAwLFxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcm1hdERlY2tOYW1lKGRlY2s6IERlY2spOiBzdHJpbmcge1xuICAgICAgICAvLyBkZWNrLm5hbWUgbm93IGNvbnRhaW5zIHRoZSBjbGVhbiBmaWxlbmFtZSB3aXRob3V0IGV4dGVuc2lvblxuICAgICAgICByZXR1cm4gZGVjay5uYW1lO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVJlZnJlc2goKSB7XG4gICAgICAgIGlzUmVmcmVzaGluZyA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvblJlZnJlc2goKTtcbiAgICAgICAgICAgIHJlZnJlc2hIZWF0bWFwKCk7XG4gICAgICAgICAgICBhd2FpdCBsb2FkU3R1ZHlTdGF0cygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyByZWZyZXNoOlwiLCBlcnJvcik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpc1JlZnJlc2hpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUZvcmNlUmVmcmVzaERlY2soZGVjazogRGVjaykge1xuICAgICAgICBpc1JlZnJlc2hpbmcgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgb25Gb3JjZVJlZnJlc2hEZWNrKGRlY2suaWQpO1xuICAgICAgICAgICAgcmVmcmVzaEhlYXRtYXAoKTtcbiAgICAgICAgICAgIGF3YWl0IGxvYWRTdHVkeVN0YXRzKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZHVyaW5nIGRlY2sgZm9yY2UgcmVmcmVzaDpcIiwgZXJyb3IpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaXNSZWZyZXNoaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gdXBkYXRlU3RhdHNCeUlkKGRlY2tJZDogc3RyaW5nLCBuZXdTdGF0czogRGVja1N0YXRzKSB7XG4gICAgICAgIGlzVXBkYXRpbmdTdGF0cyA9IHRydWU7XG4gICAgICAgIHN0YXRzLnNldChkZWNrSWQsIG5ld1N0YXRzKTtcbiAgICAgICAgZGVja3MgPSBkZWNrcztcbiAgICAgICAgbG9hZFN0dWR5U3RhdHMoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgaXNVcGRhdGluZ1N0YXRzID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIEZ1bmN0aW9uIHRvIGZvcmNlIFVJIHVwZGF0ZSB3aGVuIHN0YXRzIGNoYW5nZVxuICAgIGV4cG9ydCBmdW5jdGlvbiB1cGRhdGVTdGF0cyhuZXdTdGF0czogTWFwPHN0cmluZywgRGVja1N0YXRzPikge1xuICAgICAgICBpc1VwZGF0aW5nU3RhdHMgPSB0cnVlO1xuICAgICAgICBzdGF0cyA9IG5ld1N0YXRzO1xuICAgICAgICBkZWNrcyA9IGRlY2tzO1xuICAgICAgICBpc1VwZGF0aW5nU3RhdHMgPSBmYWxzZTtcbiAgICB9XG4gICAgZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURlY2tzKG5ld0RlY2tzOiBEZWNrW10pIHtcbiAgICAgICAgYWxsRGVja3MgPSBuZXdEZWNrcztcbiAgICAgICAgLy8gRXh0cmFjdCB1bmlxdWUgdGFnc1xuICAgICAgICBhdmFpbGFibGVUYWdzID0gWy4uLm5ldyBTZXQobmV3RGVja3MubWFwKChkZWNrKSA9PiBkZWNrLnRhZykpXS5maWx0ZXIoXG4gICAgICAgICAgICAodGFnKSA9PiB0YWcsXG4gICAgICAgICk7XG4gICAgICAgIGFwcGx5RmlsdGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwbHlGaWx0ZXIoKSB7XG4gICAgICAgIGlmICghZmlsdGVyVGV4dC50cmltKCkpIHtcbiAgICAgICAgICAgIGRlY2tzID0gYWxsRGVja3M7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBmaWx0ZXJUZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBkZWNrcyA9IGFsbERlY2tzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAoZGVjaykgPT5cbiAgICAgICAgICAgICAgICAgICAgZGVjay5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVyKSB8fFxuICAgICAgICAgICAgICAgICAgICBkZWNrLnRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlciksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlRmlsdGVySW5wdXQoZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBmaWx0ZXJUZXh0ID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICB1cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICBhcHBseUZpbHRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVN1Z2dlc3Rpb25zKCkge1xuICAgICAgICBpZiAoIWZpbHRlclRleHQudHJpbSgpKSB7XG4gICAgICAgICAgICBzaG93U3VnZ2VzdGlvbnMgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbHRlciA9IGZpbHRlclRleHQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgZmlsdGVyZWRTdWdnZXN0aW9ucyA9IGF2YWlsYWJsZVRhZ3MuZmlsdGVyKFxuICAgICAgICAgICAgKHRhZykgPT5cbiAgICAgICAgICAgICAgICB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXIpICYmXG4gICAgICAgICAgICAgICAgdGFnLnRvTG93ZXJDYXNlKCkgIT09IGZpbHRlcixcbiAgICAgICAgKTtcbiAgICAgICAgc2hvd1N1Z2dlc3Rpb25zID0gZmlsdGVyZWRTdWdnZXN0aW9ucy5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbGVjdFN1Z2dlc3Rpb24odGFnOiBzdHJpbmcpIHtcbiAgICAgICAgZmlsdGVyVGV4dCA9IHRhZztcbiAgICAgICAgc2hvd1N1Z2dlc3Rpb25zID0gZmFsc2U7XG4gICAgICAgIGFwcGx5RmlsdGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlRmlsdGVyRm9jdXMoKSB7XG4gICAgICAgIGlucHV0Rm9jdXNlZCA9IHRydWU7XG4gICAgICAgIGlmIChmaWx0ZXJUZXh0LnRyaW0oKSkge1xuICAgICAgICAgICAgdXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhdmFpbGFibGVUYWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNob3dTdWdnZXN0aW9ucyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVGaWx0ZXJCbHVyKCkge1xuICAgICAgICBpbnB1dEZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gRGVsYXkgaGlkaW5nIHN1Z2dlc3Rpb25zIHRvIGFsbG93IGNsaWNrc1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNob3dTdWdnZXN0aW9ucyA9IGZhbHNlO1xuICAgICAgICB9LCAyMDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZURlY2tDbGljayhkZWNrOiBEZWNrKSB7XG4gICAgICAgIG9uRGVja0NsaWNrKGRlY2spO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiByZWZyZXNoSGVhdG1hcCgpIHtcbiAgICAgICAgaWYgKGhlYXRtYXBDb21wb25lbnQpIHtcbiAgICAgICAgICAgIGhlYXRtYXBDb21wb25lbnQucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gbG9hZFN0dWR5U3RhdHMoKSB7XG4gICAgICAgIGlmIChnZXRTdHVkeVN0YXRzKSB7XG4gICAgICAgICAgICBzdHVkeVN0YXRzID0gYXdhaXQgZ2V0U3R1ZHlTdGF0cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9ybWF0SG91cnMoaG91cnM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBob3Vycy50b0ZpeGVkKDIpICsgXCIgaHJzXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9ybWF0UGFjZShzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gc2Vjb25kcy50b0ZpeGVkKDIpICsgXCJzL2NhcmRcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbmlmaWVkIGZ1bmN0aW9uIHRvIHVwZGF0ZSBhbGwgVUkgY29tcG9uZW50cyBpbiB0aGUgRGVja0xpc3RQYW5lbC5cbiAgICAgKiBUaGlzIGNvbnNvbGlkYXRlcyBhbGwgVUkgdXBkYXRlcyB0byBwcmV2ZW50IHNjYXR0ZXJlZCB1cGRhdGUgY2FsbHMgdGhyb3VnaG91dCB0aGUgY29kZWJhc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmV3RGVja3MgLSBPcHRpb25hbCBhcnJheSBvZiBkZWNrcyB0byB1cGRhdGUgdGhlIGRlY2sgbGlzdFxuICAgICAqIEBwYXJhbSBuZXdTdGF0cyAtIE9wdGlvbmFsIG1hcCBvZiBhbGwgZGVjayBzdGF0cyB0byB1cGRhdGUgYWxsIGRlY2sgc3RhdGlzdGljc1xuICAgICAqIEBwYXJhbSBzaW5nbGVEZWNrSWQgLSBPcHRpb25hbCBkZWNrIElEIGZvciB1cGRhdGluZyBhIHNpbmdsZSBkZWNrJ3Mgc3RhdHNcbiAgICAgKiBAcGFyYW0gc2luZ2xlRGVja1N0YXRzIC0gT3B0aW9uYWwgc3RhdHMgZm9yIGEgc2luZ2xlIGRlY2sgKHVzZWQgd2l0aCBzaW5nbGVEZWNrSWQpXG4gICAgICpcbiAgICAgKiBVcGRhdGVzIHBlcmZvcm1lZDpcbiAgICAgKiAtIERlY2sgbGlzdCAoaWYgbmV3RGVja3MgcHJvdmlkZWQpXG4gICAgICogLSBEZWNrIHN0YXRpc3RpY3MgKGlmIG5ld1N0YXRzIG9yIHNpbmdsZSBkZWNrIHN0YXRzIHByb3ZpZGVkKVxuICAgICAqIC0gUmV2aWV3IGhlYXRtYXAgKGFsd2F5cylcbiAgICAgKiAtIFN0dWR5IHN0YXRpc3RpY3MgKGFsd2F5cylcbiAgICAgKi9cbiAgICBleHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWxsKFxuICAgICAgICBuZXdEZWNrcz86IERlY2tbXSxcbiAgICAgICAgbmV3U3RhdHM/OiBNYXA8c3RyaW5nLCBEZWNrU3RhdHM+LFxuICAgICAgICBzaW5nbGVEZWNrSWQ/OiBzdHJpbmcsXG4gICAgICAgIHNpbmdsZURlY2tTdGF0cz86IERlY2tTdGF0cyxcbiAgICApIHtcbiAgICAgICAgaWYgKG5ld0RlY2tzKSB7XG4gICAgICAgICAgICB1cGRhdGVEZWNrcyhuZXdEZWNrcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld1N0YXRzKSB7XG4gICAgICAgICAgICB1cGRhdGVTdGF0cyhuZXdTdGF0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpbmdsZURlY2tJZCAmJiBzaW5nbGVEZWNrU3RhdHMpIHtcbiAgICAgICAgICAgIHVwZGF0ZVN0YXRzQnlJZChzaW5nbGVEZWNrSWQsIHNpbmdsZURlY2tTdGF0cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmVmcmVzaEhlYXRtYXAoKTtcbiAgICAgICAgYXdhaXQgbG9hZFN0dWR5U3RhdHMoKTtcbiAgICB9XG5cbiAgICAvLyBMb2FkIHN0dWR5IHN0YXRzIG9uIGNvbXBvbmVudCBtb3VudFxuICAgIG9uTW91bnQoKCkgPT4ge1xuICAgICAgICBsb2FkU3R1ZHlTdGF0cygpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlQ29uZmlnQ2xpY2soZGVjazogRGVjaywgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIC8vIElmIGNsaWNraW5nIHRoZSBzYW1lIGNvZywgY2xvc2UgdGhlIGRyb3Bkb3duXG4gICAgICAgIGlmIChhY3RpdmVEcm9wZG93biAmJiBhY3RpdmVEcm9wZG93bkRlY2tJZCA9PT0gZGVjay5pZCkge1xuICAgICAgICAgICAgY2xvc2VBY3RpdmVEcm9wZG93bigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2xvc2UgYW55IGV4aXN0aW5nIGRyb3Bkb3duXG4gICAgICAgIGNsb3NlQWN0aXZlRHJvcGRvd24oKTtcblxuICAgICAgICAvLyBDcmVhdGUgZHJvcGRvd24gbWVudVxuICAgICAgICBjb25zdCBkcm9wZG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGRyb3Bkb3duLmNsYXNzTmFtZSA9IFwiZGVja3MtZGVjay1jb25maWctZHJvcGRvd25cIjtcblxuICAgICAgICBjb25zdCBjb25maWdPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb25maWdPcHRpb24uY2xhc3NOYW1lID0gXCJkZWNrcy1kcm9wZG93bi1vcHRpb25cIjtcbiAgICAgICAgY29uZmlnT3B0aW9uLnRleHRDb250ZW50ID0gXCJDb25maWd1cmUgZGVja1wiO1xuICAgICAgICBjb25maWdPcHRpb24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGNsb3NlQWN0aXZlRHJvcGRvd24oKTtcbiAgICAgICAgICAgIG9wZW5EZWNrQ29uZmlnKGRlY2spO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZvcmNlUmVmcmVzaE9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGZvcmNlUmVmcmVzaE9wdGlvbi5jbGFzc05hbWUgPSBcImRlY2tzLWRyb3Bkb3duLW9wdGlvblwiO1xuICAgICAgICBmb3JjZVJlZnJlc2hPcHRpb24udGV4dENvbnRlbnQgPSBcIkZvcmNlIHJlZnJlc2hcIjtcbiAgICAgICAgZm9yY2VSZWZyZXNoT3B0aW9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBjbG9zZUFjdGl2ZURyb3Bkb3duKCk7XG4gICAgICAgICAgICBoYW5kbGVGb3JjZVJlZnJlc2hEZWNrKGRlY2spO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGV4cG9ydE9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGV4cG9ydE9wdGlvbi5jbGFzc05hbWUgPSBcImRlY2tzLWRyb3Bkb3duLW9wdGlvblwiO1xuICAgICAgICBleHBvcnRPcHRpb24udGV4dENvbnRlbnQgPSBcIkV4cG9ydCB0byBBbmtpXCI7XG4gICAgICAgIGV4cG9ydE9wdGlvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgY2xvc2VBY3RpdmVEcm9wZG93bigpO1xuICAgICAgICAgICAgb3BlbkFua2lFeHBvcnQoZGVjayk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQoY29uZmlnT3B0aW9uKTtcbiAgICAgICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQoZm9yY2VSZWZyZXNoT3B0aW9uKTtcbiAgICAgICAgZHJvcGRvd24uYXBwZW5kQ2hpbGQoZXhwb3J0T3B0aW9uKTtcblxuICAgICAgICAvLyBQb3NpdGlvbiBkcm9wZG93biB3aXRoIHZpZXdwb3J0IGJvdW5kcyBjaGVja2luZ1xuICAgICAgICBjb25zdCBidXR0b24gPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHJlY3QgPSBidXR0b24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgY29uc3Qgdmlld3BvcnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgICAgICAgZHJvcGRvd24uc3R5bGUucG9zaXRpb24gPSBcImZpeGVkXCI7XG4gICAgICAgIGRyb3Bkb3duLnN0eWxlLnpJbmRleCA9IFwiMTAwMFwiO1xuXG4gICAgICAgIC8vIFRlbXBvcmFyaWx5IGFwcGVuZCB0byBtZWFzdXJlIGRpbWVuc2lvbnNcbiAgICAgICAgZHJvcGRvd24uc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZHJvcGRvd24pO1xuICAgICAgICBjb25zdCBkcm9wZG93blJlY3QgPSBkcm9wZG93bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgb3B0aW1hbCBwb3NpdGlvblxuICAgICAgICBsZXQgdG9wID0gcmVjdC5ib3R0b20gKyA1O1xuICAgICAgICBsZXQgbGVmdCA9IHJlY3QubGVmdDtcblxuICAgICAgICAvLyBBZGp1c3QgaWYgZHJvcGRvd24gd291bGQgZ28gYmVsb3cgdmlld3BvcnRcbiAgICAgICAgaWYgKHRvcCArIGRyb3Bkb3duUmVjdC5oZWlnaHQgPiB2aWV3cG9ydEhlaWdodCAtIDEwKSB7XG4gICAgICAgICAgICB0b3AgPSByZWN0LnRvcCAtIGRyb3Bkb3duUmVjdC5oZWlnaHQgLSA1O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRqdXN0IGlmIGRyb3Bkb3duIHdvdWxkIGdvIHJpZ2h0IG9mIHZpZXdwb3J0XG4gICAgICAgIGlmIChsZWZ0ICsgZHJvcGRvd25SZWN0LndpZHRoID4gdmlld3BvcnRXaWR0aCAtIDEwKSB7XG4gICAgICAgICAgICBsZWZ0ID0gdmlld3BvcnRXaWR0aCAtIGRyb3Bkb3duUmVjdC53aWR0aCAtIDEwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW5zdXJlIGl0IGRvZXNuJ3QgZ28gYWJvdmUgb3IgbGVmdCBvZiB2aWV3cG9ydFxuICAgICAgICB0b3AgPSBNYXRoLm1heCgxMCwgdG9wKTtcbiAgICAgICAgbGVmdCA9IE1hdGgubWF4KDEwLCBsZWZ0KTtcblxuICAgICAgICBkcm9wZG93bi5zdHlsZS50b3AgPSBgJHt0b3B9cHhgO1xuICAgICAgICBkcm9wZG93bi5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG4gICAgICAgIGRyb3Bkb3duLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgICAvLyBTdG9yZSBhY3RpdmUgZHJvcGRvd24gcmVmZXJlbmNlXG4gICAgICAgIGFjdGl2ZURyb3Bkb3duID0gZHJvcGRvd247XG4gICAgICAgIGFjdGl2ZURyb3Bkb3duRGVja0lkID0gZGVjay5pZDtcblxuICAgICAgICAvLyBTdG9yZSBldmVudCBsaXN0ZW5lciBmdW5jdGlvbnMgZm9yIGNsZWFudXBcbiAgICAgICAgZHJvcGRvd25FdmVudExpc3RlbmVycy5jbGljayA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkcm9wZG93bi5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgICAgICAgICAgIGNsb3NlQWN0aXZlRHJvcGRvd24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZHJvcGRvd25FdmVudExpc3RlbmVycy5zY3JvbGwgPSBjbG9zZUFjdGl2ZURyb3Bkb3duO1xuICAgICAgICBkcm9wZG93bkV2ZW50TGlzdGVuZXJzLnJlc2l6ZSA9IGNsb3NlQWN0aXZlRHJvcGRvd247XG5cbiAgICAgICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVycyB3aXRoIHNsaWdodCBkZWxheSB0byBwcmV2ZW50IGltbWVkaWF0ZSBjbG9zdXJlXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRyb3Bkb3duRXZlbnRMaXN0ZW5lcnMuY2xpY2spIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duRXZlbnRMaXN0ZW5lcnMuY2xpY2ssXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkcm9wZG93bkV2ZW50TGlzdGVuZXJzLnNjcm9sbCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICBcInNjcm9sbFwiLFxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bkV2ZW50TGlzdGVuZXJzLnNjcm9sbCxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRyb3Bkb3duRXZlbnRMaXN0ZW5lcnMucmVzaXplKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICAgIFwicmVzaXplXCIsXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duRXZlbnRMaXN0ZW5lcnMucmVzaXplLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb3NlQWN0aXZlRHJvcGRvd24oKSB7XG4gICAgICAgIGlmIChhY3RpdmVEcm9wZG93bikge1xuICAgICAgICAgICAgYWN0aXZlRHJvcGRvd24ucmVtb3ZlKCk7XG4gICAgICAgICAgICBhY3RpdmVEcm9wZG93biA9IG51bGw7XG4gICAgICAgICAgICBhY3RpdmVEcm9wZG93bkRlY2tJZCA9IG51bGw7XG5cbiAgICAgICAgICAgIC8vIENsZWFuIHVwIGFsbCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICAgIGlmIChkcm9wZG93bkV2ZW50TGlzdGVuZXJzLmNsaWNrKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bkV2ZW50TGlzdGVuZXJzLmNsaWNrLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHJvcGRvd25FdmVudExpc3RlbmVycy5zY3JvbGwpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAgICAgXCJzY3JvbGxcIixcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25FdmVudExpc3RlbmVycy5zY3JvbGwsXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkcm9wZG93bkV2ZW50TGlzdGVuZXJzLnJlc2l6ZSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICBcInJlc2l6ZVwiLFxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bkV2ZW50TGlzdGVuZXJzLnJlc2l6ZSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDbGVhciBzdG9yZWQgcmVmZXJlbmNlc1xuICAgICAgICAgICAgZHJvcGRvd25FdmVudExpc3RlbmVycyA9IHt9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25EZXN0cm95KCgpID0+IHtcbiAgICAgICAgY2xvc2VBY3RpdmVEcm9wZG93bigpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gb3BlbkRlY2tDb25maWcoZGVjazogRGVjaykge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBEZWNrQ29uZmlnTW9kYWwoXG4gICAgICAgICAgICBwbHVnaW4uYXBwLFxuICAgICAgICAgICAgZGVjayxcbiAgICAgICAgICAgIGdldERhdGFiYXNlKCksXG4gICAgICAgICAgICBnZXREZWNrU3luY2hyb25pemVyKCksXG4gICAgICAgICAgICBhc3luYyAoZGVja0lkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIHN0YXRzIGFmdGVyIGRlY2sgY29uZmlnIGNoYW5nZVxuICAgICAgICAgICAgICAgIGF3YWl0IG9uRm9yY2VSZWZyZXNoRGVjayhkZWNrSWQpO1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbG9jYWwgZGVjayBjb25maWdcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkRGVja3MgPSBhd2FpdCBnZXREYXRhYmFzZSgpLmdldEFsbERlY2tzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZERlY2sgPSB1cGRhdGVkRGVja3MuZmluZChcbiAgICAgICAgICAgICAgICAgICAgKGQ6IERlY2spID0+IGQuaWQgPT09IGRlY2tJZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkRGVjaykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWNrSW5kZXggPSBhbGxEZWNrcy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgICAoZDogRGVjaykgPT4gZC5pZCA9PT0gZGVja0lkLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVja0luZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsRGVja3NbZGVja0luZGV4XSA9IHVwZGF0ZWREZWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yY2UgcmVhY3Rpdml0eVxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsRGVja3MgPSBbLi4uYWxsRGVja3NdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9wZW5BbmtpRXhwb3J0KGRlY2s6IERlY2spIHtcbiAgICAgICAgaWYgKCFwbHVnaW4pIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlBsdWdpbiBub3QgYXZhaWxhYmxlIGZvciBBbmtpIGV4cG9ydFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBBbmtpRXhwb3J0TW9kYWwocGx1Z2luLmFwcCwgZGVjaywgZ2V0RGF0YWJhc2UoKSk7XG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVUb3VjaENsaWNrKGNhbGxiYWNrOiAoKSA9PiB2b2lkLCBldmVudDogRXZlbnQpIHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZXZlbnRUeXBlID0gZXZlbnQudHlwZTtcblxuICAgICAgICAvLyBQcmV2ZW50IGRvdWJsZSBleGVjdXRpb24gd2l0aGluIDEwMG1zXG4gICAgICAgIGlmIChub3cgLSBsYXN0RXZlbnRUaW1lIDwgMTAwICYmIGxhc3RFdmVudFR5cGUgIT09IGV2ZW50VHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdEV2ZW50VGltZSA9IG5vdztcbiAgICAgICAgbGFzdEV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcblxuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cblxuICAgIG9uTW91bnQoKCkgPT4ge1xuICAgICAgICAvLyBJbml0aWFsIGxvYWRcbiAgICAgICAgLy8gaGFuZGxlUmVmcmVzaCgpO1xuICAgIH0pO1xuPC9zY3JpcHQ+XG5cbjxkaXYgY2xhc3M9XCJkZWNrcy1kZWNrLWxpc3QtcGFuZWxcIj5cbiAgICA8ZGl2IGNsYXNzPVwiZGVja3MtcGFuZWwtaGVhZGVyXCI+XG4gICAgICAgIDxoMyBjbGFzcz1cImRlY2tzLXBhbmVsLXRpdGxlXCI+Rmxhc2hjYXJkIERlY2tzPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWhlYWRlci1idXR0b25zXCI+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJkZWNrcy1zdGF0cy1idXR0b25cIlxuICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoZSkgPT4gaGFuZGxlVG91Y2hDbGljayhvbk9wZW5TdGF0aXN0aWNzLCBlKX1cbiAgICAgICAgICAgICAgICBvbjp0b3VjaGVuZD17KGUpID0+IGhhbmRsZVRvdWNoQ2xpY2sob25PcGVuU3RhdGlzdGljcywgZSl9XG4gICAgICAgICAgICAgICAgdGl0bGU9XCJWaWV3IE92ZXJhbGwgU3RhdGlzdGljc1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCJcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLXdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgICAgICAgICBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTMgM3YxOGgxOFwiPjwvcGF0aD5cbiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk0xOCAxN1Y5XCI+PC9wYXRoPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTEzIDE3VjVcIj48L3BhdGg+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNOCAxN3YtM1wiPjwvcGF0aD5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZGVja3MtcmVmcmVzaC1idXR0b25cIlxuICAgICAgICAgICAgICAgIGNsYXNzOnJlZnJlc2hpbmc9e2lzUmVmcmVzaGluZ31cbiAgICAgICAgICAgICAgICBvbjpjbGljaz17KGUpID0+IGhhbmRsZVRvdWNoQ2xpY2soaGFuZGxlUmVmcmVzaCwgZSl9XG4gICAgICAgICAgICAgICAgb246dG91Y2hlbmQ9eyhlKSA9PiBoYW5kbGVUb3VjaENsaWNrKGhhbmRsZVJlZnJlc2gsIGUpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1JlZnJlc2hpbmd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCJcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLXdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgICAgICAgICBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTIzIDR2NmgtNlwiPjwvcGF0aD5cbiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk0xIDIwdi02aDZcIj48L3BhdGg+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTMuNTEgOWE5IDkgMCAwIDEgMTQuODUtMy4zNkwyMyAxME0xIDE0bDQuNjQgNC4zNkE5IDkgMCAwIDAgMjAuNDkgMTVcIlxuICAgICAgICAgICAgICAgICAgICA+PC9wYXRoPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImRlY2tzLWRlY2stY29udGVudFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtZmlsdGVyLXNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1maWx0ZXItY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJkZWNrcy1maWx0ZXItaW5wdXRcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkZpbHRlciBieSBuYW1lIG9yIHRhZy4uLiAoZS5nLiwgJ3NwYW5pc2gnLCAnI2ZsYXNoY2FyZHMnKVwiXG4gICAgICAgICAgICAgICAgICAgIGJpbmQ6dmFsdWU9e2ZpbHRlclRleHR9XG4gICAgICAgICAgICAgICAgICAgIG9uOmlucHV0PXtoYW5kbGVGaWx0ZXJJbnB1dH1cbiAgICAgICAgICAgICAgICAgICAgb246Zm9jdXM9e2hhbmRsZUZpbHRlckZvY3VzfVxuICAgICAgICAgICAgICAgICAgICBvbjpibHVyPXtoYW5kbGVGaWx0ZXJCbHVyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgeyNpZiBzaG93U3VnZ2VzdGlvbnMgJiYgZmlsdGVyZWRTdWdnZXN0aW9ucy5sZW5ndGggPiAwfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3VnZ2VzdGlvbnMtZHJvcGRvd25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdWdnZXN0aW9ucy1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWx0ZXIgYnkgdGFnczpcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyNlYWNoIGZpbHRlcmVkU3VnZ2VzdGlvbnMgYXMgdGFnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJkZWNrcy1zdWdnZXN0aW9uLWl0ZW1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjptb3VzZWRvd258cHJldmVudERlZmF1bHQ9eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RTdWdnZXN0aW9uKHRhZyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVRvdWNoQ2xpY2soXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4gc2VsZWN0U3VnZ2VzdGlvbih0YWcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjp0b3VjaGVuZD17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVUb3VjaENsaWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHNlbGVjdFN1Z2dlc3Rpb24odGFnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0YWd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHs6ZWxzZSBpZiAhZmlsdGVyVGV4dC50cmltKCkgJiYgYXZhaWxhYmxlVGFncy5sZW5ndGggPiAwICYmIGlucHV0Rm9jdXNlZH1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN1Z2dlc3Rpb25zLWRyb3Bkb3duXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3VnZ2VzdGlvbnMtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXZhaWxhYmxlIHRhZ3MgKGNsaWNrIHRvIGZpbHRlcik6XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsjZWFjaCBhdmFpbGFibGVUYWdzLnNsaWNlKDAsIDUpIGFzIHRhZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGVja3Mtc3VnZ2VzdGlvbi1pdGVtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246bW91c2Vkb3dufHByZXZlbnREZWZhdWx0PXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0U3VnZ2VzdGlvbih0YWcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVUb3VjaENsaWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHNlbGVjdFN1Z2dlc3Rpb24odGFnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246dG91Y2hlbmQ9eyhlKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlVG91Y2hDbGljayhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKSA9PiBzZWxlY3RTdWdnZXN0aW9uKHRhZyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGFnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgey9lYWNofVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsjaWYgYWxsRGVja3MubGVuZ3RoID09PSAwfVxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWVtcHR5LXN0YXRlXCI+XG4gICAgICAgICAgICAgICAgPHA+Tm8gZmxhc2hjYXJkIGRlY2tzIGZvdW5kLjwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImRlY2tzLWhlbHAtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICBUYWcgeW91ciBub3RlcyB3aXRoICNmbGFzaGNhcmRzIHRvIGNyZWF0ZSBkZWNrcy5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgezplbHNlIGlmIGRlY2tzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1lbXB0eS1zdGF0ZVwiPlxuICAgICAgICAgICAgICAgIDxwPk5vIGRlY2tzIG1hdGNoIHlvdXIgZmlsdGVyLjwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImRlY2tzLWhlbHAtdGV4dFwiPlRyeSBhZGp1c3RpbmcgeW91ciBzZWFyY2ggdGVybXMuPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1kZWNrLXRhYmxlXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXRhYmxlLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtY29sLWRlY2tcIj5EZWNrPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1jb2wtc3RhdFwiPk5ldzwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtY29sLXN0YXRcIj5EdWU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLWNvbC1jb25maWdcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy10YWJsZS1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgIHsjZWFjaCBkZWNrcyBhcyBkZWNrfVxuICAgICAgICAgICAgICAgICAgICAgICAge0Bjb25zdCBzdGF0cyA9IGdldERlY2tTdGF0cyhkZWNrLmlkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1kZWNrLXJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1jb2wtZGVja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJkZWNrcy1kZWNrLW5hbWUtbGlua1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlVG91Y2hDbGljayhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4gaGFuZGxlRGVja0NsaWNrKGRlY2spLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjp0b3VjaGVuZD17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlVG91Y2hDbGljayhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4gaGFuZGxlRGVja0NsaWNrKGRlY2spLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjprZXlkb3duPXsoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmtleSA9PT0gXCJFbnRlclwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGVja0NsaWNrKGRlY2spfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJDbGljayB0byByZXZpZXcge2RlY2submFtZX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0RGVja05hbWUoZGVjayl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZGVja3MtY29sLXN0YXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczpoYXMtY2FyZHM9e3N0YXRzLm5ld0NvdW50ID4gMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6dXBkYXRpbmc9e2lzVXBkYXRpbmdTdGF0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6aGFzLWxpbWl0PXtkZWNrLmNvbmZpZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhhc05ld0NhcmRzTGltaXRFbmFibGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17ZGVjay5jb25maWcuaGFzTmV3Q2FyZHNMaW1pdEVuYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYCR7c3RhdHMubmV3Q291bnR9IG5ldyBjYXJkcyBhdmFpbGFibGUgdG9kYXkgKGxpbWl0OiAke2RlY2suY29uZmlnLm5ld0NhcmRzUGVyRGF5fSlgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGAke3N0YXRzLm5ld0NvdW50fSBuZXcgY2FyZHMgZHVlYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdGF0cy5uZXdDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBkZWNrLmNvbmZpZy5oYXNOZXdDYXJkc0xpbWl0RW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGVja3MtbGltaXQtaW5kaWNhdG9yXCI+4pqgPC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRlY2tzLWNvbC1zdGF0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6aGFzLWNhcmRzPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6dXBkYXRpbmc9e2lzVXBkYXRpbmdTdGF0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRlY2tzLWNvbC1zdGF0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6aGFzLWNhcmRzPXtzdGF0cy5kdWVDb3VudCA+IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOnVwZGF0aW5nPXtpc1VwZGF0aW5nU3RhdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOmhhcy1saW1pdD17ZGVjay5jb25maWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oYXNSZXZpZXdDYXJkc0xpbWl0RW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2RlY2suY29uZmlnLmhhc1Jldmlld0NhcmRzTGltaXRFbmFibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGAke3N0YXRzLmR1ZUNvdW50fSByZXZpZXcgY2FyZHMgYXZhaWxhYmxlIHRvZGF5IChsaW1pdDogJHtkZWNrLmNvbmZpZy5yZXZpZXdDYXJkc1BlckRheX0pYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgJHtzdGF0cy5kdWVDb3VudH0gcmV2aWV3IGNhcmRzIGR1ZWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3RhdHMuZHVlQ291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgZGVjay5jb25maWcuaGFzUmV2aWV3Q2FyZHNMaW1pdEVuYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRlY2tzLWxpbWl0LWluZGljYXRvclwiPvCfk4U8L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtY29sLWNvbmZpZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImRlY2tzLWRlY2stY29uZmlnLWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlVG91Y2hDbGljayhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4gaGFuZGxlQ29uZmlnQ2xpY2soZGVjaywgZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOnRvdWNoZW5kPXsoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVUb3VjaENsaWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKSA9PiBoYW5kbGVDb25maWdDbGljayhkZWNrLCBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJDb25maWd1cmUgZGVjayBzZXR0aW5nc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiQ29uZmlndXJlIHtkZWNrLm5hbWV9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjE2XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2Utd2lkdGg9XCIyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2UtbGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cIjEyXCIgY3k9XCIxMlwiIHI9XCIzXCI+PC9jaXJjbGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZD1cIk0xOS40IDE1YTEuNjUgMS42NSAwIDAgMCAuMzMgMS44MmwuMDYuMDZhMiAyIDAgMCAxIDAgMi44MyAyIDIgMCAwIDEtMi44MyAwbC0uMDYtLjA2YTEuNjUgMS42NSAwIDAgMC0xLjgyLS4zMyAxLjY1IDEuNjUgMCAwIDAtMSAxLjUxVjIxYTIgMiAwIDAgMS0yIDIgMiAyIDAgMCAxLTItMnYtLjA5QTEuNjUgMS42NSAwIDAgMCA5IDE5LjRhMS42NSAxLjY1IDAgMCAwLTEuODIuMzNsLS4wNi4wNmEyIDIgMCAwIDEtMi44MyAwIDIgMiAwIDAgMSAwLTIuODNsLjA2LS4wNmExLjY1IDEuNjUgMCAwIDAgLjMzLTEuODIgMS42NSAxLjY1IDAgMCAwLTEuNTEtMUgzYTIgMiAwIDAgMS0yLTIgMiAyIDAgMCAxIDItMmguMDlBMS42NSAxLjY1IDAgMCAwIDQuNiA5YTEuNjUgMS42NSAwIDAgMC0uMzMtMS44MmwtLjA2LS4wNmEyIDIgMCAwIDEgMC0yLjgzIDIgMiAwIDAgMSAyLjgzIDBsLjA2LjA2YTEuNjUgMS42NSAwIDAgMCAxLjgyLjMzSDlhMS42NSAxLjY1IDAgMCAwIDEgMS41MVYzYTIgMiAwIDAgMSAyLTIgMiAyIDAgMCAxIDIgMnYuMDlhMS42NSAxLjY1IDAgMCAwIDEgMS41MSAxLjY1IDEuNjUgMCAwIDAgMS44Mi0uMzNsLjA2LS4wNmEyIDIgMCAwIDEgMi44MyAwIDIgMiAwIDAgMSAwIDIuODNsLS4wNi4wNmExLjY1IDEuNjUgMCAwIDAtLjMzIDEuODJWOWExLjY1IDEuNjUgMCAwIDAgMS41MSAxSDIxYTIgMiAwIDAgMSAyIDIgMiAyIDAgMCAxLTIgMmgtLjA5YTEuNjUgMS42NSAwIDAgMC0xLjUxIDF6XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9wYXRoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHsvZWFjaH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICB7L2lmfVxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImRlY2tzLWhlYXRtYXAtc2VjdGlvblwiPlxuICAgICAgICA8UmV2aWV3SGVhdG1hcCBiaW5kOnRoaXM9e2hlYXRtYXBDb21wb25lbnR9IHtnZXRSZXZpZXdDb3VudHN9IC8+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3R1ZHktc3RhdHMtc2VjdGlvblwiPlxuICAgICAgICB7I2lmIHN0dWR5U3RhdHMudG9kYXlDYXJkcyA+IDB9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3MtdG9kYXktc3VtbWFyeVwiPlxuICAgICAgICAgICAgICAgIFN0dWRpZWQge3N0dWR5U3RhdHMudG9kYXlDYXJkc30gY2FyZHMgaW4ge2Zvcm1hdEhvdXJzKFxuICAgICAgICAgICAgICAgICAgICBzdHVkeVN0YXRzLnRvZGF5SG91cnMsXG4gICAgICAgICAgICAgICAgKX0gdG9kYXkgKHtmb3JtYXRQYWNlKHN0dWR5U3RhdHMudG9kYXlQYWNlU2Vjb25kcyl9KVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIHsvaWZ9XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXRzLWdyaWRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1sYWJlbFwiPlRvdGFsPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRlY2tzLXN0YXQtdmFsdWVcIj5cbiAgICAgICAgICAgICAgICAgICAge2Zvcm1hdEhvdXJzKHN0dWR5U3RhdHMudG90YWxIb3Vycyl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1sYWJlbFwiPlBhc3QgTW9udGg8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC12YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0SG91cnMoc3R1ZHlTdGF0cy5wYXN0TW9udGhIb3Vycyl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVja3Mtc3RhdC1sYWJlbFwiPlBhc3QgV2VlazwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZWNrcy1zdGF0LXZhbHVlXCI+XG4gICAgICAgICAgICAgICAgICAgIHtmb3JtYXRIb3VycyhzdHVkeVN0YXRzLnBhc3RXZWVrSG91cnMpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC9kaXY+XG5cbjxzdHlsZT5cbiAgICAuZGVja3MtZGVjay1saXN0LXBhbmVsIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgbWF4LWhlaWdodDogMTAwdmg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XG4gICAgICAgIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTtcbiAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDEycHggIWltcG9ydGFudDtcbiAgICB9XG5cbiAgICAuZGVja3MtZGVjay1jb250ZW50IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICB9XG5cbiAgICAuZGVja3MtaGVhdG1hcC1zZWN0aW9uIHtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgfVxuXG4gICAgLmRlY2tzLXBhbmVsLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICB9XG5cbiAgICAuZGVja3MtaGVhZGVyLWJ1dHRvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICB9XG5cbiAgICAuZGVja3MtZmlsdGVyLXNlY3Rpb24ge1xuICAgICAgICBtYXJnaW46IDAgMTJweCAxNnB4IDEycHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWZpbHRlci1jb250YWluZXIge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cblxuICAgIC5kZWNrcy1maWx0ZXItaW5wdXQge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICB9XG5cbiAgICAuZGVja3Mtc3VnZ2VzdGlvbnMtZHJvcGRvd24ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMTAwJTtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXRvcDogbm9uZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMCAwIDRweCA0cHg7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgIHotaW5kZXg6IDEwMDA7XG4gICAgICAgIG1heC1oZWlnaHQ6IDIwMHB4O1xuICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgIH1cblxuICAgIC5kZWNrcy1zdWdnZXN0aW9ucy1oZWFkZXIge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICB9XG5cbiAgICAuZGVja3Mtc3VnZ2VzdGlvbi1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xcyBlYXNlO1xuICAgICAgICB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjtcbiAgICAgICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICB9XG5cbiAgICAuZGVja3Mtc3VnZ2VzdGlvbi1pdGVtOmhvdmVyLFxuICAgIC5kZWNrcy1zdWdnZXN0aW9uLWl0ZW06YWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgfVxuXG4gICAgLmRlY2tzLWZpbHRlci1pbnB1dDpmb2N1cyB7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICB9XG5cbiAgICAuZGVja3MtZmlsdGVyLWlucHV0OjpwbGFjZWhvbGRlciB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICB9XG5cbiAgICAuZGVja3MtcGFuZWwtdGl0bGUge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICB9XG5cbiAgICAuZGVja3Mtc3RhdHMtYnV0dG9uIHtcbiAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ub3JtYWwpO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1ub3JtYWwpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjtcbiAgICAgICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICB9XG5cbiAgICAuZGVja3Mtc3RhdHMtYnV0dG9uOmhvdmVyLFxuICAgIC5kZWNrcy1zdGF0cy1idXR0b246YWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtaG92ZXIpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIH1cblxuICAgIC5kZWNrcy1yZWZyZXNoLWJ1dHRvbiB7XG4gICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBwYWRkaW5nOiA0cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uO1xuICAgICAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7XG4gICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIH1cblxuICAgIC5kZWNrcy1yZWZyZXNoLWJ1dHRvbjpob3ZlcixcbiAgICAuZGVja3MtcmVmcmVzaC1idXR0b246YWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgfVxuXG4gICAgLmRlY2tzLXJlZnJlc2gtYnV0dG9uOmRpc2FibGVkIHtcbiAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICAgIH1cblxuICAgIC5kZWNrcy1yZWZyZXNoLWJ1dHRvbi5yZWZyZXNoaW5nIHN2ZyB7XG4gICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgfVxuXG4gICAgQGtleWZyYW1lcyBzcGluIHtcbiAgICAgICAgZnJvbSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgICAgICAgfVxuICAgICAgICB0byB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLmRlY2tzLWVtcHR5LXN0YXRlIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIHBhZGRpbmc6IDMycHg7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG5cbiAgICAuZGVja3MtZW1wdHktc3RhdGUgcCB7XG4gICAgICAgIG1hcmdpbjogOHB4IDA7XG4gICAgfVxuXG4gICAgLmRlY2tzLWhlbHAtdGV4dCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIH1cblxuICAgIC5kZWNrcy1kZWNrLXRhYmxlIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgfVxuXG4gICAgLmRlY2tzLXRhYmxlLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDYwcHggNjBweCA2MHB4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIH1cblxuICAgIC5kZWNrcy10YWJsZS1ib2R5IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgbWF4LWhlaWdodDogY2FsYygxMDB2aCAtIDI0MHB4KTtcbiAgICB9XG5cbiAgICAuZGVja3MtZGVjay1yb3cge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciA2MHB4IDYwcHggNjBweDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDZweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICB9XG5cbiAgICAuZGVja3MtZGVjay1uYW1lLWxpbmsge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICAgICAgICB0ZXh0LWRlY29yYXRpb24tY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICB0cmFuc2l0aW9uOiB0ZXh0LWRlY29yYXRpb24tY29sb3IgMC4ycyBlYXNlO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgd2hpdGUtc3BhY2U6IGJyZWFrLXNwYWNlcztcbiAgICAgICAgbWF4LXdpZHRoOiAyNTBweDtcbiAgICAgICAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XG4gICAgICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTtcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRlY2stbmFtZS1saW5rOmhvdmVyLFxuICAgIC5kZWNrcy1kZWNrLW5hbWUtbGluazphY3RpdmUge1xuICAgICAgICB0ZXh0LWRlY29yYXRpb24tY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICB9XG5cbiAgICAuZGVja3MtZGVjay1uYW1lLWxpbms6Zm9jdXMge1xuICAgICAgICBvdXRsaW5lOiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgb3V0bGluZS1vZmZzZXQ6IDJweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgIH1cblxuICAgIC5kZWNrcy1jb2wtY29uZmlnIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgfVxuXG4gICAgLmRlY2tzLWRlY2stY29uZmlnLWJ1dHRvbiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uO1xuICAgICAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7XG4gICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIH1cblxuICAgIC5kZWNrcy1kZWNrLWNvbmZpZy1idXR0b246aG92ZXIsXG4gICAgLmRlY2tzLWRlY2stY29uZmlnLWJ1dHRvbjphY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICB9XG5cbiAgICAuZGVja3MtZGVjay1jb25maWctYnV0dG9uOmZvY3VzIHtcbiAgICAgICAgb3V0bGluZTogMnB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIG91dGxpbmUtb2Zmc2V0OiAycHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWNvbC1kZWNrIHtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBqdXN0aWZ5LXNlbGY6IHN0YXJ0O1xuICAgICAgICBtaW4td2lkdGg6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cblxuICAgIC5kZWNrcy1jb2wtc3RhdCB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGp1c3RpZnktc2VsZjogY2VudGVyO1xuICAgIH1cblxuICAgIC5kZWNrcy10YWJsZS1oZWFkZXIgLmRlY2tzLWNvbC1kZWNrIHtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBqdXN0aWZ5LXNlbGY6IHN0YXJ0O1xuICAgIH1cblxuICAgIC5kZWNrcy10YWJsZS1oZWFkZXIgLmRlY2tzLWNvbC1zdGF0IHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGp1c3RpZnktc2VsZjogY2VudGVyO1xuICAgIH1cblxuICAgIC5kZWNrcy1jb2wtc3RhdC5oYXMtY2FyZHMge1xuICAgICAgICBjb2xvcjogIzRhYTNkZjtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICB9XG5cbiAgICAuZGVja3MtY29sLXN0YXQudXBkYXRpbmcge1xuICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBlYXNlO1xuICAgIH1cblxuICAgIC5kZWNrcy1jb2wtc3RhdC5oYXMtbGltaXQge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGJvcmRlci1sZWZ0OiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgcGFkZGluZy1sZWZ0OiA2cHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLWxpbWl0LWluZGljYXRvciB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDRweDtcbiAgICAgICAgb3BhY2l0eTogMC43O1xuICAgIH1cblxuICAgIC5kZWNrcy10YWJsZS1ib2R5Ojotd2Via2l0LXNjcm9sbGJhciB7XG4gICAgICAgIHdpZHRoOiA4cHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLXRhYmxlLWJvZHk6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgfVxuXG4gICAgLmRlY2tzLXRhYmxlLWJvZHk6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLXRhYmxlLWJvZHk6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXItaG92ZXIpO1xuICAgIH1cbiAgICAvKiBNb2JpbGUgcmVzcG9uc2l2ZSBzdHlsZXMgKi9cbiAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAgICAgLmRlY2tzLWRlY2stbGlzdC1wYW5lbCB7XG4gICAgICAgICAgICBtaW4td2lkdGg6IHVuc2V0O1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtcGFuZWwtaGVhZGVyIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMTZweDtcbiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLXBhbmVsLXRpdGxlIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1oZWFkZXItYnV0dG9ucyB7XG4gICAgICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1zdGF0cy1idXR0b24sXG4gICAgICAgIC5kZWNrcy1yZWZyZXNoLWJ1dHRvbiB7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiA0NHB4OyAvKiBUb3VjaC1mcmllbmRseSBzaXplICovXG4gICAgICAgICAgICBtaW4td2lkdGg6IDQ0cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZmlsdGVyLWlucHV0IHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OyAvKiBQcmV2ZW50IHpvb20gb24gaU9TICovXG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZmlsdGVyLXNlY3Rpb24ge1xuICAgICAgICAgICAgbWFyZ2luOiAwIDhweCAxNnB4IDhweDtcbiAgICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAxNnB4KTtcbiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGVjay1saXN0LXBhbmVsIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1wYW5lbC1oZWFkZXIge1xuICAgICAgICAgICAgcGFkZGluZzogMTJweCA4cHg7XG4gICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1oZWFkZXItYnV0dG9ucyB7XG4gICAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kZWNrLXRhYmxlIHtcbiAgICAgICAgICAgIG1hcmdpbjogMCA4cHg7XG4gICAgICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gMTZweCk7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtdGFibGUtaGVhZGVyIHtcbiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDU1cHggNTVweCA1NXB4O1xuICAgICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGVjay1yb3cge1xuICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgNTVweCA1NXB4IDU1cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVja3MtZGVjay1uYW1lLWxpbmsge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLWNvbC1zdGF0IHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1kZWNrLWNvbmZpZy1idXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogNDRweDtcbiAgICAgICAgICAgIG1pbi13aWR0aDogNDRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1lbXB0eS1zdGF0ZSB7XG4gICAgICAgICAgICBwYWRkaW5nOiAyNHB4IDE2cHg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKkBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xuICAgICAgICAucGFuZWwtaGVhZGVyIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLnBhbmVsLXRpdGxlIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC50YWJsZS1oZWFkZXIge1xuICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgNDVweCA0NXB4IDQ1cHggNDBweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2stcm93IHtcbiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDQ1cHggNDVweCA0NXB4IDQwcHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVjay1uYW1lLWxpbmsge1xuICAgICAgICAgICAgbWF4LXdpZHRoOiBub25lO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmNvbC1zdGF0IHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrLWNvbmZpZy1idXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogNDBweDtcbiAgICAgICAgICAgIG1pbi13aWR0aDogNDBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5maWx0ZXItaW5wdXQge1xuICAgICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgICBmb250LXNpemU6IDE2cHg7IC8qIFByZXZlbnQgem9vbSBvbiBpT1NcbiAgICAgICAgfVxuXG4gICAgICAgIC5maWx0ZXItc2VjdGlvbiB7XG4gICAgICAgICAgICBtYXJnaW46IDAgNHB4IDEycHggNHB4O1xuICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDhweCk7XG4gICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2stbGlzdC1wYW5lbCB7XG4gICAgICAgICAgICBwYWRkaW5nOiA0cHg7XG4gICAgICAgIH1cblxuICAgICAgICAucGFuZWwtaGVhZGVyIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweCA0cHg7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wYW5lbC10aXRsZSB7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuaGVhZGVyLWJ1dHRvbnMge1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBnYXA6IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVjay10YWJsZSB7XG4gICAgICAgICAgICBtYXJnaW46IDAgNHB4O1xuICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDhweCk7XG4gICAgICAgIH1cblxuICAgICAgICAudGFibGUtaGVhZGVyIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVjay1yb3cge1xuICAgICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVjay1uYW1lLWxpbmsge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMztcbiAgICAgICAgfVxuXG4gICAgICAgIC5jb2wtc3RhdCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuc3VnZ2VzdGlvbnMtZHJvcGRvd24ge1xuICAgICAgICAgICAgbWF4LWhlaWdodDogMTUwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuc3VnZ2VzdGlvbi1pdGVtIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDE2cHg7IC8qIFRvdWNoLWZyaWVuZGx5XG4gICAgICAgIH1cblxuICAgICAgICAuZW1wdHktc3RhdGUge1xuICAgICAgICAgICAgcGFkZGluZzogMjBweCAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmhlbHAtdGV4dCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAbWVkaWEgKG1heC13aWR0aDogMzkwcHgpIHtcbiAgICAgICAgLmRlY2stbGlzdC1wYW5lbCB7XG4gICAgICAgICAgICBtaW4td2lkdGg6IHVuc2V0O1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwJSAtIDM4cHgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLnBhbmVsLWhlYWRlciB7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wYW5lbC10aXRsZSB7XG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuaGVhZGVyLWJ1dHRvbnMge1xuICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuc3RhdHMtYnV0dG9uLFxuICAgICAgICAucmVmcmVzaC1idXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogMzZweDtcbiAgICAgICAgICAgIG1pbi13aWR0aDogMzZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5maWx0ZXItaW5wdXQge1xuICAgICAgICAgICAgcGFkZGluZzogNnB4IDhweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5maWx0ZXItc2VjdGlvbiB7XG4gICAgICAgICAgICBtYXJnaW46IDAgMnB4IDhweCAycHg7XG4gICAgICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gNHB4KTtcbiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVjay1saXN0LXBhbmVsIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wYW5lbC1oZWFkZXIge1xuICAgICAgICAgICAgcGFkZGluZzogNnB4IDJweDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogc3RyZXRjaDtcbiAgICAgICAgICAgIGdhcDogNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLnBhbmVsLXRpdGxlIHtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5oZWFkZXItYnV0dG9ucyB7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2stdGFibGUge1xuICAgICAgICAgICAgbWFyZ2luOiAwIDJweDtcbiAgICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA0cHgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLnRhYmxlLWhlYWRlciB7XG4gICAgICAgICAgICBwYWRkaW5nOiAycHggNHB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiA5cHg7XG4gICAgICAgICAgICBnYXA6IDJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrLXJvdyB7XG4gICAgICAgICAgICBwYWRkaW5nOiA2cHggNHB4O1xuICAgICAgICAgICAgZ2FwOiAycHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVjay1uYW1lLWxpbmsge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgICAgICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gICAgICAgIH1cblxuICAgICAgICAuY29sLXN0YXQge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2stY29uZmlnLWJ1dHRvbiB7XG4gICAgICAgICAgICBwYWRkaW5nOiA0cHg7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiAzMnB4O1xuICAgICAgICAgICAgbWluLXdpZHRoOiAzMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLnN0YXRzLWJ1dHRvbixcbiAgICAgICAgLnJlZnJlc2gtYnV0dG9uIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDMycHg7XG4gICAgICAgICAgICBtaW4td2lkdGg6IDMycHg7XG4gICAgICAgIH1cblxuICAgICAgICAudGFibGUtaGVhZGVyIHtcbiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDM4cHggMzhweCAzOHB4IDM2cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZGVjay1yb3cge1xuICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMzhweCAzOHB4IDM4cHggMzZweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweCA4cHg7XG4gICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrLW5hbWUtbGluayB7XG4gICAgICAgICAgICBtYXgtd2lkdGg6IG5vbmU7XG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgICAgICB3aGl0ZS1zcGFjZTogYnJlYWstc3BhY2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgLmNvbC1zdGF0IHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC50YWJsZS1oZWFkZXIgLmNvbC1zdGF0IHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrLWNvbmZpZy1idXR0b24ge1xuICAgICAgICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogMzZweDtcbiAgICAgICAgICAgIG1pbi13aWR0aDogMzZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5zdWdnZXN0aW9ucy1kcm9wZG93biB7XG4gICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMjBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5zdWdnZXN0aW9uLWl0ZW0ge1xuICAgICAgICAgICAgcGFkZGluZzogMTBweCA4cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZW1wdHktc3RhdGUge1xuICAgICAgICAgICAgcGFkZGluZzogMTZweCA4cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuaGVscC10ZXh0IHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgfVxuICAgIH0qL1xuXG4gICAgLyogRHJvcGRvd24gc3R5bGVzICovXG4gICAgOmdsb2JhbCguZGVja3MtZGVjay1jb25maWctZHJvcGRvd24pIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgICAgICAgcGFkZGluZzogNHB4IDA7XG4gICAgICAgIG1pbi13aWR0aDogMTQwcHg7XG4gICAgfVxuXG4gICAgOmdsb2JhbCguZGVja3MtZHJvcGRvd24tb3B0aW9uKSB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZTtcbiAgICB9XG5cbiAgICA6Z2xvYmFsKC5kZWNrcy1kcm9wZG93bi1vcHRpb246aG92ZXIpIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgfVxuXG4gICAgOmdsb2JhbCguZGVja3MtZHJvcGRvd24tb3B0aW9uOmFjdGl2ZSkge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWFjdGl2ZSk7XG4gICAgfVxuXG4gICAgLyogU3R1ZHkgU3RhdGlzdGljcyBTZWN0aW9uICovXG4gICAgLmRlY2tzLXN0dWR5LXN0YXRzLXNlY3Rpb24ge1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgIH1cblxuICAgIC5kZWNrcy10b2RheS1zdW1tYXJ5IHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAxMnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIH1cblxuICAgIC5kZWNrcy1zdGF0cy1ncmlkIHtcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmcjtcbiAgICAgICAgZ2FwOiAxNnB4O1xuICAgIH1cblxuICAgIC5kZWNrcy1zdGF0LWl0ZW0ge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxuXG4gICAgLmRlY2tzLXN0YXQtbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogMC41cHg7XG4gICAgfVxuXG4gICAgLmRlY2tzLXN0YXQtdmFsdWUge1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgfVxuXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgICAgIC5kZWNrcy1zdHVkeS1zdGF0cy1zZWN0aW9uIHtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmRlY2tzLXRvZGF5LXN1bW1hcnkge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1zdGF0cy1ncmlkIHtcbiAgICAgICAgICAgIGdhcDogMTJweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5kZWNrcy1zdGF0LXZhbHVlIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgIH1cbjwvc3R5bGU+XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBLGtEQUFBQSxTQUFBO0FBYUEsUUFBSSxtQkFBbUI7QUFFdkIsUUFBSUMsYUFBWSxTQUFVLGNBQWM7QUFFcEMsVUFBSSxrQkFBaUI7QUFDbkIsZUFBTztBQUFBLE1BQ1Q7QUFFQSx5QkFBbUIsSUFBSSxRQUFRLFNBQVUsZUFBZSxRQUFRO0FBWTVELFlBQUksU0FBUyxPQUFPLGlCQUFpQixjQUFjLGVBQWUsQ0FBQztBQUluRSxZQUFJLDBCQUEwQixPQUFPLFNBQVM7QUFDOUMsZUFBTyxTQUFTLElBQUksU0FBVSxzQkFBc0I7QUFDaEQsaUJBQU8sSUFBSSxNQUFNLG9CQUFvQixDQUFDO0FBQ3RDLGNBQUkseUJBQXdCO0FBQzFCLG9DQUF3QixvQkFBb0I7QUFBQSxVQUM5QztBQUFBLFFBQ0o7QUFFQSxlQUFPLFNBQVMsSUFBSSxPQUFPLFNBQVMsS0FBSyxDQUFDO0FBQzFDLGVBQU8sU0FBUyxFQUFFLEtBQUssV0FBWTtBQUUvQix3QkFBYyxNQUFNO0FBQUEsUUFDeEIsQ0FBQztBQWtCRCxRQUFBRCxVQUFTO0FBSWpCLFlBQUk7QUFBRSxrQkFBSSxPQUFPLFVBQVUsY0FBYyxTQUFTLENBQUM7QUFBRSxZQUFJLEtBQUcsWUFBVSxPQUFPLFFBQU8sS0FBRyxlQUFhLE9BQU8sbUJBQWtCLEtBQUcsWUFBVSxPQUFPLFdBQVMsWUFBVSxPQUFPLFFBQVEsWUFBVSxZQUFVLE9BQU8sUUFBUSxTQUFTLFFBQU0sY0FBWSxRQUFRO0FBQUs7QUFDOVAsVUFBRSx1QkFBcUIsV0FBVTtBQUFDLG1CQUFTLEVBQUUsR0FBRSxHQUFFO0FBQUMsb0JBQU8sT0FBTyxHQUFFO0FBQUEsY0FBQyxLQUFLO0FBQVUsbUJBQUcsR0FBRSxJQUFF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QUFFLEdBQUcsSUFBRyxRQUFPLEVBQUUsR0FBRyxRQUFPLFFBQU8sRUFBRSxHQUFHLFFBQU8sT0FBTSxFQUFFLEdBQUcsT0FBTSxTQUFRLEVBQUUsR0FBRyxTQUFRLFNBQVEsRUFBRSxHQUFHLFFBQU8sR0FBRSxRQUFPLEVBQUMsSUFBRyxFQUFFLEdBQUcsR0FBRSxFQUFDLEdBQUUsTUFBSyxFQUFDLE1BQUssRUFBQyxJQUFHLEVBQUUsR0FBRyxJQUFHLElBQUcsRUFBRSxHQUFHLEdBQUUsR0FBRSxRQUFPLEVBQUMsSUFBRyxFQUFFLEdBQUcsSUFBRyxNQUFLLEVBQUUsR0FBRyxNQUFLLE9BQU0sRUFBRSxHQUFHLE9BQU0sSUFBRyxFQUFFLEdBQUcsSUFBRyxJQUFHLEVBQUUsR0FBRyxHQUFFLEVBQUMsR0FBRSxNQUFLLEVBQUMsTUFBSyxFQUFDLElBQUcsRUFBRSxHQUFHLElBQUcsSUFBRyxFQUFFLEdBQUcsSUFBRyxVQUFTLEVBQUUsR0FBRyxTQUFRLEdBQUUsUUFBTyxDQUFDLEVBQUMsR0FBRSxJQUFHLEVBQUMsTUFBSyxFQUFDLElBQUcsRUFBRSxHQUFHLElBQUcsSUFBRyxFQUFFLEdBQUcsR0FBRSxHQUFFLFFBQU8sR0FBRSxFQUFDO0FBQUcsY0FBRSxHQUFHLEdBQUUsR0FBRSxHQUFFLENBQUM7QUFBRSxZQUFFLEVBQUUsSUFBSSxLQUFHLEVBQUUsS0FBRyxFQUFFLEdBQUcsSUFBSSxNQUFLLEVBQUUsS0FBRyxFQUFFLEdBQUcsSUFBSSxRQUFPLEVBQUUsS0FBRyxDQUFDLEtBQUcsV0FDN2UsRUFBRSxPQUFLLFVBQVEsRUFBRSxLQUFHLEVBQUUsR0FBRyxLQUFLLE1BQUssRUFBRSxLQUFHLEVBQUUsR0FBRyxLQUFLLFFBQU8sRUFBRSxLQUFHLEdBQUUsRUFBRSxLQUFHLFFBQU0sV0FBUyxFQUFFLE9BQUssVUFBUSxFQUFFLEtBQUcsRUFBRSxHQUFHLEtBQUssTUFBSyxFQUFFLEtBQUcsRUFBRSxHQUFHLEtBQUssVUFBUSxVQUFRLEVBQUUsT0FBSyxXQUFTLEVBQUUsS0FBRyxFQUFFLEdBQUcsR0FBRyxNQUFLLEVBQUUsS0FBRyxFQUFFLEdBQUcsR0FBRztBQUFRLFlBQUUsUUFBTSxFQUFFLFFBQU0sRUFBRSxRQUFNLEtBQUssSUFBSTtBQUFFLGdCQUFJLEVBQUUsR0FBRyxDQUFDLElBQUUsR0FBRSxFQUFFLFFBQU0sRUFBRSxRQUFNLEVBQUUsUUFBTSxFQUFFO0FBQU8saUJBQU87QUFBQSxRQUFDLEdBQUUsR0FBRyxHQUFFO0FBQUMsaUJBQU8sRUFBRSxLQUFHLEVBQUUsR0FBRyxXQUFTLEVBQUUsR0FBRyxTQUFTLEdBQUUsRUFBRSxFQUFFLElBQUUsSUFBSSxXQUFXLEVBQUUsRUFBRSxJQUFFLElBQUksV0FBVyxDQUFDO0FBQUEsUUFBQyxHQUFFLElBQUcsRUFBQyxHQUFHLEdBQUU7QUFBQyxjQUFJLElBQUUsQ0FBQztBQUFFLFlBQUUsTUFBSSxVQUFRLEVBQUUsT0FBSyxTQUFPLEVBQUUsS0FBRztBQUFFLFlBQUUsTUFBSSxFQUFFO0FBQUcsWUFBRSxPQUFLLEVBQUU7QUFBSyxZQUFFLFFBQU07QUFBRSxZQUFFLE1BQUk7QUFBRSxZQUFFLE1BQUk7QUFBRSxZQUFFLE9BQ25mLEVBQUU7QUFBSyxZQUFFLEVBQUUsSUFBSSxJQUFFLEVBQUUsT0FBSyxPQUFLLFdBQVMsRUFBRSxPQUFLLFNBQU8sRUFBRSxPQUFLLEVBQUUsS0FBRyxXQUFTLEVBQUUsT0FBSyxTQUFPLEVBQUUsT0FBSyxFQUFFLEtBQUssU0FBTyxFQUFFLE9BQUs7QUFBRSxZQUFFLFFBQU0sSUFBSSxLQUFLLEVBQUUsS0FBSztBQUFFLFlBQUUsUUFBTSxJQUFJLEtBQUssRUFBRSxLQUFLO0FBQUUsWUFBRSxRQUFNLElBQUksS0FBSyxFQUFFLEtBQUs7QUFBRSxZQUFFLFVBQVE7QUFBSyxZQUFFLFNBQU8sS0FBSyxLQUFLLEVBQUUsT0FBSyxFQUFFLE9BQU87QUFBRSxpQkFBTztBQUFBLFFBQUMsR0FBRSxHQUFHLEdBQUUsR0FBRTtBQUFDLG1CQUFRLEtBQUksQ0FBQyxRQUFPLFNBQVEsU0FBUSxPQUFPO0FBQUUsb0JBQU0sRUFBRSxDQUFDLE1BQUksRUFBRSxDQUFDLElBQUUsRUFBRSxDQUFDO0FBQUcscUJBQVMsRUFBRSxTQUFPLElBQUUsRUFBRSxNQUFLLEVBQUUsTUFBSSxNQUFJLEtBQUcsS0FBRyxFQUFFLEtBQUcsTUFBSyxFQUFFLEtBQUcsTUFBSSxJQUFFLEVBQUUsSUFBRyxFQUFFLEtBQUcsSUFBSSxXQUFXLENBQUMsR0FBRSxLQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsU0FBUyxHQUFFLEtBQUssSUFBSSxHQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRSxFQUFFLEtBQUc7QUFBQSxRQUFJLEdBQUUsU0FBUTtBQUFDLGdCQUFNLEVBQUU7QUFBQSxRQUNsZixHQUFFLEdBQUcsR0FBRSxHQUFFLEdBQUUsR0FBRTtBQUFDLGlCQUFPLEVBQUUsV0FBVyxHQUFFLEdBQUUsR0FBRSxDQUFDO0FBQUEsUUFBQyxHQUFFLE9BQU8sR0FBRSxHQUFFLEdBQUU7QUFBQyxjQUFHO0FBQUMsZ0JBQUksSUFBRSxFQUFFLEdBQUUsQ0FBQztBQUFBLFVBQUMsU0FBTyxHQUFFO0FBQUEsVUFBQztBQUFDLGNBQUcsR0FBRTtBQUFDLGdCQUFHLEVBQUUsRUFBRSxJQUFJO0FBQUUsdUJBQVEsS0FBSyxFQUFFO0FBQUcsc0JBQU0sSUFBSSxFQUFFLEVBQUU7QUFBRSxlQUFHLENBQUM7QUFBQSxVQUFDO0FBQUMsaUJBQU8sRUFBRSxPQUFPLEdBQUcsRUFBRSxJQUFJO0FBQUUsWUFBRSxHQUFHLENBQUMsSUFBRTtBQUFFLFlBQUUsT0FBSztBQUFFLFlBQUUsUUFBTSxFQUFFLFFBQU0sRUFBRSxPQUFPLFFBQU0sRUFBRSxPQUFPLFFBQU0sS0FBSyxJQUFJO0FBQUEsUUFBQyxHQUFFLE9BQU8sR0FBRSxHQUFFO0FBQUMsaUJBQU8sRUFBRSxHQUFHLENBQUM7QUFBRSxZQUFFLFFBQU0sRUFBRSxRQUFNLEtBQUssSUFBSTtBQUFBLFFBQUMsR0FBRSxNQUFNLEdBQUUsR0FBRTtBQUFDLGNBQUksSUFBRSxFQUFFLEdBQUUsQ0FBQyxHQUFFO0FBQUUsZUFB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SSxFQUFFLEVBQUU7QUFBRSxjQUFJLElBQUUsRUFBRSxHQUFFLEVBQUMsUUFBTyxLQUFFLENBQUMsRUFBRTtBQUFLLGNBQUcsQ0FBQztBQUFFLGtCQUFNLElBQUksRUFBRSxFQUFFO0FBQUUsY0FBRSxHQUFHLENBQUM7QUFBRSxjQUFJLElBQUUsR0FBRyxHQUFFLENBQUM7QUFBRSxjQUFHO0FBQUUsa0JBQU0sSUFBSSxFQUFFLENBQUM7QUFBRSxjQUFHLENBQUMsRUFBRSxHQUFHO0FBQVEsa0JBQU0sSUFBSSxFQUFFLEVBQUU7QUFBRSxZQUFFLEdBQUcsUUFBUSxHQUFFLEdBQUUsQ0FBQztBQUFBLFFBQUM7QUFDalcsaUJBQVMsR0FBRyxHQUFFO0FBQUMsY0FBSSxJQUFFLEVBQUUsR0FBRSxFQUFDLFFBQU8sS0FBRSxDQUFDLEVBQUU7QUFBSyxjQUFFLEdBQUcsQ0FBQztBQUFFLGNBQUksSUFBRSxFQUFFLEdBQUUsQ0FBQyxHQUFFLElBQUUsR0FBRyxHQUFFLEdBQUUsSUFBRTtBQUFFLGNBQUc7QUFBRSxrQkFBTSxJQUFJLEVBQUUsQ0FBQztBQUFFLGNBQUcsQ0FBQyxFQUFFLEdBQUc7QUFBTSxrQkFBTSxJQUFJLEVBQUUsRUFBRTtBQUFFLGNBQUcsRUFBRTtBQUFHLGtCQUFNLElBQUksRUFBRSxFQUFFO0FBQUUsWUFBRSxHQUFHLE1BQU0sR0FBRSxDQUFDO0FBQUUsYUFBRyxDQUFDO0FBQUEsUUFBQztBQUFDLGlCQUFTLEdBQUcsR0FBRTtBQUFDLGNBQUksSUFBRSxFQUFFLEdBQUUsRUFBQyxRQUFPLEtBQUUsQ0FBQyxFQUFFO0FBQUssY0FBRyxDQUFDO0FBQUUsa0JBQU0sSUFBSSxFQUFFLEVBQUU7QUFBRSxjQUFFLEdBQUcsQ0FBQztBQUFFLGNBQUksSUFBRSxFQUFFLEdBQUUsQ0FBQyxHQUFFLElBQUUsR0FBRyxHQUFFLEdBQUUsS0FBRTtBQUFFLGNBQUc7QUFBRSxrQkFBTSxJQUFJLEVBQUUsQ0FBQztBQUFFLGNBQUcsQ0FBQyxFQUFFLEdBQUc7QUFBTyxrQkFBTSxJQUFJLEVBQUUsRUFBRTtB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QztBQUFFLHVCQUFRLElBQUUsR0FBRSxJQUFFLEVBQUUsUUFBTyxFQUFFO0FBQUUsa0JBQUUsV0FBVyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUFFLGtCQUFFLElBQUksRUFBRSxHQUFFLENBQUM7QUFBQSxZQUFDLE9BQUs7QUFBQyxrQkFBRSxDQUFDLENBQUM7QUFBRSxrQkFBRSxFQUFFLE1BQU0sR0FBRSxDQUFDO0FBQUUsa0JBQUUsRUFBRSxNQUFNLENBQUM7QUFBRSxrQkFBRSxFQUFDLEdBQUUsS0FBSSxHQUFFLEtBQUksR0FBRSxLQUFJLEdBQUUsS0FBSSxHQUFFLEtBQUksR0FBRSxJQUFHO0FBQUUsZ0JBQUUsS0FBSyxFQUFFO0FBQUUsa0JBQUksSUFBRSxFQUFFO0FBQU8sb0JBQUksSUFBRSxFQUFFLEtBQUssQ0FBQyxJQUFFLEVBQUUsS0FBSyxJQUMxZixNQUFJLEtBQUksS0FBRyxDQUFDO0FBQUUsbUJBQUksS0FBSztBQUFFLGtCQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7QUFBRSxxQkFBSyxJQUFFLEVBQUUsS0FBSyxDQUFDLElBQUUsRUFBRSxLQUFLLEdBQUUsRUFBRSxDQUFDLENBQUM7QUFBRSxrQkFBRSxDQUFDLEdBQUUsSUFBRyxLQUFJLEtBQUksR0FBRSxHQUFFLEdBQUUsR0FBRSxDQUFDO0FBQUUsa0JBQUUsRUFBRTtBQUFPLG9CQUFJLElBQUUsRUFBRSxLQUFLLENBQUMsSUFBRSxFQUFFLEtBQUssSUFBRSxNQUFJLEtBQUksS0FBRyxDQUFDO0FBQUUsZ0JBQUUsS0FBSyxHQUFHLENBQUM7QUFBRSxnQkFBRSxLQUFLLEdBQUUsR0FBRSxHQUFFLEdBQUUsS0FBSSxHQUFFLEtBQUksR0FBRSxHQUFFLEdBQUUsR0FBRSxHQUFFLEdBQUUsS0FBSSxHQUFFLENBQUM7QUFBRSxrQkFBRSxJQUFJLFlBQVksT0FBTyxJQUFJLFdBQVcsQ0FBQyxDQUFDO0FBQUUsa0JBQUcsSUFBSSxZQUFZLFNBQVMsR0FBRSxFQUFDLEdBQUUsRUFBQyxHQUFFLEVBQUMsRUFBQyxDQUFDLEVB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dkQsVUFBSSxTQUFTO0FBQ1gsY0FBTSxZQUFZLFFBQVE7QUFDMUIsY0FBTSxZQUFZLEtBQUssWUFBWSxlQUFlQSxNQUFLLElBQUk7QUFFM0QsYUFBSyxPQUFPLE1BQU0scUJBQXFCLE9BQU8sT0FBT0EsTUFBSyxJQUFJLEVBQUU7QUFDaEUsYUFBSyxPQUFPLE1BQU0seUJBQXlCLFNBQVMsT0FBTyxTQUFTLEVBQUU7QUFHdEUsY0FBTSxLQUFLLEdBQUc7QUFBQSxVQUNaO0FBQUEsVUFDQTtBQUFBLFVBQ0FBLE1BQUs7QUFBQSxVQUNMQSxNQUFLO0FBQUEsUUFDUDtBQUdBLGNBQU0sS0FBSyxpQkFBaUI7QUFBQSxVQUMxQjtBQUFBLFVBQ0E7QUFBQSxRQUNGO0FBRUEsY0FBTSxVQUFVO0FBRWhCLGNBQU0sS0FBSyxHQUFHLEtBQUs7QUFFbkIsWUFBSSxLQUFLLE1BQU07QUFDYixnQkFBTSxLQUFLLEtBQUssYUFBYTtBQUFBLFFBQy9CO0FBQUEsTUFDRjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0Y7IiwKICAibmFtZXMiOiBbIm1vZHVsZSIsICJpbml0U3FsSnMiLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImluaXRTcWxKcyIsICJmaWxlIiwgImZpbGUiLCAiZmlsZSIsICJpbml0IiwgImltcG9ydF9zcWwiLCAiaW5pdFNxbEpzIiwgImZpbGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImVtcHR5IiwgImltcG9ydF9vYnNpZGlhbiIsICJ0ZXh0IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZWxlbWVudCIsICJmaWxlIiwgImVsZW1lbnQiLCAiX2EiLCAiZWxlbWVudCIsICJlbGVtZW50IiwgImRldGFjaCIsICJpbnN0YW5jZSIsICJjcmVhdGVfZnJhZ21lbnQiLCAiYXR0ciIsICJ0ZXh0IiwgImN0eCIsICJfYiIsICJfYSIsICJtb2RhbEVsIiwgImltcG9ydF9vYnNpZGlhbiIsICJjdHgiLCAiY3JlYXRlX2lmX2Jsb2NrXzEiLCAiY3JlYXRlX2lmX2Jsb2NrIiwgImZvcm1hdFRpbWUiLCAiY3R4IiwgIl9hIiwgImZ1bmMiLCAiX2IiLCAiX2QiLCAiX2MiLCAiX2YiLCAiX2UiLCAiX2ciLCAiX2giLCAiX2kiLCAiX2siLCAiX2oiLCAiX20iLCAiX2wiLCAiX28iLCAiX24iLCAiX3EiLCAiX3AiLCAiX3MiLCAiX3IiLCAiY3R4IiwgImltcG9ydF9vYnNpZGlhbiIsICJjdHgiLCAibW9kYWxFbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY3R4IiwgIm1vZGFsRWwiLCAidGV4dCIsICJjdHgiLCAiY3JlYXRlX2lmX2Jsb2NrXzQiLCAiY3JlYXRlX2lmX2Jsb2NrXzMiLCAiZm9ybWF0UGFjZSIsICJjcmVhdGVfaWZfYmxvY2tfNSIsICJjcmVhdGVfaWZfYmxvY2tfMSIsICJjcmVhdGVfaWZfYmxvY2tfMiIsICJjcmVhdGVfaWZfYmxvY2siLCAiZmlsZSIsICJfYSJdCn0K
